<html lang="en"><head><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title title="title">Periodic Table of Elements | HTML5</title><meta content='width=device-width, initial-scale=1.0' name='viewport'/><meta property="og:title" content="Hữu Lương | Information"/><meta property="og:type" content="website"/><meta property="og:url" content="https://huu.vn"/><meta property="og:image" content="https://huu.vn/logo.png"/><meta property="og:site_name" content="Huu Luong, Design, Audit, Construction, Consultants, Decor, Engineer, Project"/><meta property="og:description" content="Design Audit Construction Consultants | Chuyên cung cấp dịch vụ Tư vấn Thiết kế, Kiểm toán và Xây dựng" design="design" audit="audit" construction="construction" consultants="consultants" websites="websites" apps="apps"/><meta name="description" content="Design Audit Construction Consultants | Chuyên cung cấp dịch vụ Tư vấn Thiết kế, Kiểm toán và Xây dựng"/><meta name="keywords" content="Engineer, Design, Audit, Construction, Consultants, Architecture, Project, Tư vấn, Thiết kế, Kiểm toán, Xây dựng, Công trình"/><meta name="author" content="copyrightml"/><meta name="copyright" content="Copyright © 2011 Huu™ Luong All Rights Reserved."/><meta http-equiv="content-language" content="en, vi"/><meta name="revisit-after" content="7 days"/><meta name="fragment" content="!"/><meta itemprop="name" content="Huu™ Luong"/><meta itemprop="description" content="Design, Audit, Construction, Consultants"/><meta itemprop="image" content="https://huu.vn/logo.png"/><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@copyrightml"><meta name="twitter:title" content="WE is a team based in HCMC."><meta name="twitter:description" content="Discovery and impact is what drives all of our endeavors."><link rel="shortcut icon" href="https://huu.vn/favicon.ico" type="image/x-icon"/><link rel="apple-touch-icon" href="https://huu.vn/apple-touch-icon.png"/><link rel="apple-touch-icon" sizes="57x57" href="https://huu.vn/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://huu.vn/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="https://huu.vn/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://huu.vn/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://huu.vn/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://huu.vn/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://huu.vn/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="https://huu.vn/apple-touch-icon-180x180.png"/><link rel="image_src" href="https://huu.vn/logo.svg"/><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"><style>article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block}audio:not([controls]){display:none;height:0}[hidden],template{display:none}html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}a{background:transparent}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{margin:.67em 0;font-size:2em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}hr{height:0;-moz-box-sizing:content-box;box-sizing:content-box}mark{color:#000;background:#ff0}code,kbd,pre,samp{font-family:monospace,serif;font-size:1em}pre{white-space:pre-wrap}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:0}fieldset{padding:.35em .625em .75em;margin:0 2px;border:1px solid silver}legend{padding:0;border:0}button,input,select,textarea{margin:0;font-family:inherit;font-size:100%}button,input{line-height:normal}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}input[type="checkbox"],input[type="radio"]{padding:0;box-sizing:border-box}input[type="search"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}@media print{*{color:#000 !important;text-shadow:none !important;background:transparent !important;box-shadow:none !important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:2cm .5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}select{background:#fff !important}.navbar{display:none}.table td,.table th{background-color:#fff !important}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000 !important}.label{border:1px solid #000}.table{border-collapse:collapse !important}.table-bordered th,.table-bordered td{border:1px solid #ddd !important}}*,*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.428571429;color:#333;background-color:#fff}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#428bca;text-decoration:none}a:hover,a:focus{color:#2a6496;text-decoration:underline}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}img{vertical-align:middle}.img-responsive{display:block;height:auto;max-width:100%}.img-rounded{border-radius:6px}.img-thumbnail{display:inline-block;height:auto;max-width:100%;padding:4px;line-height:1.428571429;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:200;line-height:1.4}@media(min-width:768px){.lead{font-size:21px}}small,.small{font-size:85%}cite{font-style:normal}.text-muted{color:#999}.text-primary{color:#428bca}.text-primary:hover{color:#3071a9}.text-warning{color:#c09853}.text-warning:hover{color:#a47e3c}.text-danger{color:#b94a48}.text-danger:hover{color:#953b39}.text-success{color:#468847}.text-success:hover{color:#356635}.text-info{color:#3a87ad}.text-info:hover{color:#2d6987}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:500;line-height:1.1;color:inherit}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small,.h1 small,.h2 small,.h3 small,.h4 small,.h5 small,.h6 small,h1 .small,h2 .small,h3 .small,h4 .small,h5 .small,h6 .small,.h1 .small,.h2 .small,.h3 .small,.h4 .small,.h5 .small,.h6 .small{font-weight:normal;line-height:1;color:#999}h1,h2,h3{margin-top:20px;margin-bottom:10px}h1 small,h2 small,h3 small,h1 .small,h2 .small,h3 .small{font-size:65%}h4,h5,h6{margin-top:10px;margin-bottom:10px}h4 small,h5 small,h6 small,h4 .small,h5 .small,h6 .small{font-size:75%}h1,.h1{font-size:36px}h2,.h2{font-size:30px}h3,.h3{font-size:24px}h4,.h4{font-size:18px}h5,.h5{font-size:14px}h6,.h6{font-size:12px}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ul,ol{margin-top:0;margin-bottom:10px}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline>li{display:inline-block;padding-right:5px;padding-left:5px}.list-inline>li:first-child{padding-left:0}dl{margin-bottom:20px}dt,dd{line-height:1.428571429}dt{font-weight:bold}dd{margin-left:0}@media(min-width:768px){.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}.dl-horizontal dd:before,.dl-horizontal dd:after{display:table;content:" "}.dl-horizontal dd:after{clear:both}.dl-horizontal dd:before,.dl-horizontal dd:after{display:table;content:" "}.dl-horizontal dd:after{clear:both}}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #999}abbr.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #eee}blockquote p{font-size:17.5px;font-weight:300;line-height:1.25}blockquote p:last-child{margin-bottom:0}blockquote small{display:block;line-height:1.428571429;color:#999}blockquote small:before{content:'\2014 \00A0'}blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0}blockquote.pull-right p,blockquote.pull-right small,blockquote.pull-right .small{text-align:right}blockquote.pull-right small:before,blockquote.pull-right .small:before{content:''}blockquote.pull-right small:after,blockquote.pull-right .small:after{content:'\00A0 \2014'}blockquote:before,blockquote:after{content:""}address{margin-bottom:20px;font-style:normal;line-height:1.428571429}code,kbd,pre,samp{font-family:Monaco,Menlo,Consolas,"Courier New",monospace}code{padding:2px 4px;font-size:90%;color:#c7254e;white-space:nowrap;background-color:#f9f2f4;border-radius:4px}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.428571429;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container:before,.container:after{display:table;content:" "}.container:after{clear:both}.container:before,.container:after{display:table;content:" "}.container:after{clear:both}.row{margin-right:-15px;margin-left:-15px}.row:before,.row:after{display:table;content:" "}.row:after{clear:both}.row:before,.row:after{display:table;content:" "}.row:after{clear:both}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666666666666%}.col-xs-10{width:83.33333333333334%}.col-xs-9{width:75%}.col-xs-8{width:66.66666666666666%}.col-xs-7{width:58.333333333333336%}.col-xs-6{width:50%}.col-xs-5{width:41.66666666666667%}.col-xs-4{width:33.33333333333333%}.col-xs-3{width:25%}.col-xs-2{width:16.666666666666664%}.col-xs-1{width:8.333333333333332%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666666666666%}.col-xs-pull-10{right:83.33333333333334%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666666666666%}.col-xs-pull-7{right:58.333333333333336%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666666666667%}.col-xs-pull-4{right:33.33333333333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.666666666666664%}.col-xs-pull-1{right:8.333333333333332%}.col-xs-pull-0{right:0}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666666666666%}.col-xs-push-10{left:83.33333333333334%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666666666666%}.col-xs-push-7{left:58.333333333333336%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666666666667%}.col-xs-push-4{left:33.33333333333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.666666666666664%}.col-xs-push-1{left:8.333333333333332%}.col-xs-push-0{left:0}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666666666666%}.col-xs-offset-10{margin-left:83.33333333333334%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666666666666%}.col-xs-offset-7{margin-left:58.333333333333336%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666666666667%}.col-xs-offset-4{margin-left:33.33333333333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.666666666666664%}.col-xs-offset-1{margin-left:8.333333333333332%}.col-xs-offset-0{margin-left:0}@media(min-width:768px){.container{width:750px}.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666666666666%}.col-sm-10{width:83.33333333333334%}.col-sm-9{width:75%}.col-sm-8{width:66.66666666666666%}.col-sm-7{width:58.333333333333336%}.col-sm-6{width:50%}.col-sm-5{width:41.66666666666667%}.col-sm-4{width:33.33333333333333%}.col-sm-3{width:25%}.col-sm-2{width:16.666666666666664%}.col-sm-1{width:8.333333333333332%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666666666666%}.col-sm-pull-10{right:83.33333333333334%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666666666666%}.col-sm-pull-7{right:58.333333333333336%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666666666667%}.col-sm-pull-4{right:33.33333333333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.666666666666664%}.col-sm-pull-1{right:8.333333333333332%}.col-sm-pull-0{right:0}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666666666666%}.col-sm-push-10{left:83.33333333333334%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666666666666%}.col-sm-push-7{left:58.333333333333336%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666666666667%}.col-sm-push-4{left:33.33333333333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.666666666666664%}.col-sm-push-1{left:8.333333333333332%}.col-sm-push-0{left:0}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666666666666%}.col-sm-offset-10{margin-left:83.33333333333334%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666666666666%}.col-sm-offset-7{margin-left:58.333333333333336%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666666666667%}.col-sm-offset-4{margin-left:33.33333333333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.666666666666664%}.col-sm-offset-1{margin-left:8.333333333333332%}.col-sm-offset-0{margin-left:0}}@media(min-width:992px){.container{width:970px}.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666666666666%}.col-md-10{width:83.33333333333334%}.col-md-9{width:75%}.col-md-8{width:66.66666666666666%}.col-md-7{width:58.333333333333336%}.col-md-6{width:50%}.col-md-5{width:41.66666666666667%}.col-md-4{width:33.33333333333333%}.col-md-3{width:25%}.col-md-2{width:16.666666666666664%}.col-md-1{width:8.333333333333332%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666666666666%}.col-md-pull-10{right:83.33333333333334%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666666666666%}.col-md-pull-7{right:58.333333333333336%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666666666667%}.col-md-pull-4{right:33.33333333333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.666666666666664%}.col-md-pull-1{right:8.333333333333332%}.col-md-pull-0{right:0}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666666666666%}.col-md-push-10{left:83.33333333333334%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666666666666%}.col-md-push-7{left:58.333333333333336%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666666666667%}.col-md-push-4{left:33.33333333333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.666666666666664%}.col-md-push-1{left:8.333333333333332%}.col-md-push-0{left:0}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666666666666%}.col-md-offset-10{margin-left:83.33333333333334%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666666666666%}.col-md-offset-7{margin-left:58.333333333333336%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666666666667%}.col-md-offset-4{margin-left:33.33333333333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.666666666666664%}.col-md-offset-1{margin-left:8.333333333333332%}.col-md-offset-0{margin-left:0}}@media(min-width:1200px){.container{width:1170px}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666666666666%}.col-lg-10{width:83.33333333333334%}.col-lg-9{width:75%}.col-lg-8{width:66.66666666666666%}.col-lg-7{width:58.333333333333336%}.col-lg-6{width:50%}.col-lg-5{width:41.66666666666667%}.col-lg-4{width:33.33333333333333%}.col-lg-3{width:25%}.col-lg-2{width:16.666666666666664%}.col-lg-1{width:8.333333333333332%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666666666666%}.col-lg-pull-10{right:83.33333333333334%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666666666666%}.col-lg-pull-7{right:58.333333333333336%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666666666667%}.col-lg-pull-4{right:33.33333333333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.666666666666664%}.col-lg-pull-1{right:8.333333333333332%}.col-lg-pull-0{right:0}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666666666666%}.col-lg-push-10{left:83.33333333333334%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666666666666%}.col-lg-push-7{left:58.333333333333336%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666666666667%}.col-lg-push-4{left:33.33333333333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.666666666666664%}.col-lg-push-1{left:8.333333333333332%}.col-lg-push-0{left:0}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666666666666%}.col-lg-offset-10{margin-left:83.33333333333334%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666666666666%}.col-lg-offset-7{margin-left:58.333333333333336%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666666666667%}.col-lg-offset-4{margin-left:33.33333333333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.666666666666664%}.col-lg-offset-1{margin-left:8.333333333333332%}.col-lg-offset-0{margin-left:0}}table{max-width:100%;background-color:transparent}th{text-align:left}.table{width:100%;margin-bottom:20px}.table>thead>tr>th,.table>tbody>tr>th,.table>tfoot>tr>th,.table>thead>tr>td,.table>tbody>tr>td,.table>tfoot>tr>td{padding:8px;line-height:1.428571429;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>th,.table>caption+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>td,.table>thead:first-child>tr:first-child>td{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>thead>tr>th,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>tbody>tr>td,.table-condensed>tfoot>tr>td{padding:5px}.table-bordered{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>tbody>tr>td,.table-bordered>tfoot>tr>td{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>thead>tr>td{border-bottom-width:2px}.table-striped>tbody>tr:nth-child(odd)>td,.table-striped>tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover>tbody>tr:hover>td,.table-hover>tbody>tr:hover>th{background-color:#f5f5f5}table col[class*="col-"]{display:table-column;float:none}table td[class*="col-"],table th[class*="col-"]{display:table-cell;float:none}.table>thead>tr>td.active,.table>tbody>tr>td.active,.table>tfoot>tr>td.active,.table>thead>tr>th.active,.table>tbody>tr>th.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>tbody>tr.active>td,.table>tfoot>tr.active>td,.table>thead>tr.active>th,.table>tbody>tr.active>th,.table>tfoot>tr.active>th{background-color:#f5f5f5}.table>thead>tr>td.success,.table>tbody>tr>td.success,.table>tfoot>tr>td.success,.table>thead>tr>th.success,.table>tbody>tr>th.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>tbody>tr.success>td,.table>tfoot>tr.success>td,.table>thead>tr.success>th,.table>tbody>tr.success>th,.table>tfoot>tr.success>th{background-color:#dff0d8}.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover,.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th{background-color:#d0e9c6}.table>thead>tr>td.danger,.table>tbody>tr>td.danger,.table>tfoot>tr>td.danger,.table>thead>tr>th.danger,.table>tbody>tr>th.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>tbody>tr.danger>td,.table>tfoot>tr.danger>td,.table>thead>tr.danger>th,.table>tbody>tr.danger>th,.table>tfoot>tr.danger>th{background-color:#f2dede}.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover,.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th{background-color:#ebcccc}.table>thead>tr>td.warning,.table>tbody>tr>td.warning,.table>tfoot>tr>td.warning,.table>thead>tr>th.warning,.table>tbody>tr>th.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>tbody>tr.warning>td,.table>tfoot>tr.warning>td,.table>thead>tr.warning>th,.table>tbody>tr.warning>th,.table>tfoot>tr.warning>th{background-color:#fcf8e3}.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover,.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th{background-color:#faf2cc}@media(max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-x:scroll;overflow-y:hidden;border:1px solid #ddd;-ms-overflow-style:-ms-autohiding-scrollbar;-webkit-overflow-scrolling:touch}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>thead>tr>th,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tfoot>tr>td{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>thead>tr>th:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.table-responsive>.table-bordered>thead>tr>th:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>th,.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}}fieldset{padding:0;margin:0;border:0}legend{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border:0;border-bottom:1px solid #e5e5e5}label{display:inline-block;margin-bottom:5px;font-weight:bold}input[type="search"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}input[type="radio"],input[type="checkbox"]{margin:4px 0 0;margin-top:1px \9;line-height:normal}input[type="file"]{display:block}select[multiple],select[size]{height:auto}select optgroup{font-family:inherit;font-size:inherit;font-style:inherit}input[type="file"]:focus,input[type="radio"]:focus,input[type="checkbox"]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{height:auto}output{display:block;padding-top:7px;font-size:14px;line-height:1.428571429;color:#555;vertical-align:middle}.form-control{display:block;width:100%;height:34px;padding:6px 12px;font-size:14px;line-height:1.428571429;color:#555;vertical-align:middle;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-webkit-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6)}.form-control:-moz-placeholder{color:#999}.form-control::-moz-placeholder{color:#999}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{cursor:not-allowed;background-color:#eee}textarea.form-control{height:auto}.form-group{margin-bottom:15px}.radio,.checkbox{display:block;min-height:20px;padding-left:20px;margin-top:10px;margin-bottom:10px;vertical-align:middle}.radio label,.checkbox label{display:inline;margin-bottom:0;font-weight:normal;cursor:pointer}.radio input[type="radio"],.radio-inline input[type="radio"],.checkbox input[type="checkbox"],.checkbox-inline input[type="checkbox"]{float:left;margin-left:-20px}.radio+.radio,.checkbox+.checkbox{margin-top:-5px}.radio-inline,.checkbox-inline{display:inline-block;padding-left:20px;margin-bottom:0;font-weight:normal;vertical-align:middle;cursor:pointer}.radio-inline+.radio-inline,.checkbox-inline+.checkbox-inline{margin-top:0;margin-left:10px}input[type="radio"][disabled],input[type="checkbox"][disabled],.radio[disabled],.radio-inline[disabled],.checkbox[disabled],.checkbox-inline[disabled],fieldset[disabled] input[type="radio"],fieldset[disabled] input[type="checkbox"],fieldset[disabled] .radio,fieldset[disabled] .radio-inline,fieldset[disabled] .checkbox,fieldset[disabled] .checkbox-inline{cursor:not-allowed}.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-sm{height:30px;line-height:30px}textarea.input-sm{height:auto}.input-lg{height:45px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}select.input-lg{height:45px;line-height:45px}textarea.input-lg{height:auto}.has-warning .help-block,.has-warning .control-label,.has-warning .radio,.has-warning .checkbox,.has-warning .radio-inline,.has-warning .checkbox-inline{color:#c09853}.has-warning .form-control{border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-warning .form-control:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #dbc59e}.has-warning .input-group-addon{color:#c09853;background-color:#fcf8e3;border-color:#c09853}.has-error .help-block,.has-error .control-label,.has-error .radio,.has-error .checkbox,.has-error .radio-inline,.has-error .checkbox-inline{color:#b94a48}.has-error .form-control{border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-error .form-control:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #d59392}.has-error .input-group-addon{color:#b94a48;background-color:#f2dede;border-color:#b94a48}.has-success .help-block,.has-success .control-label,.has-success .radio,.has-success .checkbox,.has-success .radio-inline,.has-success .checkbox-inline{color:#468847}.has-success .form-control{border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-success .form-control:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #7aba7b}.has-success .input-group-addon{color:#468847;background-color:#dff0d8;border-color:#468847}.form-control-static{margin-bottom:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media(min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block}.form-inline .radio,.form-inline .checkbox{display:inline-block;padding-left:0;margin-top:0;margin-bottom:0}.form-inline .radio input[type="radio"],.form-inline .checkbox input[type="checkbox"]{float:none;margin-left:0}}.form-horizontal .control-label,.form-horizontal .radio,.form-horizontal .checkbox,.form-horizontal .radio-inline,.form-horizontal .checkbox-inline{padding-top:7px;margin-top:0;margin-bottom:0}.form-horizontal .form-group{margin-right:-15px;margin-left:-15px}.form-horizontal .form-group:before,.form-horizontal .form-group:after{display:table;content:" "}.form-horizontal .form-group:after{clear:both}.form-horizontal .form-group:before,.form-horizontal .form-group:after{display:table;content:" "}.form-horizontal .form-group:after{clear:both}.form-horizontal .form-control-static{padding-top:7px}@media(min-width:768px){.form-horizontal .control-label{text-align:right}}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:normal;line-height:1.428571429;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;background-image:none;border:1px solid transparent;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.btn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:hover,.btn:focus{color:#333;text-decoration:none}.btn:active,.btn.active{background-image:none;outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{pointer-events:none;cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default:hover,.btn-default:focus,.btn-default:active,.btn-default.active,.open .dropdown-toggle.btn-default{color:#333;background-color:#ebebeb;border-color:#adadad}.btn-default:active,.btn-default.active,.open .dropdown-toggle.btn-default{background-image:none}.btn-default.disabled,.btn-default[disabled],fieldset[disabled] .btn-default,.btn-default.disabled:hover,.btn-default[disabled]:hover,fieldset[disabled] .btn-default:hover,.btn-default.disabled:focus,.btn-default[disabled]:focus,fieldset[disabled] .btn-default:focus,.btn-default.disabled:active,.btn-default[disabled]:active,fieldset[disabled] .btn-default:active,.btn-default.disabled.active,.btn-default[disabled].active,fieldset[disabled] .btn-default.active{background-color:#fff;border-color:#ccc}.btn-primary{color:#fff;background-color:#428bca;border-color:#357ebd}.btn-primary:hover,.btn-primary:focus,.btn-primary:active,.btn-primary.active,.open .dropdown-toggle.btn-primary{color:#fff;background-color:#3276b1;border-color:#285e8e}.btn-primary:active,.btn-primary.active,.open .dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled,.btn-primary[disabled],fieldset[disabled] .btn-primary,.btn-primary.disabled:hover,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary:hover,.btn-primary.disabled:focus,.btn-primary[disabled]:focus,fieldset[disabled] .btn-primary:focus,.btn-primary.disabled:active,.btn-primary[disabled]:active,fieldset[disabled] .btn-primary:active,.btn-primary.disabled.active,.btn-primary[disabled].active,fieldset[disabled] .btn-primary.active{background-color:#428bca;border-color:#357ebd}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning:hover,.btn-warning:focus,.btn-warning:active,.btn-warning.active,.open .dropdown-toggle.btn-warning{color:#fff;background-color:#ed9c28;border-color:#d58512}.btn-warning:active,.btn-warning.active,.open .dropdown-toggle.btn-warning{background-image:none}.btn-warning.disabled,.btn-warning[disabled],fieldset[disabled] .btn-warning,.btn-warning.disabled:hover,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning:hover,.btn-warning.disabled:focus,.btn-warning[disabled]:focus,fieldset[disabled] .btn-warning:focus,.btn-warning.disabled:active,.btn-warning[disabled]:active,fieldset[disabled] .btn-warning:active,.btn-warning.disabled.active,.btn-warning[disabled].active,fieldset[disabled] .btn-warning.active{background-color:#f0ad4e;border-color:#eea236}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger:hover,.btn-danger:focus,.btn-danger:active,.btn-danger.active,.open .dropdown-toggle.btn-danger{color:#fff;background-color:#d2322d;border-color:#ac2925}.btn-danger:active,.btn-danger.active,.open .dropdown-toggle.btn-danger{background-image:none}.btn-danger.disabled,.btn-danger[disabled],fieldset[disabled] .btn-danger,.btn-danger.disabled:hover,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger:hover,.btn-danger.disabled:focus,.btn-danger[disabled]:focus,fieldset[disabled] .btn-danger:focus,.btn-danger.disabled:active,.btn-danger[disabled]:active,fieldset[disabled] .btn-danger:active,.btn-danger.disabled.active,.btn-danger[disabled].active,fieldset[disabled] .btn-danger.active{background-color:#d9534f;border-color:#d43f3a}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success:hover,.btn-success:focus,.btn-success:active,.btn-success.active,.open .dropdown-toggle.btn-success{color:#fff;background-color:#47a447;border-color:#398439}.btn-success:active,.btn-success.active,.open .dropdown-toggle.btn-success{background-image:none}.btn-success.disabled,.btn-success[disabled],fieldset[disabled] .btn-success,.btn-success.disabled:hover,.btn-success[disabled]:hover,fieldset[disabled] .btn-success:hover,.btn-success.disabled:focus,.btn-success[disabled]:focus,fieldset[disabled] .btn-success:focus,.btn-success.disabled:active,.btn-success[disabled]:active,fieldset[disabled] .btn-success:active,.btn-success.disabled.active,.btn-success[disabled].active,fieldset[disabled] .btn-success.active{background-color:#5cb85c;border-color:#4cae4c}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info:hover,.btn-info:focus,.btn-info:active,.btn-info.active,.open .dropdown-toggle.btn-info{color:#fff;background-color:#39b3d7;border-color:#269abc}.btn-info:active,.btn-info.active,.open .dropdown-toggle.btn-info{background-image:none}.btn-info.disabled,.btn-info[disabled],fieldset[disabled] .btn-info,.btn-info.disabled:hover,.btn-info[disabled]:hover,fieldset[disabled] .btn-info:hover,.btn-info.disabled:focus,.btn-info[disabled]:focus,fieldset[disabled] .btn-info:focus,.btn-info.disabled:active,.btn-info[disabled]:active,fieldset[disabled] .btn-info:active,.btn-info.disabled.active,.btn-info[disabled].active,fieldset[disabled] .btn-info.active{background-color:#5bc0de;border-color:#46b8da}.btn-link{font-weight:normal;color:#428bca;cursor:pointer;border-radius:0}.btn-link,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:hover,.btn-link:focus,.btn-link:active{border-color:transparent}.btn-link:hover,.btn-link:focus{color:#2a6496;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover,fieldset[disabled] .btn-link:hover,.btn-link[disabled]:focus,fieldset[disabled] .btn-link:focus{color:#999;text-decoration:none}.btn-lg{padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.btn-sm,.btn-xs{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-xs{padding:1px 5px}.btn-block{display:block;width:100%;padding-right:0;padding-left:0}.btn-block+.btn-block{margin-top:5px}input[type="submit"].btn-block,input[type="reset"].btn-block,input[type="button"].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;transition:height .35s ease}@font-face{font-family:'Glyphicons Halflings';src:url('../fonts/glyphicons-halflings-regular.eot');src:url('../fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'),url('../fonts/glyphicons-halflings-regular.woff') format('woff'),url('../fonts/glyphicons-halflings-regular.ttf') format('truetype'),url('../fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg')}.glyphicon{position:relative;top:1px;display:inline-block;font-family:'Glyphicons Halflings';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;line-height:1;-moz-osx-font-smoothing:grayscale}.glyphicon:empty{width:1em}.glyphicon-asterisk:before{content:"\2a"}.glyphicon-plus:before{content:"\2b"}.glyphicon-euro:before{content:"\20ac"}.glyphicon-minus:before{content:"\2212"}.glyphicon-cloud:before{content:"\2601"}.glyphicon-envelope:before{content:"\2709"}.glyphicon-pencil:before{content:"\270f"}.glyphicon-glass:before{content:"\e001"}.glyphicon-music:before{content:"\e002"}.glyphicon-search:before{content:"\e003"}.glyphicon-heart:before{content:"\e005"}.glyphicon-star:before{content:"\e006"}.glyphicon-star-empty:before{content:"\e007"}.glyphicon-user:before{content:"\e008"}.glyphicon-film:before{content:"\e009"}.glyphicon-th-large:before{content:"\e010"}.glyphicon-th:before{content:"\e011"}.glyphicon-th-list:before{content:"\e012"}.glyphicon-ok:before{content:"\e013"}.glyphicon-remove:before{content:"\e014"}.glyphicon-zoom-in:before{content:"\e015"}.glyphicon-zoom-out:before{content:"\e016"}.glyphicon-off:before{content:"\e017"}.glyphicon-signal:before{content:"\e018"}.glyphicon-cog:before{content:"\e019"}.glyphicon-trash:before{content:"\e020"}.glyphicon-home:before{content:"\e021"}.glyphicon-file:before{content:"\e022"}.glyphicon-time:before{content:"\e023"}.glyphicon-road:before{content:"\e024"}.glyphicon-download-alt:before{content:"\e025"}.glyphicon-download:before{content:"\e026"}.glyphicon-upload:before{content:"\e027"}.glyphicon-inbox:before{content:"\e028"}.glyphicon-play-circle:before{content:"\e029"}.glyphicon-repeat:before{content:"\e030"}.glyphicon-refresh:before{content:"\e031"}.glyphicon-list-alt:before{content:"\e032"}.glyphicon-lock:before{content:"\e033"}.glyphicon-flag:before{content:"\e034"}.glyphicon-headphones:before{content:"\e035"}.glyphicon-volume-off:before{content:"\e036"}.glyphicon-volume-down:before{content:"\e037"}.glyphicon-volume-up:before{content:"\e038"}.glyphicon-qrcode:before{content:"\e039"}.glyphicon-barcode:before{content:"\e040"}.glyphicon-tag:before{content:"\e041"}.glyphicon-tags:before{content:"\e042"}.glyphicon-book:before{content:"\e043"}.glyphicon-bookmark:before{content:"\e044"}.glyphicon-print:before{content:"\e045"}.glyphicon-camera:before{content:"\e046"}.glyphicon-font:before{content:"\e047"}.glyphicon-bold:before{content:"\e048"}.glyphicon-italic:before{content:"\e049"}.glyphicon-text-height:before{content:"\e050"}.glyphicon-text-width:before{content:"\e051"}.glyphicon-align-left:before{content:"\e052"}.glyphicon-align-center:before{content:"\e053"}.glyphicon-align-right:before{content:"\e054"}.glyphicon-align-justify:before{content:"\e055"}.glyphicon-list:before{content:"\e056"}.glyphicon-indent-left:before{content:"\e057"}.glyphicon-indent-right:before{content:"\e058"}.glyphicon-facetime-video:before{content:"\e059"}.glyphicon-picture:before{content:"\e060"}.glyphicon-map-marker:before{content:"\e062"}.glyphicon-adjust:before{content:"\e063"}.glyphicon-tint:before{content:"\e064"}.glyphicon-edit:before{content:"\e065"}.glyphicon-share:before{content:"\e066"}.glyphicon-check:before{content:"\e067"}.glyphicon-move:before{content:"\e068"}.glyphicon-step-backward:before{content:"\e069"}.glyphicon-fast-backward:before{content:"\e070"}.glyphicon-backward:before{content:"\e071"}.glyphicon-play:before{content:"\e072"}.glyphicon-pause:before{content:"\e073"}.glyphicon-stop:before{content:"\e074"}.glyphicon-forward:before{content:"\e075"}.glyphicon-fast-forward:before{content:"\e076"}.glyphicon-step-forward:before{content:"\e077"}.glyphicon-eject:before{content:"\e078"}.glyphicon-chevron-left:before{content:"\e079"}.glyphicon-chevron-right:before{content:"\e080"}.glyphicon-plus-sign:before{content:"\e081"}.glyphicon-minus-sign:before{content:"\e082"}.glyphicon-remove-sign:before{content:"\e083"}.glyphicon-ok-sign:before{content:"\e084"}.glyphicon-question-sign:before{content:"\e085"}.glyphicon-info-sign:before{content:"\e086"}.glyphicon-screenshot:before{content:"\e087"}.glyphicon-remove-circle:before{content:"\e088"}.glyphicon-ok-circle:before{content:"\e089"}.glyphicon-ban-circle:before{content:"\e090"}.glyphicon-arrow-left:before{content:"\e091"}.glyphicon-arrow-right:before{content:"\e092"}.glyphicon-arrow-up:before{content:"\e093"}.glyphicon-arrow-down:before{content:"\e094"}.glyphicon-share-alt:before{content:"\e095"}.glyphicon-resize-full:before{content:"\e096"}.glyphicon-resize-small:before{content:"\e097"}.glyphicon-exclamation-sign:before{content:"\e101"}.glyphicon-gift:before{content:"\e102"}.glyphicon-leaf:before{content:"\e103"}.glyphicon-fire:before{content:"\e104"}.glyphicon-eye-open:before{content:"\e105"}.glyphicon-eye-close:before{content:"\e106"}.glyphicon-warning-sign:before{content:"\e107"}.glyphicon-plane:before{content:"\e108"}.glyphicon-calendar:before{content:"\e109"}.glyphicon-random:before{content:"\e110"}.glyphicon-comment:before{content:"\e111"}.glyphicon-magnet:before{content:"\e112"}.glyphicon-chevron-up:before{content:"\e113"}.glyphicon-chevron-down:before{content:"\e114"}.glyphicon-retweet:before{content:"\e115"}.glyphicon-shopping-cart:before{content:"\e116"}.glyphicon-folder-close:before{content:"\e117"}.glyphicon-folder-open:before{content:"\e118"}.glyphicon-resize-vertical:before{content:"\e119"}.glyphicon-resize-horizontal:before{content:"\e120"}.glyphicon-hdd:before{content:"\e121"}.glyphicon-bullhorn:before{content:"\e122"}.glyphicon-bell:before{content:"\e123"}.glyphicon-certificate:before{content:"\e124"}.glyphicon-thumbs-up:before{content:"\e125"}.glyphicon-thumbs-down:before{content:"\e126"}.glyphicon-hand-right:before{content:"\e127"}.glyphicon-hand-left:before{content:"\e128"}.glyphicon-hand-up:before{content:"\e129"}.glyphicon-hand-down:before{content:"\e130"}.glyphicon-circle-arrow-right:before{content:"\e131"}.glyphicon-circle-arrow-left:before{content:"\e132"}.glyphicon-circle-arrow-up:before{content:"\e133"}.glyphicon-circle-arrow-down:before{content:"\e134"}.glyphicon-globe:before{content:"\e135"}.glyphicon-wrench:before{content:"\e136"}.glyphicon-tasks:before{content:"\e137"}.glyphicon-filter:before{content:"\e138"}.glyphicon-briefcase:before{content:"\e139"}.glyphicon-fullscreen:before{content:"\e140"}.glyphicon-dashboard:before{content:"\e141"}.glyphicon-paperclip:before{content:"\e142"}.glyphicon-heart-empty:before{content:"\e143"}.glyphicon-link:before{content:"\e144"}.glyphicon-phone:before{content:"\e145"}.glyphicon-pushpin:before{content:"\e146"}.glyphicon-usd:before{content:"\e148"}.glyphicon-gbp:before{content:"\e149"}.glyphicon-sort:before{content:"\e150"}.glyphicon-sort-by-alphabet:before{content:"\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\e152"}.glyphicon-sort-by-order:before{content:"\e153"}.glyphicon-sort-by-order-alt:before{content:"\e154"}.glyphicon-sort-by-attributes:before{content:"\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\e156"}.glyphicon-unchecked:before{content:"\e157"}.glyphicon-expand:before{content:"\e158"}.glyphicon-collapse-down:before{content:"\e159"}.glyphicon-collapse-up:before{content:"\e160"}.glyphicon-log-in:before{content:"\e161"}.glyphicon-flash:before{content:"\e162"}.glyphicon-log-out:before{content:"\e163"}.glyphicon-new-window:before{content:"\e164"}.glyphicon-record:before{content:"\e165"}.glyphicon-save:before{content:"\e166"}.glyphicon-open:before{content:"\e167"}.glyphicon-saved:before{content:"\e168"}.glyphicon-import:before{content:"\e169"}.glyphicon-export:before{content:"\e170"}.glyphicon-send:before{content:"\e171"}.glyphicon-floppy-disk:before{content:"\e172"}.glyphicon-floppy-saved:before{content:"\e173"}.glyphicon-floppy-remove:before{content:"\e174"}.glyphicon-floppy-save:before{content:"\e175"}.glyphicon-floppy-open:before{content:"\e176"}.glyphicon-credit-card:before{content:"\e177"}.glyphicon-transfer:before{content:"\e178"}.glyphicon-cutlery:before{content:"\e179"}.glyphicon-header:before{content:"\e180"}.glyphicon-compressed:before{content:"\e181"}.glyphicon-earphone:before{content:"\e182"}.glyphicon-phone-alt:before{content:"\e183"}.glyphicon-tower:before{content:"\e184"}.glyphicon-stats:before{content:"\e185"}.glyphicon-sd-video:before{content:"\e186"}.glyphicon-hd-video:before{content:"\e187"}.glyphicon-subtitles:before{content:"\e188"}.glyphicon-sound-stereo:before{content:"\e189"}.glyphicon-sound-dolby:before{content:"\e190"}.glyphicon-sound-5-1:before{content:"\e191"}.glyphicon-sound-6-1:before{content:"\e192"}.glyphicon-sound-7-1:before{content:"\e193"}.glyphicon-copyright-mark:before{content:"\e194"}.glyphicon-registration-mark:before{content:"\e195"}.glyphicon-cloud-download:before{content:"\e197"}.glyphicon-cloud-upload:before{content:"\e198"}.glyphicon-tree-conifer:before{content:"\e199"}.glyphicon-tree-deciduous:before{content:"\e200"}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px solid #000;border-right:4px solid transparent;border-bottom:0 dotted;border-left:4px solid transparent}.dropdown{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,0.175);box-shadow:0 6px 12px rgba(0,0,0,0.175);background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:1.428571429;color:#333;white-space:nowrap}.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus{color:#262626;text-decoration:none;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus{color:#fff;text-decoration:none;background-color:#428bca;outline:0}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{color:#999}.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{text-decoration:none;cursor:not-allowed;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.428571429;color:#999}.dropdown-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0 dotted;border-bottom:4px solid #000;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:1px}@media(min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}}.btn-default .caret{border-top-color:#333}.btn-primary .caret,.btn-success .caret,.btn-warning .caret,.btn-danger .caret,.btn-info .caret{border-top-color:#fff}.dropup .btn-default .caret{border-bottom-color:#333}.dropup .btn-primary .caret,.dropup .btn-success .caret,.dropup .btn-warning .caret,.dropup .btn-danger .caret,.dropup .btn-info .caret{border-bottom-color:#fff}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group>.btn,.btn-group-vertical>.btn{position:relative;float:left}.btn-group>.btn:hover,.btn-group-vertical>.btn:hover,.btn-group>.btn:focus,.btn-group-vertical>.btn:focus,.btn-group>.btn:active,.btn-group-vertical>.btn:active,.btn-group>.btn.active,.btn-group-vertical>.btn.active{z-index:2}.btn-group>.btn:focus,.btn-group-vertical>.btn:focus{outline:0}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar:before,.btn-toolbar:after{display:table;content:" "}.btn-toolbar:after{clear:both}.btn-toolbar:before,.btn-toolbar:after{display:table;content:" "}.btn-toolbar:after{clear:both}.btn-toolbar .btn-group{float:left}.btn-toolbar>.btn+.btn,.btn-toolbar>.btn-group+.btn,.btn-toolbar>.btn+.btn-group,.btn-toolbar>.btn-group+.btn-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child>.btn:last-child,.btn-group>.btn-group:first-child>.dropdown-toggle{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:last-child>.btn:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group-xs>.btn{padding:5px 10px;padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-sm>.btn{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-lg>.btn{padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.btn-group>.btn+.dropdown-toggle{padding-right:8px;padding-left:8px}.btn-group>.btn-lg+.dropdown-toggle{padding-right:12px;padding-left:12px}.btn-group.open .dropdown-toggle{-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn-group.open .dropdown-toggle.btn-link{-webkit-box-shadow:none;box-shadow:none}.btn .caret{margin-left:0}.btn-lg .caret{border-width:5px 5px 0;border-bottom-width:0}.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group:before,.btn-group-vertical>.btn-group:after{display:table;content:" "}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group:before,.btn-group-vertical>.btn-group:after{display:table;content:" "}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-top-right-radius:0;border-bottom-left-radius:4px;border-top-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child>.btn:last-child,.btn-group-vertical>.btn-group:first-child>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child>.btn:first-child{border-top-right-radius:0;border-top-left-radius:0}.btn-group-justified{display:table;width:100%;border-collapse:separate;table-layout:fixed}.btn-group-justified .btn{display:table-cell;float:none;width:1%}[data-toggle="buttons"]>.btn>input[type="radio"],[data-toggle="buttons"]>.btn>input[type="checkbox"]{display:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group.col{float:none;padding-right:0;padding-left:0}.input-group .form-control{width:100%;margin-bottom:0}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:45px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}select.input-group-lg>.form-control,select.input-group-lg>.input-group-addon,select.input-group-lg>.input-group-btn>.btn{height:45px;line-height:45px}textarea.input-group-lg>.form-control,textarea.input-group-lg>.input-group-addon,textarea.input-group-lg>.input-group-btn>.btn{height:auto}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:normal;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type="radio"],.input-group-addon input[type="checkbox"]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:last-child>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group-btn:first-child>.btn:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{position:relative;white-space:nowrap}.input-group-btn:first-child>.btn{margin-right:-1px}.input-group-btn:last-child>.btn{margin-left:-1px}.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-4px}.input-group-btn>.btn:hover,.input-group-btn>.btn:active{z-index:2}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav:before,.nav:after{display:table;content:" "}.nav:after{clear:both}.nav:before,.nav:after{display:table;content:" "}.nav:after{clear:both}.nav>li{position:relative;display:block}.nav>li>a{position:relative;display:block;padding:10px 15px}.nav>li>a:hover,.nav>li>a:focus{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#999}.nav>li.disabled>a:hover,.nav>li.disabled>a:focus{color:#999;text-decoration:none;cursor:not-allowed;background-color:transparent}.nav .open>a,.nav .open>a:hover,.nav .open>a:focus{background-color:#eee;border-color:#428bca}.nav .open>a .caret,.nav .open>a:hover .caret,.nav .open>a:focus .caret{border-top-color:#2a6496;border-bottom-color:#2a6496}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.428571429;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:hover,.nav-tabs>li.active>a:focus{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media(min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:focus{border:1px solid #ddd}@media(min-width:768px){.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:focus{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:hover,.nav-pills>li.active>a:focus{color:#fff;background-color:#428bca}.nav-pills>li.active>a .caret,.nav-pills>li.active>a:hover .caret,.nav-pills>li.active>a:focus .caret{border-top-color:#fff;border-bottom-color:#fff}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li{float:none}.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media(min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus{border:1px solid #ddd}@media(min-width:768px){.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav .caret{border-top-color:#428bca;border-bottom-color:#428bca}.nav a:hover .caret{border-top-color:#2a6496;border-bottom-color:#2a6496}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.navbar:before,.navbar:after{display:table;content:" "}.navbar:after{clear:both}.navbar:before,.navbar:after{display:table;content:" "}.navbar:after{clear:both}@media(min-width:768px){.navbar{border-radius:4px}}.navbar-header:before,.navbar-header:after{display:table;content:" "}.navbar-header:after{clear:both}.navbar-header:before,.navbar-header:after{display:table;content:" "}.navbar-header:after{clear:both}@media(min-width:768px){.navbar-header{float:left}}.navbar-collapse{max-height:340px;padding-right:15px;padding-left:15px;overflow-x:visible;border-top:1px solid transparent;box-shadow:inset 0 1px 0 rgba(255,255,255,0.1);-webkit-overflow-scrolling:touch}.navbar-collapse:before,.navbar-collapse:after{display:table;content:" "}.navbar-collapse:after{clear:both}.navbar-collapse:before,.navbar-collapse:after{display:table;content:" "}.navbar-collapse:after{clear:both}.navbar-collapse.in{overflow-y:auto}@media(min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block !important;height:auto !important;padding-bottom:0;overflow:visible !important}.navbar-collapse.in{overflow-y:auto}.navbar-collapse .navbar-nav.navbar-left:first-child{margin-left:-15px}.navbar-collapse .navbar-nav.navbar-right:last-child{margin-right:-15px}.navbar-collapse .navbar-text:last-child{margin-right:0}}.container>.navbar-header,.container>.navbar-collapse{margin-right:-15px;margin-left:-15px}@media(min-width:768px){.container>.navbar-header,.container>.navbar-collapse{margin-right:0;margin-left:0}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media(min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030}@media(min-width:768px){.navbar-fixed-top,.navbar-fixed-bottom{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:15px 15px;font-size:18px;line-height:20px}.navbar-brand:hover,.navbar-brand:focus{text-decoration:none}@media(min-width:768px){.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;padding:9px 10px;margin-top:8px;margin-right:15px;margin-bottom:8px;background-color:transparent;border:1px solid transparent;border-radius:4px}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media(min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media(max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu>li>a,.navbar-nav .open .dropdown-menu .dropdown-header{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:hover,.navbar-nav .open .dropdown-menu>li>a:focus{background-image:none}}@media(min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}@media(min-width:768px){.navbar-left{float:left !important}.navbar-right{float:right !important}}.navbar-form{padding:10px 15px;margin-top:8px;margin-right:-15px;margin-bottom:8px;margin-left:-15px;border-top:1px solid transparent;border-bottom:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1)}@media(min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block}.navbar-form .radio,.navbar-form .checkbox{display:inline-block;padding-left:0;margin-top:0;margin-bottom:0}.navbar-form .radio input[type="radio"],.navbar-form .checkbox input[type="checkbox"]{float:none;margin-left:0}}@media(max-width:767px){.navbar-form .form-group{margin-bottom:5px}}@media(min-width:768px){.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;-webkit-box-shadow:none;box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-nav.pull-right>li>.dropdown-menu,.navbar-nav>li>.dropdown-menu.pull-right{right:0;left:auto}.navbar-btn{margin-top:8px;margin-bottom:8px}.navbar-text{float:left;margin-top:15px;margin-bottom:15px}@media(min-width:768px){.navbar-text{margin-right:15px;margin-left:15px}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:hover,.navbar-default .navbar-brand:focus{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a{color:#777}.navbar-default .navbar-nav>li>a:hover,.navbar-default .navbar-nav>li>a:focus{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:hover,.navbar-default .navbar-nav>.active>a:focus{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:hover,.navbar-default .navbar-nav>.disabled>a:focus{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:hover,.navbar-default .navbar-toggle:focus{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#ccc}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.dropdown>a:hover .caret,.navbar-default .navbar-nav>.dropdown>a:focus .caret{border-top-color:#333;border-bottom-color:#333}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:hover,.navbar-default .navbar-nav>.open>a:focus{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.open>a .caret,.navbar-default .navbar-nav>.open>a:hover .caret,.navbar-default .navbar-nav>.open>a:focus .caret{border-top-color:#555;border-bottom-color:#555}.navbar-default .navbar-nav>.dropdown>a .caret{border-top-color:#777;border-bottom-color:#777}@media(max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#999}.navbar-inverse .navbar-brand:hover,.navbar-inverse .navbar-brand:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-text{color:#999}.navbar-inverse .navbar-nav>li>a{color:#999}.navbar-inverse .navbar-nav>li>a:hover,.navbar-inverse .navbar-nav>li>a:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:hover,.navbar-inverse .navbar-nav>.active>a:focus{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:hover,.navbar-inverse .navbar-nav>.disabled>a:focus{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:hover,.navbar-inverse .navbar-toggle:focus{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:hover,.navbar-inverse .navbar-nav>.open>a:focus{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.dropdown>a:hover .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .navbar-nav>.dropdown>a .caret{border-top-color:#999;border-bottom-color:#999}.navbar-inverse .navbar-nav>.open>a .caret,.navbar-inverse .navbar-nav>.open>a:hover .caret,.navbar-inverse .navbar-nav>.open>a:focus .caret{border-top-color:#fff;border-bottom-color:#fff}@media(max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#999}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#999}.navbar-inverse .navbar-link:hover{color:#fff}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{padding:0 5px;color:#ccc;content:"/\00a0"}.breadcrumb>.active{color:#999}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.428571429;text-decoration:none;background-color:#fff;border:1px solid #ddd}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.pagination>li>a:hover,.pagination>li>span:hover,.pagination>li>a:focus,.pagination>li>span:focus{background-color:#eee}.pagination>.active>a,.pagination>.active>span,.pagination>.active>a:hover,.pagination>.active>span:hover,.pagination>.active>a:focus,.pagination>.active>span:focus{z-index:2;color:#fff;cursor:default;background-color:#428bca;border-color:#428bca}.pagination>.disabled>span,.pagination>.disabled>span:hover,.pagination>.disabled>span:focus,.pagination>.disabled>a,.pagination>.disabled>a:hover,.pagination>.disabled>a:focus{color:#999;cursor:not-allowed;background-color:#fff;border-color:#ddd}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-top-right-radius:6px;border-bottom-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-top-right-radius:3px;border-bottom-right-radius:3px}.pager{padding-left:0;margin:20px 0;text-align:center;list-style:none}.pager:before,.pager:after{display:table;content:" "}.pager:after{clear:both}.pager:before,.pager:after{display:table;content:" "}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#999;cursor:not-allowed;background-color:#fff}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:bold;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.label[href]:hover,.label[href]:focus{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.label-default{background-color:#999}.label-default[href]:hover,.label-default[href]:focus{background-color:gray}.label-primary{background-color:#428bca}.label-primary[href]:hover,.label-primary[href]:focus{background-color:#3071a9}.label-success{background-color:#5cb85c}.label-success[href]:hover,.label-success[href]:focus{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:hover,.label-info[href]:focus{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:hover,.label-warning[href]:focus{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:hover,.label-danger[href]:focus{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:bold;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;background-color:#999;border-radius:10px}.badge:empty{display:none}a.badge:hover,a.badge:focus{color:#fff;text-decoration:none;cursor:pointer}.btn .badge{position:relative;top:-1px}a.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#428bca;background-color:#fff}.nav-pills>li>a>.badge{margin-left:3px}.jumbotron{padding:30px;margin-bottom:30px;font-size:21px;font-weight:200;line-height:2.1428571435;color:inherit;background-color:#eee}.jumbotron h1{line-height:1;color:inherit}.jumbotron p{line-height:1.4}.container .jumbotron{border-radius:6px}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container .jumbotron{padding-right:60px;padding-left:60px}.jumbotron h1{font-size:63px}}.thumbnail{display:inline-block;display:block;height:auto;max-width:100%;padding:4px;margin-bottom:20px;line-height:1.428571429;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.thumbnail>img{display:block;height:auto;max-width:100%;margin-right:auto;margin-left:auto}a.thumbnail:hover,a.thumbnail:focus,a.thumbnail.active{border-color:#428bca}.thumbnail .caption{padding:9px;color:#333}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:bold}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable{padding-right:35px}.alert-dismissable .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#356635}.alert-info{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#2d6987}.alert-warning{color:#c09853;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#a47e3c}.alert-danger{color:#b94a48;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#953b39}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-moz-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:0 0}to{background-position:40px 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f5f5f5;border-radius:4px;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#428bca;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-transition:width .6s ease;transition:width .6s ease}.progress-striped .progress-bar{background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-size:40px 40px}.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,0.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,0.15)),color-stop(0.75,rgba(255,255,255,0.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.media,.media-body{overflow:hidden;zoom:1}.media,.media .media{margin-top:15px}.media:first-child{margin-top:0}.media-object{display:block}.media-heading{margin:0 0 5px}.media>.pull-left{margin-right:10px}.media>.pull-right{margin-left:10px}.media-list{padding-left:0;list-style:none}.list-group{padding-left:0;margin-bottom:20px}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}a.list-group-item{color:#555}a.list-group-item .list-group-item-heading{color:#333}a.list-group-item:hover,a.list-group-item:focus{text-decoration:none;background-color:#f5f5f5}a.list-group-item.active,a.list-group-item.active:hover,a.list-group-item.active:focus{z-index:2;color:#fff;background-color:#428bca;border-color:#428bca}a.list-group-item.active .list-group-item-heading,a.list-group-item.active:hover .list-group-item-heading,a.list-group-item.active:focus .list-group-item-heading{color:inherit}a.list-group-item.active .list-group-item-text,a.list-group-item.active:hover .list-group-item-text,a.list-group-item.active:focus .list-group-item-text{color:#e1edf7}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.05);box-shadow:0 1px 1px rgba(0,0,0,0.05)}.panel-body{padding:15px}.panel-body:before,.panel-body:after{display:table;content:" "}.panel-body:after{clear:both}.panel-body:before,.panel-body:after{display:table;content:" "}.panel-body:after{clear:both}.panel>.list-group{margin-bottom:0}.panel>.list-group .list-group-item{border-width:1px 0}.panel>.list-group .list-group-item:first-child{border-top-right-radius:0;border-top-left-radius:0}.panel>.list-group .list-group-item:last-child{border-bottom:0}.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.table,.panel>.table-responsive{margin-bottom:0}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive{border-top:1px solid #ddd}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.panel>.table-bordered>thead>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:last-child>th,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:last-child>td,.panel>.table-responsive>.table-bordered>thead>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.panel-heading>.dropdown .dropdown-toggle{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:16px}.panel-title>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel-group .panel{margin-bottom:0;overflow:hidden;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse .panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse .panel-body{border-top-color:#ddd}.panel-default>.panel-heading>.dropdown .caret{border-color:#333 transparent}.panel-default>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#428bca}.panel-primary>.panel-heading{color:#fff;background-color:#428bca;border-color:#428bca}.panel-primary>.panel-heading+.panel-collapse .panel-body{border-top-color:#428bca}.panel-primary>.panel-heading>.dropdown .caret{border-color:#fff transparent}.panel-primary>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#428bca}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse .panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading>.dropdown .caret{border-color:#468847 transparent}.panel-success>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#d6e9c6}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#c09853;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse .panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading>.dropdown .caret{border-color:#c09853 transparent}.panel-warning>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#b94a48;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse .panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading>.dropdown .caret{border-color:#b94a48 transparent}.panel-danger>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#ebccd1}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse .panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading>.dropdown .caret{border-color:#3a87ad transparent}.panel-info>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#bce8f1}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.close{float:right;font-size:21px;font-weight:bold;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.modal-open{overflow:hidden}.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;display:none;overflow:auto;overflow-y:scroll}.modal.fade .modal-dialog{-webkit-transform:translate(0,-25%);-ms-transform:translate(0,-25%);transform:translate(0,-25%);-webkit-transition:-webkit-transform .3s ease-out;-moz-transition:-moz-transform .3s ease-out;-o-transition:-o-transform .3s ease-out;transition:transform .3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.modal-dialog{position:relative;z-index:1050;width:auto;padding:10px;margin-right:auto;margin-left:auto}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.2);border-radius:6px;outline:0;-webkit-box-shadow:0 3px 9px rgba(0,0,0,0.5);box-shadow:0 3px 9px rgba(0,0,0,0.5);background-clip:padding-box}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1030;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{min-height:16.428571429px;padding:15px;border-bottom:1px solid #e5e5e5}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.428571429}.modal-body{position:relative;padding:20px}.modal-footer{padding:19px 20px 20px;margin-top:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer:before,.modal-footer:after{display:table;content:" "}.modal-footer:after{clear:both}.modal-footer:before,.modal-footer:after{display:table;content:" "}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}@media screen and (min-width:768px){.modal-dialog{width:600px;padding-top:30px;padding-bottom:30px}.modal-content{-webkit-box-shadow:0 5px 15px rgba(0,0,0,0.5);box-shadow:0 5px 15px rgba(0,0,0,0.5)}}.tooltip{position:absolute;z-index:1030;display:block;font-size:12px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-left .tooltip-arrow{bottom:0;left:5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-right .tooltip-arrow{right:5px;bottom:0;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-left .tooltip-arrow{top:0;left:5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-right .tooltip-arrow{top:0;right:5px;border-bottom-color:#000;border-width:0 5px 5px}.popover{position:absolute;top:0;left:0;z-index:1010;display:none;max-width:276px;padding:1px;text-align:left;white-space:normal;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);background-clip:padding-box}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;font-weight:normal;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover .arrow,.popover .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover .arrow{border-width:11px}.popover .arrow:after{border-width:10px;content:""}.popover.top .arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.popover.top .arrow:after{bottom:1px;margin-left:-10px;border-top-color:#fff;border-bottom-width:0;content:" "}.popover.right .arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.popover.right .arrow:after{bottom:-10px;left:1px;border-right-color:#fff;border-left-width:0;content:" "}.popover.bottom .arrow{top:-11px;left:50%;margin-left:-11px;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25);border-top-width:0}.popover.bottom .arrow:after{top:1px;margin-left:-10px;border-bottom-color:#fff;border-top-width:0;content:" "}.popover.left .arrow{top:50%;right:-11px;margin-top:-11px;border-left-color:#999;border-left-color:rgba(0,0,0,0.25);border-right-width:0}.popover.left .arrow:after{right:1px;bottom:-10px;border-left-color:#fff;border-right-width:0;content:" "}.carousel{position:relative}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>img,.carousel-inner>.item>a>img{display:block;height:auto;max-width:100%;line-height:1}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;bottom:0;left:0;width:15%;font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,0.6);opacity:.5;filter:alpha(opacity=50)}.carousel-control.left{background-image:-webkit-gradient(linear,0 top,100% top,from(rgba(0,0,0,0.5)),to(rgba(0,0,0,0.0001)));background-image:-webkit-linear-gradient(left,color-stop(rgba(0,0,0,0.5) 0),color-stop(rgba(0,0,0,0.0001) 100%));background-image:-moz-linear-gradient(left,rgba(0,0,0,0.5) 0,rgba(0,0,0,0.0001) 100%);background-image:linear-gradient(to right,rgba(0,0,0,0.5) 0,rgba(0,0,0,0.0001) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000',endColorstr='#00000000',GradientType=1)}.carousel-control.right{right:0;left:auto;background-image:-webkit-gradient(linear,0 top,100% top,from(rgba(0,0,0,0.0001)),to(rgba(0,0,0,0.5)));background-image:-webkit-linear-gradient(left,color-stop(rgba(0,0,0,0.0001) 0),color-stop(rgba(0,0,0,0.5) 100%));background-image:-moz-linear-gradient(left,rgba(0,0,0,0.0001) 0,rgba(0,0,0,0.5) 100%);background-image:linear-gradient(to right,rgba(0,0,0,0.0001) 0,rgba(0,0,0,0.5) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000',endColorstr='#80000000',GradientType=1)}.carousel-control:hover,.carousel-control:focus{color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-control .icon-prev,.carousel-control .icon-next,.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right{position:absolute;top:50%;z-index:5;display:inline-block}.carousel-control .icon-prev,.carousel-control .glyphicon-chevron-left{left:50%}.carousel-control .icon-next,.carousel-control .glyphicon-chevron-right{right:50%}.carousel-control .icon-prev,.carousel-control .icon-next{width:20px;height:20px;margin-top:-10px;margin-left:-10px;font-family:serif}.carousel-control .icon-prev:before{content:'\2039'}.carousel-control .icon-next:before{content:'\203a'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;padding-left:0;margin-left:-30%;text-align:center;list-style:none}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000 \9;background-color:rgba(0,0,0,0);border:1px solid #fff;border-radius:10px}.carousel-indicators .active{width:12px;height:12px;margin:0;background-color:#fff}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,0.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicons-chevron-left,.carousel-control .glyphicons-chevron-right,.carousel-control .icon-prev,.carousel-control .icon-next{width:30px;height:30px;margin-top:-15px;margin-left:-15px;font-size:30px}.carousel-caption{right:20%;left:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.clearfix:before,.clearfix:after{display:table;content:" "}.clearfix:after{clear:both}.center-block{display:block;margin-right:auto;margin-left:auto}.pull-right{float:right !important}.pull-left{float:left !important}.hide{display:none !important}.show{display:block !important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none !important;visibility:hidden !important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-xs,tr.visible-xs,th.visible-xs,td.visible-xs{display:none !important}@media(max-width:767px){.visible-xs{display:block !important}tr.visible-xs{display:table-row !important}th.visible-xs,td.visible-xs{display:table-cell !important}}@media(min-width:768px) and (max-width:991px){.visible-xs.visible-sm{display:block !important}tr.visible-xs.visible-sm{display:table-row !important}th.visible-xs.visible-sm,td.visible-xs.visible-sm{display:table-cell !important}}@media(min-width:992px) and (max-width:1199px){.visible-xs.visible-md{display:block !important}tr.visible-xs.visible-md{display:table-row !important}th.visible-xs.visible-md,td.visible-xs.visible-md{display:table-cell !important}}@media(min-width:1200px){.visible-xs.visible-lg{display:block !important}tr.visible-xs.visible-lg{display:table-row !important}th.visible-xs.visible-lg,td.visible-xs.visible-lg{display:table-cell !important}}.visible-sm,tr.visible-sm,th.visible-sm,td.visible-sm{display:none !important}@media(max-width:767px){.visible-sm.visible-xs{display:block !important}tr.visible-sm.visible-xs{display:table-row !important}th.visible-sm.visible-xs,td.visible-sm.visible-xs{display:table-cell !important}}@media(min-width:768px) and (max-width:991px){.visible-sm{display:block !important}tr.visible-sm{display:table-row !important}th.visible-sm,td.visible-sm{display:table-cell !important}}@media(min-width:992px) and (max-width:1199px){.visible-sm.visible-md{display:block !important}tr.visible-sm.visible-md{display:table-row !important}th.visible-sm.visible-md,td.visible-sm.visible-md{display:table-cell !important}}@media(min-width:1200px){.visible-sm.visible-lg{display:block !important}tr.visible-sm.visible-lg{display:table-row !important}th.visible-sm.visible-lg,td.visible-sm.visible-lg{display:table-cell !important}}.visible-md,tr.visible-md,th.visible-md,td.visible-md{display:none !important}@media(max-width:767px){.visible-md.visible-xs{display:block !important}tr.visible-md.visible-xs{display:table-row !important}th.visible-md.visible-xs,td.visible-md.visible-xs{display:table-cell !important}}@media(min-width:768px) and (max-width:991px){.visible-md.visible-sm{display:block !important}tr.visible-md.visible-sm{display:table-row !important}th.visible-md.visible-sm,td.visible-md.visible-sm{display:table-cell !important}}@media(min-width:992px) and (max-width:1199px){.visible-md{display:block !important}tr.visible-md{display:table-row !important}th.visible-md,td.visible-md{display:table-cell !important}}@media(min-width:1200px){.visible-md.visible-lg{display:block !important}tr.visible-md.visible-lg{display:table-row !important}th.visible-md.visible-lg,td.visible-md.visible-lg{display:table-cell !important}}.visible-lg,tr.visible-lg,th.visible-lg,td.visible-lg{display:none !important}@media(max-width:767px){.visible-lg.visible-xs{display:block !important}tr.visible-lg.visible-xs{display:table-row !important}th.visible-lg.visible-xs,td.visible-lg.visible-xs{display:table-cell !important}}@media(min-width:768px) and (max-width:991px){.visible-lg.visible-sm{display:block !important}tr.visible-lg.visible-sm{display:table-row !important}th.visible-lg.visible-sm,td.visible-lg.visible-sm{display:table-cell !important}}@media(min-width:992px) and (max-width:1199px){.visible-lg.visible-md{display:block !important}tr.visible-lg.visible-md{display:table-row !important}th.visible-lg.visible-md,td.visible-lg.visible-md{display:table-cell !important}}@media(min-width:1200px){.visible-lg{display:block !important}tr.visible-lg{display:table-row !important}th.visible-lg,td.visible-lg{display:table-cell !important}}.hidden-xs{display:block !important}tr.hidden-xs{display:table-row !important}th.hidden-xs,td.hidden-xs{display:table-cell !important}@media(max-width:767px){.hidden-xs,tr.hidden-xs,th.hidden-xs,td.hidden-xs{display:none !important}}@media(min-width:768px) and (max-width:991px){.hidden-xs.hidden-sm,tr.hidden-xs.hidden-sm,th.hidden-xs.hidden-sm,td.hidden-xs.hidden-sm{display:none !important}}@media(min-width:992px) and (max-width:1199px){.hidden-xs.hidden-md,tr.hidden-xs.hidden-md,th.hidden-xs.hidden-md,td.hidden-xs.hidden-md{display:none !important}}@media(min-width:1200px){.hidden-xs.hidden-lg,tr.hidden-xs.hidden-lg,th.hidden-xs.hidden-lg,td.hidden-xs.hidden-lg{display:none !important}}.hidden-sm{display:block !important}tr.hidden-sm{display:table-row !important}th.hidden-sm,td.hidden-sm{display:table-cell !important}@media(max-width:767px){.hidden-sm.hidden-xs,tr.hidden-sm.hidden-xs,th.hidden-sm.hidden-xs,td.hidden-sm.hidden-xs{display:none !important}}@media(min-width:768px) and (max-width:991px){.hidden-sm,tr.hidden-sm,th.hidden-sm,td.hidden-sm{display:none !important}}@media(min-width:992px) and (max-width:1199px){.hidden-sm.hidden-md,tr.hidden-sm.hidden-md,th.hidden-sm.hidden-md,td.hidden-sm.hidden-md{display:none !important}}@media(min-width:1200px){.hidden-sm.hidden-lg,tr.hidden-sm.hidden-lg,th.hidden-sm.hidden-lg,td.hidden-sm.hidden-lg{display:none !important}}.hidden-md{display:block !important}tr.hidden-md{display:table-row !important}th.hidden-md,td.hidden-md{display:table-cell !important}@media(max-width:767px){.hidden-md.hidden-xs,tr.hidden-md.hidden-xs,th.hidden-md.hidden-xs,td.hidden-md.hidden-xs{display:none !important}}@media(min-width:768px) and (max-width:991px){.hidden-md.hidden-sm,tr.hidden-md.hidden-sm,th.hidden-md.hidden-sm,td.hidden-md.hidden-sm{display:none !important}}@media(min-width:992px) and (max-width:1199px){.hidden-md,tr.hidden-md,th.hidden-md,td.hidden-md{display:none !important}}@media(min-width:1200px){.hidden-md.hidden-lg,tr.hidden-md.hidden-lg,th.hidden-md.hidden-lg,td.hidden-md.hidden-lg{display:none !important}}.hidden-lg{display:block !important}tr.hidden-lg{display:table-row !important}th.hidden-lg,td.hidden-lg{display:table-cell !important}@media(max-width:767px){.hidden-lg.hidden-xs,tr.hidden-lg.hidden-xs,th.hidden-lg.hidden-xs,td.hidden-lg.hidden-xs{display:none !important}}@media(min-width:768px) and (max-width:991px){.hidden-lg.hidden-sm,tr.hidden-lg.hidden-sm,th.hidden-lg.hidden-sm,td.hidden-lg.hidden-sm{display:none !important}}@media(min-width:992px) and (max-width:1199px){.hidden-lg.hidden-md,tr.hidden-lg.hidden-md,th.hidden-lg.hidden-md,td.hidden-lg.hidden-md{display:none !important}}@media(min-width:1200px){.hidden-lg,tr.hidden-lg,th.hidden-lg,td.hidden-lg{display:none !important}}.visible-print,tr.visible-print,th.visible-print,td.visible-print{display:none !important}@media print{.visible-print{display:block !important}tr.visible-print{display:table-row !important}th.visible-print,td.visible-print{display:table-cell !important}.hidden-print,tr.hidden-print,th.hidden-print,td.hidden-print{display:none !important}}rect{shape-rendering:crispEdges}text{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;text-rendering:geometricPrecision;fill:#e7e7e7;stroke-width:0;font-size:18px}.text-count{fill:#8b8b8b}html{min-height:100%}body{font-family:"Open Sans",sans-serif;padding-bottom:20px;background:#50a3a2;background:-webkit-linear-gradient(top left,#50a3a2 0,#53e3a6 100%);background:linear-gradient(to bottom right,#50a3a2 0,#53e3a6 100%);padding-top:50px}body.home{padding-top:0}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:"Open Sans",sans-serif}.home .container{width:100%;padding:0}.addthis_native_toolbox{float:left}.site-info{position:absolute;right:0;top:0;font-size:3px;z-index:1}.site-info h1{margin:0;padding:10px 20px;font-size:16px;background:#50a4a2;background:linear-gradient(to right,#50a4a2 0,#51c5a4 100%);color:#fff;display:inline-block;float:left}.site-info a{text-decoration:none;color:#fff}.site-info .info-me{color:#fff;width:32px;height:32px;background:url('chemistry/info.svg') no-repeat 0 0;transition:all ease-out .5s;position:relative;top:2px;opacity:1;cursor:pointer;right:8px;display:inline-block;float:left}.contetntAll{max-width:1300px;margin:0 auto;transform:translate3d(0,0,0) rotate3d(1,1,1,0);transition:all ease-out .5s}.inInfo{overflow:hidden}.inInfo .contetntAll{transform:translate3d(100px,0,0) rotate3d(1,1,1,-50deg)}.navbar{background:linear-gradient(to right,#50a4a2 0,#52d4a5 100%)}.navbar .site-info{position:static}.navbar .site-info h1{padding:16px 20px;float:left}.navbar .container{padding-left:0;padding-right:0}.bg-canvas{position:absolute;top:0}.titleWrap{padding-top:48px;padding-bottom:48px;padding:30px;font-size:21px;font-weight:200;color:#fff}.titleWrap h1{position:relative;margin:20px 0;font-size:24px;color:#fff}.titleWrap a{color:#FFF}.titleWrap a:hover{color:#00b1ff}.titleWrap p{font-size:14px;text-align:justify;color:#fff;line-height:24px}.lineThrough{display:inline-block;position:absolute;top:-40px;left:68px;width:70px;height:50px}.lineThrough text{fill:#FFF;font-family:"Open Sans",sans-serif;font-size:20px;text-rendering:optimizeLegibility}footer,.footer{height:30px;padding:0;background:linear-gradient(to right,#50a4a2 0,#52d4a5 100%);bottom:0;position:fixed;width:100%;z-index:10}footer p,.footer p{font-size:10px;padding:5px;float:left}footer .developedBy,.footer .developedBy{font-size:10px;padding:2px 10px;position:absolute;right:0;color:#fff;margin:0;bottom:3px}footer a,.footer a,footer a:hover,.footer a:hover{color:#fff}.developedBy-mobile{display:none;float:right}.graphWrapper{width:100%}.graphWrapper .container{padding-left:0;padding-right:0;position:relative}.streach{padding-bottom:75%}.graphWrapper .canvas{position:absolute;top:0;left:0;height:100%;width:100%}.graphCanvas{position:relative;width:98%;height:98%;background:#000;background:radial-gradient(farthest-side ellipse at 10% 0,rgba(0,0,0,0.7),rgba(0,0,0,0.7),rgba(0,0,0,0.9)),url("chemistry/noise.png");float:left;margin:1%;-webkit-box-shadow:0 8px 6px -6px black;-moz-box-shadow:0 8px 6px -6px black;box-shadow:0 8px 6px -6px black;overflow:hidden}.graphCanvas.fullscreen{position:absolute;top:0;left:0;bottom:0;width:100%;height:100%;margin:0}.graphCanvas canvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:5}.graphWrapper .canvas .specs{float:left;background:rgba(34,34,34,0.44);margin-top:1%;width:17%;height:80%;color:#ccc}.graphWrapper .heading{clear:both;background:#222;margin:1%;color:#53e3a6;padding:1%}.graphWrapper .canvas .heading h2{font-size:21px;padding:10px;margin:0}.graphWrapper .canvas .heading h4{margin:0;padding:5px 10px}.grapsList{list-style:none}#grapsList{margin-top:10px;padding:0 30px}.graplist-item{list-style-type:none;border-radius:1px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:5px;background:rgba(240,240,240,0);margin-bottom:30px;position:relative;margin:10px;width:210px;height:260px;float:left;border:1px solid rgba(255,255,255,0.18)}.graplist-item:hover{border-color:#fff}.graplist-item h2{font-size:14px;margin:5px 0;padding:5px;height:40px;overflow:hidden;color:rgba(255,255,255,0.9)}.graplist-item img{width:100%;-webkit-filter:grayscale(100%);filter:grayscale(100%)}.graplist-item:hover img{-webkit-filter:none;filter:none}.graplist-item .description{overflow:hidden;text-overflow:ellipsis;height:50px;font-size:12px;color:#006965}.graplist-item p{font-size:13px;padding:5px}.graplist-item a{background:0;border:0;padding:0;margin:0;box-shadow:none;text-decoration:none}.graplist-item a:hover{text-decoration:none}.navebar,footer,.canvas,grapgCanvas,.fullscreenControl{-webkit-transition:all .6s ease;-moz-transition:all .6s ease;transition:all .6s ease}.inFullScreen{height:100%;overflow:hidden}.inFullScreen .container{position:static !important}.inFullScreen .specs,.inFullScreen .heading{visibility:hidden}.inFullScreen .canvas{background:#000;z-index:1000;height:100%}#fullscreenElement{background-color:rgba(102,105,104,0.9);background:radial-gradient(farthest-side ellipse at 10% 0,rgba(0,0,0,0.7),rgba(0,0,0,0.7),rgba(0,0,0,0.9)),url("chemistry/noise.png");top:50%;left:50%;z-index:10001}.inFullScreen .navbar{margin:-50px 0 0 0}.inFullScreen footer{margin:-20px 0 0 0}.fullscreenControl{position:absolute;top:10px;right:10px;width:30px;height:30px;background:rgba(255,255,255,0.15) url("chemistry/fullscreen.png") no-repeat center center;border:1px solid rgba(255,255,255,0.29);z-index:1000}.inFullScreen .fullscreenControl{background:rgba(255,255,255,0.15) url("chemistry/exit.png") no-repeat center center}.fullscreenControl:hover,.inFullScreen .fullscreenControl:hover{border:1px solid rgba(255,255,255,0.6)}.countRect,.sortItem{stroke:#fdfdfd;stroke-width:0}.countText{fill:#8c25c5;stroke-width:0}#graphContent{margin-bottom:50px;padding:10px}#graphContent .conterntWrapper{background:0}#graphContent .conterntWrapper ul{list-style:none;padding:5px;margin:5px;overflow:hidden}#graphContent .conterntWrapper ul li{float:left;padding:5px;-moz-box-shadow:inset 0 0 10px rgba(185,185,185,0.23);-webkit-box-shadow:inset 0 0 10px rgba(185,185,185,0.23);box-shadow:inset 0 0 10px rgba(185,185,185,0.23)}#graphContent .conterntWrapper>div{padding:15px;max-width:800px;line-height:30px}#graphContent .conterntWrapper a{color:#fff}.tag{color:#fff;text-decoration:none;text-align:center;padding:5px;margin:0 3px;background:#3abb85}.tag.wrap{padding:3px}#tagList{border-bottom:.5px solid rgba(255,255,255,0.11);padding:0 0 5px 0;margin:0 30px}#tagList .tags{list-style:none;margin:0;padding:0;box-sizing:border-box;width:auto}#tagList::after{content:" ";display:block;clear:both}#tagList .tagItem{height:20px;border-right:0;margin:5px 5px 5px 0;float:left;text-align:center}#tagList .tagItem a{display:block;border-radius:10px;color:rgba(255,255,255,0.7);height:23px;line-height:20px;padding:0 10px;text-transform:capitalize;text-decoration:none;border:1px solid rgba(255,255,255,0.16);font-size:12px}#tagList .tagItem a:hover,#tagList .tagItem a.selected{color:#FFF;border-color:rgba(255,255,255,0.6)}.svg-tip{padding:10px;background:#222;color:#bbb;font-size:12px;position:absolute;z-index:99999;text-align:center;border-radius:2px;box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.svg-tip:after{-moz-box-sizing:border-box;box-sizing:border-box;display:inline;font-size:12px;width:100%;line-height:1;color:rgba(0,0,0,0.8);content:"\25BC";position:absolute;text-align:center;-webkit-font-smoothing:antialiased}.graphCanvas svg{position:absolute;top:0;left:0;z-index:10}.char-link{stroke:#999;stroke-opacity:.6}.chars{stroke:#fff;stroke-width:1.5px}.loadingScreen{position:absolute;width:100%;height:100%;z-index:15;background:#000;padding-top:calc(45% - 100px);top:0}@-moz-keyframes spin{0{-moz-transform:rotate(0)}100%{-moz-transform:rotate(360deg)}}@-moz-keyframes spinoff{0{-moz-transform:rotate(0)}100%{-moz-transform:rotate(-360deg)}}@-webkit-keyframes spin{0{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@-webkit-keyframes spinoff{0{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(-360deg)}}.spin1{background-color:rgba(0,0,0,0);border:5px solid rgba(0,183,229,0.9);opacity:.9;border-top:5px solid rgba(0,0,0,0);border-left:5px solid rgba(0,0,0,0);border-radius:50px;box-shadow:0 0 35px #2187e7;width:50px;height:50px;margin:0 auto;-moz-animation:spin .5s infinite linear;-webkit-animation:spin .5s infinite linear}.spin2{background-color:rgba(0,0,0,0);border:5px solid rgba(0,183,229,0.9);opacity:.9;border-top:5px solid rgba(0,0,0,0);border-left:5px solid rgba(0,0,0,0);border-radius:50px;box-shadow:0 0 15px #2187e7;width:30px;height:30px;margin:0 auto;position:relative;top:-40px;-moz-animation:spinoff .5s infinite linear;-webkit-animation:spinoff .5s infinite linear}.play_border{margin:0 auto;border:2px solid rgba(0,0,0,0.7);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:100px;height:100px;-webkit-box-shadow:0 0 5px 2px rgba(0,0,0,0.5);-moz-box-shadow:0 0 5px 2px rgba(0,0,0,0.5);box-shadow:0 0 5px 2px rgba(0,0,0,0.5);-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;-ms-transition:all .5s ease;transition:all .5s ease;cursor:pointer}.play_border:hover{border-color:transparent;-webkit-box-shadow:0 0 5px 2px rgba(0,0,0,0.2);-moz-box-shadow:0 0 5px 2px rgba(0,0,0,0.2);box-shadow:0 0 5px 2px rgba(0,0,0,0.2)}.play_border:hover .play_button{border-left:18px solid rgba(0,0,0,0.5)}.play_border:active,.play_border:focus{-webkit-box-shadow:0 0 5px 2px rgba(0,0,0,0.2);-moz-box-shadow:0 0 5;box-shadow:0 0 5px 2px rgba(0,0,0,0.2)}.play_button{position:relative;top:32px;left:45px;width:0;height:0;border-top:18px solid transparent;border-bottom:18px solid transparent;border-left:18px solid rgba(0,0,0,0.8)}.restart_button{position:absolute;z-index:11;right:2%;bottom:16%;border:1px solid rgba(255,255,255,0.12);padding:10px;text-align:center;color:#424242;-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;-ms-transition:all .5s ease;transition:all .5s ease;cursor:pointer}.restart_button:hover{border:1px solid #c4c4c4;color:#c4c4c4}@media(max-width:560px){.developedBy-mobile{display:block}.developedBy{display:none}#grapsList{padding:0 10px}.titleWrap p{line-height:20px}.graplist-item{width:165px;height:230px}}@media(max-width:430px){.graplist-item{width:150px;height:215px;margin:5px}}@media only screen and (min-device-width:768px) and (max-device-width:1024px) and (-webkit-min-device-pixel-ratio:1){.graplist-item{width:200px}}@media only screen and (min-device-width:414px) and (max-device-width:736px) and (-webkit-min-device-pixel-ratio:3){#grapsList{padding:0 20px}.titleWrap p{line-height:20px}.graplist-item{width:165px;height:230px}}@media only screen and (min-device-width:375px) and (max-device-width:667px) and (-webkit-min-device-pixel-ratio:2){#grapsList{padding:0 15px}.titleWrap{padding-bottom:15px}.titleWrap p{line-height:18px;font-size:13px}.graplist-item{width:150px;height:215px;margin:5px}}.g9{min-width:768px;background:#a90329;background:radial-gradient(ellipse at center,#a90329 0,#8f0222 44%,#6d0019 100%)}.elementInfo{position:absolute;width:200px;height:200px;background:#3498db;z-index:1001;color:#fff;z-index:0;opacity:0;transition:all ease-out .3s;padding-left:10px;left:0;text-shadow:1px 1px 2px #427388}.elementInfo.active{width:500px;height:250px;opacity:1;z-index:30;left:50%}.elementInfo.inScreen{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%;z-index:0;opacity:1}.elementInfo .n{font-size:23px}.elementInfo .s{font-size:40px}.elementInfo .num{font-size:25px}.elementInfo .w{font-size:20px}.elementInfo .lc{float:right;padding:0 10px}.elementInfo p{padding:0;margin:0}.elementInfo .label{display:none;text-align:right}.elementInfo.active .label{display:inline-block;vertical-align:text-bottom}.elementInfo .eConfig{position:absolute;top:13px;right:0;width:50%;height:150px}.elementInfo .eConfig .label{transform:rotateZ(-90deg) translateX(-110px) translateY(0);-webkit-transform:rotateZ(-90deg) translateX(-110px) translateY(0);width:20px;position:absolute}@media only screen and (max-width:640px){.elementInfo .eConfig .label{transform:rotateZ(-90deg) translateX(-110px) translateY(0);-webkit-transform:rotateZ(-90deg) translateX(-110px) translateY(0);width:20px;position:absolute}}.elementInfoWrapper{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.49);z-index:15;display:none;transition:all ease-out .5s}.close-icon{width:32px;height:32px;background:url('chemistry/close.svg') no-repeat 0 0;position:absolute;top:2px;right:2px;opacity:.5;transition:all ease-out .5s;cursor:pointer;z-index:15}.elementInfo .close-icon{display:none}.close-icon:hover{opacity:1}.elementInfo.active .close-icon{display:block}.elementInfo.active .aName-w{position:absolute;top:72px}.elementInfo.active .aSymbol-w{position:absolute;top:95px}.elementInfo.active .aNumber-w{margin:10px 0 0 0}.elementInfo.active .eConfig{left:52%}.elementInfo.active .lc{float:none;padding:0 25px;display:inline-block}.levelsPath{position:absolute;top:0;left:50px;font-size:12px;display:none}.levelsPath .levels{padding:2px;border-bottom:.5px solid rgba(255,255,255,0.2)}.levelsPath .levels.active{background:rgba(234,234,234,0.21)}.elementInfo.active .levelsPath{display:block}.elementInfo.active .goDetail-icon{display:block}.goDetail-icon{width:100%;box-sizing:border-box;position:absolute;bottom:0;right:0;display:none;height:54px}.goDetail-icon span{background:rgba(255,255,255,0.18) url('chemistry/next.svg') no-repeat 100%;padding:10px 44px 10px 20px;font-size:16px;bottom:8px;right:10px;float:right;margin:0 10px 0 0;cursor:pointer;background-size:22%}.explodeEff{border:0 solid;box-shadow:inset 0 0 20px rgba(255,255,255,0);outline:1px solid;outline-color:rgba(255,255,255,0.5);outline-offset:0;text-shadow:none;transition:all 1250ms cubic-bezier(.19,1,.22,1)}.explodeEff:hover{outline-color:rgba(255,255,255,0);outline-offset:15px;text-shadow:1px 1px 2px #427388}.elementInfo.inScreen .goDetail-icon{display:none}.elementInfo.inScreen .close-icon{display:none}.elementInfo.inScreen .eConfig{left:270px}.elementInfo.inScreen .aName-w{top:75px}.elementInfo.inScreen .aSymbol-w{top:102px}.marker{position:absolute;background:rgba(255,255,255,0.18);padding:10px 20px;font-size:16px;color:#fff;height:42px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;text-shadow:1px 1px 2px #427388;z-index:31;cursor:pointer}.line{padding:0;margin:0;height:1px;background-color:#17d0f1;line-height:1px;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.infoPlanel{position:absolute;top:0;border:0;background:rgba(126,1,29,0.48);left:0;right:0;border-bottom:1px solid rgba(255,255,255,0.1);z-index:10;display:none}.g9 #stats{bottom:50px;top:auto !important}.infoPlanel .levels{border:1px solid rgba(255,255,255,0.14);height:30px;color:#fff}.infoPlanel .parent{clear:both;padding:2px;argin:0;display:inline-block;float:left}.infoPlanel .parent>*{float:left;padding:3px;border:1px solid rgba(255,255,255,0.08);color:#fff;font-size:12px;margin:0 5px;background:rgba(253,249,218,0.09);box-shadow:1px 1px 1px rgba(0,0,0,0.13)}.infoPlanel .parent .parentName{width:100px;background:0;text-transform:uppercase;border:0;text-align:center}.infoPlanel .parent .childs:hover{background:#3498db}.onoffswitch{position:relative;width:30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.onoffswitch-checkbox{display:none}.onoffswitch-label{display:block;overflow:hidden;cursor:pointer;height:16px;padding:0;line-height:16px;border:0 solid #ccc;border-radius:20px;background-color:#2584c5;margin:0}.onoffswitch-label:before{content:"";display:block;width:15px;margin:1px;background:#f1f1f1;position:absolute;top:0;bottom:0;right:13px;border-radius:24px}.onoffswitch-checkbox:checked+.onoffswitch-label{background-color:#0c67a5}.onoffswitch-checkbox:checked+.onoffswitch-label,.onoffswitch-checkbox:checked+.onoffswitch-label:before{border-color:#76bdec}.onoffswitch-checkbox:checked+.onoffswitch-label .onoffswitch-inner{margin-left:0}.onoffswitch-checkbox:checked+.onoffswitch-label:before{right:0;background-color:#fff}.controls{position:absolute;right:35px;top:35px;z-index:15;color:#fff;font-size:10px}.controls .onoffswitch{float:left;margin-right:5px}.controls .cntlrRow{clear:both;margin:10px 0}.shellInfo{display:none;opacity:1}.tableScreen .marker,.tableScreen .line,.tableScreen .closeAtomScreen,.tableScreen .eleInfo{display:none}.atomScreen .leftArr{position:absolute;left:0;top:35%;height:25%;background:rgba(255,255,255,0.1) url('chemistry/prev.svg') no-repeat 50%;width:50px;transition:all ease-out .5s;z-index:15;cursor:pointer;opacity:.5}.atomScreen .rightArr{position:absolute;right:0;top:35%;height:25%;width:50px;background:rgba(255,255,255,0.1) url('chemistry/next.svg') no-repeat 50%;z-index:15;transition:all ease-out .5s;cursor:pointer;opacity:.5}.atomScreen .leftArr:hover,.atomScreen .rightArr:hover{background-color:rgba(255,255,255,0.2);opacity:1}.loader{position:absolute;top:calc(50% - 32px);left:calc(50% - 32px);width:64px;height:64px;border-radius:50%;perspective:800px;z-index:10}.inner{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.inner.one{left:0;top:0;animation:rotate-one 1s linear infinite;border-bottom:3px solid #efeffa}.inner.two{right:0;top:0;animation:rotate-two 1s linear infinite;border-right:3px solid #efeffa}.inner.three{right:0;bottom:0;animation:rotate-three 1s linear infinite;border-top:3px solid #efeffa}@keyframes rotate-one{0{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@keyframes rotate-two{0{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@keyframes rotate-three{0{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}.loaderInfo{position:absolute;top:75px;width:160px;font-size:12px;color:rgba(255,255,255,0.81);left:-46px;padding:0;margin:0}[data-title]{position:relative;z-index:2;cursor:pointer}[data-title]:before,[data-title]:after{visibility:hidden;opacity:0;pointer-events:none}[data-title]:before{position:absolute;bottom:150%;left:50%;margin-bottom:5px;margin-left:-80px;padding:7px;width:160px;border-radius:3px;background-color:#3498db;color:#fff;content:attr(data-title);text-align:center;font-size:12px;line-height:1.2}[data-title]:after{position:absolute;bottom:153%;left:50%;margin-left:-5px;z-index:width:0;border-top:5px solid #3498db;border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}[data-title]:hover:before,[data-title]:hover:after{visibility:visible;opacity:1}.g9-footer{background:rgba(0,0,0,0.3);opacity:0;transition:all ease-out 100ms;position:absolute}.g9-footer.show{opacity:.6}.g9-footer:hover{opacity:1}.g9-footer .devInfo{color:#fff;width:32px;height:32px;background:#1b95e0 url('chemistry/info.svg') no-repeat 0 0;transition:all ease-out .5s;position:absolute;top:0;opacity:1;cursor:pointer;left:0}.atomScreen .g9-footer .devInfo{background-color:#a90329}.atomScreen .g9-footer .devInfo:hover .myInfo{background:#a90329}.atomScreen .g9-footer{opacity:1}.g9-footer .devInfo>*{display:none}.g9-footer .devInfo:hover .myInfo{display:block;position:absolute;width:125px;height:60px;top:-60px;background:#3498db;padding:20px 10px;font-size:11px}.g9-footer .devInfo:hover .myInfo a,.homeLink a{color:#FFF;font-size:11px;text-decoration:underline}.g9-footer .devInfo:hover .myInfo p{margin:0}.g9-footer .devInfo .myInfo h2{font-size:11px;padding:0 5px;margin:0}.homeLink{float:right;text-align:center;font-size:10px;color:#fff;padding:4px}.myInfo-mobile{display:none}.shareBtns{float:right}.shareBtns>*{float:left;margin:0 10px 0 0}.infoAtomModel{position:absolute;z-index:15;display:none;right:0;top:85px;padding:10px;transition:all ease-out .5s}.atomScreen .infoAtomModel{display:block}.infoAtomModel .infoIcon{width:32px;height:32px;background:#1b95e0 url('chemistry/info.svg') no-repeat 0 0;float:right;position:relative;right:146px}.infoAtomModel h2{font-size:12px;color:#fff;width:500px;text-align:justify;margin:0;padding:0;display:none;clear:both}.infoAtomModel:hover h2{display:block}.infoAtomModel a{color:white;text-decoration:underline}</style></head><body class="production">    <div class="graphWrapper"><div class="canvas"><div class="graphCanvas fullscreen g9"><div class="loader"><h1 data-title="3D periodic table" class="loaderInfo">Periodic Table of Elements</h1><div class="inner one"></div><div class="inner two"></div><div class="inner three"></div></div> <atricle class="infoAtomModel"><div class="infoIcon"></div><h2>This is a representation of <a href="https://en.wikipedia.org/wiki/Bohr_model" target="_blank"> Bohr model of atom</a>. This model was proposed by Niels Bohr in 1915; it is not completely correct, but it has many features that are approximately correct and it is sufficient for a general understanding. Also in this representation I am rotating the electrons in 2D plane , that is also not correct to Bhor model , actual Bhor model suggests the electron path in 3D space. The 2D representation is just for simplicity.</h2> </atricle> <atticle class="footer g9-footer"><div class="devInfo"><div class="myInfo"><p>&copy; by <a target="_blank" href="https://huu.vn/">Hữu Lương</a></p></div><div class="myInfo-mobile"><p>&copy; by <a target="_blank" href="https://huu.vn/">Hữu Lương</a></p></div></div> </atticle></div></div></div><script>var require={baseUrl:"./js"};!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document){throw Error("jQuery requires a window with a document")}return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=q.type(a);return"function"===c||q.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&0<b&&b-1 in a}function d(a,b,c){if(q.isFunction(b)){return q.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return q.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(Za.test(b)){return q.filter(b,a,c)}b=q.filter(b,a)}return q.grep(a,function(a){return 0<=sa.call(b,a)!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;){}return a}function g(a){var b=ua[a]={};return q.each(a.match(W)||[],function(a,c){b[c]=!0}),b}function h(){ha.removeEventListener("DOMContentLoaded",h,!1);a.removeEventListener("load",h,!1);q.ready()}function k(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=q.expando+Math.random()}function l(a,b,c){var d;if(void 0===c&&1===a.nodeType){if(d="data-"+b.replace(sb,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:cb.test(c)?q.parseJSON(c):c}catch(e){}ia.set(a,b,c)}else{c=void 0}}return c}function f(){return !0}function n(){return !1}function r(){try{return ha.activeElement}catch(a){}}function v(a,b){return q.nodeName(a,"table")&&q.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function m(a){var b=Ea.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function u(a,b){for(var c=0,d=a.length;d>c;c++){P.set(a[c],"globalEval",!b||P.get(b[c],"globalEval"))}}function A(a,b){var c,d,e,g,f,h;if(1===b.nodeType){if(P.hasData(a)&&(c=P.access(a),d=P.set(b,c),h=c.events)){for(e in delete d.handle,d.events={},h){for(c=0,d=h[e].length;d>c;c++){q.event.add(b,e,h[e][c])}}}ia.hasData(a)&&(g=ia.access(a),f=q.extend({},g),ia.set(b,f))}}function w(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&q.nodeName(a,b)?q.merge([a],c):c}function p(b,c){var d,e=q(c.createElement(b)).appendTo(c.body),g=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:q.css(e[0],"display");return e.detach(),g}function B(a){var b=ha,c=kb[a];return c||(c=p(a,b),"none"!==c&&c||(wa=(wa||q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=p(a,b),wa.detach()),kb[a]=c),c}function F(a,b,c){var d,e,g,f,h=a.style;return c=c||La(a),c&&(f=c.getPropertyValue(b)||c[b]),c&&(""!==f||q.contains(a.ownerDocument,a)||(f=q.style(a,b)),Ob.test(f)&&tb.test(b)&&(d=h.width,e=h.minWidth,g=h.maxWidth,h.minWidth=h.maxWidth=h.width=f,f=c.width,h.width=d,h.minWidth=e,h.maxWidth=g)),void 0!==f?f+"":f}function x(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function C(a,b){if(b in a){return b}for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=yc.length;e--;){if(b=yc[e]+c,b in a){return b}}return d}function E(a,b,c){return(a=oc.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function D(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var g=0;4>b;b+=2){"margin"===c&&(g+=q.css(a,c+Da[b],!0,e)),d?("content"===c&&(g-=q.css(a,"padding"+Da[b],!0,e)),"margin"!==c&&(g-=q.css(a,"border"+Da[b]+"Width",!0,e))):(g+=q.css(a,"padding"+Da[b],!0,e),"padding"!==c&&(g+=q.css(a,"border"+Da[b]+"Width",!0,e)))}return g}function H(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,g=La(a),f="border-box"===q.css(a,"boxSizing",!1,g);if(0>=e||null==e){if(e=F(a,b,g),(0>e||null==e)&&(e=a.style[b]),Ob.test(e)){return e}d=f&&(ga.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||0}return e+D(a,b,c||(f?"border":"content"),d,g)+"px"}function I(a,b){for(var c,d,e,g=[],f=0,h=a.length;h>f;f++){d=a[f],d.style&&(g[f]=P.get(d,"olddisplay"),c=d.style.display,b?(g[f]||"none"!==c||(d.style.display=""),""===d.style.display&&z(d)&&(g[f]=P.access(d,"olddisplay",B(d.nodeName)))):(e=z(d),"none"===c&&e||P.set(d,"olddisplay",e?c:q.css(d,"display"))))}for(f=0;h>f;f++){d=a[f],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?g[f]||"":"none"))}return a}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function M(){return setTimeout(function(){Pb=void 0}),Pb=q.now()}function L(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b){c=Da[d],e["margin"+c]=e["padding"+c]=a}return b&&(e.opacity=e.width=a),e}function R(a,b,c){for(var d,e=(Qb[b]||[]).concat(Qb["*"]),g=0,f=e.length;f>g;g++){if(d=e[g].call(c,b,a)){return d}}}function N(a,b){var c,d,e,g,f;for(c in a){if(d=q.camelCase(c),e=b[d],g=a[c],q.isArray(g)&&(e=g[1],g=a[c]=g[0]),c!==d&&(a[d]=g,delete a[c]),f=q.cssHooks[d],f&&"expand" in f){for(c in g=f.expand(g),delete a[d],g){c in a||(a[c]=g[c],b[c]=e)}}else{b[d]=e}}}function S(a,b,c){var d,e=0,g=Rb.length,f=q.Deferred().always(function(){delete h.elem}),h=function(){if(d){return !1}for(var b=Pb||M(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),e=0,g=k.tweens.length;g>e;e++){k.tweens[e].run(c)}return f.notifyWith(a,[k,c,b]),1>c&&g?b:(f.resolveWith(a,[k]),!1)},k=f.promise({elem:a,props:q.extend({},b),opts:q.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Pb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=q.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);return k.tweens.push(d),d},stop:function(b){var c=0,e=b?k.tweens.length:0;if(d){return this}for(d=!0;e>c;c++){k.tweens[c].run(1)}return b?f.resolveWith(a,[k,b]):f.rejectWith(a,[k,b]),this}});c=k.props;for(N(c,k.opts.specialEasing);g>e;e++){if(b=Rb[e].call(k,a,c,k.opts)){return b}}return q.map(c,R,k),q.isFunction(k.opts.start)&&k.opts.start.call(a,k),q.fx.timer(q.extend(h,{elem:a,anim:k,queue:k.opts.queue})),k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,g=b.toLowerCase().match(W)||[];if(q.isFunction(c)){for(;d=g[e++];){"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Q(a,b,c,d){function e(h){var k;return g[h]=!0,q.each(a[h]||[],function(a,h){var da=h(b,c,d);return"string"!=typeof da||f||g[da]?f?!(k=da):void 0:(b.dataTypes.unshift(da),e(da),!1)}),k}var g={},f=a===cc;return e(b.dataTypes[0])||!g["*"]&&e("*")}function X(a,b){var c,d,e=q.ajaxSettings.flatOptions||{};for(c in b){void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c])}return d&&q.extend(!0,a,d),a}function U(a,b,c,d){var e;if(q.isArray(b)){q.each(b,function(b,e){c||Mc.test(a)?d(a,e):U(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==q.type(b)){d(a,b)}else{for(e in b){U(a+"["+e+"]",b[e],c,d)}}}}function Y(a){return q.isWindow(a)?a:9===a.nodeType&&a.defaultView}var O=[],ra=O.slice,la=O.concat,oa=O.push,sa=O.indexOf,xa={},ta=xa.toString,ya=xa.hasOwnProperty,ga={},ha=a.document,q=function(a,b){return new q.fn.init(a,b)},Cb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ga=/^-ms-/,Db=/-([\da-z])/gi,lb=function(a,b){return b.toUpperCase()};q.fn=q.prototype={jquery:"2.1.1",constructor:q,selector:"",length:0,toArray:function(){return ra.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ra.call(this)},pushStack:function(a){a=q.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a,b){return q.each(this,a,b)},map:function(a){return this.pushStack(q.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ra.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:oa,sort:O.sort,splice:O.splice};q.extend=q.fn.extend=function(){var a,b,c,d,e,g,f=arguments[0]||{},h=1,k=arguments.length,m=!1;"boolean"==typeof f&&(m=f,f=arguments[h]||{},h++);"object"==typeof f||q.isFunction(f)||(f={});for(h===k&&(f=this,h--);k>h;h++){if(null!=(a=arguments[h])){for(b in a){c=f[b],d=a[b],f!==d&&(m&&d&&(q.isPlainObject(d)||(e=q.isArray(d)))?(e?(e=!1,g=c&&q.isArray(c)?c:[]):g=c&&q.isPlainObject(c)?c:{},f[b]=q.extend(m,g,d)):void 0!==d&&(f[b]=d))}}}return f};q.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a)},noop:function(){},isFunction:function(a){return"function"===q.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return !q.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==q.type(a)||a.nodeType||q.isWindow(a)?!1:a.constructor&&!ya.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a){return !1}return !0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?xa[ta.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;(a=q.trim(a))&&(1===a.indexOf("use strict")?(b=ha.createElement("script"),b.text=a,ha.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(Ga,"ms-").replace(Db,lb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,g=0,f=a.length,h=c(a);if(d){if(h){for(;f>g&&(e=b.apply(a[g],d),!1!==e);g++){}}else{for(g in a){if(e=b.apply(a[g],d),!1===e){break}}}}else{if(h){for(;f>g&&(e=b.call(a[g],g,a[g]),!1!==e);g++){}}else{for(g in a){if(e=b.call(a[g],g,a[g]),!1===e){break}}}}return a},trim:function(a){return null==a?"":(a+"").replace(Cb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?q.merge(d,"string"==typeof a?[a]:a):oa.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:sa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++){a[e++]=b[d]}return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,g=a.length,f=!c;g>e;e++){c=!b(a[e],e),c!==f&&d.push(a[e])}return d},map:function(a,b,d){var e,g=0,f=a.length,h=[];if(c(a)){for(;f>g;g++){e=b(a[g],g,d),null!=e&&h.push(e)}}else{for(g in a){e=b(a[g],g,d),null!=e&&h.push(e)}}return la.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),q.isFunction(a)?(d=ra.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ra.call(arguments)))},e.guid=a.guid=a.guid||q.guid++,e):void 0},now:Date.now,support:ga});q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){xa["[object "+b+"]"]=b.toLowerCase()});var Ba=function(a){function b(a,c,d,e){var g,f,h,k,da;if((c?c.ownerDocument||c:M)!==K&&Q(c),c=c||K,d=d||[],!a||"string"!=typeof a){return d}if(1!==(k=c.nodeType)&&9!==k){return[]}if(wa&&!e){if(g=Z.exec(a)){if(h=g[1]){if(9===k){if(f=c.getElementById(h),!f||!f.parentNode){return d}if(f.id===h){return d.push(f),d}}else{if(c.ownerDocument&&(f=c.ownerDocument.getElementById(h))&&X(c,f)&&f.id===h){return d.push(f),d}}}else{if(g[2]){return T.apply(d,c.getElementsByTagName(a)),d}if((h=g[3])&&C.getElementsByClassName&&c.getElementsByClassName){return T.apply(d,c.getElementsByClassName(h)),d}}}if(C.qsa&&(!ma||!ma.test(a))){if(f=g=J,h=c,da=9===k&&a,1===k&&"object"!==c.nodeName.toLowerCase()){k=Ea(a);(g=c.getAttribute("id"))?f=g.replace(ya,"\\$&"):c.setAttribute("id",f);f="[id='"+f+"'] ";for(h=k.length;h--;){k[h]=f+n(k[h])}h=ga.test(a)&&l(c.parentNode)||c;da=k.join(",")}if(da){try{return T.apply(d,h.querySelectorAll(da)),d}catch(m){}finally{g||c.removeAttribute("id")}}}}return D(a.replace(Ha,"$1"),c,d,e)}function c(){function a(c,d){return b.push(c+" ")>t.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[J]=!0,a}function e(a){var b=K.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;){t.attrHandle[c[d]]=b}}function f(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d){return d}if(c){for(;c=c.nextSibling;){if(c===b){return -1}}}return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function m(a){return d(function(b){return b=+b,d(function(c,d){for(var e,g=a([],c.length,b),f=g.length;f--;){c[e=g[f]]&&(c[e]=!(d[e]=c[e]))}})})}function l(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function p(){}function n(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function B(a,b,c){var d=b.dir,e=c&&"parentNode"===d,g=L++;return b.first?function(b,c,g){for(;b=b[d];){if(1===b.nodeType||e){return a(b,c,g)}}}:function(b,c,f){var h,k,da=[La,g];if(f){for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,f)){return !0}}}else{for(;b=b[d];){if(1===b.nodeType||e){if(k=b[J]||(b[J]={}),(h=k[d])&&h[0]===La&&h[1]===g){return da[2]=h[2]}if(k[d]=da,da[2]=a(b,c,f)){return !0}}}}}}function u(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function q(a,b,c,d,e){for(var g,f=[],h=0,k=a.length,da=null!=b;k>h;h++){(g=a[h])&&(!c||c(g,d,e))&&(f.push(g),da&&b.push(h))}return f}function x(a,c,e,g,f,h){return g&&!g[J]&&(g=x(g)),f&&!f[J]&&(f=x(f,h)),d(function(d,h,k,da){var m,l,p=[],n=[],B=h.length,u;if(!(u=d)){u=c||"*";for(var x=k.nodeType?[k]:k,w=[],r=0,C=x.length;C>r;r++){b(u,x[r],w)}u=w}u=!a||!d&&c?u:q(u,p,a,k,da);x=e?f||(d?a:B||g)?[]:h:u;if(e&&e(u,x,k,da),g){for(m=q(x,n),g(m,[],k,da),k=m.length;k--;){(l=m[k])&&(x[n[k]]=!(u[n[k]]=l))}}if(d){if(f||a){if(f){m=[];for(k=x.length;k--;){(l=x[k])&&m.push(u[k]=l)}f(null,x=[],m,da)}for(k=x.length;k--;){(l=x[k])&&-1<(m=f?sa.call(d,l):p[k])&&(d[m]=!(h[m]=l))}}}else{x=q(x===h?x.splice(B,x.length):x),f?f(null,h,x,da):T.apply(h,x)}})}function w(a){var b,c,d,e=a.length,g=t.relative[a[0].type];c=g||t.relative[" "];for(var f=g?1:0,h=B(function(a){return a===b},c,!0),k=B(function(a){return -1<sa.call(b,a)},c,!0),da=[function(a,c,d){return !g&&(d||c!==z)||((b=c).nodeType?h(a,c,d):k(a,c,d))}];e>f;f++){if(c=t.relative[a[f].type]){da=[B(u(da),c)]}else{if(c=t.filter[a[f].type].apply(null,a[f].matches),c[J]){for(d=++f;e>d&&!t.relative[a[d].type];d++){}return x(1<f&&u(da),1<f&&n(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace(Ha,"$1"),c,d>f&&w(a.slice(f,d)),e>d&&w(a=a.slice(d)),e>d&&n(a))}da.push(c)}}return u(da)}function r(a,c){var e=0<c.length,g=0<a.length,f=function(d,f,h,k,da){var m,l,p,n=0,u="0",B=d&&[],x=[],w=z,r=d||g&&t.find.TAG("*",da),C=La+=null==w?1:Math.random()||0.1,A=r.length;for(da&&(z=f!==K&&f);u!==A&&null!=(m=r[u]);u++){if(g&&m){for(l=0;p=a[l++];){if(p(m,f,h)){k.push(m);break}}da&&(La=C)}e&&((m=!p&&m)&&n--,d&&B.push(m))}if(n+=u,e&&u!==n){for(l=0;p=c[l++];){p(B,x,f,h)}if(d){if(0<n){for(;u--;){B[u]||x[u]||(x[u]=Hb.call(k))}}x=q(x)}T.apply(k,x);da&&!d&&0<x.length&&1<n+c.length&&b.uniqueSort(k)}return da&&(La=C,z=w),B};return e?d(f):f}var A,C,t,v,F,Ea,E,D,z,H,I,Q,K,ja,wa,ma,Pa,U,X,J="sizzle"+-new Date,M=a.document,La=0,L=0,ra=c(),ka=c(),Da=c(),Y=function(a,b){return a===b&&(I=!0),0},N={}.hasOwnProperty,R=[],Hb=R.pop,O=R.push,T=R.push,S=R.slice,sa=R.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},la="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),kb="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+la+"))|)[\\x20\\t\\r\\n\\f]*\\]",oa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+kb+")*)|.*)\\)|)",Ha=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Ob=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,P=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,pa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,oc=new RegExp(oa),ta=new RegExp("^"+la+"$"),tb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+kb),PSEUDO:new RegExp("^"+oa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},W=/^(?:input|select|textarea|button)$/i,ha=/^h\d$/i,xa=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ga=/[+~]/,ya=/'|\\/g,ab=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,$a=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)};try{T.apply(R=S.call(M.childNodes),M.childNodes),R[M.childNodes.length].nodeType}catch(ue){T={apply:R.length?function(a,b){O.apply(a,S.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];){}a.length=c-1}}}C=b.support={};F=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Q=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:M;a=c.defaultView;return c!==K&&9===c.nodeType&&c.documentElement?(K=c,ja=c.documentElement,wa=!F(c),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){Q()},!1):a.attachEvent&&a.attachEvent("onunload",function(){Q()})),C.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),C.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),C.getElementsByClassName=xa.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),C.getById=e(function(a){return ja.appendChild(a).id=J,!c.getElementsByName||!c.getElementsByName(J).length}),C.getById?(t.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&wa){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},t.filter.ID=function(a){var b=a.replace(ab,$a);return function(a){return a.getAttribute("id")===b}}):(delete t.find.ID,t.filter.ID=function(a){var b=a.replace(ab,$a);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}}),t.find.TAG=C.getElementsByTagName?function(a,b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,g=b.getElementsByTagName(a);if("*"===a){for(;c=g[e++];){1===c.nodeType&&d.push(c)}return d}return g},t.find.CLASS=C.getElementsByClassName&&function(a,b){return"undefined"!==typeof b.getElementsByClassName&&wa?b.getElementsByClassName(a):void 0},Pa=[],ma=[],(C.qsa=xa.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&ma.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||ma.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||ma.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&ma.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||ma.push(":enabled",":disabled");a.querySelectorAll("*,:x");ma.push(",.*:")})),(C.matchesSelector=xa.test(U=ja.matches||ja.webkitMatchesSelector||ja.mozMatchesSelector||ja.oMatchesSelector||ja.msMatchesSelector))&&e(function(a){C.disconnectedMatch=U.call(a,"div");U.call(a,"[s!='']:x");Pa.push("!=",oa)}),ma=ma.length&&new RegExp(ma.join("|")),Pa=Pa.length&&new RegExp(Pa.join("|")),b=xa.test(ja.compareDocumentPosition),X=b||xa.test(ja.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){for(;b=b.parentNode;){if(b===a){return !0}}}return !1},Y=b?function(a,b){if(a===b){return I=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!C.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===M&&X(M,a)?-1:b===c||b.ownerDocument===M&&X(M,b)?1:H?sa.call(H,a)-sa.call(H,b):0:4&d?-1:1)}:function(a,b){if(a===b){return I=!0,0}var d,e=0;d=a.parentNode;var g=b.parentNode,h=[a],k=[b];if(!d||!g){return a===c?-1:b===c?1:d?-1:g?1:H?sa.call(H,a)-sa.call(H,b):0}if(d===g){return f(a,b)}for(d=a;d=d.parentNode;){h.unshift(d)}for(d=b;d=d.parentNode;){k.unshift(d)}for(;h[e]===k[e];){e++}return e?f(h[e],k[e]):h[e]===M?-1:k[e]===M?1:0},c):K};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==K&&Q(a),c=c.replace(pa,"='$1']"),!(!C.matchesSelector||!wa||Pa&&Pa.test(c)||ma&&ma.test(c))){try{var d=U.call(a,c);if(d||C.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return 0<b(c,K,null,[a]).length};b.contains=function(a,b){return(a.ownerDocument||a)!==K&&Q(a),X(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==K&&Q(a);var c=t.attrHandle[b.toLowerCase()],c=c&&N.call(t.attrHandle,b.toLowerCase())?c(a,b,!wa):void 0;return void 0!==c?c:C.attributes||!wa?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)};b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(I=!C.detectDuplicates,H=!C.sortStable&&a.slice(0),a.sort(Y),I){for(;b=a[e++];){b===a[e]&&(d=c.push(e))}for(;d--;){a.splice(c[d],1)}}return H=null,a};v=b.getText=function(a){var b,c="",d=0;if(b=a.nodeType){if(1===b||9===b||11===b){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=v(a)}}else{if(3===b||4===b){return a.nodeValue}}}else{for(;b=a[d++];){c+=v(b)}}return c};t=b.selectors={cacheLength:50,createPseudo:d,match:tb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,$a),a[3]=(a[3]||a[4]||a[5]||"").replace(ab,$a),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return tb.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&oc.test(c)&&(b=Ea(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,$a).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ra[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ra(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,d){return function(e){e=b.attr(e,a);return null==e?"!="===c:c?(e+="","="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var g="nth"!==a.slice(0,3),f="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,k){var da,m,l,p,n;c=g!==f?"nextSibling":"previousSibling";var u=b.parentNode,B=h&&b.nodeName.toLowerCase();k=!k&&!h;if(u){if(g){for(;c;){for(m=b;m=m[c];){if(h?m.nodeName.toLowerCase()===B:1===m.nodeType){return !1}}n=c="only"===a&&!n&&"nextSibling"}return !0}if(n=[f?u.firstChild:u.lastChild],f&&k){for(k=u[J]||(u[J]={}),da=k[a]||[],p=da[0]===La&&da[1],l=da[0]===La&&da[2],m=p&&u.childNodes[p];m=++p&&m&&m[c]||(l=p=0)||n.pop();){if(1===m.nodeType&&++l&&m===b){k[a]=[La,p,l];break}}}else{if(k&&(da=(b[J]||(b[J]={}))[a])&&da[0]===La){l=da[1]}else{for(;(m=++p&&m&&m[c]||(l=p=0)||n.pop())&&((h?m.nodeName.toLowerCase()!==B:1!==m.nodeType)||!++l||(k&&((m[J]||(m[J]={}))[a]=[La,l]),m!==b));){}}}return l-=e,l===d||0===l%d&&0<=l/d}}},PSEUDO:function(a,c){var e,g=t.pseudos[a]||t.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return g[J]?g(c):1<g.length?(e=[a,a,"",c],t.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=g(a,c),f=e.length;f--;){d=sa.call(a,e[f]),a[d]=!(b[d]=e[f])}}):function(a){return g(a,0,e)}):g}},pseudos:{not:d(function(a){var b=[],c=[],e=E(a.replace(Ha,"$1"));return e[J]?d(function(a,b,c,d){var g;c=e(a,null,d,[]);for(d=a.length;d--;){(g=c[d])&&(a[d]=!(b[d]=g))}}):function(a,d,g){return b[0]=a,e(b,null,g,c),!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return -1<(b.textContent||b.innerText||v(b)).indexOf(a)}}),lang:d(function(a){return ta.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ab,$a).toLowerCase(),function(b){var c;do{if(c=wa?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===ja},focus:function(a){return a===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return !1===a.disabled},disabled:function(a){return !0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(6>a.nodeType){return !1}}return !0},parent:function(a){return !t.pseudos.empty(a)},header:function(a){return ha.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[0>c?c+b:c]}),even:m(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:m(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:m(function(a,b,c){for(b=0>c?c+b:c;0<=--b;){a.push(b)}return a}),gt:m(function(a,b,c){for(c=0>c?c+b:c;++c<b;){a.push(c)}return a})}};t.pseudos.nth=t.pseudos.eq;for(A in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){t.pseudos[A]=h(A)}for(A in {submit:!0,reset:!0}){t.pseudos[A]=k(A)}p.prototype=t.filters=t.pseudos;t.setFilters=new p;Ea=b.tokenize=function(a,c){var d,e,g,f,h,k,da;if(h=ka[a+" "]){return c?0:h.slice(0)}h=a;k=[];for(da=t.preFilter;h;){d&&!(e=Ob.exec(h))||(e&&(h=h.slice(e[0].length)||h),k.push(g=[]));d=!1;(e=P.exec(h))&&(d=e.shift(),g.push({value:d,type:e[0].replace(Ha," ")}),h=h.slice(d.length));for(f in t.filter){!(e=tb[f].exec(h))||da[f]&&!(e=da[f](e))||(d=e.shift(),g.push({value:d,type:f,matches:e}),h=h.slice(d.length))}if(!d){break}}return c?h.length:h?b.error(a):ka(a,k).slice(0)};return E=b.compile=function(a,b){var c,d=[],e=[],g=Da[a+" "];if(!g){b||(b=Ea(a));for(c=b.length;c--;){g=w(b[c]),g[J]?d.push(g):e.push(g)}g=Da(a,r(e,d));g.selector=a}return g},D=b.select=function(a,b,c,d){var e,g,f,h,k,da="function"==typeof a&&a,m=!d&&Ea(a=da.selector||a);if(c=c||[],1===m.length){if(g=m[0]=m[0].slice(0),2<g.length&&"ID"===(f=g[0]).type&&C.getById&&9===b.nodeType&&wa&&t.relative[g[1].type]){if(b=(t.find.ID(f.matches[0].replace(ab,$a),b)||[])[0],!b){return c}da&&(b=b.parentNode);a=a.slice(g.shift().value.length)}for(e=tb.needsContext.test(a)?0:g.length;e--&&(f=g[e],!t.relative[h=f.type]);){if((k=t.find[h])&&(d=k(f.matches[0].replace(ab,$a),ga.test(g[0].type)&&l(b.parentNode)||b))){if(g.splice(e,1),a=d.length&&n(g),!a){return T.apply(c,d),c}break}}}return(da||E(a,m))(d,b,!wa,c,ga.test(a)&&l(b.parentNode)||b),c},C.sortStable=J.split("").sort(Y).join("")===J,C.detectDuplicates=!!I,Q(),C.sortDetached=e(function(a){return 1&a.compareDocumentPosition(K.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),C.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);q.find=Ba;q.expr=Ba.selectors;q.expr[":"]=q.expr.pseudos;q.unique=Ba.uniqueSort;q.text=Ba.getText;q.isXMLDoc=Ba.isXML;q.contains=Ba.contains;var eb=q.expr.match.needsContext,Qa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Za=/^.[^:#\[\.,]*$/;q.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?q.find.matchesSelector(d,a)?[d]:[]:q.find.matches(a,q.grep(b,function(a){return 1===a.nodeType}))};q.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a){return this.pushStack(q(a).filter(function(){for(b=0;c>b;b++){if(q.contains(e[b],this)){return !0}}}))}for(b=0;c>b;b++){q.find(a,e[b],d)}return d=this.pushStack(1<c?q.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return !!d(this,"string"==typeof a&&eb.test(a)?q(a):a||[],!1).length}});var fa,Oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(q.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Oa.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||fa).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof q?b[0]:b,q.merge(this,q.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ha,!0)),Qa.test(c[1])&&q.isPlainObject(b)){for(c in b){q.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}return d=ha.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=ha,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):q.isFunction(a)?"undefined"!=typeof fa.ready?fa.ready(a):a(q):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),q.makeArray(a,this))}).prototype=q.fn;fa=q(ha);var Ra=/^(?:parents|prev(?:Until|All))/,ba={children:!0,contents:!0,next:!0,prev:!0};q.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;){if(1===a.nodeType){if(e&&q(a).is(c)){break}d.push(a)}}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}});q.fn.extend({has:function(a){var b=q(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++){if(q.contains(this,b[a])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,g=[],f=eb.test(a)||"string"!=typeof a?q(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&q.find.matchesSelector(c,a))){g.push(c);break}}}return this.pushStack(1<g.length?q.unique(g):g)},index:function(a){return a?"string"==typeof a?sa.call(q(a),this[0]):sa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(q.unique(q.merge(this.get(),q(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});q.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return q.dir(a,"parentNode")},parentsUntil:function(a,b,c){return q.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return q.dir(a,"nextSibling")},prevAll:function(a){return q.dir(a,"previousSibling")},nextUntil:function(a,b,c){return q.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return q.dir(a,"previousSibling",c)},siblings:function(a){return q.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return q.sibling(a.firstChild)},contents:function(a){return a.contentDocument||q.merge([],a.childNodes)}},function(a,b){q.fn[a]=function(c,d){var e=q.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=q.filter(d,e)),1<this.length&&(ba[a]||q.unique(e),Ra.test(a)&&e.reverse()),this.pushStack(e)}});var W=/\S+/g,ua={};q.Callbacks=function(a){a="string"==typeof a?ua[a]||g(a):q.extend({},a);var b,c,d,e,f,h,k=[],m=!a.once&&[],l=function(g){b=a.memory&&g;c=!0;h=e||0;e=0;f=k.length;for(d=!0;k&&f>h;h++){if(!1===k[h].apply(g[0],g[1])&&a.stopOnFalse){b=!1;break}}d=!1;k&&(m?m.length&&l(m.shift()):b?k=[]:p.disable())},p={add:function(){if(k){var c=k.length;!function Bc(b){q.each(b,function(b,c){var d=q.type(c);"function"===d?a.unique&&p.has(c)||k.push(c):c&&c.length&&"string"!==d&&Bc(c)})}(arguments);d?f=k.length:b&&(e=c,l(b))}return this},remove:function(){return k&&q.each(arguments,function(a,b){for(var c;-1<(c=q.inArray(b,k,c));){k.splice(c,1),d&&(f>=c&&f--,h>=c&&h--)}}),this},has:function(a){return a?-1<q.inArray(a,k):!(!k||!k.length)},empty:function(){return k=[],f=0,this},disable:function(){return k=m=b=void 0,this},disabled:function(){return !k},lock:function(){return m=void 0,b||p.disable(),this},locked:function(){return !m},fireWith:function(a,b){return !k||c&&!m||(b=b||[],b=[a,b.slice?b.slice():b],d?m.push(b):l(b)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return !!c}};return p};q.extend({Deferred:function(a){var b=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return q.Deferred(function(c){q.each(b,function(b,g){var f=q.isFunction(a[b])&&a[b];e[g[1]](function(){var a=f&&f.apply(this,arguments);a&&q.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g[0]+"With"](this===d?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?q.extend(a,d):d}},e={};return d.pipe=d.then,q.each(b,function(a,g){var f=g[2],h=g[3];d[g[1]]=f.add;h&&f.add(function(){c=h},b[1^a][2].disable,b[2][2].lock);e[g[0]]=function(){return e[g[0]+"With"](this===e?d:this,arguments),this};e[g[0]+"With"]=f.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=ra.call(arguments),d=c.length,e=1!==d||a&&q.isFunction(a.promise)?d:0,g=1===e?a:q.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?ra.call(arguments):d;c===h?g.notifyWith(b,c):--e||g.resolveWith(b,c)}},h,k,m;if(1<d){for(h=Array(d),k=Array(d),m=Array(d);d>b;b++){c[b]&&q.isFunction(c[b].promise)?c[b].promise().done(f(b,m,c)).fail(g.reject).progress(f(b,k,h)):--e}}return e||g.resolveWith(m,c),g.promise()}});var Sa;q.fn.ready=function(a){return q.ready.promise().done(a),this};q.extend({isReady:!1,readyWait:1,holdReady:function(a){a?q.readyWait++:q.ready(!0)},ready:function(a){(!0===a?--q.readyWait:q.isReady)||(q.isReady=!0,!0!==a&&0<--q.readyWait||(Sa.resolveWith(ha,[q]),q.fn.triggerHandler&&(q(ha).triggerHandler("ready"),q(ha).off("ready"))))}});q.ready.promise=function(b){return Sa||(Sa=q.Deferred(),"complete"===ha.readyState?setTimeout(q.ready):(ha.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1))),Sa.promise(b)};q.ready.promise();var za=q.access=function(a,b,c,d,e,g,f){var h=0,k=a.length,m=null==c;if("object"===q.type(c)){for(h in e=!0,c){q.access(a,b,h,c[h],!0,g,f)}}else{if(void 0!==d&&(e=!0,q.isFunction(d)||(f=!0),m&&(f?(b.call(a,d),b=null):(m=b,b=function(a,b,c){return m.call(q(a),c)})),b)){for(;k>h;h++){b(a[h],c,f?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:m?b.call(a):k?b(a[0],c):g};q.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};k.uid=1;k.accepts=q.acceptData;k.prototype={key:function(a){if(!k.accepts(a)){return 0}var b={},c=a[this.expando];if(!c){c=k.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,q.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d;a=this.key(a);var e=this.cache[a];if("string"==typeof b){e[b]=c}else{if(q.isEmptyObject(e)){q.extend(this.cache[a],b)}else{for(d in b){e[d]=b[d]}}}return e},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,q.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e=this.key(a),g=this.cache[e];if(void 0===b){this.cache[e]={}}else{for(q.isArray(b)?d=b.concat(b.map(q.camelCase)):(c=q.camelCase(b),b in g?d=[b,c]:(d=c,d=d in g?[d]:d.match(W)||[])),c=d.length;c--;){delete g[d[c]]}}},hasData:function(a){return !q.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var P=new k,ia=new k,cb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,sb=/([A-Z])/g;q.extend({hasData:function(a){return ia.hasData(a)||P.hasData(a)},data:function(a,b,c){return ia.access(a,b,c)},removeData:function(a,b){ia.remove(a,b)},_data:function(a,b,c){return P.access(a,b,c)},_removeData:function(a,b){P.remove(a,b)}});q.fn.extend({data:function(a,b){var c,d,e,g=this[0],f=g&&g.attributes;if(void 0===a){if(this.length&&(e=ia.get(g),1===g.nodeType&&!P.get(g,"hasDataAttrs"))){for(c=f.length;c--;){f[c]&&(d=f[c].name,0===d.indexOf("data-")&&(d=q.camelCase(d.slice(5)),l(g,d,e[d])))}P.set(g,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ia.set(this,a)}):za(this,function(b){var c,d=q.camelCase(a);if(g&&void 0===b){if((c=ia.get(g,a),void 0!==c)||(c=ia.get(g,d),void 0!==c)||(c=l(g,d,void 0),void 0!==c)){return c}}else{this.each(function(){var c=ia.get(this,d);ia.set(this,d,b);-1!==a.indexOf("-")&&void 0!==c&&ia.set(this,a,b)})}},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){ia.remove(this,a)})}});q.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=P.get(a,b),c&&(!d||q.isArray(c)?d=P.access(a,b,q.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=q.queue(a,b),d=c.length,e=c.shift(),g=q._queueHooks(a,b),f=function(){q.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete g.stop,e.call(a,f,g));!d&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return P.get(a,c)||P.access(a,c,{empty:q.Callbacks("once memory").add(function(){P.remove(a,[b+"queue",c])})})}});q.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?q.queue(this[0],a):void 0===b?this:this.each(function(){var c=q.queue(this,a,b);q._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&q.dequeue(this,a)})},dequeue:function(a){return this.each(function(){q.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=q.Deferred(),g=this,f=this.length,h=function(){--d||e.resolveWith(g,[g])};"string"!=typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;){(c=P.get(g[f],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var ma=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Da=["Top","Right","Bottom","Left"],z=function(a,b){return a=b||a,"none"===q.css(a,"display")||!q.contains(a.ownerDocument,a)},ka=/^(?:checkbox|radio)$/i;!function(){var a=ha.createDocumentFragment().appendChild(ha.createElement("div")),b=ha.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);ga.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";ga.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue}();ga.focusinBubbles="onfocusin" in a;var Ha=/^key/,T=/^(?:mouse|pointer|contextmenu)|click/,pa=/^(?:focusinfocus|focusoutblur)$/,mb=/^([^.]*)(?:\.(.+)|)$/;q.event={global:{},add:function(a,b,c,d,e){var g,f,h,k,m,l,p,n,u,B;if(m=P.get(a)){for(c.handler&&(g=c,c=g.handler,e=g.selector),c.guid||(c.guid=q.guid++),(k=m.events)||(k=m.events={}),(f=m.handle)||(f=m.handle=function(b){return"undefined"!==typeof q&&q.event.triggered!==b.type?q.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(W)||[""],m=b.length;m--;){h=mb.exec(b[m])||[],u=B=h[1],h=(h[2]||"").split(".").sort(),u&&(p=q.event.special[u]||{},u=(e?p.delegateType:p.bindType)||u,p=q.event.special[u]||{},l=q.extend({type:u,origType:B,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&q.expr.match.needsContext.test(e),namespace:h.join(".")},g),(n=k[u])||(n=k[u]=[],n.delegateCount=0,p.setup&&!1!==p.setup.call(a,d,h,f)||a.addEventListener&&a.addEventListener(u,f,!1)),p.add&&(p.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),q.event.global[u]=!0)}}},remove:function(a,b,c,d,e){var g,f,h,k,m,l,p,n,u,B,x,w=P.hasData(a)&&P.get(a);if(w&&(k=w.events)){b=(b||"").match(W)||[""];for(m=b.length;m--;){if(h=mb.exec(b[m])||[],u=x=h[1],B=(h[2]||"").split(".").sort(),u){p=q.event.special[u]||{};u=(d?p.delegateType:p.bindType)||u;n=k[u]||[];h=h[2]&&new RegExp("(^|\\.)"+B.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=g=n.length;g--;){l=n[g],!e&&x!==l.origType||c&&c.guid!==l.guid||h&&!h.test(l.namespace)||d&&d!==l.selector&&("**"!==d||!l.selector)||(n.splice(g,1),l.selector&&n.delegateCount--,p.remove&&p.remove.call(a,l))}f&&!n.length&&(p.teardown&&!1!==p.teardown.call(a,B,w.handle)||q.removeEvent(a,u,w.handle),delete k[u])}else{for(u in k){q.event.remove(a,u+b[m],c,d,!0)}}}q.isEmptyObject(k)&&(delete w.handle,P.remove(a,"events"))}},trigger:function(b,c,d,e){var g,f,h,k,m,l,p,u=[d||ha],n=ya.call(b,"type")?b.type:b;g=ya.call(b,"namespace")?b.namespace.split("."):[];if(f=h=d=d||ha,3!==d.nodeType&&8!==d.nodeType&&!pa.test(n+q.event.triggered)&&(0<=n.indexOf(".")&&(g=n.split("."),n=g.shift(),g.sort()),m=0>n.indexOf(":")&&"on"+n,b=b[q.expando]?b:new q.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=g.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:q.makeArray(c,[b]),p=q.event.special[n]||{},e||!p.trigger||!1!==p.trigger.apply(d,c))){if(!e&&!p.noBubble&&!q.isWindow(d)){k=p.delegateType||n;for(pa.test(k+n)||(f=f.parentNode);f;f=f.parentNode){u.push(f),h=f}h===(d.ownerDocument||ha)&&u.push(h.defaultView||h.parentWindow||a)}for(g=0;(f=u[g++])&&!b.isPropagationStopped();){b.type=1<g?k:p.bindType||n,(l=(P.get(f,"events")||{})[b.type]&&P.get(f,"handle"))&&l.apply(f,c),(l=m&&f[m])&&l.apply&&q.acceptData(f)&&(b.result=l.apply(f,c),!1===b.result&&b.preventDefault())}return b.type=n,e||b.isDefaultPrevented()||p._default&&!1!==p._default.apply(u.pop(),c)||!q.acceptData(d)||m&&q.isFunction(d[n])&&!q.isWindow(d)&&(h=d[m],h&&(d[m]=null),q.event.triggered=n,d[n](),q.event.triggered=void 0,h&&(d[m]=h)),b.result}},dispatch:function(a){a=q.event.fix(a);var b,c,d,e,g,f=[],h=ra.call(arguments);b=(P.get(this,"events")||{})[a.type]||[];var k=q.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,a)){f=q.event.handlers.call(this,a,b);for(b=0;(e=f[b++])&&!a.isPropagationStopped();){for(a.currentTarget=e.elem,c=0;(g=e.handlers[c++])&&!a.isImmediatePropagationStopped();){a.namespace_re&&!a.namespace_re.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((q.event.special[g.origType]||{}).handle||g.handler).apply(e.elem,h),void 0===d||!1!==(a.result=d)||(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,g,f=[],h=b.delegateCount,k=a.target;if(h&&k.nodeType&&(!a.button||"click"!==a.type)){for(;k!==this;k=k.parentNode||this){if(!0!==k.disabled||"click"!==a.type){d=[];for(c=0;h>c;c++){g=b[c],e=g.selector+" ",void 0===d[e]&&(d[e]=g.needsContext?0<=q(e,this).index(k):q.find(e,this,null,[k]).length),d[e]&&d.push(g)}d.length&&f.push({elem:k,handlers:d})}}}return h<b.length&&f.push({elem:this,handlers:b.slice(h)}),f},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||ha,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[q.expando]){return a}var b,c,d;b=a.type;var e=a,g=this.fixHooks[b];g||(this.fixHooks[b]=g=T.test(b)?this.mouseHooks:Ha.test(b)?this.keyHooks:{});d=g.props?this.props.concat(g.props):this.props;a=new q.Event(e);for(b=d.length;b--;){c=d[b],a[c]=e[c]}return a.target||(a.target=ha),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,e):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==r()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===r()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return q.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=q.extend(new q.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?q.event.trigger(a,null,b):q.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};q.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};q.Event=function(a,b){return this instanceof q.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?f:n):this.type=a,b&&q.extend(this,b),this.timeStamp=a&&a.timeStamp||q.now(),void (this[q.expando]=!0)):new q.Event(a,b)};q.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=f;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=f;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=f;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){q.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;return(!d||d!==this&&!q.contains(this,d))&&(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}});ga.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){q.event.simulate(b,a.target,q.event.fix(a),!0)};q.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=P.access(d,b);e||d.addEventListener(a,c,!0);P.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=P.access(d,b)-1;e?P.access(d,b,e):(d.removeEventListener(a,c,!0),P.remove(d,b))}}});q.fn.extend({on:function(a,b,c,d,e){var g,f;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d){d=n}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return q().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=q.guid++)),this.each(function(){q.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,q(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(!1===b||"function"==typeof b)&&(c=b,b=void 0),!1===c&&(c=n),this.each(function(){q.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){q.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?q.event.trigger(a,b,c,!0):void 0}});var ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,fb=/<([\w:]+)/,Sb=/<|&#?\w+;/,Ja=/<(?:script|style|link)/i,ec=/checked\s*(?:[^=]|=\s*.checked.)/i,Gb=/^$|\/(?:java|ecma)script/i,Ea=/^true\/(.*)/,Pa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ja={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ja.optgroup=ja.option;ja.tbody=ja.tfoot=ja.colgroup=ja.caption=ja.thead;ja.th=ja.td;q.extend({clone:function(a,b,c){var d,e,g,f,h=a.cloneNode(!0),k=q.contains(a.ownerDocument,a);if(!(ga.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||q.isXMLDoc(a))){for(f=w(h),g=w(a),d=0,e=g.length;e>d;d++){var m=g[d],l=f[d],p=l.nodeName.toLowerCase();"input"===p&&ka.test(m.type)?l.checked=m.checked:("input"===p||"textarea"===p)&&(l.defaultValue=m.defaultValue)}}if(b){if(c){for(g=g||w(a),f=f||w(h),d=0,e=g.length;e>d;d++){A(g[d],f[d])}}else{A(a,h)}}return f=w(h,"script"),0<f.length&&u(f,!k&&w(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,g,f,h,k=b.createDocumentFragment(),m=[],l=0,p=a.length;p>l;l++){if(e=a[l],e||0===e){if("object"===q.type(e)){q.merge(m,e.nodeType?[e]:e)}else{if(Sb.test(e)){g=g||k.appendChild(b.createElement("div"));f=(fb.exec(e)||["",""])[1].toLowerCase();f=ja[f]||ja._default;g.innerHTML=f[1]+e.replace(ub,"<$1></$2>")+f[2];for(f=f[0];f--;){g=g.lastChild}q.merge(m,g.childNodes);g=k.firstChild;g.textContent=""}else{m.push(b.createTextNode(e))}}}}k.textContent="";for(l=0;e=m[l++];){if((!d||-1===q.inArray(e,d))&&(h=q.contains(e.ownerDocument,e),g=w(k.appendChild(e),"script"),h&&u(g),c)){for(f=0;e=g[f++];){Gb.test(e.type||"")&&c.push(e)}}}return k},cleanData:function(a){for(var b,c,d,e,g=q.event.special,f=0;void 0!==(c=a[f]);f++){if(q.acceptData(c)&&(e=c[P.expando],e&&(b=P.cache[e]))){if(b.events){for(d in b.events){g[d]?q.event.remove(c,d):q.removeEvent(c,d,b.handle)}}P.cache[e]&&delete P.cache[e]}delete ia.cache[c[ia.expando]]}}});q.fn.extend({text:function(a){return za(this,function(a){return void 0===a?q.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||v(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=v(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?q.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||q.cleanData(w(c)),c.parentNode&&(b&&q.contains(c.ownerDocument,c)&&u(w(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&(q.cleanData(w(a,!1)),a.textContent="")}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return q.clone(this,a,b)})},html:function(a){return za(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType){return b.innerHTML}if("string"==typeof a&&!Ja.test(a)&&!ja[(fb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ub,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(q.cleanData(w(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode;q.cleanData(w(this));a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=la.apply([],a);var c,d,e,g,f=0,h=this.length,k=this,l=h-1,p=a[0],n=q.isFunction(p);if(n||1<h&&"string"==typeof p&&!ga.checkClone&&ec.test(p)){return this.each(function(c){var d=k.eq(c);n&&(a[0]=p.call(this,c,d.html()));d.domManip(a,b)})}if(h&&(c=q.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=q.map(w(c,"script"),t);for(e=d.length;h>f;f++){g=c,f!==l&&(g=q.clone(g,!0,!0),e&&q.merge(d,w(g,"script"))),b.call(this[f],g,f)}if(e){for(c=d[d.length-1].ownerDocument,q.map(d,m),f=0;e>f;f++){g=d[f],Gb.test(g.type||"")&&!P.access(g,"globalEval")&&q.contains(c,g)&&(g.src?q._evalUrl&&q._evalUrl(g.src):q.globalEval(g.textContent.replace(Pa,"")))}}}return this}});q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){q.fn[a]=function(a){for(var c=[],d=q(a),e=d.length-1,g=0;e>=g;g++){a=g===e?this:this.clone(!0),q(d[g])[b](a),oa.apply(c,a.get())}return this.pushStack(c)}});var wa,kb={},tb=/^margin/,Ob=new RegExp("^("+ma+")(?!px)[a-z%]+$","i"),La=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){var b,c,d=ha.documentElement,e=ha.createElement("div"),g=ha.createElement("div");if(g.style){var f=function(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";g.innerHTML="";d.appendChild(e);var f=a.getComputedStyle(g,null);b="1%"!==f.top;c="4px"===f.width;d.removeChild(e)};g.style.backgroundClip="content-box";g.cloneNode(!0).style.backgroundClip="";ga.clearCloneStyle="content-box"===g.style.backgroundClip;e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute";e.appendChild(g);a.getComputedStyle&&q.extend(ga,{pixelPosition:function(){return f(),b},boxSizingReliable:function(){return null==c&&f(),c},reliableMarginRight:function(){var b,c=g.appendChild(ha.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}();q.swap=function(a,b,c,d){var e,g={};for(e in b){g[e]=a.style[e],a.style[e]=b[e]}c=c.apply(a,d||[]);for(e in b){a.style[e]=g[e]}return c};var Hb=/^(none|table(?!-c[ea]).+)/,oc=new RegExp("^("+ma+")(.*)$","i"),Qc=new RegExp("^([+-])=("+ma+")","i"),$a={position:"absolute",visibility:"hidden",display:"block"},ab={letterSpacing:"0",fontWeight:"400"},yc=["Webkit","O","Moz","ms"];q.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=F(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,g,f,h=q.camelCase(b),k=a.style;return b=q.cssProps[h]||(q.cssProps[h]=C(k,h)),f=q.cssHooks[b]||q.cssHooks[h],void 0===c?f&&"get" in f&&void 0!==(e=f.get(a,!1,d))?e:k[b]:(g=typeof c,"string"===g&&(e=Qc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(q.css(a,b)),g="number"),null!=c&&c===c&&("number"!==g||q.cssNumber[h]||(c+="px"),ga.clearCloneStyle||""!==c||0!==b.indexOf("background")||(k[b]="inherit"),f&&"set" in f&&void 0===(c=f.set(a,c,d))||(k[b]=c)),void 0)}},css:function(a,b,c,d){var e,g,f,h=q.camelCase(b);return b=q.cssProps[h]||(q.cssProps[h]=C(a.style,h)),f=q.cssHooks[b]||q.cssHooks[h],f&&"get" in f&&(e=f.get(a,!0,c)),void 0===e&&(e=F(a,b,d)),"normal"===e&&b in ab&&(e=ab[b]),""===c||c?(g=parseFloat(e),!0===c||q.isNumeric(g)?g||0:e):e}});q.each(["height","width"],function(a,b){q.cssHooks[b]={get:function(a,c,d){return c?Hb.test(q.css(a,"display"))&&0===a.offsetWidth?q.swap(a,$a,function(){return H(a,b,d)}):H(a,b,d):void 0},set:function(a,c,d){var e=d&&La(a);return E(a,c,d?D(a,b,d,"border-box"===q.css(a,"boxSizing",!1,e),e):0)}}});q.cssHooks.marginRight=x(ga.reliableMarginRight,function(a,b){return b?q.swap(a,{display:"inline-block"},F,[a,"marginRight"]):void 0});q.each({margin:"",padding:"",border:"Width"},function(a,b){q.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+Da[d]+b]=c[d]||c[d-2]||c[0]}return e}};tb.test(a)||(q.cssHooks[a+b].set=E)});q.fn.extend({css:function(a,b){return za(this,function(a,b,c){var d,e={},g=0;if(q.isArray(b)){c=La(a);for(d=b.length;d>g;g++){e[b[g]]=q.css(a,b[g],!1,c)}return e}return void 0!==c?q.style(a,b,c):q.css(a,b)},a,b,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){z(this)?q(this).show():q(this).hide()})}});q.Tween=K;K.prototype={constructor:K,init:function(a,b,c,d,e,g){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=g||(q.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.pos=b=this.options.duration?q.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}};K.prototype.init.prototype=K.prototype;K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=q.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){q.fx.step[a.prop]?q.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[q.cssProps[a.prop]]||q.cssHooks[a.prop])?q.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};q.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};q.fx=K.prototype.init;q.fx.step={};var Pb,qc,Rc=/^(?:toggle|show|hide)$/,fc=new RegExp("^(?:([+-])=|)("+ma+")([a-z%]*)$","i"),Sc=/queueHooks$/,Rb=[function(a,b,c){var d,e,g,f,h,k,m,l=this,p={},n=a.style,u=a.nodeType&&z(a),x=P.get(a,"fxshow");c.queue||(f=q._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,h=f.empty.fire,f.empty.fire=function(){f.unqueued||h()}),f.unqueued++,l.always(function(){l.always(function(){f.unqueued--;q.queue(a,"fx").length||f.empty.fire()})}));1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],k=q.css(a,"display"),m="none"===k?P.get(a,"olddisplay")||B(a.nodeName):k,"inline"===m&&"none"===q.css(a,"float")&&(n.display="inline-block"));c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0];n.overflowX=c.overflow[1];n.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],Rc.exec(e)){if(delete b[d],g=g||"toggle"===e,e===(u?"hide":"show")){if("show"!==e||!x||void 0===x[d]){continue}u=!0}p[d]=x&&x[d]||q.style(a,d)}else{k=void 0}}if(q.isEmptyObject(p)){"inline"===("none"===k?B(a.nodeName):k)&&(n.display=k)}else{for(d in x?"hidden" in x&&(u=x.hidden):x=P.access(a,"fxshow",{}),g&&(x.hidden=!u),u?q(a).show():l.done(function(){q(a).hide()}),l.done(function(){var b;P.remove(a,"fxshow");for(b in p){q.style(a,b,p[b])}}),p){b=R(u?x[d]:0,d,l),d in x||(x[d]=b.start,u&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}}}],Qb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=fc.exec(b),g=e&&e[3]||(q.cssNumber[a]?"":"px"),f=(q.cssNumber[a]||"px"!==g&&+d)&&fc.exec(q.css(c.elem,a)),h=1,k=20;if(f&&f[3]!==g){g=g||f[3];e=e||[];f=+d||1;do{h=h||".5",f/=h,q.style(c.elem,a,f+g)}while(h!==(h=c.cur()/d)&&1!==h&&--k)}return e&&(f=c.start=+f||+d||0,c.unit=g,c.end=e[1]?f+(e[1]+1)*e[2]:+e[2]),c}]};q.Animation=q.extend(S,{tweener:function(a,b){q.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],Qb[c]=Qb[c]||[],Qb[c].unshift(b)}},prefilter:function(a,b){b?Rb.unshift(a):Rb.push(a)}});q.speed=function(a,b,c){var d=a&&"object"==typeof a?q.extend({},a):{complete:c||!c&&b||q.isFunction(a)&&a,duration:a,easing:c&&b||b&&!q.isFunction(b)&&b};return d.duration=q.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in q.fx.speeds?q.fx.speeds[d.duration]:q.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){q.isFunction(d.old)&&d.old.call(this);d.queue&&q.dequeue(this,d.queue)},d};q.fn.extend({fadeTo:function(a,b,c,d){return this.filter(z).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=q.isEmptyObject(a),g=q.speed(b,c,d);b=function(){var b=S(this,q.extend({},a),g);(e||P.get(this,"finish"))&&b.stop(!0)};return b.finish=b,e||!1===g.queue?this.each(b):this.queue(g.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",g=q.timers,f=P.get(this);if(e){f[e]&&f[e].stop&&d(f[e])}else{for(e in f){f[e]&&f[e].stop&&Sc.test(e)&&d(f[e])}}for(e=g.length;e--;){g[e].elem!==this||null!=a&&g[e].queue!==a||(g[e].anim.stop(c),b=!1,g.splice(e,1))}!b&&c||q.dequeue(this,a)})},finish:function(a){return !1!==a&&(a=a||"fx"),this.each(function(){var b,c=P.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=q.timers,g=d?d.length:0;c.finish=!0;q.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;){e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}});q.each(["toggle","show","hide"],function(a,b){var c=q.fn[b];q.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(L(b,!0),a,d,e)}});q.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){q.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});q.timers=[];q.fx.tick=function(){var a,b=0,c=q.timers;for(Pb=q.now();b<c.length;b++){a=c[b],a()||c[b]!==a||c.splice(b--,1)}c.length||q.fx.stop();Pb=void 0};q.fx.timer=function(a){q.timers.push(a);a()?q.fx.start():q.timers.pop()};q.fx.interval=13;q.fx.start=function(){qc||(qc=setInterval(q.fx.tick,q.fx.interval))};q.fx.stop=function(){clearInterval(qc);qc=null};q.fx.speeds={slow:600,fast:200,_default:400};q.fn.delay=function(a,b){return a=q.fx?q.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=ha.createElement("input"),b=ha.createElement("select"),c=b.appendChild(ha.createElement("option"));a.type="checkbox";ga.checkOn=""!==a.value;ga.optSelected=c.selected;b.disabled=!0;ga.optDisabled=!c.disabled;a=ha.createElement("input");a.value="t";a.type="radio";ga.radioValue="t"===a.value})();var Tc,gc=q.expr.attrHandle;q.fn.extend({attr:function(a,b){return za(this,q.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){q.removeAttr(this,a)})}});q.extend({attr:function(a,b,c){var d,e,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return"undefined"===typeof a.getAttribute?q.prop(a,b,c):(1===g&&q.isXMLDoc(a)||(b=b.toLowerCase(),d=q.attrHooks[b]||(q.expr.match.bool.test(b)?Tc:void 0)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=q.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void q.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,g=b&&b.match(W);if(g&&1===a.nodeType){for(;c=g[e++];){d=q.propFix[c]||c,q.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}},attrHooks:{type:{set:function(a,b){if(!ga.radioValue&&"radio"===b&&q.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}});Tc={set:function(a,b,c){return !1===b?q.removeAttr(a,c):a.setAttribute(c,c),c}};q.each(q.expr.match.bool.source.match(/\w+/g),function(a,b){var c=gc[b]||q.find.attr;gc[b]=function(a,b,d){var e,g;return d||(g=gc[b],gc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,gc[b]=g),e}});var Uc=/^(?:input|select|textarea|button)$/i;q.fn.extend({prop:function(a,b){return za(this,q.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[q.propFix[a]||a]})}});q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,g,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return g=1!==f||!q.isXMLDoc(a),g&&(b=q.propFix[b]||b,e=q.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Uc.test(a.nodeName)||a.href?a.tabIndex:-1}}}});ga.optSelected||(q.propHooks.selected={get:function(a){a=a.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null}});q.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){q.propFix[this.toLowerCase()]=this});var nb=/[\t\r\n\f]/g;q.fn.extend({addClass:function(a){var b,c,d,e,g;b="string"==typeof a&&a;var f=0,h=this.length;if(q.isFunction(a)){return this.each(function(b){q(this).addClass(a.call(this,b,this.className))})}if(b){for(b=(a||"").match(W)||[];h>f;f++){if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(nb," "):" ")){for(g=0;e=b[g++];){0>d.indexOf(" "+e+" ")&&(d+=e+" ")}d=q.trim(d);c.className!==d&&(c.className=d)}}}return this},removeClass:function(a){var b,c,d,e,g;b=0===arguments.length||"string"==typeof a&&a;var f=0,h=this.length;if(q.isFunction(a)){return this.each(function(b){q(this).removeClass(a.call(this,b,this.className))})}if(b){for(b=(a||"").match(W)||[];h>f;f++){if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(nb," "):"")){for(g=0;e=b[g++];){for(;0<=d.indexOf(" "+e+" ");){d=d.replace(" "+e+" "," ")}}d=a?q.trim(d):"";c.className!==d&&(c.className=d)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(q.isFunction(a)?function(c){q(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){for(var b,d=0,e=q(this),g=a.match(W)||[];b=g[d++];){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{("undefined"===c||"boolean"===c)&&(this.className&&P.set(this,"__className__",this.className),this.className=this.className||!1===a?"":P.get(this,"__className__")||"")}})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++){if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(nb," ").indexOf(a)){return !0}}return !1}});var Vc=/\r/g;q.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=q.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,q(this).val()):a,null==e?e="":"number"==typeof e?e+="":q.isArray(e)&&(e=q.map(e,function(a){return null==a?"":a+""})),b=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=q.valHooks[e.type]||q.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(Vc,""):null==c?"":c)}}});q.extend({valHooks:{option:{get:function(a){var b=q.find.attr(a,"value");return null!=b?b:q.trim(q.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e="select-one"===a.type||0>d,g=e?null:[],f=e?d+1:c.length,h=0>d?f:e?d:0;f>h;h++){if(b=c[h],!(!b.selected&&h!==d||(ga.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&q.nodeName(b.parentNode,"optgroup"))){if(a=q(b).val(),e){return a}g.push(a)}}return g},set:function(a,b){for(var c,d,e=a.options,g=q.makeArray(b),f=e.length;f--;){d=e[f],(d.selected=0<=q.inArray(d.value,g))&&(c=!0)}return c||(a.selectedIndex=-1),g}}}});q.each(["radio","checkbox"],function(){q.valHooks[this]={set:function(a,b){return q.isArray(b)?a.checked=0<=q.inArray(q(a).val(),b):void 0}};ga.checkOn||(q.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){q.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});q.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var rc=q.now(),Cc=/\?/;q.parseJSON=function(a){return JSON.parse(a+"")};q.parseXML=function(a){var b,c;if(!a||"string"!=typeof a){return null}try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&q.error("Invalid XML: "+a),b};var Ib,ob,sc=/#.*$/,Wc=/([?&])_=[^&]*/,vb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dc=/^(?:GET|HEAD)$/,Wd=/^\/\//,Tb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ec={},cc={},Fc="*/".concat("*");try{ob=location.href}catch(da){ob=ha.createElement("a"),ob.href="",ob=ob.href}Ib=Tb.exec(ob.toLowerCase())||[];q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ib[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":q.parseJSON,"text xml":q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?X(X(a,q.ajaxSettings),b):X(q.ajaxSettings,a)},ajaxPrefilter:J(Ec),ajaxTransport:J(cc),ajax:function(a,b){function c(a,b,f,k){var l,r,C,t,F=b;if(2!==A){A=2;h&&clearTimeout(h);d=void 0;g=k||"";v.readyState=0<a?4:0;k=200<=a&&300>a||304===a;if(f){C=p;for(var Ea=v,E,D,z,H,I=C.contents,Q=C.dataTypes;"*"===Q[0];){Q.shift(),void 0===E&&(E=C.mimeType||Ea.getResponseHeader("Content-Type"))}if(E){for(D in I){if(I[D]&&I[D].test(E)){Q.unshift(D);break}}}if(Q[0] in f){z=Q[0]}else{for(D in f){if(!Q[0]||C.converters[D+" "+Q[0]]){z=D;break}H||(H=D)}z=z||H}C=z?(z!==Q[0]&&Q.unshift(z),f[z]):void 0}var K;a:{f=p;E=C;D=v;z=k;var ja,wa,ma;C={};Ea=f.dataTypes.slice();if(Ea[1]){for(ja in f.converters){C[ja.toLowerCase()]=f.converters[ja]}}for(H=Ea.shift();H;){if(f.responseFields[H]&&(D[f.responseFields[H]]=E),!ma&&z&&f.dataFilter&&(E=f.dataFilter(E,f.dataType)),ma=H,H=Ea.shift()){if("*"===H){H=ma}else{if("*"!==ma&&ma!==H){if(ja=C[ma+" "+H]||C["* "+H],!ja){for(K in C){if(wa=K.split(" "),wa[1]===H&&(ja=C[ma+" "+wa[0]]||C["* "+wa[0]])){!0===ja?ja=C[K]:!0!==C[K]&&(H=wa[0],Ea.unshift(wa[1]));break}}}if(!0!==ja){if(ja&&f["throws"]){E=ja(E)}else{try{E=ja(E)}catch(Pa){K={state:"parsererror",error:ja?Pa:"No conversion from "+ma+" to "+H};break a}}}}}}}K={state:"success",data:E}}C=K;k?(p.ifModified&&(t=v.getResponseHeader("Last-Modified"),t&&(q.lastModified[e]=t),t=v.getResponseHeader("etag"),t&&(q.etag[e]=t)),204===a||"HEAD"===p.type?F="nocontent":304===a?F="notmodified":(F=C.state,l=C.data,r=C.error,k=!r)):(r=F,(a||!F)&&(F="error",0>a&&(a=0)));v.status=a;v.statusText=(b||F)+"";k?B.resolveWith(n,[l,F,v]):B.rejectWith(n,[v,F,r]);v.statusCode(w);w=void 0;m&&u.trigger(k?"ajaxSuccess":"ajaxError",[v,p,k?l:r]);x.fireWith(n,[v,F]);m&&(u.trigger("ajaxComplete",[v,p]),--q.active||q.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=void 0);b=b||{};var d,e,g,f,h,k,m,l,p=q.ajaxSetup({},b),n=p.context||p,u=p.context&&(n.nodeType||n.jquery)?q(n):q.event,B=q.Deferred(),x=q.Callbacks("once memory"),w=p.statusCode||{},r={},C={},A=0,t="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===A){if(!f){for(f={};b=vb.exec(g);){f[b[1].toLowerCase()]=b[2]}}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===A?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return A||(a=C[c]=C[c]||a,r[a]=b),this},overrideMimeType:function(a){return A||(p.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>A){for(b in a){w[b]=[w[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){a=a||t;return d&&d.abort(a),c(0,a),this}};if(B.promise(v).complete=x.add,v.success=v.done,v.error=v.fail,p.url=((a||p.url||ob)+"").replace(sc,"").replace(Wd,Ib[1]+"//"),p.type=b.method||b.type||p.method||p.type,p.dataTypes=q.trim(p.dataType||"*").toLowerCase().match(W)||[""],null==p.crossDomain&&(k=Tb.exec(p.url.toLowerCase()),p.crossDomain=!(!k||k[1]===Ib[1]&&k[2]===Ib[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(Ib[3]||("http:"===Ib[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=q.param(p.data,p.traditional)),Q(Ec,p,b,v),2===A){return v}(m=p.global)&&0===q.active++&&q.event.trigger("ajaxStart");p.type=p.type.toUpperCase();p.hasContent=!Dc.test(p.type);e=p.url;p.hasContent||(p.data&&(e=p.url+=(Cc.test(e)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=Wc.test(e)?e.replace(Wc,"$1_="+rc++):e+(Cc.test(e)?"&":"?")+"_="+rc++));p.ifModified&&(q.lastModified[e]&&v.setRequestHeader("If-Modified-Since",q.lastModified[e]),q.etag[e]&&v.setRequestHeader("If-None-Match",q.etag[e]));(p.data&&p.hasContent&&!1!==p.contentType||b.contentType)&&v.setRequestHeader("Content-Type",p.contentType);v.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Fc+"; q=0.01":""):p.accepts["*"]);for(l in p.headers){v.setRequestHeader(l,p.headers[l])}if(p.beforeSend&&(!1===p.beforeSend.call(n,v,p)||2===A)){return v.abort()}t="abort";for(l in {success:1,error:1,complete:1}){v[l](p[l])}if(d=Q(cc,p,b,v)){v.readyState=1;m&&u.trigger("ajaxSend",[v,p]);p.async&&0<p.timeout&&(h=setTimeout(function(){v.abort("timeout")},p.timeout));try{A=1,d.send(r,c)}catch(F){if(!(2>A)){throw F}c(-1,F)}}else{c(-1,"No Transport")}return v},getJSON:function(a,b,c){return q.get(a,b,c,"json")},getScript:function(a,b){return q.get(a,void 0,b,"script")}});q.each(["get","post"],function(a,b){q[b]=function(a,c,d,e){return q.isFunction(c)&&(e=e||d,d=c,c=void 0),q.ajax({url:a,type:b,dataType:e,data:c,success:d})}});q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){q.fn[b]=function(a){return this.on(b,a)}});q._evalUrl=function(a){return q.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};q.fn.extend({wrapAll:function(a){var b;return q.isFunction(a)?this.each(function(b){q(this).wrapAll(a.call(this,b))}):(this[0]&&(b=q(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;){a=a.firstElementChild}return a}).append(this)),this)},wrapInner:function(a){return this.each(q.isFunction(a)?function(b){q(this).wrapInner(a.call(this,b))}:function(){var b=q(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=q.isFunction(a);return this.each(function(c){q(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){q.nodeName(this,"body")||q(this).replaceWith(this.childNodes)}).end()}});q.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};q.expr.filters.visible=function(a){return !q.expr.filters.hidden(a)};var Xc=/%20/g,Mc=/\[\]$/,tc=/\r?\n/g,Yc=/^(?:submit|button|image|reset|file)$/i,Zc=/^(?:input|select|textarea|keygen)/i;q.param=function(a,b){var c,d=[],e=function(a,b){b=q.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=q.ajaxSettings&&q.ajaxSettings.traditional),q.isArray(a)||a.jquery&&!q.isPlainObject(a)){q.each(a,function(){e(this.name,this.value)})}else{for(c in a){U(c,a[c],b,e)}}return d.join("&").replace(Xc,"+")};q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=q.prop(this,"elements");return a?q.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!q(this).is(":disabled")&&Zc.test(this.nodeName)&&!Yc.test(a)&&(this.checked||!ka.test(a))}).map(function(a,b){var c=q(this).val();return null==c?null:q.isArray(c)?q.map(c,function(a){return{name:b.name,value:a.replace(tc,"\r\n")}}):{name:b.name,value:c.replace(tc,"\r\n")}}).get()}});q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var $c=0,Z={},Gc={0:200,1223:204},hc=q.ajaxSettings.xhr();a.ActiveXObject&&q(a).on("unload",function(){for(var a in Z){Z[a]()}});ga.cors=!!hc&&"withCredentials" in hc;ga.ajax=hc=!!hc;q.ajaxTransport(function(a){var b;return ga.cors||hc&&!a.crossDomain?{send:function(c,d){var e,g=a.xhr(),f=++$c;if(g.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){g[e]=a.xhrFields[e]}}a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){g.setRequestHeader(e,c[e])}b=function(a){return function(){b&&(delete Z[f],b=g.onload=g.onerror=null,"abort"===a?g.abort():"error"===a?d(g.status,g.statusText):d(Gc[g.status]||g.status,g.statusText,"string"==typeof g.responseText?{text:g.responseText}:void 0,g.getAllResponseHeaders()))}};g.onload=b();g.onerror=b("error");b=Z[f]=b("abort");try{g.send(a.hasContent&&a.data||null)}catch(h){if(b){throw h}}},abort:function(){b&&b()}}:void 0});q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return q.globalEval(a),a}}});q.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});q.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=q("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&e("error"===a.type?404:200,a.type)});ha.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Ub=[],uc=/(=)\?(?=&|$)|\?\?/;q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||q.expando+"_"+rc++;return this[a]=!0,a}});q.ajaxPrefilter("json jsonp",function(b,c,d){var e,g,f,h=!1!==b.jsonp&&(uc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&uc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=q.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(uc,"$1"+e):!1!==b.jsonp&&(b.url+=(Cc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return f||q.error(e+" was not called"),f[0]},b.dataTypes[0]="json",g=a[e],a[e]=function(){f=arguments},d.always(function(){a[e]=g;b[e]&&(b.jsonpCallback=c.jsonpCallback,Ub.push(e));f&&q.isFunction(g)&&g(f[0]);f=g=void 0}),"script"):void 0});q.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1);b=b||ha;var d=Qa.exec(a);c=!c&&[];return d?[b.createElement(d[1])]:(d=q.buildFragment([a],b,c),c&&c.length&&q(c).remove(),q.merge([],d.childNodes))};var Hc=q.fn.load;q.fn.load=function(a,b,c){if("string"!=typeof a&&Hc){return Hc.apply(this,arguments)}var d,e,g,f=this,h=a.indexOf(" ");return 0<=h&&(d=q.trim(a.slice(h)),a=a.slice(0,h)),q.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),0<f.length&&q.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){g=arguments;f.html(d?q("<div>").append(q.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){f.each(c,g||[a.responseText,b,a])}),this};q.expr.filters.animated=function(a){return q.grep(q.timers,function(b){return a===b.elem}).length};var ic=a.document.documentElement;q.offset={setOffset:function(a,b,c){var d,e,g,f,h,k,m=q.css(a,"position"),l=q(a),p={};"static"===m&&(a.style.position="relative");h=l.offset();g=q.css(a,"top");k=q.css(a,"left");("absolute"===m||"fixed"===m)&&-1<(g+k).indexOf("auto")?(d=l.position(),f=d.top,e=d.left):(f=parseFloat(g)||0,e=parseFloat(k)||0);q.isFunction(b)&&(b=b.call(a,c,h));null!=b.top&&(p.top=b.top-h.top+f);null!=b.left&&(p.left=b.left-h.left+e);"using" in b?b.using.call(a,p):l.css(p)}};q.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){q.offset.setOffset(this,a,b)})}var b,c,d=this[0],e={top:0,left:0},g=d&&d.ownerDocument;if(g){return b=g.documentElement,q.contains(b,d)?("undefined"!==typeof d.getBoundingClientRect&&(e=d.getBoundingClientRect()),c=Y(g),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===q.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),q.nodeName(a[0],"html")||(d=a.offset()),d.top+=q.css(a[0],"borderTopWidth",!0),d.left+=q.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-q.css(c,"marginTop",!0),left:b.left-d.left-q.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||ic;a&&!q.nodeName(a,"html")&&"static"===q.css(a,"position");){a=a.offsetParent}return a||ic})}});q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;q.fn[b]=function(e){return za(this,function(b,e,g){var f=Y(b);return void 0===g?f?f[c]:b[e]:void (f?f.scrollTo(d?a.pageXOffset:g,d?g:a.pageYOffset):b[e]=g)},b,e,arguments.length,null)}});q.each(["top","left"],function(a,b){q.cssHooks[b]=x(ga.pixelPosition,function(a,c){return c?(c=F(a,b),Ob.test(c)?q(a).position()[b]+"px":c):void 0})});q.each({Height:"height",Width:"width"},function(a,b){q.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){q.fn[d]=function(d,e){var g=arguments.length&&(c||"boolean"!=typeof d),f=c||(!0===d||!0===e?"margin":"border");return za(this,function(b,c,d){var e;return q.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?q.css(b,c,f):q.style(b,c,d,f)},b,g?d:void 0,g,null)}})});q.fn.size=function(){return this.length};q.fn.andSelf=q.fn.addBack;"function"==typeof define&&define.amd&&define("jquery",[],function(){return q});var ad=a.jQuery,Ic=a.$;return q.noConflict=function(b){return a.$===q&&(a.$=Ic),b&&a.jQuery===q&&(a.jQuery=ad),q},"undefined"===typeof b&&(a.jQuery=a.$=q),q});var requirejs,define;(function(a){function b(a){return"[object Function]"===M.call(a)}function c(a){return"[object Array]"===M.call(a)}function d(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1){}}}function e(a,b){if(a){var c;for(c=a.length-1;-1<c&&(!a[c]||!b(a[c],c,a));--c){}}}function g(a,b){return L.call(a,b)}function h(a,b){return g(a,b)&&a[b]}function k(a,b){for(var c in a){if(g(a,c)&&b(a[c],c)){break}}}function l(a,b,c,d){b&&k(b,function(b,e){if(c||!g(a,e)){d&&"string"!==typeof b?(a[e]||(a[e]={}),l(a[e],b,c,d)):a[e]=b}});return a}function f(a,b){return function(){return b.apply(a,arguments)}}function n(a){throw a}function r(b){if(!b){return b}var c=a;d(b.split("."),function(a){c=c[a]});return c}function v(a,b,c,d){b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);b.requireType=a;b.requireModules=d;c&&(b.originalError=c);return b}function t(e){function p(a,b,c){var d,e,g,f,k,m,l,n=b&&b.split("/"),u=ba.map,B=u&&u["*"];if(a&&"."===a.charAt(0)){if(b){d=h(ba.pkgs,b)?n=[b]:n.slice(0,n.length-1);b=a=d.concat(a.split("/"));for(d=0;b[d];d+=1){if(e=b[d],"."===e){b.splice(d,1),--d}else{if(".."===e){if(1!==d||".."!==b[2]&&".."!==b[0]){0<d&&(b.splice(d-1,2),d-=2)}else{break}}}}d=h(ba.pkgs,b=a[0]);a=a.join("/");d&&a===b+"/"+d.main&&(a=b)}else{0===a.indexOf("./")&&(a=a.substring(2))}}if(c&&u&&(n||B)){b=a.split("/");for(d=b.length;0<d;--d){g=b.slice(0,d).join("/");if(n){for(e=n.length;0<e;--e){if(c=h(u,n.slice(0,e).join("/"))){if(c=h(c,g)){f=c;k=d;break}}}}if(f){break}!m&&B&&h(B,g)&&(m=h(B,g),l=d)}!f&&m&&(f=m,k=l);f&&(b.splice(0,k,f),a=b.join("/"))}return a}function u(a){N&&d(document.getElementsByTagName("script"),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===fa.contextName){return b.parentNode.removeChild(b),!0}})}function B(a){var b=h(ba.paths,a);if(b&&c(b)&&1<b.length){return u(a),b.shift(),fa.require.undef(a),fa.require([a]),!0}}function x(a){var b,c=a?a.indexOf("!"):-1;-1<c&&(b=a.substring(0,c),a=a.substring(c+1,a.length));return[b,a]}function w(a,b,c,d){var e,g,f=null,k=b?b.name:null,m=a,l=!0,n="";a||(l=!1,a="_@r"+(cb+=1));a=x(a);f=a[0];a=a[1];f&&(f=p(f,k,d),g=h(P,f));a&&(f?n=g&&g.normalize?g.normalize(a,function(a){return p(a,k,d)}):p(a,k,d):(n=p(a,k,d),a=x(n),f=a[0],n=a[1],c=!0,e=fa.nameToUrl(n)));c=!f||g||c?"":"_unnormalized"+(sb+=1);return{prefix:f,name:n,parentMap:b,unnormalized:!!c,url:e,originalName:m,isDefine:l,id:(f?f+"!"+n:n)+c}}function C(a){var b=a.id,c=h(W,b);c||(c=W[b]=new fa.Module(a));return c}function A(a,b,c){var d=a.id,e=h(W,d);if(!g(P,d)||e&&!e.defineEmitComplete){if(e=C(a),e.error&&"error"===b){c(e.error)}else{e.on(b,c)}}else{"defined"===b&&c(P[d])}}function t(a,b){var c=a.requireModules,e=!1;if(b){b(a)}else{if(d(c,function(b){if(b=h(W,b)){b.error=a,b.events.error&&(e=!0,b.emit("error",a))}}),!e){m.onError(a)}}}function q(){Y.length&&(R.apply(za,[za.length-1,0].concat(Y)),Y=[])}function E(a){delete W[a];delete ua[a]}function D(a,b,c){var e=a.map.id;a.error?a.emit("error",a.error):(b[e]=!0,d(a.depMaps,function(d,e){var g=d.id,f=h(W,g);f&&!a.depMatched[e]&&!c[g]&&(h(b,g)?(a.defineDep(e,P[g]),a.check()):D(f,b,c))}),c[e]=!0)}function H(){var a,b,c,e,g=(c=1000*ba.waitSeconds)&&fa.startTime+c<(new Date).getTime(),f=[],h=[],m=!1,l=!0;if(!L){L=!0;k(ua,function(c){a=c.map;b=a.id;if(c.enabled&&(a.isDefine||h.push(c),!c.error)){if(!c.inited&&g){B(b)?m=e=!0:(f.push(b),u(b))}else{if(!c.inited&&c.fetched&&a.isDefine&&(m=!0,!a.prefix)){return l=!1}}}});if(g&&f.length){return c=v("timeout","Load timeout for modules: "+f,null,f),c.contextName=fa.contextName,t(c)}l&&d(h,function(a){D(a,{},{})});g&&!e||!m||!N&&!S||Ra||(Ra=setTimeout(function(){Ra=0;H()},50));L=!1}}function U(a){g(P,a[0])||C(w(a[0],null,!0)).init(a[1],a[2])}function X(a){a=a.currentTarget||a.srcElement;var b=fa.onScriptLoad;a.detachEvent&&!Q?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=fa.onScriptError;a.detachEvent&&!Q||a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function M(){var a;for(q();za.length;){a=za.shift();if(null===a[0]){return t(v("mismatch","Mismatched anonymous define() module: "+a[a.length-1]))}U(a)}}var L,Za,fa,Oa,Ra,ba={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},W={},ua={},Sa={},za=[],P={},ia={},cb=1,sb=1;Oa={require:function(a){return a.require?a.require:a.require=fa.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine){return a.exports?a.exports:a.exports=P[a.map.id]={}}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=h(ba.pkgs,a.map.id);return(b?h(ba.config,a.map.id+"/"+b.main):h(ba.config,a.map.id))||{}},exports:P[a.map.id]}}};Za=function(a){this.events=h(Sa,a.id)||{};this.map=a;this.shim=h(ba.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Za.prototype={init:function(a,b,c,d){d=d||{};if(!this.inited){this.factory=b;if(c){this.on("error",c)}else{this.events.error&&(c=f(this,function(a){this.emit("error",a)}))}this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=d.ignore;d.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,--this.depCount,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;fa.startTime=(new Date).getTime();var a=this.map;if(this.shim){fa.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],f(this,function(){return a.prefix?this.callPlugin():this.load()}))}else{return a.prefix?this.callPlugin():this.load()}}},load:function(){var a=this.map.url;ia[a]||(ia[a]=!0,fa.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,c,d=this.map.id;c=this.depExports;var e=this.exports,g=this.factory;if(this.inited){if(this.error){this.emit("error",this.error)}else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(b(g)){if(this.events.error&&this.map.isDefine||m.onError!==n){try{e=fa.execCb(d,g,c,e)}catch(f){a=f}}else{e=fa.execCb(d,g,c,e)}this.map.isDefine&&((c=this.module)&&void 0!==c.exports&&c.exports!==this.exports?e=c.exports:void 0===e&&this.usingExports&&(e=this.exports));if(a){return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",t(this.error=a)}}else{e=g}this.exports=e;if(this.map.isDefine&&!this.ignore&&(P[d]=e,m.onResourceLoad)){m.onResourceLoad(fa,this.map,this.depMaps)}E(d);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}}else{this.fetch()}}},callPlugin:function(){var a=this.map,b=a.id,c=w(a.prefix);this.depMaps.push(c);A(c,"defined",f(this,function(c){var d,e;e=this.map.name;var l=this.map.parentMap?this.map.parentMap.name:null,n=fa.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(c.normalize&&(e=c.normalize(e,function(a){return p(a,l,!0)})||""),c=w(a.prefix+"!"+e,this.map.parentMap),A(c,"defined",f(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),e=h(W,c.id)){this.depMaps.push(c);if(this.events.error){e.on("error",f(this,function(a){this.emit("error",a)}))}e.enable()}}else{d=f(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),d.error=f(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];k(W,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&E(a.map.id)});t(a)}),d.fromText=f(this,function(c,e){var f=a.name,h=w(f),k=O;e&&(c=e);k&&(O=!1);C(h);g(ba.config,b)&&(ba.config[f]=ba.config[b]);try{m.exec(c)}catch(l){return t(v("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(O=!0);this.depMaps.push(h);fa.completeLoad(f);n([f],d)}),c.load(a.name,n,d,ba)}}));fa.enable(c,this);this.pluginMaps[c.id]=c},enable:function(){ua[this.map.id]=this;this.enabling=this.enabled=!0;d(this.depMaps,f(this,function(a,b){var c,d;if("string"===typeof a){a=w(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=h(Oa,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;A(a,"defined",f(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&A(a,"error",f(this,this.errback))}c=a.id;d=W[c];!g(Oa,c)&&d&&!d.enabled&&fa.enable(a,this)}));k(this.pluginMaps,f(this,function(a){var b=h(W,a.id);b&&!b.enabled&&fa.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){d(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};fa={config:ba,contextName:e,registry:W,defined:P,urlFetched:ia,defQueue:za,Module:Za,makeModuleMap:w,nextTick:m.nextTick,onError:t,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=ba.pkgs,e=ba.shim,g={paths:!0,config:!0,map:!0};k(a,function(a,b){g[b]?"map"===b?(ba.map||(ba.map={}),l(ba[b],a,!0,!0)):l(ba[b],a,!0):ba[b]=a});a.shim&&(k(a.shim,function(a,b){c(a)&&(a={deps:a});!a.exports&&!a.init||a.exportsFn||(a.exportsFn=fa.makeShimExports(a));e[b]=a}),ba.shim=e);a.packages&&(d(a.packages,function(a){a="string"===typeof a?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(K,"").replace(I,"")}}),ba.pkgs=b);k(W,function(a,b){a.inited||a.map.unnormalized||(a.map=w(b))});(a.deps||a.callback)&&fa.require(a.deps||[],a.callback)},makeShimExports:function(b){return function(){var c;b.init&&(c=b.init.apply(a,arguments));return c||b.exports&&r(b.exports)}},makeRequire:function(a,c){function d(f,h,k){var l,p;c.enableBuildCallback&&h&&b(h)&&(h.__requireJsBuild=!0);if("string"===typeof f){if(b(h)){return t(v("requireargs","Invalid require call"),k)}if(a&&g(Oa,f)){return Oa[f](W[a.id])}if(m.get){return m.get(fa,f,a,d)}l=w(f,a,!1,!0);l=l.id;return g(P,l)?P[l]:t(v("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(a?"":". Use require([])")))}M();fa.nextTick(function(){M();p=C(w(null,a));p.skipMap=c.skipMap;p.init(f,h,k,{enabled:!0});H()});return d}c=c||{};l(d,{isBrowser:N,toUrl:function(b){var c,d=b.lastIndexOf("."),e=b.split("/")[0];-1!==d&&("."!==e&&".."!==e||1<d)&&(c=b.substring(d,b.length),b=b.substring(0,d));return fa.nameToUrl(p(b,a&&a.id,!0),c,!0)},defined:function(b){return g(P,w(b,a,!1,!0).id)},specified:function(b){b=w(b,a,!1,!0).id;return g(P,b)||g(W,b)}});a||(d.undef=function(b){q();var c=w(b,a,!0),d=h(W,b);delete P[b];delete ia[c.url];delete Sa[b];d&&(d.events.defined&&(Sa[b]=d.events),E(b))});return d},enable:function(a){h(W,a.id)&&C(a).enable()},completeLoad:function(a){var b,c,d=h(ba.shim,a)||{},e=d.exports;for(q();za.length;){c=za.shift();if(null===c[0]){c[0]=a;if(b){break}b=!0}else{c[0]===a&&(b=!0)}U(c)}c=h(W,a);if(!b&&!g(P,a)&&c&&!c.inited){if(ba.enforceDefine&&(!e||!r(e))){return B(a)?void 0:t(v("nodefine","No define call for "+a,null,[a]))}U([a,d.deps||[],d.exportsFn])}H()},nameToUrl:function(a,b,d){var e,g,f,k,l,p;if(m.jsExtRegExp.test(a)){k=a+(b||"")}else{e=ba.paths;g=ba.pkgs;k=a.split("/");for(l=k.length;0<l;--l){if(p=k.slice(0,l).join("/"),f=h(g,p),p=h(e,p)){c(p)&&(p=p[0]);k.splice(0,l,p);break}else{if(f){a=a===f.name?f.location+"/"+f.main:f.location;k.splice(0,l,a);break}}}k=k.join("/");k+=b||(/\?/.test(k)||d?"":".js");k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":ba.baseUrl)+k}return ba.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+ba.urlArgs):k},load:function(a,b){m.load(fa,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||J.test((a.currentTarget||a.srcElement).readyState)){F=null,a=X(a),fa.completeLoad(a.id)}},onScriptError:function(a){var b=X(a);if(!B(b.id)){return t(v("scripterror","Script error for: "+b.id,a,[b.id]))}}};fa.require=fa.makeRequire();return fa}var m,u,A,w,p,B,F,x,C,E,D=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,H=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,I=/\.js$/,K=/^\.\//;u=Object.prototype;var M=u.toString,L=u.hasOwnProperty,R=Array.prototype.splice,N=!("undefined"===typeof window||!navigator||!window.document),S=!N&&"undefined"!==typeof importScripts,J=N&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Q="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),X={},U={},Y=[],O=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(b(requirejs)){return}U=requirejs;requirejs=void 0}"undefined"!==typeof require&&!b(require)&&(U=require,require=void 0);m=requirejs=function(a,b,d,e){var g,f="_";!c(a)&&"string"!==typeof a&&(g=a,c(b)?(a=b,b=d,d=e):a=[]);g&&g.context&&(f=g.context);(e=h(X,f))||(e=X[f]=m.s.newContext(f));g&&e.configure(g);return e.require(a,b,d)};m.config=function(a){return m(a)};m.nextTick="undefined"!==typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()};require||(require=m);m.version="2.1.8";m.jsExtRegExp=/^\/|:|\?|\.js$/;m.isBrowser=N;u=m.s={contexts:X,newContext:t};m({});d(["toUrl","undef","defined","specified"],function(a){m[a]=function(){var b=X._;return b.require[a].apply(b,arguments)}});N&&(A=u.head=document.getElementsByTagName("head")[0],w=document.getElementsByTagName("base")[0])&&(A=u.head=w.parentNode);m.onError=n;m.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");b.type=a.scriptType||"text/javascript";b.charset="utf-8";b.async=!0;return b};m.load=function(a,b,c){var d=a&&a.config||{};if(N){return d=m.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||Q?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(O=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,x=d,w?A.insertBefore(d,w):A.appendChild(d),x=null,d}if(S){try{importScripts(c),a.completeLoad(b)}catch(e){a.onError(v("importscripts","importScripts failed for "+b+" at "+c,e,[b]))}}};N&&e(document.getElementsByTagName("script"),function(a){A||(A=a.parentNode);if(p=a.getAttribute("data-main")){return C=p,U.baseUrl||(B=C.split("/"),C=B.pop(),E=B.length?B.join("/")+"/":"./",U.baseUrl=E),C=C.replace(I,""),m.jsExtRegExp.test(C)&&(C=p),U.deps=U.deps?U.deps.concat(C):[C],!0}});define=function(a,d,g){var f,h;"string"!==typeof a&&(g=d,d=a,a=null);c(d)||(g=d,d=null);!d&&b(g)&&(d=[],g.length&&(g.toString().replace(D,"").replace(H,function(a,b){d.push(b)}),d=(1===g.length?["require"]:["require","exports","module"]).concat(d)));O&&((f=x)||(F&&"interactive"===F.readyState||e(document.getElementsByTagName("script"),function(a){if("interactive"===a.readyState){return F=a}}),f=F),f&&(a||(a=f.getAttribute("data-requiremodule")),h=X[f.getAttribute("data-requirecontext")]));(h?h.defQueue:Y).push([a,d,g])};define.amd={jQuery:!0};m.exec=function(a){return eval(a)};m(U)}})(this);define("utils/utils",[],function(){return{hasLocalStorage:function(){return"localStorage" in window&&null!==window.localStorage?window.localStorage:(console.error("GO: Localstorage is not supported by the browser. You may experience perfomance issues"),!1)},addGradient:function(a,b,c){function d(a){return 0===a||1===a?[0]:Array.apply(null,Array(a)).map(function(b,c){return 100/(a-1)*c})}var e=a.namespaceURI,g=document.createElementNS(e,"linearGradient");if(g.setAttribute("id","grad-"+b),c[0] instanceof Object){c.forEach(function(a){var b,c=document.createElementNS(e,"stop");for(b in a){a.hasOwnProperty(b)&&c.setAttribute(b,a[b])}g.appendChild(c)})}else{if("string"==typeof c[0]){var h=d(c.length);c.forEach(function(a,b){var c=document.createElementNS(e,"stop");c.setAttribute("offset",h[b]+"%");c.setAttribute("stop-color",a);g.appendChild(c)})}}return(a.querySelector("defs")||a.insertBefore(document.createElementNS(e,"defs"),a.firstChild)).appendChild(g)},addImage:function(a,b,c,d,e){var g=a.namespaceURI,h=document.createElementNS(g,"pattern");h.setAttribute("x",0);h.setAttribute("y",0);h.setAttribute("id","image-"+b);h.setAttribute("width",d);h.setAttribute("height",e);b=document.createElementNS(g,"image");b.setAttribute("x",0);b.setAttribute("y",0);b.setAttribute("width",d);b.setAttribute("height",e);b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);h.appendChild(b);return(a.querySelector("defs")||a.insertBefore(document.createElementNS(g,"defs"),a.firstChild)).appendChild(h)},addClipPathCircle:function(a,b,c){var d=a.namespaceURI,e=document.createElementNS(d,"clipPath");e.setAttribute("id",b);b=document.createElementNS(d,"circle");b.setAttribute("r",c);b.setAttribute("cx",50);b.setAttribute("cy",50);e.appendChild(b);return(a.querySelector("defs")||a.insertBefore(document.createElementNS(d,"defs"),a.firstChild)).appendChild(e)},getTagColors:function(){return{"c#":"#68217A",java:"#C50000,#DF0000,#FE0000",javascript:"#F8DC3D",php:"#777BB4",android:"#A4C439",python:"#3779AF,#FFCC3B",jquery:"#0769AD","c++":"#A1BCDF",html:"#E34C26,#F06529",html5:"#E34C26,#F06529",mysql:"#93AFC0,#F8900C","asp.net":"#0054A3",".net":"#0054A3","asp.net-mvs":"#0054A3",wpf:"#0054A3",ios:"#585AD7,#5998EB,#5AC8FA",iphone:"#E0E0E1,#7B7B7B","objective-c":"#323F50",ruby:"#D51F07,#AF1401,#991301","ruby-on-rails":"#D51F07,#AF1401,#991301","sql-server":"#DFE0E1,#8C9197,#A0041E,#FA4C44",ajax:"#005A9C",xml:"#005A9C",django:"#7FB83D,#234F32,#092E20",linux:"#2E2C2C,#E7E8E9,#FDD23C",perl:"#E9F2FB,#A9CBEE,#5A8ACB"}},gitColors:function(){return{ActionScript:"#e3491a",Ada:"#02f88c",Agda:"#467C91",Alloy:"#cc5c24",ANTLR:"#9DC3FF",Arc:"#ca2afe",Arduino:"#bd79d1",ASP:"#6a40fd",AspectJ:"#1957b0",Assembly:"#a67219",ATS:"#1ac620",AutoHotkey:"#6594b9",AutoIt:"#36699B",Boo:"#d4bec1",C:"#555","C#":"#5a25a2","C++":"#f34b7d",Cirru:"#aaaaff",Clean:"#3a81ad",Clojure:"#db5855",CoffeeScript:"#244776",ColdFusion:"#ed2cd6","Common Lisp":"#3fb68b","Component Pascal":"#b0ce4e",CSS:"#563d7c",D:"#fcd46d",Dart:"#98BAD6",DM:"#075ff1",Dogescript:"#cca760",Dylan:"#3ebc27",E:"#ccce35",Eagle:"#3994bc",ECL:"#8a1267",edn:"#db5855",Eiffel:"#946d57",Elixir:"#6e4a7e","Emacs Lisp":"#c065db",Erlang:"#0faf8d","F#":"#b845fc",Factor:"#636746",Fancy:"#7b9db4",Fantom:"#dbded5",FLUX:"#33CCFF",Forth:"#341708",FORTRAN:"#4d41b1",Frege:"#00cafe","Game Maker Language":"#8ad353",Glyph:"#e4cc98",Gnuplot:"#f0a9f0",Go:"#375eab",Gosu:"#82937f","Grammatical Framework":"#ff0000",Groovy:"#e69f56",Harbour:"#0e60e3",Haskell:"#29b544",Haxe:"#f7941e",Hy:"#7891b1",IDL:"#e3592c",Io:"#a9188d",Ioke:"#078193",Java:"#b07219",JavaScript:"#f1e05a",Julia:"#a270ba",KRL:"#f5c800",Lasso:"#2584c3",Latte:"#A8FF97",LFE:"#004200",LiveScript:"#499886",Lua:"#fa1fa1",Mask:"#f97732",Matlab:"#bb92ac",Max:"#ce279c",Mercury:"#abcdef",Mirah:"#c7a938",MTML:"#0095d9",Nemerle:"#0d3c6e",nesC:"#ffce3b",NetLogo:"#ff2b2b",Nimrod:"#37775b",Nu:"#c9df40","Objective-C":"#438eff","Objective-C++":"#4886FC","Objective-J":"#ff0c5a",OCaml:"#3be133",Omgrofl:"#cabbff",ooc:"#b0b77e",Oxygene:"#5a63a3",Pan:"#cc0000",Parrot:"#f3ca0a",Pascal:"#b0ce4e",PAWN:"#dbb284",Perl:"#0298c3",Perl6:"#0298c3",PHP:"#4F5D95",Pike:"#066ab2",PogoScript:"#d80074",Processing:"#2779ab",Prolog:"#74283c","Propeller Spin":"#2b446d",Puppet:"#cc5555","Pure Data":"#91de79",PureScript:"#bcdc53",Python:"#3581ba",QML:"#44a51c",R:"#198ce7",Racket:"#ae17ff","Ragel in Ruby Host":"#ff9c2e",Rebol:"#358a5b",Red:"#ee0000",Rouge:"#cc0088",Ruby:"#701516",Rust:"#dea584",SAS:"#1E90FF",Scala:"#7dd3b0",Scheme:"#1e4aec",Self:"#0579aa",Shell:"#5861ce",Shen:"#120F14",Slash:"#007eff",Smalltalk:"#596706",SourcePawn:"#f69e1d","Standard ML":"#dc566d",SuperCollider:"#46390b",Swift:"#ffac45",SystemVerilog:"#343761",Tcl:"#e4cc98",TeX:"#3D6117",Turing:"#45f715",TypeScript:"#31859c","Unified Parallel C":"#755223",UnrealScript:"#a54c4d",Vala:"#ee7d06",VCL:"#0298c3",Verilog:"#848bf3",VHDL:"#543978",VimL:"#199c4b","Visual Basic":"#945db7",Volt:"#0098db",wisp:"#7582D1",xBase:"#3a4040",XQuery:"#2700e2",Zephir:"#118f9e"}},convertHex:function(a,b){a=a.replace("#","");var c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16);return"rgba("+c+","+d+","+e+","+b/100+")"}}});var THREE={REVISION:"73"};"function"==typeof define&&define.amd?define("three",THREE):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=THREE);void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c){self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"]}void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),h=self.setTimeout(function(){b(c+g)},g);return a=c+g,h});void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})}();void 0===self.performance&&(self.performance={});void 0===self.performance.now&&function(){var a=Date.now();self.performance.now=function(){return Date.now()-a}}();void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.NeverDepth=0;THREE.AlwaysDepth=1;THREE.LessDepth=2;THREE.LessEqualDepth=3;THREE.EqualDepth=4;THREE.GreaterEqualDepth=5;THREE.GreaterDepth=6;THREE.NotEqualDepth=7;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=300;THREE.CubeReflectionMapping=301;THREE.CubeRefractionMapping=302;THREE.EquirectangularReflectionMapping=303;THREE.EquirectangularRefractionMapping=304;THREE.SphericalReflectionMapping=305;THREE.RepeatWrapping=1000;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1025;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGBEFormat=THREE.RGBAFormat;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;THREE.LoopOnce=2200;THREE.LoopRepeat=2201;THREE.LoopPingPong=2202;THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};THREE.Color=function(a){return 3===arguments.length?this.fromArray(arguments):this.set(a)};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){return a instanceof THREE.Color?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,b,c){return this.r=a,this.g=b,this.b=c,this},setHSL:function(){function a(a,c,d){return 0>d&&(d+=1),1<d&&--d,1/6>d?a+6*(c-a)*d:0.5>d?c:2/3>d?a+6*(c-a)*(2/3-d):a}return function(b,c,d){return b=THREE.Math.euclideanModulo(b,1),c=THREE.Math.clamp(c,0,1),d=THREE.Math.clamp(d,0,1),0===c?this.r=this.g=this.b=d:(c=0.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3)),this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case"rgb":case"rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this}if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this}break;case"hsl":case"hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/360,e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100;return b(c[5]),this.setHSL(d,e,g)}}}else{if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){if(c=c[1],d=c.length,3===d){return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this}if(6===d){return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}}}return a&&0<a.length&&(c=THREE.ColorKeywords[a],void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,b){return void 0===b&&(b=2),this.r=Math.pow(a.r,b),this.g=Math.pow(a.g,b),this.b=Math.pow(a.b,b),this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;return this.r=Math.pow(a.r,c),this.g=Math.pow(a.g,c),this.b=Math.pow(a.b,c),this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;return this.r=a*a,this.g=b*b,this.b=c*c,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b,c=this.r,d=this.g,e=this.b,g=Math.max(c,d,e),h=Math.min(c,d,e),k=(h+g)/2;if(h===g){h=b=0}else{var l=g-h,h=0.5>=k?l/(g+h):l/(2-g-h);switch(g){case c:b=(d-e)/l+(e>d?6:0);break;case d:b=(e-c)/l+2;break;case e:b=(c-d)/l+4}b/=6}return a.h=b,a.s=h,a.l=k,a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();return d.h+=a,d.s+=b,d.l+=c,this.setHSL(d.h,d.s,d.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,b){return this.r=a.r+b.r,this.g=a.g+b.g,this.b=a.b+b.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){return void 0===b&&(b=0),this.r=a[b],this.g=a[b+1],this.b=a[b+2],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.r,a[b+1]=this.g,a[b+2]=this.b,a}};THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._w=d,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,b){if(0==a instanceof THREE.Euler){throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),g=Math.sin(a._x/2),h=Math.sin(a._y/2),k=Math.sin(a._z/2),l=a.order;return"XYZ"===l?(this._x=g*d*e+c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e-g*h*k):"YXZ"===l?(this._x=g*d*e+c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e+g*h*k):"ZXY"===l?(this._x=g*d*e-c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e-g*h*k):"ZYX"===l?(this._x=g*d*e-c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e+g*h*k):"YZX"===l?(this._x=g*d*e+c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e-g*h*k):"XZY"===l&&(this._x=g*d*e-c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e+g*h*k),!1!==b&&this.onChangeCallback(),this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],h=b[9],k=b[2],l=b[6],b=b[10],f=c+g+b;return 0<f?(c=0.5/Math.sqrt(f+1),this._w=0.25/c,this._x=(l-h)*c,this._y=(d-k)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(l-h)/c,this._x=0.25*c,this._y=(a+e)/c,this._z=(d+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-k)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(h+l)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+k)/c,this._y=(h+l)/c,this._z=0.25*c),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector3),b=c.dot(d)+1,0.000001>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d),this._x=a.x,this._y=a.y,this._z=a.z,this._w=b,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a),this.onChangeCallback(),this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,h=b._x,k=b._y,l=b._z,f=b._w;return this._x=c*f+g*h+d*l-e*k,this._y=d*f+g*k+e*h-c*l,this._z=e*f+g*l+c*k-d*h,this._w=g*f-c*h-d*k-e*l,this.onChangeCallback(),this},multiplyVector3:function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},slerp:function(a,b){if(0===b){return this}if(1===b){return this.copy(a)}var c=this._x,d=this._y,e=this._z,g=this._w,h=g*a._w+c*a._x+d*a._y+e*a._z;if(0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a),1<=h){return this._w=g,this._x=c,this._y=d,this._z=e,this}var k=Math.acos(h),l=Math.sqrt(1-h*h);return 0.001>Math.abs(l)?(this._w=0.5*(g+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this):(h=Math.sin((1-b)*k)/l,k=Math.sin(b*k)/l,this._w=g*h+this._w*k,this._x=c*h+this._x*k,this._y=d*h+this._y*k,this._z=e*h+this._z*k,this.onChangeCallback(),this)},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){return void 0===b&&(b=0),this._x=a[b],this._y=a[b+1],this._z=a[b+2],this._w=a[b+3],this.onChangeCallback(),this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){return this.x=a,this.y=b,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2),a.set(c,c),b.set(d,d),this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;return a=this.y-a.y,b*b+a*a},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a},fromAttribute:function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,g=this.y-a.y;return this.x=e*c-g*d+a.x,this.y=e*d+g*c+a.y,this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0,this},multiplyVectors:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},applyEuler:function(){var a;return function(b){return 0==b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new THREE.Quaternion),this.applyQuaternion(a.setFromEuler(b)),this}}(),applyAxisAngle:function(){var a;return function(b,c){return void 0===a&&(a=new THREE.Quaternion),this.applyQuaternion(a.setFromAxisAngle(b,c)),this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;return a=a.elements,this.x=a[0]*b+a[3]*c+a[6]*d,this.y=a[1]*b+a[4]*c+a[7]*d,this.z=a[2]*b+a[5]*c+a[8]*d,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;return a=a.elements,this.x=a[0]*b+a[4]*c+a[8]*d+a[12],this.y=a[1]*b+a[5]*c+a[9]*d+a[13],this.z=a[2]*b+a[6]*c+a[10]*d+a[14],this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);return this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e,this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e,this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e,this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,h=a.z;a=a.w;var k=a*b+g*d-h*c,l=a*c+h*b-e*d,f=a*d+e*c-g*b,b=-e*b-g*c-h*d;return this.x=k*a+b*-e+l*-h-f*-g,this.y=l*a+b*-g+f*-e-k*-h,this.z=f*a+b*-h+k*-g-l*-e,this},project:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;return a=a.elements,this.x=a[0]*b+a[4]*c+a[8]*d,this.y=a[1]*b+a[5]*c+a[9]*d,this.z=a[2]*b+a[6]*c+a[10]*d,this.normalize(),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this.z=Math.max(a.z,Math.min(b.z,this.z)),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3),a.set(c,c,c),b.set(d,d,d),this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},cross:function(a,b){if(void 0!==b){return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)}var c=this.x,d=this.y,e=this.z;return this.x=d*a.z-e*a.y,this.y=e*a.x-c*a.z,this.z=c*a.y-d*a.x,this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,h=b.y,k=b.z;return this.x=d*k-e*h,this.y=e*g-c*k,this.z=c*h-d*g,this},projectOnVector:function(){var a,b;return function(c){return void 0===a&&(a=new THREE.Vector3),a.copy(c).normalize(),b=this.dot(a),this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){return void 0===a&&(a=new THREE.Vector3),a.copy(this).projectOnVector(b),this.sub(a)}}(),reflect:function(){var a;return function(b){return void 0===a&&(a=new THREE.Vector3),this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){return a=this.dot(a)/(this.length()*a.length()),Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;return a=this.z-a.z,b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();return a=this.set(a.elements[8],a.elements[9],a.elements[10]).length(),this.x=b,this.y=c,this.z=a,this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;return this.x=d[c],this.y=d[c+1],this.z=d[c+2],this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this.z=a[b+2],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a[b+2]=this.z,a},fromAttribute:function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this.z=a.array[b+2],this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;return a=a.elements,this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e,this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e,this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e,this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);return 0.0001>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b),this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var g=a[8],h=a[1],k=a[5],l=a[9];c=a[2];b=a[6];var f=a[10];return 0.01>Math.abs(d-h)&&0.01>Math.abs(g-c)&&0.01>Math.abs(l-b)?0.1>Math.abs(d+h)&&0.1>Math.abs(g+c)&&0.1>Math.abs(l+b)&&0.1>Math.abs(e+k+f-3)?(this.set(1,0,0,0),this):(a=Math.PI,e=(e+1)/2,k=(k+1)/2,f=(f+1)/2,d=(d+h)/4,g=(g+c)/4,l=(l+b)/4,e>k&&e>f?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=g/b):k>f?0.01>k?(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(k),b=d/c,d=l/c):0.01>f?(c=b=0.707106781,d=0):(d=Math.sqrt(f),b=g/d,c=l/d),this.set(b,c,d,a),this):(a=Math.sqrt((b-l)*(b-l)+(g-c)*(g-c)+(h-d)*(h-d)),0.001>Math.abs(a)&&(a=1),this.x=(b-l)/a,this.y=(g-c)/a,this.z=(h-d)/a,this.w=Math.acos((e+k+f-1)/2),this)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this.z=Math.max(a.z,Math.min(b.z,this.z)),this.w=Math.max(a.w,Math.min(b.w,this.w)),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4),a.set(c,c,c,c),b.set(d,d,d,d),this.clamp(a,b)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this.z=a[b+2],this.w=a[b+3],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a[b+2]=this.z,a[b+3]=this.w,a},fromAttribute:function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this.z=a.array[b+2],this.w=a.array[b+3],this}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._order=d||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var g=e[4],h=e[8],k=e[1],l=e[5],f=e[9],n=e[2],r=e[6],e=e[10];return b=b||this._order,"XYZ"===b?(this._y=Math.asin(d(h,-1,1)),0.99999>Math.abs(h)?(this._x=Math.atan2(-f,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(r,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(f,-1,1)),0.99999>Math.abs(f)?(this._y=Math.atan2(h,e),this._z=Math.atan2(k,l)):(this._y=Math.atan2(-n,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(r,-1,1)),0.99999>Math.abs(r)?(this._y=Math.atan2(-n,e),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(k,a))):"ZYX"===b?(this._y=Math.asin(-d(n,-1,1)),0.99999>Math.abs(n)?(this._x=Math.atan2(r,e),this._z=Math.atan2(k,a)):(this._x=0,this._z=Math.atan2(-g,l))):"YZX"===b?(this._z=Math.asin(d(k,-1,1)),0.99999>Math.abs(k)?(this._x=Math.atan2(-f,l),this._y=Math.atan2(-n,a)):(this._x=0,this._y=Math.atan2(h,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),0.99999>Math.abs(g)?(this._x=Math.atan2(r,l),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-f,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b),this._order=b,!1!==c&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(b,c,d){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationFromQuaternion(b),this.setFromRotationMatrix(a,c,d),this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){return this.start.copy(a),this.end.copy(b),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;return d&&(e=THREE.Math.clamp(e,0,1)),e}}(),closestPointToPoint:function(a,b,c){return a=this.closestPointToPointParameter(a,b),c=c||new THREE.Vector3,this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(1/0,1/0);this.max=void 0!==b?b:new THREE.Vector2(-(1/0),-(1/0))};THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;c>b;b++){this.expandByPoint(a[b])}return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(1/0,1/0,1/0);this.max=void 0!==b?b:new THREE.Vector3(-(1/0),-(1/0),-(1/0))};THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;c>b;b++){this.expandByPoint(a[b])}return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;return b.updateMatrixWorld(!0),this.makeEmpty(),b.traverse(function(b){var e=b.geometry;if(void 0!==e){if(e instanceof THREE.Geometry){for(var g=e.vertices,e=0,h=g.length;h>e;e++){a.copy(g[e]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}}else{if(e instanceof THREE.BufferGeometry&&void 0!==e.attributes.position){for(g=e.attributes.position.array,e=0,h=g.length;h>e;e+=3){a.set(g[e],g[e+1],g[e+2]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}}}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){return b=b||new THREE.Sphere,b.center=this.center(),b.radius=0.5*this.size(a).length(),b}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){return a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b),this.makeEmpty(),this.setFromPoints(a),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,g,h,k,l){var f=this.elements;return f[0]=a,f[3]=b,f[6]=c,f[1]=d,f[4]=e,f[7]=g,f[2]=h,f[5]=k,f[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){return a=a.elements,this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]),this},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;d>e;e+=3,c+=3){a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c)}return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;d>e;e++,c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z)}return b}}(),multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],l=a[7],a=a[8];return b*g*a-b*h*l-c*e*a+c*h*k+d*e*l-d*g*k},getInverse:function(a,b){var c=a.elements,d=this.elements;if(d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4],c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6],0===c){if(b){throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0")}return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/c),this},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a},getNormalMatrix:function(a){return this.getInverse(a).transpose(),this},transposeIntoArray:function(a){var b=this.elements;return a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8],this},fromArray:function(a){return this.elements.set(a),this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,g,h,k,l,f,n,r,v,t,m,u){var A=this.elements;return A[0]=a,A[4]=b,A[8]=c,A[12]=d,A[1]=e,A[5]=g,A[9]=h,A[13]=k,A[2]=l,A[6]=f,A[10]=n,A[14]=r,A[3]=v,A[7]=t,A[11]=m,A[15]=u,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},copyPosition:function(a){var b=this.elements;return a=a.elements,b[12]=a[12],b[13]=a[13],b[14]=a[14],this},extractBasis:function(a,b,c){var d=this.elements;return a.set(d[0],d[1],d[2]),b.set(d[4],d[5],d[6]),c.set(d[8],d[9],d[10]),this},makeBasis:function(a,b,c){return this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();return c[0]=b[0]*d,c[1]=b[1]*d,c[2]=b[2]*d,c[4]=b[4]*e,c[5]=b[5]*e,c[6]=b[6]*e,c[8]=b[8]*g,c[9]=b[9]*g,c[10]=b[10]*g,this}}(),makeRotationFromEuler:function(a){0==a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=g*k;var l=g*e,f=c*k,n=c*e;b[0]=h*k;b[4]=-h*e;b[8]=d;b[1]=l+f*d;b[5]=a-n*d;b[9]=-c*h;b[2]=n-a*d;b[6]=f+l*d;b[10]=g*h}else{"YXZ"===a.order?(a=h*k,l=h*e,f=d*k,n=d*e,b[0]=a+n*c,b[4]=f*c-l,b[8]=g*d,b[1]=g*e,b[5]=g*k,b[9]=-c,b[2]=l*c-f,b[6]=n+a*c,b[10]=g*h):"ZXY"===a.order?(a=h*k,l=h*e,f=d*k,n=d*e,b[0]=a-n*c,b[4]=-g*e,b[8]=f+l*c,b[1]=l+f*c,b[5]=g*k,b[9]=n-a*c,b[2]=-g*d,b[6]=c,b[10]=g*h):"ZYX"===a.order?(a=g*k,l=g*e,f=c*k,n=c*e,b[0]=h*k,b[4]=f*d-l,b[8]=a*d+n,b[1]=h*e,b[5]=n*d+a,b[9]=l*d-f,b[2]=-d,b[6]=c*h,b[10]=g*h):"YZX"===a.order?(a=g*h,l=g*d,f=c*h,n=c*d,b[0]=h*k,b[4]=n-a*e,b[8]=f*e+l,b[1]=e,b[5]=g*k,b[9]=-c*k,b[2]=-d*k,b[6]=l*e+f,b[10]=a-n*e):"XZY"===a.order&&(a=g*h,l=g*d,f=c*h,n=c*d,b[0]=h*k,b[4]=-e,b[8]=d*k,b[1]=a*e+n,b[5]=g*k,b[9]=l*e-f,b[2]=f*e-l,b[6]=c*k,b[10]=n*e+a)}return b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,g=a.w,h=c+c,k=d+d,l=e+e;a=c*h;var f=c*k,c=c*l,n=d*k,d=d*l,e=e*l,h=g*h,k=g*k,g=g*l;return b[0]=1-(n+e),b[4]=f-g,b[8]=c+k,b[1]=f+g,b[5]=1-(a+e),b[9]=d-h,b[2]=c-k,b[6]=d+h,b[10]=1-(a+n),b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},lookAt:function(){var a,b,c;return function(d,e,g){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Vector3);void 0===c&&(c=new THREE.Vector3);var h=this.elements;return c.subVectors(d,e).normalize(),0===c.lengthSq()&&(c.z=1),a.crossVectors(g,c).normalize(),0===a.lengthSq()&&(c.x+=0.0001,a.crossVectors(g,c).normalize()),b.crossVectors(c,a),h[0]=a.x,h[4]=b.x,h[8]=c.x,h[1]=a.y,h[5]=b.y,h[9]=c.y,h[2]=a.z,h[6]=b.z,h[10]=c.z,this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,g=c[0],h=c[4],k=c[8],l=c[12],f=c[1],n=c[5],r=c[9],v=c[13],t=c[2],m=c[6],u=c[10],A=c[14],w=c[3],p=c[7],B=c[11],c=c[15],F=d[0],x=d[4],C=d[8],E=d[12],D=d[1],H=d[5],I=d[9],K=d[13],M=d[2],L=d[6],R=d[10],N=d[14],S=d[3],J=d[7],Q=d[11],d=d[15];return e[0]=g*F+h*D+k*M+l*S,e[4]=g*x+h*H+k*L+l*J,e[8]=g*C+h*I+k*R+l*Q,e[12]=g*E+h*K+k*N+l*d,e[1]=f*F+n*D+r*M+v*S,e[5]=f*x+n*H+r*L+v*J,e[9]=f*C+n*I+r*R+v*Q,e[13]=f*E+n*K+r*N+v*d,e[2]=t*F+m*D+u*M+A*S,e[6]=t*x+m*H+u*L+A*J,e[10]=t*C+m*I+u*R+A*Q,e[14]=t*E+m*K+u*N+A*d,e[3]=w*F+p*D+B*M+c*S,e[7]=w*x+p*H+B*L+c*J,e[11]=w*C+p*I+B*R+c*Q,e[15]=w*E+p*K+B*N+c*d,this},multiplyToArray:function(a,b,c){var d=this.elements;return this.multiplyMatrices(a,b),c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],this},multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;d>e;e+=3,c+=3){a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c)}return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;d>e;e++,c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z)}return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],h=a[5],k=a[9],l=a[13],f=a[2],n=a[6],r=a[10],v=a[14];return a[3]*(+e*k*n-d*l*n-e*h*r+c*l*r+d*h*v-c*k*v)+a[7]*(+b*k*v-b*l*r+e*g*r-d*g*v+d*l*f-e*k*f)+a[11]*(+b*l*n-b*h*v-e*g*n+c*g*v+e*h*f-c*l*f)+a[15]*(-d*h*f-b*k*n+b*h*r+d*g*n-c*g*r+c*k*f)},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a[b+9]=c[9],a[b+10]=c[10],a[b+11]=c[11],a[b+12]=c[12],a[b+13]=c[13],a[b+14]=c[14],a[b+15]=c[15],a},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],g=d[4],h=d[8],k=d[12],l=d[1],f=d[5],n=d[9],r=d[13],v=d[2],t=d[6],m=d[10],u=d[14],A=d[3],w=d[7],p=d[11],d=d[15];if(c[0]=n*u*w-r*m*w+r*t*p-f*u*p-n*t*d+f*m*d,c[4]=k*m*w-h*u*w-k*t*p+g*u*p+h*t*d-g*m*d,c[8]=h*r*w-k*n*w+k*f*p-g*r*p-h*f*d+g*n*d,c[12]=k*n*t-h*r*t-k*f*m+g*r*m+h*f*u-g*n*u,c[1]=r*m*A-n*u*A-r*v*p+l*u*p+n*v*d-l*m*d,c[5]=h*u*A-k*m*A+k*v*p-e*u*p-h*v*d+e*m*d,c[9]=k*n*A-h*r*A-k*l*p+e*r*p+h*l*d-e*n*d,c[13]=h*r*v-k*n*v+k*l*m-e*r*m-h*l*u+e*n*u,c[2]=f*u*A-r*t*A+r*v*w-l*u*w-f*v*d+l*t*d,c[6]=k*t*A-g*u*A-k*v*w+e*u*w+g*v*d-e*t*d,c[10]=g*r*A-k*f*A+k*l*w-e*r*w-g*l*d+e*f*d,c[14]=k*f*v-g*r*v-k*l*t+e*r*t+g*l*u-e*f*u,c[3]=n*t*A-f*m*A-n*v*w+l*m*w+f*v*p-l*t*p,c[7]=g*m*A-h*t*A+h*v*w-e*m*w-g*v*p+e*t*p,c[11]=h*f*A-g*n*A-h*l*w+e*n*w+g*l*p-e*f*p,c[15]=g*n*v-h*f*v+h*l*t-e*n*t-g*l*m+e*f*m,c=e*c[0]+l*c[4]+v*c[8]+A*c[12],0===c){if(b){throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0")}return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/c),this},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,d=a.y;return a=a.z,b[0]*=c,b[4]*=d,b[8]*=a,b[1]*=c,b[5]*=d,b[9]*=a,b[2]*=c,b[6]*=d,b[10]*=a,b[3]*=c,b[7]*=d,b[11]*=a,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){return this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1),this},makeRotationX:function(a){var b=Math.cos(a);return a=Math.sin(a),this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1),this},makeRotationY:function(a){var b=Math.cos(a);return a=Math.sin(a),this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1),this},makeRotationZ:function(a){var b=Math.cos(a);return a=Math.sin(a),this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,g=a.x,h=a.y,k=a.z,l=e*g,f=e*h;return this.set(l*g+c,l*h-d*k,l*k+d*h,0,l*h+d*k,f*h+c,f*k-d*g,0,l*k-d*h,f*k+d*g,e*k*k+c,0,0,0,0,1),this},makeScale:function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},compose:function(a,b,c){return this.makeRotationFromQuaternion(b),this.scale(c),this.setPosition(a),this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Matrix4);var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),k=a.set(g[4],g[5],g[6]).length(),l=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(h=-h);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/h;var g=1/k,f=1/l;return b.elements[0]*=c,b.elements[1]*=c,b.elements[2]*=c,b.elements[4]*=g,b.elements[5]*=g,b.elements[6]*=g,b.elements[8]*=f,b.elements[9]*=f,b.elements[10]*=f,d.setFromRotationMatrix(b),e.x=h,e.y=k,e.z=l,this}}(),makeFrustum:function(a,b,c,d,e,g){var h=this.elements;return h[0]=2*e/(b-a),h[4]=0,h[8]=(b+a)/(b-a),h[12]=0,h[1]=0,h[5]=2*e/(d-c),h[9]=(d+c)/(d-c),h[13]=0,h[2]=0,h[6]=0,h[10]=-(g+e)/(g-e),h[14]=-2*g*e/(g-e),h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(0.5*a));var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var h=this.elements,k=b-a,l=c-d,f=g-e;return h[0]=2/k,h[4]=0,h[8]=0,h[12]=-((b+a)/k),h[1]=0,h[5]=2/l,h[9]=0,h[13]=-((c+d)/l),h[2]=0,h[6]=0,h[10]=-2/f,h[14]=-((g+e)/f),h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++){if(b[c]!==a[c]){return !1}}return !0},fromArray:function(a){return this.elements.set(a),this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){return this.origin.copy(a),this.direction.copy(b),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){return this.origin.copy(this.at(b,a)),this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);return 0>c?this.origin.distanceToSquared(b):(a.copy(this.direction).multiplyScalar(c).add(this.origin),a.distanceToSquared(b))}}(),distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,h){a.copy(d).add(e).multiplyScalar(0.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var k,l=0.5*d.distanceTo(e),f=-this.direction.dot(b),n=c.dot(this.direction),r=-c.dot(b),v=c.lengthSq(),t=Math.abs(1-f*f);return 0<t?(d=f*r-n,e=f*n-r,k=l*t,0<=d?e>=-k?k>=e?(l=1/t,d*=l,e*=l,f=d*(d+f*e+2*n)+e*(f*d+e+2*r)+v):(e=l,d=Math.max(0,-(f*e+n)),f=-d*d+e*(e+2*r)+v):(e=-l,d=Math.max(0,-(f*e+n)),f=-d*d+e*(e+2*r)+v):-k>=e?(d=Math.max(0,-(-f*l+n)),e=0<d?-l:Math.min(Math.max(-l,-r),l),f=-d*d+e*(e+2*r)+v):k>=e?(d=0,e=Math.min(Math.max(-l,-r),l),f=e*(e+2*r)+v):(d=Math.max(0,-(f*l+n)),e=0<d?l:Math.min(Math.max(-l,-r),l),f=-d*d+e*(e+2*r)+v)):(e=0<f?-l:l,d=Math.max(0,-(f*e+n)),f=-d*d+e*(e+2*r)+v),g&&g.copy(this.direction).multiplyScalar(d).add(this.origin),h&&h.copy(b).multiplyScalar(e).add(a),f}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,g=b.radius*b.radius;return e>g?null:(g=Math.sqrt(g-e),e=d-g,d+=g,0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c))}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);return 0===b?0===a.distanceToPoint(this.origin)?0:null:(a=-(this.origin.dot(a.normal)+a.constant)/b,0<=a?a:null)},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,g,h;d=1/this.direction.x;g=1/this.direction.y;h=1/this.direction.z;var k=this.origin;return 0<=d?(c=(a.min.x-k.x)*d,d*=a.max.x-k.x):(c=(a.max.x-k.x)*d,d*=a.min.x-k.x),0<=g?(e=(a.min.y-k.y)*g,g*=a.max.y-k.y):(e=(a.max.y-k.y)*g,g*=a.min.y-k.y),c>g||e>d?null:((e>c||c!==c)&&(c=e),(d>g||d!==d)&&(d=g),0<=h?(e=(a.min.z-k.z)*h,h*=a.max.z-k.z):(e=(a.max.z-k.z)*h,h*=a.min.z-k.z),c>h||e>d?null:((e>c||c!==c)&&(c=e),(d>h||d!==d)&&(d=h),0>d?null:this.at(0<=c?c:d,b)))},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,g,h,k,l){if(b.subVectors(g,e),c.subVectors(h,e),d.crossVectors(b,c),g=this.direction.dot(d),0<g){if(k){return null}k=1}else{if(!(0>g)){return null}k=-1;g=-g}return a.subVectors(this.origin,e),e=k*this.direction.dot(c.crossVectors(a,c)),0>e?null:(h=k*this.direction.dot(b.cross(a)),0>h||e+h>g?null:(e=-k*a.dot(d),0>e?null:this.at(e/g,l)))}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){return this.center.copy(a),this.radius=b,this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,g=0,h=b.length;h>g;g++){e=Math.max(e,d.distanceToSquared(b[g]))}return this.radius=Math.sqrt(e),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;return d.copy(a),c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center)),d},getBoundingBox:function(a){return a=a||new THREE.Box3,a.set(this.center,this.center),a.expandByScalar(this.radius),a},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius*=a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};THREE.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane]};THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,g){var h=this.planes;return h[0].copy(a),h[1].copy(b),h[2].copy(c),h[3].copy(d),h[4].copy(e),h[5].copy(g),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++){b[c].copy(a.planes[c])}return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],g=c[3],h=c[4],k=c[5],l=c[6],f=c[7],n=c[8],r=c[9],v=c[10],t=c[11],m=c[12],u=c[13],A=c[14],c=c[15];return b[0].setComponents(g-a,f-h,t-n,c-m).normalize(),b[1].setComponents(g+a,f+h,t+n,c+m).normalize(),b[2].setComponents(g+d,f+k,t+r,c+u).normalize(),b[3].setComponents(g-d,f-k,t-r,c-u).normalize(),b[4].setComponents(g-e,f-l,t-v,c-A).normalize(),b[5].setComponents(g+e,f+l,t+v,c+A).normalize(),this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),a.copy(c.boundingSphere),a.applyMatrix4(b.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++){if(b[d].distanceToPoint(c)<a){return !1}}return !0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var h=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>h&&0>g){return !1}}return !0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++){if(0>b[c].distanceToPoint(a)){return !1}}return !0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){return this.normal.copy(a),this.constant=b,this},setComponents:function(a,b,c,d){return this.normal.set(a,b,c),this.constant=d,this},setFromNormalAndCoplanarPoint:function(a,b){return this.normal.copy(a),this.constant=-b.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){return d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize(),this.setFromNormalAndCoplanarPoint(d,c),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);return a=this.distanceToPoint(a.end),0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),g=this.normal.dot(e);return 0!==g?(g=-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:d.copy(e).multiplyScalar(g).add(b.start)):0===this.distanceToPoint(b.start)?d.copy(b.start):void 0}}(),coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var g=e||c.getNormalMatrix(d),g=a.copy(this.normal).applyMatrix3(g),h=this.coplanarPoint(b);return h.applyMatrix4(d),this.setFromNormalAndCoplanarPoint(g,h),this}}(),translate:function(a){return this.constant-=a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};THREE.Math={generateUUID:function(){var a,b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0;return function(){for(var e=0;36>e;e++){8===e||13===e||18===e||23===e?c[e]="-":14===e?c[e]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),a=15&d,d>>=4,c[e]=b[19===e?3&a|8:a])}return c.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*(3-2*a))},smootherstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*a*(a*(6*a-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a++,a}};THREE.Spline=function(a){function b(a,b,c,d,e,g,f){return a=0.5*(c-a),d=0.5*(d-b),(2*(b-c)+a+d)*f+(-3*(b-c)-2*a-d)*g+a*e+b}this.points=a;var c,d,e,g,h,k,l,f,n,r=[],v={x:0,y:0,z:0};this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++){this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}}};this.getPoint=function(a){return c=(this.points.length-1)*a,d=Math.floor(c),e=c-d,r[0]=0===d?d:d-1,r[1]=d,r[2]=d>this.points.length-2?this.points.length-1:d+1,r[3]=d>this.points.length-3?this.points.length-1:d+2,k=this.points[r[0]],l=this.points[r[1]],f=this.points[r[2]],n=this.points[r[3]],g=e*e,h=e*g,v.x=b(k.x,l.x,f.x,n.x,e,g,h),v.y=b(k.y,l.y,f.y,n.y,e,g,h),v.z=b(k.z,l.z,f.z,n.z,e,g,h),v};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;c>a;a++){b=this.points[a],d[a]=[b.x,b.y,b.z]}return d};this.getLength=function(a){var b,c,d,e=0,g=new THREE.Vector3,f=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;g.copy(this.points[0]);for(a=1;c>a;a++){b=a/c,d=this.getPoint(b),f.copy(d),k+=f.distanceTo(g),g.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=k,e=b)}return h[h.length]=k,{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,g,f,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];f=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);g=b/(this.points.length-1);for(c=1;f-1>c;c++){d=e+1/f*c*(g-e),d=this.getPoint(d),h.push(k.copy(d).clone())}h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){return e=e||new THREE.Vector3,e.subVectors(d,c),a.subVectors(b,c),e.cross(a),b=e.lengthSq(),0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,h,k){a.subVectors(h,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var l=b.dot(b);h=b.dot(c);var f=d*l-e*e;return k=k||new THREE.Vector3,0===f?k.set(-2,-1,-1):(f=1/f,l=(l*g-e*h)*f,d=(d*h-e*g)*f,k.set(1-l-d,d,l))}}();THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){return b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a),0<=b.x&&0<=b.y&&1>=b.x+b.y}}();THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this},setFromPointsAndIndices:function(a,b,c,d){return this.a.copy(a[b]),this.b.copy(a[c]),this.c.copy(a[d]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){return a.subVectors(this.c,this.b),b.subVectors(this.a,this.b),0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Channels=function(){this.mask=1};THREE.Channels.prototype={constructor:THREE.Channels,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=self.performance.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var b=self.performance.now(),a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners){return !1}var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;d>e;e++){c[e]=b[e]}for(e=0;d>e;e++){c[e].call(this,a)}}}}};(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,g,h){if(!1!==a.visible&&(a.raycast(b,g),!0===h)){a=a.children;h=0;for(var k=a.length;k>h;h++){c(a[h],b,g,!0)}}}a.Raycaster=function(b,c,g,h){this.ray=new a.Ray(b,c);this.near=g||0;this.far=h||1/0;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})};a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,0.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,e){var g=[];return c(a,this,g,e),g.sort(b),g},intersectObjects:function(a,e){var g=[];if(!1===Array.isArray(a)){return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g}for(var h=0,k=a.length;k>h;h++){c(a[h],this,g,e)}return g.sort(b),g}}})(THREE);THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.channels=new THREE.Channels;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){return a.setFromAxisAngle(b,c),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){return a.copy(b).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(c)),this}}(),translate:function(a,b){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++){this.add(arguments[b])}return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a instanceof THREE.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++){this.remove(arguments[b])}}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b){return this}for(var c=0,d=this.children.length;d>c;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e){return e}}},getWorldPosition:function(a){return a=a||new THREE.Vector3,this.updateMatrixWorld(!0),a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){return c=c||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,c,b),c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){return b=b||new THREE.Euler,this.getWorldQuaternion(a),b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){return c=c||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,b,c),c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){return b=b||new THREE.Vector3,this.getWorldQuaternion(a),b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;d>c;c++){b[c].traverse(a)}},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;d>c;c++){b[c].traverseVisible(a)}}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=0,c=this.children.length;c>b;b++){this.children[b].updateMatrixWorld(a)}},toJSON:function(a){function b(a){var b,c=[];for(b in a){var d=a[b];delete d.metadata;c.push(d)}return c}var c=void 0===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),!0===this.castShadow&&(e.castShadow=!0),!0===this.receiveShadow&&(e.receiveShadow=!0),!1===this.visible&&(e.visible=!1),e.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid),0<this.children.length){e.children=[];for(var g=0;g<this.children.length;g++){e.children.push(this.children[g].toJSON(a).object)}}if(c){var c=b(a.geometries),g=b(a.materials),h=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<g.length&&(d.materials=g);0<h.length&&(d.textures=h);0<a.length&&(d.images=a)}return d.object=e,d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){if(void 0===b&&(b=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.rotationAutoUpdate=a.rotationAutoUpdate,this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===b){for(var c=0;c<a.children.length;c++){this.add(a.children[c].clone())}}return this}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==g?g:0};THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;c>b;b++){this.vertexNormals[b]=a.vertexNormals[b].clone()}b=0;for(c=a.vertexColors.length;c>b;b++){this.vertexColors[b]=a.vertexColors[b].clone()}return this}};THREE.Face4=function(a,b,c,d,e,g,h){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(a,b,c,e,g,h)};THREE.BufferAttribute=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.dynamic=a.dynamic,this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;e>d;d++){this.array[a+d]=b.array[c+d]}return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),g=new THREE.Color);b[c++]=g.r;b[c++]=g.g;b[c++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];b[c++]=g.a;b[c++]=g.b;b[c++]=g.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),g=new THREE.Vector2);b[c++]=g.x;b[c++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),g=new THREE.Vector3);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),g=new THREE.Vector4);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z;b[c++]=g.w}return this},set:function(a,b){return void 0===b&&(b=0),this.array.set(a,b),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){return this.array[a*this.itemSize]=b,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){return this.array[a*this.itemSize+1]=b,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){return this.array[a*this.itemSize+2]=b,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){return this.array[a*this.itemSize+3]=b,this},setXY:function(a,b,c){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this},setXYZ:function(a,b,c,d){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this.array[a+2]=d,this},setXYZW:function(a,b,c,d,e){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this.array[a+2]=d,this.array[a+3]=e,this},clone:function(){return(new this.constructor).copy(this)}};THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};THREE.DynamicBufferAttribute=function(a,b){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),(new THREE.BufferAttribute(a,b)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.copy=function(a){return THREE.BufferAttribute.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this};THREE.InterleavedBuffer=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;e>d;d++){this.array[a+d]=b.array[c+d]}return this},set:function(a,b){return void 0===b&&(b=0),this.array.set(a,b),this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;THREE.InstancedInterleavedBuffer.prototype.copy=function(a){return THREE.InterleavedBuffer.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this};THREE.InterleavedBufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(a,b){return this.data.array[a*this.data.stride+this.offset]=b,this},setY:function(a,b){return this.data.array[a*this.data.stride+this.offset+1]=b,this},setZ:function(a,b){return this.data.array[a*this.data.stride+this.offset+2]=b,this},setW:function(a,b){return this.data.array[a*this.data.stride+this.offset+3]=b,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this},setXYZ:function(a,b,c,d){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this.data.array[a+2]=d,this},setXYZW:function(a,b,c,d,e){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this.data.array[a+2]=d,this.data.array[a+3]=e,this}};THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;d>c;c++){this.vertices[c].applyMatrix4(a)}c=0;for(d=this.faces.length;d>c;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,g=a.vertexNormals.length;g>e;e++){a.vertexNormals[e].applyMatrix3(b).normalize()}}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0},rotateX:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationX(b),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationY(b),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationZ(b),this.applyMatrix(a),this}}(),translate:function(){var a;return function(b,c,d){return void 0===a&&(a=new THREE.Matrix4),a.makeTranslation(b,c,d),this.applyMatrix(a),this}}(),scale:function(){var a;return function(b,c,d){return void 0===a&&(a=new THREE.Matrix4),a.makeScale(b,c,d),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d){var e=void 0!==h?[n[a].clone(),n[b].clone(),n[d].clone()]:[],g=void 0!==k?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[],e=new THREE.Face3(a,b,d,e,g);c.faces.push(e);void 0!==l&&c.faceVertexUvs[0].push([r[a].clone(),r[b].clone(),r[d].clone()]);void 0!==f&&c.faceVertexUvs[1].push([v[a].clone(),v[b].clone(),v[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,g=e.position.array,h=void 0!==e.normal?e.normal.array:void 0,k=void 0!==e.color?e.color.array:void 0,l=void 0!==e.uv?e.uv.array:void 0,f=void 0!==e.uv2?e.uv2.array:void 0;void 0!==f&&(this.faceVertexUvs[1]=[]);for(var n=[],r=[],v=[],t=e=0;e<g.length;e+=3,t+=2){c.vertices.push(new THREE.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&n.push(new THREE.Vector3(h[e],h[e+1],h[e+2])),void 0!==k&&c.colors.push(new THREE.Color(k[e],k[e+1],k[e+2])),void 0!==l&&r.push(new THREE.Vector2(l[t],l[t+1])),void 0!==f&&v.push(new THREE.Vector2(f[t],f[t+1]))}if(void 0!==d){if(g=a.groups,0<g.length){for(e=0;e<g.length;e++){for(var t=g[e],m=t.start,u=t.count,t=m,m=m+u;m>t;t+=3){b(d[t],d[t+1],d[t+2])}}}else{for(e=0;e<d.length;e+=3){b(d[e],d[e+1],d[e+2])}}}else{for(e=0;e<g.length/3;e+=3){b(e,e+1,e+2)}}return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new THREE.Matrix4;return c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1),this.applyMatrix(c),this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;d>c;c++){var e=this.faces[c],g=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(g,h);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;c>b;b++){d[b]=new THREE.Vector3}if(a){var e,g,h,k=new THREE.Vector3,l=new THREE.Vector3;a=0;for(b=this.faces.length;b>a;a++){c=this.faces[a],e=this.vertices[c.a],g=this.vertices[c.b],h=this.vertices[c.c],k.subVectors(h,g),l.subVectors(e,g),k.cross(l),d[c.a].add(k),d[c.b].add(k),d[c.c].add(k)}}else{for(a=0,b=this.faces.length;b>a;a++){c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal)}}b=0;for(c=this.vertices.length;c>b;b++){d[b].normalize()}a=0;for(b=this.faces.length;b>a;a++){c=this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone())}},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;d>c;c++){for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;b>a;a++){e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone()}}var g=new THREE.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;b>a;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var h,k,l=this.morphNormals[a].vertexNormals;c=0;for(d=this.faces.length;d>c;c++){h=new THREE.Vector3,k={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),l.push(k)}}l=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();c=0;for(d=this.faces.length;d>c;c++){e=this.faces[c],h=l.faceNormals[c],k=l.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}}c=0;for(d=this.faces.length;d>c;c++){e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;d>c;c++){0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(0==a instanceof THREE.Geometry){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)}else{var d,e=this.vertices.length,g=this.vertices,h=a.vertices,k=this.faces,l=a.faces,f=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var n=0,r=h.length;r>n;n++){var v=h[n].clone();void 0!==b&&v.applyMatrix4(b);g.push(v)}n=0;for(r=l.length;r>n;n++){var t,h=l[n],m=h.vertexNormals,u=h.vertexColors,v=new THREE.Face3(h.a+e,h.b+e,h.c+e);v.normal.copy(h.normal);void 0!==d&&v.normal.applyMatrix3(d).normalize();b=0;for(g=m.length;g>b;b++){t=m[b].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),v.vertexNormals.push(t)}v.color.copy(h.color);b=0;for(g=u.length;g>b;b++){t=u[b],v.vertexColors.push(t.clone())}v.materialIndex=h.materialIndex+c;k.push(v)}n=0;for(r=a.length;r>n;n++){if(c=a[n],d=[],void 0!==c){b=0;for(g=c.length;g>b;b++){d.push(c[b].clone())}f.push(d)}}}},mergeMesh:function(a){0==a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a,b,c,d={},e=[],g=[],h=Math.pow(10,4);b=0;for(c=this.vertices.length;c>b;b++){a=this.vertices[b],a=Math.round(a.x*h)+"_"+Math.round(a.y*h)+"_"+Math.round(a.z*h),void 0===d[a]?(d[a]=b,e.push(this.vertices[b]),g[b]=e.length-1):g[b]=g[d[a]]}d=[];b=0;for(c=this.faces.length;c>b;b++){for(h=this.faces[b],h.a=g[h.a],h.b=g[h.b],h.c=g[h.c],h=[h.a,h.b,h.c],a=0;3>a;a++){if(h[a]===h[(a+1)%3]){d.push(b);break}}}for(b=d.length-1;0<=b;b--){for(h=d[b],this.faces.splice(h,1),g=0,c=this.faceVertexUvs.length;c>g;g++){this.faceVertexUvs[g].splice(h,1)}}return b=this.vertices.length-e.length,this.vertices=e,b},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;b>c;c++){a[c]._id=c}a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d,e,g=this.faceVertexUvs[0],h=this.faceVertexUvs[1];g&&g.length===b&&(d=[]);h&&h.length===b&&(e=[]);for(c=0;b>c;c++){var k=a[c]._id;d&&d.push(g[k]);e&&e.push(h[k])}d&&(this.faceVertexUvs[0]=d);e&&(this.faceVertexUvs[1]=e)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();return void 0!==f[b]?f[b]:(f[b]=l.length/3,l.push(a.x,a.y,a.z),f[b])}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();return void 0!==r[b]?r[b]:(r[b]=n.length,n.push(a.getHex()),r[b])}function d(a){var b=a.x.toString()+a.y.toString();return void 0!==t[b]?t[b]:(t[b]=v.length/2,v.push(a.x,a.y),t[b])}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var g,h=this.parameters;for(g in h){void 0!==h[g]&&(e[g]=h[g])}return e}h=[];for(g=0;g<this.vertices.length;g++){var k=this.vertices[g];h.push(k.x,k.y,k.z)}var k=[],l=[],f={},n=[],r={},v=[],t={};for(g=0;g<this.faces.length;g++){var m=this.faces[g],u=void 0!==this.faceVertexUvs[0][g],A=0<m.normal.length(),w=0<m.vertexNormals.length,p=1!==m.color.r||1!==m.color.g||1!==m.color.b,B=0<m.vertexColors.length,F=0,F=a(F,0,0),F=a(F,1,!1),F=a(F,2,!1),F=a(F,3,u),F=a(F,4,A),F=a(F,5,w),F=a(F,6,p),F=a(F,7,B);k.push(F);k.push(m.a,m.b,m.c);u&&(u=this.faceVertexUvs[0][g],k.push(d(u[0]),d(u[1]),d(u[2])));A&&k.push(b(m.normal));w&&(A=m.vertexNormals,k.push(b(A[0]),b(A[1]),b(A[2])));p&&k.push(c(m.color));B&&(m=m.vertexColors,k.push(c(m[0]),c(m[1]),c(m[2])))}return e.data={},e.data.vertices=h,e.data.normals=l,0<n.length&&(e.data.colors=n),0<v.length&&(e.data.uvs=[v]),e.data.faces=k,e},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;d>c;c++){this.vertices.push(b[c].clone())}b=a.faces;c=0;for(d=b.length;d>c;c++){this.faces.push(b[c].clone())}c=0;for(d=a.faceVertexUvs.length;d>c;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;g>e;e++){for(var h=b[e],k=[],l=0,f=h.length;f>l;l++){k.push(h[l].clone())}this.faceVertexUvs[c].push(k)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b,c,d=[];a=a.faces;for(var e=0;e<a.length;e++){var g=a[e];g.materialIndex!==c&&(c=g.materialIndex,void 0!==b&&(b.count=3*e-b.start,d.push(b)),b={start:3*e,materialIndex:c})}void 0!==b&&(b.count=3*e-b.start,d.push(b));this.groups=d},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,h=a.morphTargets,k=h.length;if(0<k){for(var l=[],f=0;k>f;f++){l[f]=[]}this.morphTargets.position=l}var n=a.morphNormals,r=n.length;if(0<r){for(var v=[],f=0;r>f;f++){v[f]=[]}this.morphTargets.normal=v}for(var t=a.skinIndices,m=a.skinWeights,u=t.length===c.length,A=m.length===c.length,f=0;f<b.length;f++){var w=b[f];this.vertices.push(c[w.a],c[w.b],c[w.c]);var p=w.vertexNormals;3===p.length?this.normals.push(p[0],p[1],p[2]):(p=w.normal,this.normals.push(p,p,p));p=w.vertexColors;3===p.length?this.colors.push(p[0],p[1],p[2]):(p=w.color,this.colors.push(p,p,p));!0===e&&(p=d[0][f],void 0!==p?this.uvs.push(p[0],p[1],p[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",f),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===g&&(p=d[1][f],void 0!==p?this.uvs2.push(p[0],p[1],p[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",f),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(p=0;k>p;p++){var B=h[p].vertices;l[p].push(B[w.a],B[w.b],B[w.c])}for(p=0;r>p;p++){B=n[p].vertexNormals[f],v[p].push(B.a,B.b,B.c)}u&&this.skinIndices.push(t[w.a],t[w.b],t[w.c]);A&&this.skinWeights.push(m[w.a],m[w.b],m[w.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype);THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:1/0}};THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){0==b instanceof THREE.BufferAttribute&&0==b instanceof THREE.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new THREE.BufferAttribute(b,c))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b)):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a]},get drawcalls(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},get offsets(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationX(b),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationY(b),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(b){return void 0===a&&(a=new THREE.Matrix4),a.makeRotationZ(b),this.applyMatrix(a),this}}(),translate:function(){var a;return function(b,c,d){return void 0===a&&(a=new THREE.Matrix4),a.makeTranslation(b,c,d),this.applyMatrix(a),this}}(),scale:function(){var a;return function(b,c,d){return void 0===a&&(a=new THREE.Matrix4),a.makeScale(b,c,d),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Points||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else{a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b)}return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Mesh){var c=b.__directGeometry;if(void 0===c){return this.fromGeometry(b)}c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}return !0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1),!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1),!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1),b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1),b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1),b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,g=d.length;g>e;e++){var h=d[e],k=new THREE.Float32Attribute(3*h.length,3);b.push(k.copyVector3sArray(h))}this.morphAttributes[c]=b}return 0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices))),0<a.skinWeights.length&&(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights))),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){var a=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var b=this.attributes.position.array;if(b){var c=this.boundingBox;c.makeEmpty();for(var d=0,e=b.length;e>d;d+=3){a.fromArray(b,d),c.expandByPoint(a)}}void 0!==b&&0!==b.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0));(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,g=c.length;g>e;e+=3){b.fromArray(c,e),a.expandByPoint(b)}a.center(d);for(var h=0,e=0,g=c.length;g>e;e+=3){b.fromArray(c,e),h=Math.max(h,d.distanceToSquared(b))}this.boundingSphere.radius=Math.sqrt(h);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal){this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(d.length),3))}else{for(var e=b.normal.array,g=0,h=e.length;h>g;g++){e[g]=0}}var k,l,f,e=b.normal.array,n=new THREE.Vector3,r=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector3,m=new THREE.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var u=0,A=c.length;A>u;++u){for(g=c[u],h=g.start,k=g.count,g=h,h+=k;h>g;g+=3){k=3*a[g+0],l=3*a[g+1],f=3*a[g+2],n.fromArray(d,k),r.fromArray(d,l),v.fromArray(d,f),t.subVectors(v,r),m.subVectors(n,r),t.cross(m),e[k]+=t.x,e[k+1]+=t.y,e[k+2]+=t.z,e[l]+=t.x,e[l+1]+=t.y,e[l+2]+=t.z,e[f]+=t.x,e[f+1]+=t.y,e[f+2]+=t.z}}}else{for(g=0,h=d.length;h>g;g+=9){n.fromArray(d,g),r.fromArray(d,g+3),v.fromArray(d,g+6),t.subVectors(v,r),m.subVectors(n,r),t.cross(m),e[g]=t.x,e[g+1]=t.y,e[g+2]=t.z,e[g+3]=t.x,e[g+4]=t.y,e[g+5]=t.z,e[g+6]=t.x,e[g+7]=t.y,e[g+8]=t.z}}this.normalizeNormals();b.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(a){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(a,b){if(0!=a instanceof THREE.BufferGeometry){void 0===b&&(b=0);var c,d=this.attributes;for(c in d){if(void 0!==a.attributes[c]){for(var e=d[c].array,g=a.attributes[c],h=g.array,k=0,g=g.itemSize*b;k<h.length;k++,g++){e[g]=h[k]}}}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var a,b,c,d=this.attributes.normal.array,e=0,g=d.length;g>e;e+=3){a=d[e],b=d[e+1],c=d[e+2],a=1/Math.sqrt(a*a+b*b+c*c),d[e]*=a,d[e+1]*=a,d[e+2]*=a}},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var b,c=this.parameters;for(b in c){void 0!==c[b]&&(a[b]=c[b])}return a}a.data={attributes:{}};var d=this.index;null!==d&&(c=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:c});d=this.attributes;for(b in d){var e=d[b],c=Array.prototype.slice.call(e.array);a.data.attributes[b]={itemSize:e.itemSize,type:e.array.constructor.name,array:c}}return b=this.groups,0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b))),b=this.boundingSphere,null!==b&&(a.data.boundingSphere={center:b.center.toArray(),radius:b.radius}),a},clone:function(){return(new this.constructor).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var c,b=a.attributes;for(c in b){this.addAttribute(c,b[c].clone())}a=a.groups;c=0;for(b=a.length;b>c;c++){var d=a[c];this.addGroup(d.start,d.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.BufferGeometry.MaxIndex=65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};THREE.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var c,b=a.attributes;for(c in b){this.addAttribute(c,b[c].clone())}a=a.groups;c=0;for(b=a.length;b>c;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype);THREE.AnimationAction=function(a,b,c,d,e){if(void 0===a){throw Error("clip is null")}this.clip=a;this.localRoot=null;this.startTime=b||0;this.timeScale=c||1;this.weight=d||1;this.loop=e||THREE.LoopRepeat;this.loopCount=0;this.enabled=!0;this.actionTime=-this.startTime;this.clipTime=0;this.propertyBindings=[]};THREE.AnimationAction.prototype={constructor:THREE.AnimationAction,setLocalRoot:function(a){return this.localRoot=a,this},updateTime:function(a){var b=this.clipTime,c=this.loopCount,d=this.clip.duration;return this.actionTime+=a,this.loop===THREE.LoopOnce?(this.loopCount=0,this.clipTime=Math.min(Math.max(this.actionTime,0),d),this.clipTime!==b&&(this.clipTime===d?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this,direction:-1})),this.clipTime):(this.loopCount=Math.floor(this.actionTime/d),a=this.actionTime-this.loopCount*d,a%=d,this.loop==THREE.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(a=d-a),this.clipTime=a,this.loopCount!==c&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount}),this.clipTime)},syncWith:function(a){return this.actionTime=a.actionTime,this.timeScale=a.timeScale,this},warpToDuration:function(a){return this.timeScale=this.clip.duration/a,this},init:function(a){return this.clipTime=a-this.startTime,this},update:function(a){return this.updateTime(a),this.clip.getAt(this.clipTime)},getTimeScaleAt:function(a){return this.timeScale.getAt?this.timeScale.getAt(a):this.timeScale},getWeightAt:function(a){return this.weight.getAt?this.weight.getAt(a):this.weight}};THREE.AnimationClip=function(a,b,c){if(this.name=a,this.tracks=c,this.duration=void 0!==b?b:-1,0>this.duration){for(a=0;a<this.tracks.length;a++){b=this.tracks[a],this.duration=Math.max(b.keys[b.keys.length-1].time)}}this.trim();this.optimize();this.results=[]};THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,getAt:function(a){a=Math.max(0,Math.min(a,this.duration));for(var b=0;b<this.tracks.length;b++){this.results[b]=this.tracks[b].getAt(a)}return this.results},trim:function(){for(var a=0;a<this.tracks.length;a++){this.tracks[a].trim(0,this.duration)}return this},optimize:function(){for(var a=0;a<this.tracks.length;a++){this.tracks[a].optimize()}return this}};THREE.AnimationClip.CreateFromMorphTargetSequence=function(a,b,c){for(var d=b.length,e=[],g=0;d>g;g++){var h=[];h.push({time:(g+d-1)%d,value:0});h.push({time:g,value:1});h.push({time:(g+1)%d,value:0});h.sort(THREE.KeyframeTrack.keyComparer);0===h[0].time&&h.push({time:d,value:h[0].value});e.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+b[g].name+"]",h)).scale(1/c))}return new THREE.AnimationClip(a,-1,e)};THREE.AnimationClip.findByName=function(a,b){for(var c=0;c<a.length;c++){if(a[c].name===b){return a[c]}}return null};THREE.AnimationClip.CreateClipsFromMorphTargetSequences=function(a,b){for(var c={},d=/^([\w-]*?)([\d]+)$/,e=0,g=a.length;g>e;e++){var h=a[e],k=h.name.match(d);if(k&&1<k.length){var l=k[1];(k=c[l])||(c[l]=k=[]);k.push(h)}}d=[];for(l in c){d.push(THREE.AnimationClip.CreateFromMorphTargetSequence(l,c[l],b))}return d};THREE.AnimationClip.parse=function(a){for(var b=[],c=0;c<a.tracks.length;c++){b.push(THREE.KeyframeTrack.parse(a.tracks[c]).scale(1/a.fps))}return new THREE.AnimationClip(a.name,a.duration,b)};THREE.AnimationClip.parseAnimation=function(a,b,c){if(!a){return console.error("  no animation in JSONLoader data"),null}var d=function(a,b,c,d,e){for(var g=[],f=0;f<b.length;f++){var h=b[f];void 0!==h[c]&&g.push({time:h.time,value:e(h)})}return 0<g.length?new d(a,g):null},e=[],g=a.name||"default",h=a.length||-1,k=a.fps||30;a=a.hierarchy||[];for(var l=0;l<a.length;l++){var f=a[l].keys;if(f&&0!=f.length){if(f[0].morphTargets){for(var h={},n=0;n<f.length;n++){if(f[n].morphTargets){for(var r=0;r<f[n].morphTargets.length;r++){h[f[n].morphTargets[r]]=-1}}}for(var v in h){for(var t=[],r=0;r<f[n].morphTargets.length;r++){var m=f[n];t.push({time:m.time,value:m.morphTarget===v?1:0})}e.push(new THREE.NumberKeyframeTrack(c+".morphTargetInfluence["+v+"]",t))}h=h.length*(k||1)}else{n=c+".bones["+b[l].name+"]",(r=d(n+".position",f,"pos",THREE.VectorKeyframeTrack,function(a){return(new THREE.Vector3).fromArray(a.pos)}))&&e.push(r),(r=d(n+".quaternion",f,"rot",THREE.QuaternionKeyframeTrack,function(a){return a.rot.slerp?a.rot.clone():(new THREE.Quaternion).fromArray(a.rot)}))&&e.push(r),(f=d(n+".scale",f,"scl",THREE.VectorKeyframeTrack,function(a){return(new THREE.Vector3).fromArray(a.scl)}))&&e.push(f)}}}return 0===e.length?null:new THREE.AnimationClip(g,h,e)};THREE.AnimationMixer=function(a){this.root=a;this.time=0;this.timeScale=1;this.actions=[];this.propertyBindingMap={}};THREE.AnimationMixer.prototype={constructor:THREE.AnimationMixer,addAction:function(a){this.actions.push(a);a.init(this.time);a.mixer=this;for(var b=a.clip.tracks,c=a.localRoot||this.root,d=0;d<b.length;d++){var e=b[d],g=c.uuid+"-"+e.name,h=this.propertyBindingMap[g];void 0===h&&(h=new THREE.PropertyBinding(c,e.name),this.propertyBindingMap[g]=h);a.propertyBindings.push(h);h.referenceCount+=1}},removeAllActions:function(){for(var a=0;a<this.actions.length;a++){this.actions[a].mixer=null}for(var b in this.propertyBindingMap){this.propertyBindingMap[b].unbind()}return this.actions=[],this.propertyBindingMap={},this},removeAction:function(a){var b=this.actions.indexOf(a);-1!==b&&(this.actions.splice(b,1),a.mixer=null);b=a.localRoot||this.root;a=a.clip.tracks;for(var c=0;c<a.length;c++){var d=b.uuid+"-"+a[c].name,e=this.propertyBindingMap[d];--e.referenceCount;0>=e.referenceCount&&(e.unbind(),delete this.propertyBindingMap[d])}return this},findActionByName:function(a){for(var b=0;b<this.actions.length;b++){if(this.actions[b].name===a){return this.actions[b]}}return null},play:function(a,b){return a.startTime=this.time,this.addAction(a),this},fadeOut:function(a,b){var c=[];return c.push({time:this.time,value:1}),c.push({time:this.time+b,value:0}),a.weight=new THREE.NumberKeyframeTrack("weight",c),this},fadeIn:function(a,b){var c=[];return c.push({time:this.time,value:0}),c.push({time:this.time+b,value:1}),a.weight=new THREE.NumberKeyframeTrack("weight",c),this},warp:function(a,b,c,d){var e=[];return e.push({time:this.time,value:b}),e.push({time:this.time+d,value:c}),a.timeScale=new THREE.NumberKeyframeTrack("timeScale",e),this},crossFade:function(a,b,c,d){if(this.fadeOut(a,c),this.fadeIn(b,c),d){d=a.clip.duration/b.clip.duration;var e=1/d;this.warp(a,1,d,c);this.warp(b,e,1,c)}return this},update:function(a){a*=this.timeScale;this.time+=a;for(var b=0;b<this.actions.length;b++){var c=this.actions[b],d=c.getWeightAt(this.time),e=c.getTimeScaleAt(this.time),e=c.update(a*e);if(!(0>=c.weight)&&c.enabled){for(var g=0;g<e.length;g++){c.propertyBindings[g].accumulate(e[g],d)}}}for(var h in this.propertyBindingMap){this.propertyBindingMap[h].apply()}return this}};THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype);THREE.AnimationUtils={getEqualsFunc:function(a){return a.equals?function(a,c){return a.equals(c)}:function(a,c){return a===c}},clone:function(a){if("object"==typeof a){if(a.clone){return a.clone()}console.error("can not figure out how to copy exemplarValue",a)}return a},lerp:function(a,b,c,d){return THREE.AnimationUtils.getLerpFunc(a,d)(a,b,c)},lerp_object:function(a,b,c){return a.lerp(b,c)},slerp_object:function(a,b,c){return a.slerp(b,c)},lerp_number:function(a,b,c){return a*(1-c)+b*c},lerp_boolean:function(a,b,c){return 0.5>c?a:b},lerp_boolean_immediate:function(a,b,c){return a},lerp_string:function(a,b,c){return 0.5>c?a:b},lerp_string_immediate:function(a,b,c){return a},getLerpFunc:function(a,b){if(void 0===a||null===a){throw Error("examplarValue is null")}switch(typeof a){case"object":if(a.lerp){return THREE.AnimationUtils.lerp_object}if(a.slerp){return THREE.AnimationUtils.slerp_object}break;case"number":return THREE.AnimationUtils.lerp_number;case"boolean":return b?THREE.AnimationUtils.lerp_boolean:THREE.AnimationUtils.lerp_boolean_immediate;case"string":return b?THREE.AnimationUtils.lerp_string:THREE.AnimationUtils.lerp_string_immediate}}};THREE.KeyframeTrack=function(a,b){if(void 0===a){throw Error("track name is undefined")}if(void 0===b||0===b.length){throw Error("no keys in track named "+a)}this.name=a;this.keys=b;this.lastIndex=0;this.validate();this.optimize()};THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,getAt:function(a){for(;this.lastIndex<this.keys.length&&a>=this.keys[this.lastIndex].time;){this.lastIndex++}for(;0<this.lastIndex&&a<this.keys[this.lastIndex-1].time;){this.lastIndex--}if(this.lastIndex>=this.keys.length){return this.setResult(this.keys[this.keys.length-1].value),this.result}if(0===this.lastIndex){return this.setResult(this.keys[0].value),this.result}var b=this.keys[this.lastIndex-1];if(this.setResult(b.value),b.constantToNext){return this.result}var c=this.keys[this.lastIndex];return this.result=this.lerpValues(this.result,c.value,(a-b.time)/(c.time-b.time))},shift:function(a){if(0!==a){for(var b=0;b<this.keys.length;b++){this.keys[b].time+=a}}return this},scale:function(a){if(1!==a){for(var b=0;b<this.keys.length;b++){this.keys[b].time*=a}}return this},trim:function(a,b){for(var c=0,d=1;d<this.keys.length;d++){this.keys[d]<=a&&c++}for(var e=0,d=this.keys.length-2;0<d&&this.keys[d]>=b;d++){e++}return 0<c+e&&(this.keys=this.keys.splice(c,this.keys.length-e-c)),this},validate:function(){var a=null;if(0!==this.keys.length){for(var b=0;b<this.keys.length;b++){var c=this.keys[b];if(!c){return void console.error("  key is null in track",this,b)}if("number"!=typeof c.time||isNaN(c.time)){return void console.error("  key.time is not a valid number",this,b,c)}if(void 0===c.value||null===c.value){return void console.error("  key.value is null in track",this,b,c)}if(a&&a.time>c.time){return void console.error("  key.time is less than previous key time, out of order keys",this,b,c,a)}a=c}return this}console.error("  track is empty, no keys",this)},optimize:function(){var a=[],b=this.keys[0];a.push(b);THREE.AnimationUtils.getEqualsFunc(b.value);for(var c=1;c<this.keys.length-1;c++){var d=this.keys[c],e=this.keys[c+1];b.time===d.time||this.compareValues(b.value,d.value)&&this.compareValues(d.value,e.value)||(b.constantToNext=this.compareValues(b.value,d.value),a.push(d),b=d)}return a.push(this.keys[this.keys.length-1]),this.keys=a,this}};THREE.KeyframeTrack.keyComparer=function(a,b){return a.time-b.time};THREE.KeyframeTrack.parse=function(a){if(void 0===a.type){throw Error("track type undefined, can not parse")}return THREE.KeyframeTrack.GetTrackTypeForTypeName(a.type).parse(a)};THREE.KeyframeTrack.GetTrackTypeForTypeName=function(a){switch(a.toLowerCase()){case"vector":case"vector2":case"vector3":case"vector4":return THREE.VectorKeyframeTrack;case"quaternion":return THREE.QuaternionKeyframeTrack;case"integer":case"scalar":case"double":case"float":case"number":return THREE.NumberKeyframeTrack;case"bool":case"boolean":return THREE.BooleanKeyframeTrack;case"string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+a)};THREE.PropertyBinding=function(a,b){this.rootNode=a;this.trackName=b;this.referenceCount=0;this.originalValue=null;var c=THREE.PropertyBinding.parseTrackName(b);this.directoryName=c.directoryName;this.nodeName=c.nodeName;this.objectName=c.objectName;this.objectIndex=c.objectIndex;this.propertyName=c.propertyName;this.propertyIndex=c.propertyIndex;this.node=THREE.PropertyBinding.findNode(a,this.nodeName)||a;this.cumulativeValue=null;this.cumulativeWeight=0};THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,reset:function(){this.cumulativeValue=null;this.cumulativeWeight=0},accumulate:function(a,b){this.isBound||this.bind();0===this.cumulativeWeight?0<b&&(null===this.cumulativeValue&&(this.cumulativeValue=THREE.AnimationUtils.clone(a)),this.cumulativeWeight=b):(this.cumulativeValue=this.lerpValue(this.cumulativeValue,a,b/(this.cumulativeWeight+b)),this.cumulativeWeight+=b)},unbind:function(){this.isBound&&(this.setValue(this.originalValue),this.triggerDirty=this.equalsValue=this.lerpValue=this.getValue=this.setValue=null,this.isBound=!1)},bind:function(){if(!this.isBound){var a=this.node;if(a){if(this.objectName){if("materials"===this.objectName){if(!a.material){return void console.error("  can not bind to material as node does not have a material",this)}if(!a.material.materials){return void console.error("  can not bind to material.materials as node.material does not have a materials array",this)}a=a.material.materials}else{if("bones"===this.objectName){if(!a.skeleton){return void console.error("  can not bind to bones as node does not have a skeleton",this)}for(var a=a.skeleton.bones,b=0;b<a.length;b++){if(a[b].name===this.objectIndex){this.objectIndex=b;break}}}else{if(void 0===a[this.objectName]){return void console.error("  can not bind to objectName of node, undefined",this)}a=a[this.objectName]}}if(void 0!==this.objectIndex){if(void 0===a[this.objectIndex]){return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a)}a=a[this.objectIndex]}}var c=a[this.propertyName];if(c){if(void 0!==this.propertyIndex){if("morphTargetInfluences"===this.propertyName){for(a.geometry||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this),a.geometry.morphTargets||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this),b=0;b<this.node.geometry.morphTargets.length;b++){if(a.geometry.morphTargets[b].name===this.propertyIndex){this.propertyIndex=b;break}}}this.setValue=function(a){return this.equalsValue(c[this.propertyIndex],a)?!1:(c[this.propertyIndex]=a,!0)};this.getValue=function(){return c[this.propertyIndex]}}else{c.copy?(this.setValue=function(a){return this.equalsValue(c,a)?!1:(c.copy(a),!0)},this.getValue=function(){return c}):(this.setValue=function(b){return this.equalsValue(a[this.propertyName],b)?!1:(a[this.propertyName]=b,!0)},this.getValue=function(){return a[this.propertyName]})}void 0!==a.needsUpdate?this.triggerDirty=function(){this.node.needsUpdate=!0}:void 0!==a.matrixWorldNeedsUpdate&&(this.triggerDirty=function(){a.matrixWorldNeedsUpdate=!0});this.originalValue=this.getValue();this.equalsValue=THREE.AnimationUtils.getEqualsFunc(this.originalValue);this.lerpValue=THREE.AnimationUtils.getLerpFunc(this.originalValue,!0);this.isBound=!0}else{console.error("  trying to update property for track: "+this.nodeName+"."+this.propertyName+" but it wasn't found.",a)}}else{console.error("  trying to update node for track: "+this.trackName+" but it wasn't found.")}}},apply:function(){if(this.isBound||this.bind(),0<this.cumulativeWeight){if(1>this.cumulativeWeight){var a=1-this.cumulativeWeight;this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,a/(this.cumulativeWeight+a))}this.setValue(this.cumulativeValue)&&this.triggerDirty&&this.triggerDirty();this.cumulativeValue=null;this.cumulativeWeight=0}}};THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c){throw Error("cannot parse trackName at all: "+a)}if(c.index===b.lastIndex&&b.lastIndex++,b={directoryName:c[1],nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]},null===b.propertyName||0===b.propertyName.length){throw Error("can not parse propertyName from trackName: "+a)}return b};THREE.PropertyBinding.findNode=function(a,b){function c(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b){return d}}return null}function d(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children))){return e}}return null}if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid){return a}if(a.skeleton){var e=c(a.skeleton);if(e){return e}}return a.children&&(e=d(a.children))?e:null};THREE.VectorKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.VectorKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.VectorKeyframeTrack.prototype.constructor=THREE.VectorKeyframeTrack;THREE.VectorKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.VectorKeyframeTrack.prototype.lerpValues=function(a,b,c){return a.lerp(b,c)};THREE.VectorKeyframeTrack.prototype.compareValues=function(a,b){return a.equals(b)};THREE.VectorKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value.clone()})}return new THREE.VectorKeyframeTrack(this.name,a)};THREE.VectorKeyframeTrack.parse=function(a){for(var b=THREE["Vector"+a.keys[0].value.length],c=[],d=0;d<a.keys.length;d++){var e=a.keys[d];c.push({value:(new b).fromArray(e.value),time:e.time})}return new THREE.VectorKeyframeTrack(a.name,c)};THREE.QuaternionKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.QuaternionKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.QuaternionKeyframeTrack.prototype.constructor=THREE.QuaternionKeyframeTrack;THREE.QuaternionKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.QuaternionKeyframeTrack.prototype.lerpValues=function(a,b,c){return a.slerp(b,c)};THREE.QuaternionKeyframeTrack.prototype.compareValues=function(a,b){return a.equals(b)};THREE.QuaternionKeyframeTrack.prototype.multiply=function(a){for(var b=0;b<this.keys.length;b++){this.keys[b].value.multiply(a)}return this};THREE.QuaternionKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value.clone()})}return new THREE.QuaternionKeyframeTrack(this.name,a)};THREE.QuaternionKeyframeTrack.parse=function(a){for(var b=[],c=0;c<a.keys.length;c++){var d=a.keys[c];b.push({value:(new THREE.Quaternion).fromArray(d.value),time:d.time})}return new THREE.QuaternionKeyframeTrack(a.name,b)};THREE.StringKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.StringKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.StringKeyframeTrack.prototype.constructor=THREE.StringKeyframeTrack;THREE.StringKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.StringKeyframeTrack.prototype.lerpValues=function(a,b,c){return 1>c?a:b};THREE.StringKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.StringKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.StringKeyframeTrack(this.name,a)};THREE.StringKeyframeTrack.parse=function(a){return new THREE.StringKeyframeTrack(a.name,a.keys)};THREE.BooleanKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.BooleanKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.BooleanKeyframeTrack.prototype.constructor=THREE.BooleanKeyframeTrack;THREE.BooleanKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.BooleanKeyframeTrack.prototype.lerpValues=function(a,b,c){return 1>c?a:b};THREE.BooleanKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.BooleanKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.BooleanKeyframeTrack(this.name,a)};THREE.BooleanKeyframeTrack.parse=function(a){return new THREE.BooleanKeyframeTrack(a.name,a.keys)};THREE.NumberKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.NumberKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.NumberKeyframeTrack.prototype.constructor=THREE.NumberKeyframeTrack;THREE.NumberKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.NumberKeyframeTrack.prototype.lerpValues=function(a,b,c){return a*(1-c)+b*c};THREE.NumberKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.NumberKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.NumberKeyframeTrack(this.name,a)};THREE.NumberKeyframeTrack.parse=function(a){return new THREE.NumberKeyframeTrack(a.name,a.keys)};THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){return b=b||new THREE.Vector3,this.getWorldQuaternion(a),b.set(0,0,-1).applyQuaternion(a)}}();THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};THREE.Camera.prototype.copy=function(a){return THREE.Object3D.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this};THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,1));this.add(k);var l=new THREE.PerspectiveCamera(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,-1));this.add(l);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,v=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,k,c);c.texture.generateMipmaps=v;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;THREE.OrthographicCamera=function(a,b,c,d,e,g){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:0.1;this.far=void 0!==g?g:2000;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera;THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(c-a,c+a,d+b,d-b,this.near,this.far)};THREE.OrthographicCamera.prototype.copy=function(a){return THREE.Camera.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this};THREE.OrthographicCamera.prototype.toJSON=function(a){return a=THREE.Object3D.prototype.toJSON.call(this,a),a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==d?d:2000;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=g;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=THREE.Math.radToDeg(2*Math.atan(Math.tan(0.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var b=this.fullWidth/this.fullHeight,a=Math.tan(THREE.Math.degToRad(0.5*a))*this.near,c=-a,d=b*c,b=Math.abs(b*a-d),c=Math.abs(a-c);this.projectionMatrix.makeFrustum(d+this.x*b/this.fullWidth,d+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*c/this.fullHeight,a-this.y*c/this.fullHeight,this.near,this.far)}else{this.projectionMatrix.makePerspective(a,this.aspect,this.near,this.far)}};THREE.PerspectiveCamera.prototype.copy=function(a){return THREE.Camera.prototype.copy.call(this,a),this.fov=a.fov,this.aspect=a.aspect,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this};THREE.PerspectiveCamera.prototype.toJSON=function(a){return a=THREE.Object3D.prototype.toJSON.call(this,a),a.object.zoom=this.zoom,a.object.fov=this.fov,a.object.aspect=this.aspect,a.object.near=this.near,a.object.far=this.far,a};THREE.Light=function(a){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a);this.receiveShadow=void 0};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.constructor=THREE.Light;Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(a){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){this.shadow.camera.far=a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")}},shadowBias:{set:function(a){this.shadow.bias=a}},shadowDarkness:{set:function(a){this.shadow.darkness=a}},shadowMapWidth:{set:function(a){this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){this.shadow.mapSize.height=a}}});THREE.Light.prototype.copy=function(a){return THREE.Object3D.prototype.copy.call(this,a),this.color.copy(a.color),this};THREE.Light.prototype.toJSON=function(a){return a=THREE.Object3D.prototype.toJSON.call(this,a),a.object.color=this.color.getHex(),void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex()),void 0!==this.intensity&&(a.object.intensity=this.intensity),void 0!==this.distance&&(a.object.distance=this.distance),void 0!==this.angle&&(a.object.angle=this.angle),void 0!==this.decay&&(a.object.decay=this.decay),void 0!==this.exponent&&(a.object.exponent=this.exponent),a};THREE.LightShadow=function(a){this.camera=a;this.bias=0;this.darkness=1;this.mapSize=new THREE.Vector2(512,512);this.matrix=this.map=null};THREE.LightShadow.prototype={constructor:THREE.LightShadow,copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.darkness=a.darkness;this.mapSize.copy(a.mapSize)},clone:function(){return(new this.constructor).copy(this)}};THREE.AmbientLight=function(a){THREE.Light.call(this,a);this.type="AmbientLight";this.castShadow=void 0};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.shadow=new THREE.LightShadow(new THREE.OrthographicCamera(-500,500,500,-500,50,5000))};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight;THREE.DirectionalLight.prototype.copy=function(a){return THREE.Light.prototype.copy.call(this,a),this.intensity=a.intensity,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.type="HemisphereLight";this.castShadow=void 0;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight;THREE.HemisphereLight.prototype.copy=function(a){return THREE.Light.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this.intensity=a.intensity,this};THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a);this.type="PointLight";this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,1,500))};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.constructor=THREE.PointLight;THREE.PointLight.prototype.copy=function(a){return THREE.Light.prototype.copy.call(this,a),this.intensity=a.intensity,this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this};THREE.SpotLight=function(a,b,c,d,e,g){THREE.Light.call(this,a);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.decay=void 0!==g?g:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(50,1,50,5000))};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.constructor=THREE.SpotLight;THREE.SpotLight.prototype.copy=function(a){return THREE.Light.prototype.copy.call(this,a),this.intensity=a.intensity,this.distance=a.distance,this.angle=a.angle,this.exponent=a.exponent,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this};THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){return !1!==this.enabled?this.files[a]:void 0},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){return a=a.split("/"),1===a.length?"./":(a.pop(),a.join("/")+"/")},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e){d[e]=this.createMaterial(a[e],b,c)}return d},createMaterial:function(){var a,b,c;return function(d,e,g){function h(a,c,d,f,h){a=e+a;var k=THREE.Loader.Handlers.get(a);return null!==k?a=k.load(a):(b.setCrossOrigin(g),a=b.load(a)),void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=THREE.RepeatWrapping),1!==c[1]&&(a.wrapT=THREE.RepeatWrapping)),void 0!==d&&a.offset.fromArray(d),void 0!==f&&("repeat"===f[0]&&(a.wrapS=THREE.RepeatWrapping),"mirror"===f[0]&&(a.wrapS=THREE.MirroredRepeatWrapping),"repeat"===f[1]&&(a.wrapT=THREE.RepeatWrapping),"mirror"===f[1]&&(a.wrapT=THREE.MirroredRepeatWrapping)),void 0!==h&&(a.anisotropy=h),c=THREE.Math.generateUUID(),l[c]=a,c}void 0===a&&(a=new THREE.Color);void 0===b&&(b=new THREE.TextureLoader);void 0===c&&(c=new THREE.MaterialLoader);var k,l={},f={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"};for(k in d){var n=d[k];switch(k){case"DbgColor":f.color=n;break;case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":f.name=n;break;case"blending":f.blending=THREE[n];break;case"colorDiffuse":f.color=a.fromArray(n).getHex();break;case"colorSpecular":f.specular=a.fromArray(n).getHex();break;case"colorEmissive":f.emissive=a.fromArray(n).getHex();break;case"specularCoef":f.shininess=n;break;case"shading":"basic"===n.toLowerCase()&&(f.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(f.type="MeshPhongMaterial");break;case"mapDiffuse":f.map=h(n,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":f.lightMap=h(n,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":f.aoMap=h(n,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":f.bumpMap=h(n,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case"mapBumpScale":f.bumpScale=n;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":f.normalMap=h(n,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case"mapNormalFactor":f.normalScale=[n,n];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":f.specularMap=h(n,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":f.alphaMap=h(n,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":f.side=THREE.BackSide;break;case"doubleSided":f.side=THREE.DoubleSide;break;case"transparency":console.warn("THREE.Loader: transparency has been renamed to opacity");f.opacity=n;break;case"opacity":case"transparent":case"depthTest":case"depthWrite":case"transparent":case"visible":case"wireframe":f[k]=n;break;case"vertexColors":!0===n&&(f.vertexColors=THREE.VertexColors);"face"===n&&(f.vertexColors=THREE.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",k,n)}}return"MeshPhongMaterial"!==f.type&&delete f.specular,1>f.opacity&&(f.transparent=!0),c.setTextures(l),c.parse(f)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;d>c;c+=2){var e=b[c+1];if(b[c].test(a)){return e}}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g){return b&&setTimeout(function(){b(g)},0),g}var h=new XMLHttpRequest;return h.open("GET",a,!0),h.addEventListener("load",function(c){c=c.target.response;THREE.Cache.add(a,c);b&&b(c);e.manager.itemEnd(a)},!1),void 0!==c&&h.addEventListener("progress",function(a){c(a)},!1),h.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1),void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.send(null),e.manager.itemStart(a),h},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a},setWithCredentials:function(a){this.withCredentials=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g){return e.manager.itemStart(a),b?setTimeout(function(){b(g);e.manager.itemEnd(a)},0):e.manager.itemEnd(a),g}var h=document.createElement("img");return h.addEventListener("load",function(c){THREE.Cache.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1),void 0!==c&&h.addEventListener("progress",function(a){c(a)},!1),h.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1),void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),e.manager.itemStart(a),h.src=a,h},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a);c=new THREE.XHRLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.setWithCredentials(this.withCredentials);c.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d){if("object"===d.type){return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.")}if("scene"===d.type){return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}c=e.parse(c,g);b(c.geometry,c.materials)})},setCrossOrigin:function(a){this.crossOrigin=a},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;return function(b){var d,h,k,l,f,n,r,v,t,m,u,A,w,p=a.faces;n=a.vertices;var B=a.normals,F=a.colors,x=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++){a.uvs[d].length&&x++}for(d=0;x>d;d++){c.faceVertexUvs[d]=[]}}l=0;for(f=n.length;f>l;){d=new THREE.Vector3,d.x=n[l++]*b,d.y=n[l++]*b,d.z=n[l++]*b,c.vertices.push(d)}l=0;for(f=p.length;f>l;){if(b=p[l++],t=1&b,k=2&b,d=8&b,r=16&b,m=32&b,n=64&b,b&=128,t){if(t=new THREE.Face3,t.a=p[l],t.b=p[l+1],t.c=p[l+3],u=new THREE.Face3,u.a=p[l+1],u.b=p[l+2],u.c=p[l+3],l+=4,k&&(k=p[l++],t.materialIndex=k,u.materialIndex=k),k=c.faces.length,d){for(d=0;x>d;d++){for(A=a.uvs[d],c.faceVertexUvs[d][k]=[],c.faceVertexUvs[d][k+1]=[],h=0;4>h;h++){v=p[l++],w=A[2*v],v=A[2*v+1],w=new THREE.Vector2(w,v),2!==h&&c.faceVertexUvs[d][k].push(w),0!==h&&c.faceVertexUvs[d][k+1].push(w)}}}if(r&&(r=3*p[l++],t.normal.set(B[r++],B[r++],B[r]),u.normal.copy(t.normal)),m){for(d=0;4>d;d++){r=3*p[l++],m=new THREE.Vector3(B[r++],B[r++],B[r]),2!==d&&t.vertexNormals.push(m),0!==d&&u.vertexNormals.push(m)}}if(n&&(n=p[l++],n=F[n],t.color.setHex(n),u.color.setHex(n)),b){for(d=0;4>d;d++){n=p[l++],n=F[n],2!==d&&t.vertexColors.push(new THREE.Color(n)),0!==d&&u.vertexColors.push(new THREE.Color(n))}}c.faces.push(t);c.faces.push(u)}else{if(t=new THREE.Face3,t.a=p[l++],t.b=p[l++],t.c=p[l++],k&&(k=p[l++],t.materialIndex=k),k=c.faces.length,d){for(d=0;x>d;d++){for(A=a.uvs[d],c.faceVertexUvs[d][k]=[],h=0;3>h;h++){v=p[l++],w=A[2*v],v=A[2*v+1],w=new THREE.Vector2(w,v),c.faceVertexUvs[d][k].push(w)}}}if(r&&(r=3*p[l++],t.normal.set(B[r++],B[r++],B[r])),m){for(d=0;3>d;d++){r=3*p[l++],m=new THREE.Vector3(B[r++],B[r++],B[r]),t.vertexNormals.push(m)}}if(n&&(n=p[l++],t.color.setHex(F[n])),b){for(d=0;3>d;d++){n=p[l++],t.vertexColors.push(new THREE.Color(F[n]))}}c.faces.push(t)}}}(d),function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights){for(var d=0,h=a.skinWeights.length;h>d;d+=b){c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0))}}if(a.skinIndices){for(d=0,h=a.skinIndices.length;h>d;d+=b){c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0))}}c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")}(),function(b){if(void 0!==a.morphTargets){for(var d=0,h=a.morphTargets.length;h>d;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var k=c.morphTargets[d].vertices,l=a.morphTargets[d].vertices,f=0,n=l.length;n>f;f+=3){var r=new THREE.Vector3;r.x=l[f]*b;r.y=l[f+1]*b;r.z=l[f+2]*b;k.push(r)}}}if(void 0!==a.morphColors&&0<a.morphColors.length){for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,k=a.morphColors[0].colors,d=0,h=b.length;h>d;d++){b[d].color.fromArray(k,3*d)}}}(d),function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var h=0;h<d.length;h++){var k=THREE.AnimationClip.parseAnimation(d[h],c.bones);k&&b.push(k)}c.morphTargets&&(d=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)}(),c.computeFaceNormals(),c.computeBoundingSphere(),void 0===a.materials||0===a.materials.length?{geometry:c}:(d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin),{geometry:c,materials:d})}};THREE.LoadingManager=function(a,b,c){var d=this,e=!1,g=0,h=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){h++;!1===e&&void 0!==d.onStart&&d.onStart(a,g,h);e=!0};this.itemEnd=function(a){g++;void 0!==d.onProgress&&d.onProgress(a,g,h);g===h&&(e=!1,void 0!==d.onLoad)&&d.onLoad()};this.itemError=function(a){void 0!==d.onError&&d.onError(a)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.data.index;void 0!==c&&(c=new self[c.type](c.array),b.setIndex(new THREE.BufferAttribute(c,1)));var d,e=a.data.attributes;for(d in e){var g=e[d],c=new self[g.type](g.array);b.addAttribute(d,new THREE.BufferAttribute(c,g.itemSize))}if(d=a.data.groups||a.data.drawcalls||a.data.offsets,void 0!==d){for(c=0,e=d.length;c!==e;++c){g=d[c],b.addGroup(g.start,g.count)}}return a=a.data.boundingSphere,void 0!==a&&(d=new THREE.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new THREE.Sphere(d,a.radius)),b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;return void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a),b[a]},parse:function(a){var b=new THREE[a.type];if(b.uuid=a.uuid,void 0!==a.name&&(b.name=a.name),void 0!==a.color&&b.color.setHex(a.color),void 0!==a.emissive&&b.emissive.setHex(a.emissive),void 0!==a.specular&&b.specular.setHex(a.specular),void 0!==a.shininess&&(b.shininess=a.shininess),void 0!==a.uniforms&&(b.uniforms=a.uniforms),void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors),void 0!==a.shading&&(b.shading=a.shading),void 0!==a.blending&&(b.blending=a.blending),void 0!==a.side&&(b.side=a.side),void 0!==a.opacity&&(b.opacity=a.opacity),void 0!==a.transparent&&(b.transparent=a.transparent),void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest),void 0!==a.depthTest&&(b.depthTest=a.depthTest),void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite),void 0!==a.wireframe&&(b.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.size&&(b.size=a.size),void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(b.map=this.getTexture(a.map)),void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0),void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap)),void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale),void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap)),a.normalScale&&(b.normalScale=new THREE.Vector2(a.normalScale,a.normalScale)),void 0!==a.displacementMap&&(b.displacementMap=this.getTexture(a.displacementMap)),void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias),void 0!==a.specularMap&&(b.specularMap=this.getTexture(a.specularMap)),void 0!==a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation),a.reflectivity&&(b.reflectivity=a.reflectivity),void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap)),void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap)),void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity),void 0!==a.materials){for(var c=0,d=a.materials.length;d>c;c++){b.materials.push(this.parse(a.materials[c]))}}return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);return a.animations&&(e.animations=this.parseAnimations(a.animations)),void 0!==a.images&&0!==a.images.length||void 0===b||b(e),e},parseGeometries:function(a){var b={};if(void 0!==a){for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,g=a.length;g>e;e++){var h,k=a[e];switch(k.type){case"PlaneGeometry":case"PlaneBufferGeometry":h=new THREE[k.type](k.width,k.height,k.widthSegments,k.heightSegments);break;case"BoxGeometry":case"CubeGeometry":h=new THREE.BoxGeometry(k.width,k.height,k.depth,k.widthSegments,k.heightSegments,k.depthSegments);break;case"CircleBufferGeometry":h=new THREE.CircleBufferGeometry(k.radius,k.segments,k.thetaStart,k.thetaLength);break;case"CircleGeometry":h=new THREE.CircleGeometry(k.radius,k.segments,k.thetaStart,k.thetaLength);break;case"CylinderGeometry":h=new THREE.CylinderGeometry(k.radiusTop,k.radiusBottom,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case"SphereGeometry":h=new THREE.SphereGeometry(k.radius,k.widthSegments,k.heightSegments,k.phiStart,k.phiLength,k.thetaStart,k.thetaLength);break;case"SphereBufferGeometry":h=new THREE.SphereBufferGeometry(k.radius,k.widthSegments,k.heightSegments,k.phiStart,k.phiLength,k.thetaStart,k.thetaLength);break;case"DodecahedronGeometry":h=new THREE.DodecahedronGeometry(k.radius,k.detail);break;case"IcosahedronGeometry":h=new THREE.IcosahedronGeometry(k.radius,k.detail);break;case"OctahedronGeometry":h=new THREE.OctahedronGeometry(k.radius,k.detail);break;case"TetrahedronGeometry":h=new THREE.TetrahedronGeometry(k.radius,k.detail);break;case"RingGeometry":h=new THREE.RingGeometry(k.innerRadius,k.outerRadius,k.thetaSegments,k.phiSegments,k.thetaStart,k.thetaLength);break;case"TorusGeometry":h=new THREE.TorusGeometry(k.radius,k.tube,k.radialSegments,k.tubularSegments,k.arc);break;case"TorusKnotGeometry":h=new THREE.TorusKnotGeometry(k.radius,k.tube,k.radialSegments,k.tubularSegments,k.p,k.q,k.heightScale);break;case"BufferGeometry":h=d.parse(k);break;case"Geometry":h=c.parse(k.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+k.type+'"');continue}h.uuid=k.uuid;void 0!==k.name&&(h.name=k.name);b[k.uuid]=h}}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new THREE.MaterialLoader;d.setTextures(b);for(var e=0,g=a.length;g>e;e++){var h=d.parse(a[e]);c[h.uuid]=h}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){return d.manager.itemStart(a),h.load(a,function(){d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){var g=new THREE.LoadingManager(b),h=new THREE.ImageLoader(g);h.setCrossOrigin(this.crossOrigin);for(var g=0,k=a.length;k>g;g++){var l=a[g],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:d.texturePath+l.url;e[l.uuid]=c(f)}}return e},parseTextures:function(a,b){function c(a){return"number"==typeof a?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),THREE[a])}var d={};if(void 0!==a){for(var e=0,g=a.length;g>e;e++){var h=a[e];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",h.image);var k=new THREE.Texture(b[h.image]);k.needsUpdate=!0;k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);void 0!==h.mapping&&(k.mapping=c(h.mapping));void 0!==h.offset&&(k.offset=new THREE.Vector2(h.offset[0],h.offset[1]));void 0!==h.repeat&&(k.repeat=new THREE.Vector2(h.repeat[0],h.repeat[1]));void 0!==h.minFilter&&(k.minFilter=c(h.minFilter));void 0!==h.magFilter&&(k.magFilter=c(h.magFilter));void 0!==h.anisotropy&&(k.anisotropy=h.anisotropy);Array.isArray(h.wrap)&&(k.wrapS=c(h.wrap[0]),k.wrapT=c(h.wrap[1]));d[h.uuid]=k}}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){function e(a){return void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a),c[a]}function g(a){return void 0!==a?(void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),d[a]):void 0}var h;switch(b.type){case"Scene":h=new THREE.Scene;break;case"PerspectiveCamera":h=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);break;case"OrthographicCamera":h=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case"AmbientLight":h=new THREE.AmbientLight(b.color);break;case"DirectionalLight":h=new THREE.DirectionalLight(b.color,b.intensity);break;case"PointLight":h=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case"SpotLight":h=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent,b.decay);break;case"HemisphereLight":h=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case"Mesh":h=new THREE.Mesh(e(b.geometry),g(b.material));break;case"LOD":h=new THREE.LOD;break;case"Line":h=new THREE.Line(e(b.geometry),g(b.material),b.mode);break;case"PointCloud":case"Points":h=new THREE.Points(e(b.geometry),g(b.material));break;case"Sprite":h=new THREE.Sprite(g(b.material));break;case"Group":h=new THREE.Group;break;default:h=new THREE.Object3D}if(h.uuid=b.uuid,void 0!==b.name&&(h.name=b.name),void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(h.position,h.quaternion,h.scale)):(void 0!==b.position&&h.position.fromArray(b.position),void 0!==b.rotation&&h.rotation.fromArray(b.rotation),void 0!==b.scale&&h.scale.fromArray(b.scale)),void 0!==b.castShadow&&(h.castShadow=b.castShadow),void 0!==b.receiveShadow&&(h.receiveShadow=b.receiveShadow),void 0!==b.visible&&(h.visible=b.visible),void 0!==b.userData&&(h.userData=b.userData),void 0!==b.children){for(var k in b.children){h.add(this.parseObject(b.children[k],c,d))}}if("LOD"===b.type){b=b.levels;for(var l=0;l<b.length;l++){var f=b[l];k=h.getObjectByProperty("uuid",f.object);void 0!==k&&h.addLevel(k,f.distance)}}return h}}()};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.Texture,g=new THREE.ImageLoader(this.manager);return g.setCrossOrigin(this.crossOrigin),g.load(a,function(a){e.image=a;e.needsUpdate=!0;void 0!==b&&b(e)},c,d),e},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.CubeTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(a,b,c,d){function e(c){h.load(a[c],function(a){g.images[c]=a;k++;6===k&&(g.needsUpdate=!0,b&&b(g))},void 0,d)}var g=new THREE.CubeTexture([]),h=new THREE.ImageLoader;h.setCrossOrigin(this.crossOrigin);var k=0;for(c=0;c<a.length;++c){e(c)}return g},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(a,b,c,d){var e=this,g=new THREE.DataTexture,h=new THREE.XHRLoader(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setResponseType("arraybuffer"),h.load(a,function(a){(a=e._parser(a))&&(void 0!==a.image?g.image=a.image:void 0!==a.data&&(g.image.width=a.width,g.image.height=a.height,g.image.data=a.data),g.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,g.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,g.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,g.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,g.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(g.format=a.format),void 0!==a.type&&(g.type=a.type),void 0!==a.mipmaps&&(g.mipmaps=a.mipmaps),1===a.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.needsUpdate=!0,b&&b(g,a))},c,d),g},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(a,b,c,d){var e=this,g=[],h=new THREE.CompressedTexture;h.image=g;var k=new THREE.XHRLoader(this.manager);if(k.setCrossOrigin(this.crossOrigin),k.setResponseType("arraybuffer"),Array.isArray(a)){for(var l=0,f=function(f){k.load(a[f],function(a){a=e._parser(a,!0);g[f]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};l+=1;6===l&&(1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)},n=0,r=a.length;r>n;++n){f(n)}}else{k.load(a,function(a){if(a=e._parser(a,!0),a.isCubemap){for(var c=a.mipmaps.length/a.mipmapCount,d=0;c>d;d++){g[d]={mipmaps:[]};for(var f=0;f<a.mipmapCount;f++){g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+f]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}}}else{h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps}1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d)}return h},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.colorWrite=this.depthWrite=this.depthTest=!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a){for(var b in a){var c=a[b];if(void 0===c){console.warn("THREE.Material: '"+b+"' parameter is undefined.")}else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}}},toJSON:function(a){var b={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return b.uuid=this.uuid,b.type=this.type,""!==this.name&&(b.name=this.name),this.color instanceof THREE.Color&&(b.color=this.color.getHex()),this.emissive instanceof THREE.Color&&(b.emissive=this.emissive.getHex()),this.specular instanceof THREE.Color&&(b.specular=this.specular.getHex()),void 0!==this.shininess&&(b.shininess=this.shininess),this.map instanceof THREE.Texture&&(b.map=this.map.toJSON(a).uuid),this.alphaMap instanceof THREE.Texture&&(b.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap instanceof THREE.Texture&&(b.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap instanceof THREE.Texture&&(b.bumpMap=this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale),this.normalMap instanceof THREE.Texture&&(b.normalMap=this.normalMap.toJSON(a).uuid,b.normalScale=this.normalScale),this.displacementMap instanceof THREE.Texture&&(b.displacementMap=this.displacementMap.toJSON(a).uuid,b.displacementScale=this.displacementScale,b.displacementBias=this.displacementBias),this.specularMap instanceof THREE.Texture&&(b.specularMap=this.specularMap.toJSON(a).uuid),this.envMap instanceof THREE.Texture&&(b.envMap=this.envMap.toJSON(a).uuid,b.reflectivity=this.reflectivity),void 0!==this.size&&(b.size=this.size),void 0!==this.sizeAttenuation&&(b.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==THREE.NoColors&&(b.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==THREE.SmoothShading&&(b.shading=this.shading),void 0!==this.blending&&this.blending!==THREE.NormalBlending&&(b.blending=this.blending),void 0!==this.side&&this.side!==THREE.FrontSide&&(b.side=this.side),1>this.opacity&&(b.opacity=this.opacity),!0===this.transparent&&(b.transparent=this.transparent),0<this.alphaTest&&(b.alphaTest=this.alphaTest),!0===this.wireframe&&(b.wireframe=this.wireframe),1<this.wireframeLinewidth&&(b.wireframeLinewidth=this.wireframeLinewidth),b},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.name=a.name,this.side=a.side,this.opacity=a.opacity,this.transparent=a.transparent,this.blending=a.blending,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.overdraw=a.overdraw,this.visible=a.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new THREE.Color}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.vertexColors=a.vertexColors,this.fog=a.fog,this};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this.vertexColors=a.vertexColors,this.fog=a.fog,this};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;THREE.MeshBasicMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.fog=a.fog,this.shading=a.shading,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.vertexColors=a.vertexColors,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;THREE.MeshLambertMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.emissive.copy(a.emissive),this.map=a.map,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.fog=a.fog,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.vertexColors=a.vertexColors,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;THREE.MeshPhongMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.emissive.copy(a.emissive),this.specular.copy(a.specular),this.shininess=a.shininess,this.metal=a.metal,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissiveMap=a.emissiveMap,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.fog=a.fog,this.shading=a.shading,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.vertexColors=a.vertexColors,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this};THREE.MultiMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(){for(var a={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},b=0,c=this.materials.length;c>b;b++){a.materials.push(this.materials[b].toJSON())}return a.visible=this.visible,a},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++){a.materials.push(this.materials[b].clone())}return a.visible=this.visible,a}};THREE.MeshFaceMaterial=THREE.MultiMaterial;THREE.PointsMaterial=function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;THREE.PointsMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.vertexColors=a.vertexColors,this.fog=a.fog,this};THREE.PointCloudMaterial=function(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(a)};THREE.ParticleBasicMaterial=function(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(a)};THREE.ParticleSystemMaterial=function(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(a)};THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.derivatives=this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;THREE.ShaderMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=THREE.UniformsUtils.clone(a.uniforms),this.attributes=a.attributes,this.defines=a.defines,this.shading=a.shading,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.fog=a.fog,this.lights=a.lights,this.vertexColors=a.vertexColors,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.derivatives=a.derivatives,this};THREE.ShaderMaterial.prototype.toJSON=function(a){return a=THREE.Material.prototype.toJSON.call(this,a),a.uniforms=this.uniforms,a.attributes=this.attributes,a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader,a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(a){return THREE.Material.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this.fog=a.fog,this};THREE.Texture=function(a,b,c,d,e,g,h,k,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==l?l:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==k?k:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this},toJSON:function(a){if(void 0!==a.textures[this.uuid]){return a.textures[this.uuid]}var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var c=this.image;if(void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID()),void 0===a.images[c.uuid]){var d,e=a.images,g=c.uuid,h=c.uuid;void 0!==c.toDataURL?d=c:(d=document.createElement("canvas"),d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0,c.width,c.height));d=2048<d.width||2048<d.height?d.toDataURL("image/jpeg",0.6):d.toDataURL("image/png");e[g]={uuid:h,url:d}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===THREE.UVMapping){if(a.multiply(this.repeat),a.add(this.offset),0>a.x||1<a.x){switch(this.wrapS){case THREE.RepeatWrapping:a.x-=Math.floor(a.x);break;case THREE.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}}if(0>a.y||1<a.y){switch(this.wrapT){case THREE.RepeatWrapping:a.y-=Math.floor(a.y);break;case THREE.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}}this.flipY&&(a.y=1-a.y)}}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CanvasTexture=function(a,b,c,d,e,g,h,k,l){THREE.Texture.call(this,a,b,c,d,e,g,h,k,l);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;THREE.CubeTexture=function(a,b,c,d,e,g,h,k,l){b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,g,h,k,l);this.images=a;this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;THREE.CubeTexture.prototype.copy=function(a){return THREE.Texture.prototype.copy.call(this,a),this.images=a.images,this};THREE.CompressedTexture=function(a,b,c,d,e,g,h,k,l,f,n){THREE.Texture.call(this,null,g,h,k,l,f,d,e,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;THREE.DataTexture=function(a,b,c,d,e,g,h,k,l,f,n){THREE.Texture.call(this,null,g,h,k,l,f,d,e,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:THREE.NearestFilter;this.minFilter=void 0!==f?f:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;THREE.VideoTexture=function(a,b,c,d,e,g,h,k,l){function f(){requestAnimationFrame(f);a.readyState===a.HAVE_ENOUGH_DATA&&(n.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,g,h,k,l);this.generateMipmaps=!1;var n=this;f()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);THREE.Group.prototype.constructor=THREE.Group;THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};THREE.Points.prototype=Object.create(THREE.Object3D.prototype);THREE.Points.prototype.constructor=THREE.Points;THREE.Points.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){function e(a,e){var f=b.distanceSqToPoint(a);if(l>f){var h=b.closestPointToPoint(a);h.applyMatrix4(g.matrixWorld);var k=c.ray.origin.distanceTo(h);k<c.near||k>c.far||d.push({distance:k,distanceToRay:Math.sqrt(f),point:h.clone(),index:e,face:null,object:g})}}var g=this,h=g.geometry,k=c.params.Points.threshold;if(a.getInverse(this.matrixWorld),b.copy(c.ray).applyMatrix4(a),null===h.boundingBox||!1!==b.isIntersectionBox(h.boundingBox)){var k=k/((this.scale.x+this.scale.y+this.scale.z)/3),l=k*k,k=new THREE.Vector3;if(h instanceof THREE.BufferGeometry){var f=h.index,h=h.attributes.position.array;if(null!==f){for(var n=f.array,f=0,r=n.length;r>f;f++){var v=n[f];k.fromArray(h,3*v);e(k,v)}}else{for(f=0,n=h.length/3;n>f;f++){k.fromArray(h,3*f),e(k,f)}}}else{for(k=h.vertices,f=0,n=k.length;n>f;f++){e(k[f],f)}}}}}();THREE.Points.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.PointCloud=function(a,b){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new THREE.Points(a,b)};THREE.ParticleSystem=function(a,b){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new THREE.Points(a,b)};THREE.Line=function(a,b,c){return 1===c?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(a,b)):(THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==a?a:new THREE.Geometry,void (this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})))};THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.constructor=THREE.Line;THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var g=d.linePrecision,g=g*g,h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),c.copy(h.boundingSphere),c.applyMatrix4(this.matrixWorld),!1!==d.ray.isIntersectionSphere(c)){a.getInverse(this.matrixWorld);b.copy(d.ray).applyMatrix4(a);var k=new THREE.Vector3,l=new THREE.Vector3,f=new THREE.Vector3,n=new THREE.Vector3,r=this instanceof THREE.LineSegments?2:1;if(h instanceof THREE.BufferGeometry){var v=h.index,t=h.attributes;if(null!==v){for(var h=v.array,t=t.position.array,v=0,m=h.length-1;m>v;v+=r){var u=h[v+1];k.fromArray(t,3*h[v]);l.fromArray(t,3*u);u=b.distanceSqToSegment(k,l,n,f);u>g||(n.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(n),u<d.near||u>d.far||e.push({distance:u,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}else{for(t=t.position.array,v=0,m=t.length/3-1;m>v;v+=r){k.fromArray(t,3*v),l.fromArray(t,3*v+3),u=b.distanceSqToSegment(k,l,n,f),u>g||(n.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(n),u<d.near||u>d.far||e.push({distance:u,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}}else{if(h instanceof THREE.Geometry){for(k=h.vertices,l=k.length,v=0;l-1>v;v+=r){u=b.distanceSqToSegment(k[v],k[v+1],n,f),u>g||(n.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(n),u<d.near||u>d.far||e.push({distance:u,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}}}}}();THREE.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.LineStrip=0;THREE.LinePieces=1;THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.create(THREE.Line.prototype);THREE.LineSegments.prototype.constructor=THREE.LineSegments;THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.constructor=THREE.Mesh;THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;b>a;a++){this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}}};THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){return void 0!==this.morphTargetDictionary[a]?this.morphTargetDictionary[a]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0."),0)};THREE.Mesh.prototype.raycast=function(){function a(a,b,c,d,e,g,f){return THREE.Triangle.barycoordFromPoint(a,b,c,d,u),e.multiplyScalar(u.x),g.multiplyScalar(u.y),f.multiplyScalar(u.z),e.add(g).add(f),e.clone()}function b(a,b,c,d,e,g,f){var h=a.material;return null===(h.side===THREE.BackSide?c.intersectTriangle(g,e,d,!0,f):c.intersectTriangle(d,e,g,h.side!==THREE.DoubleSide,f))?null:(w.copy(f),w.applyMatrix4(a.matrixWorld),c=b.ray.origin.distanceTo(w),c<b.near||c>b.far?null:{distance:c,point:w.clone(),object:a})}function c(c,d,e,g,f,n,u,w){return h.fromArray(g,3*n),k.fromArray(g,3*u),l.fromArray(g,3*w),(c=b(c,d,e,h,k,l,A))&&(f&&(v.fromArray(f,2*n),t.fromArray(f,2*u),m.fromArray(f,2*w),c.uv=a(A,h,k,l,v,t,m)),c.face=new THREE.Face3(n,u,w,THREE.Triangle.normal(h,k,l)),c.faceIndex=n),c}var d=new THREE.Matrix4,e=new THREE.Ray,g=new THREE.Sphere,h=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,f=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,v=new THREE.Vector2,t=new THREE.Vector2,m=new THREE.Vector2,u=new THREE.Vector3,A=new THREE.Vector3,w=new THREE.Vector3;return function(p,u){var w=this.geometry,x=this.material;if(void 0!==x){null===w.boundingSphere&&w.computeBoundingSphere();var C=this.matrixWorld;if(g.copy(w.boundingSphere),g.applyMatrix4(C),!1!==p.ray.isIntersectionSphere(g)&&(d.getInverse(C),e.copy(p.ray).applyMatrix4(d),null===w.boundingBox||!1!==e.isIntersectionBox(w.boundingBox))){var E,D;if(w instanceof THREE.BufferGeometry){var H,I,x=w.index,C=w.attributes,w=C.position.array;if(void 0!==C.uv&&(E=C.uv.array),null!==x){for(var C=x.array,K=0,M=C.length;M>K;K+=3){x=C[K],H=C[K+1],I=C[K+2],(D=c(this,p,e,w,E,x,H,I))&&(D.faceIndex=Math.floor(K/3),u.push(D))}}else{for(K=0,M=w.length;M>K;K+=9){x=K/3,H=x+1,I=x+2,(D=c(this,p,e,w,E,x,H,I))&&(D.index=x,u.push(D))}}}else{if(w instanceof THREE.Geometry){var L,R,C=x instanceof THREE.MeshFaceMaterial,K=!0===C?x.materials:null,M=w.vertices;H=w.faces;I=w.faceVertexUvs[0];0<I.length&&(E=I);for(var N=0,S=H.length;S>N;N++){var J=H[N];if(D=!0===C?K[J.materialIndex]:x,void 0!==D){if(I=M[J.a],L=M[J.b],R=M[J.c],!0===D.morphTargets){D=w.morphTargets;var Q=this.morphTargetInfluences;h.set(0,0,0);k.set(0,0,0);l.set(0,0,0);for(var X=0,U=D.length;U>X;X++){var Y=Q[X];if(0!==Y){var O=D[X].vertices;h.addScaledVector(f.subVectors(O[J.a],I),Y);k.addScaledVector(n.subVectors(O[J.b],L),Y);l.addScaledVector(r.subVectors(O[J.c],R),Y)}}h.add(I);k.add(L);l.add(R);I=h;L=k;R=l}(D=b(this,p,e,I,L,R,A))&&(E&&(Q=E[N],v.copy(Q[0]),t.copy(Q[1]),m.copy(Q[2]),D.uv=a(A,I,L,R,v,t,m)),D.face=J,D.faceIndex=N,u.push(D))}}}}}}}}();THREE.Mesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.copy=function(a){return THREE.Object3D.prototype.copy.call(this,a),this.skin=a.skin,this};THREE.Skeleton=function(a,b,c){if(this.useVertexTexture=void 0!==c?c:!0,this.identityMatrix=new THREE.Matrix4,a=a||[],this.bones=a.slice(0),this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===b){this.calculateInverses()}else{if(this.bones.length===b.length){this.boneInverses=b.slice(0)}else{for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;a>b;b++){this.boneInverses.push(new THREE.Matrix4)}}}};THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;b>a;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;c>b;b++){(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b])}b=0;for(c=this.bones.length;c>b;b++){(a=this.bones[b])&&(a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}};THREE.Skeleton.prototype.update=function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;c>b;b++){a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)};THREE.SkinnedMesh=function(a,b,c){if(THREE.Mesh.call(this,a,b),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,a=[],this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;g>e;++e){d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl)}e=0;for(g=this.geometry.bones.length;g>e;++e){d=this.geometry.bones[e],-1!==d.parent&&null!==d.parent?a[d.parent].add(a[e]):this.add(a[e])}}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh;THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry){for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();1/0!==c?b.multiplyScalar(c):b.set(1)}}};THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)};THREE.SkinnedMesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)};THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.constructor=THREE.LOD;THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++){}c.splice(d,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=this.levels,c=1,d=b.length;d>c&&!(a<b[c].distance);c++){}return b[c-1].object};THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;g>e&&c>=d[e].distance;e++){d[e-1].object.visible=!1,d[e].object.visible=!0}for(;g>e;e++){d[e].object.visible=!1}}}}();THREE.LOD.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;c>b;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this};THREE.LOD.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;d>c;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a};THREE.Sprite=function(){var a=new Uint16Array([0,1,2,0,2,3]),b=new Float32Array([-0.5,-0.5,0,0.5,-0.5,0,0.5,0.5,0,-0.5,0.5,0]),c=new Float32Array([0,0,1,0,1,1,0,1]),d=new THREE.BufferGeometry;return d.setIndex(new THREE.BufferAttribute(a,1)),d.addAttribute("position",new THREE.BufferAttribute(b,3)),d.addAttribute("uv",new THREE.BufferAttribute(c,2)),function(a){THREE.Object3D.call(this);this.type="Sprite";this.geometry=d;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.constructor=THREE.Sprite;THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)};THREE.Particle=THREE.Sprite;THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.constructor=THREE.LensFlare;THREE.LensFlare.prototype.add=function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})};THREE.LensFlare.prototype.updateLensFlares=function(){var a,b,c=this.lensFlares.length,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;c>a;a++){b=this.lensFlares[a],b.x=this.positionScreen.x+d*b.distance,b.y=this.positionScreen.y+e*b.distance,b.wantedRotation=b.x*Math.PI*0.25,b.rotation+=0.25*(b.wantedRotation-b.rotation)}};THREE.LensFlare.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;c>b;b++){this.lensFlares.push(a.lensFlares[b])}return this};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;THREE.Scene.prototype.copy=function(a){return THREE.Object3D.prototype.copy.call(this,a),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1000};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:0.00025};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n";THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif";THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n";THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n";THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif";THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalAmbientLight += lightColor;\n\n\t}\n\n#endif\n\n";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n";THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n";THREE.ShaderChunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n";THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n";THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n";THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n";THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n";THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n";THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tfloat texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n\t\tfloat shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\tbool isPointLight = shadowDarkness[ i ] < 0.0;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tfloat realShadowDarkness = abs( shadowDarkness[ i ] );\n\n\t\t\tvec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tconst float Dr = 1.25;\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tconst float Dr = 2.25;\n\t#endif\n\n\t\t\tfloat os = Dr *  2.0 * texelSizeY;\n\n\t\t\tconst vec3 Gsd = vec3( - 1, 0, 1 );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n\t#else \n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness;\n\n\t#endif\n\n\t\t} else {\n\n#endif \n\t\t\tfloat texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n\t\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n\t\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t\tbool frustumTest = all( frustumTestVec );\n\n\t\t\tif ( frustumTest ) {\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\n\t\t\t\t/*\n\t\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\t\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\t\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\t\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\t\tshadow += 1.0;\n\t\t\t\t\t}\n\t\t\t\t\tshadow /= 9.0;\n\t\t\t\t*/\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tconst float ShadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfloat fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tshadow *= shadowDarkness[ i ];\n\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 0 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 1 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 2 ] *= vec3( 0.25 );\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n\t\t\t\tshadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n\t\t\t\tshadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n\t#else \n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\tshadow = shadowDarkness[ i ];\n\n\t#endif\n\n\t\t\t}\n\n#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) {\n\n\t\t\t\tif ( i == 0 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n\t\t\t\t} else if ( i == 1 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\t}\n\n#endif\n\n\t\tshadowMask = shadowMask * vec3( 1.0 - shadow );\n\n\t}\n\n#endif\n";THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n\t#if defined(POINT_LIGHT_SHADOWS)\n\n\n\t\tvoid adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n\t\t\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\t\tif ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n\t\t\t\tshadowValue += 1.0;\n\n\t\t}\n\n\n\t\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n\t\t\tvec3 absV = abs( v );\n\n\n\t\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\t\tabsV *= scaleToCube;\n\n\n\t\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n\t\t\tvec2 planar = v.xy;\n\n\t\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\t\tif ( absV.z >= almostOne ) {\n\n\t\t\t\tif ( v.z > 0.0 )\n\t\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\t\tfloat signX = sign( v.x );\n\t\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\t\tfloat signY = sign( v.y );\n\t\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t\t}\n\n\n\t\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t\t}\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n";THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif";THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n";THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d,e=this.clone(a[c]);for(d in e){b[d]=e[d]}}return b},clone:function(a){var b,c={};for(b in a){c[b]={};for(var d in a[b]){var e=a[b][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?c[b][d]=e.clone():Array.isArray(e)?c[b][d]=e.slice():c[b][d]=e}}return c}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = vec3( 1.0 );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform vec3 ambientLightColor;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.shadowmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t\telse\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;\n\t#else\n\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t#endif",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 totalEmissiveLight = emissive;\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.normal_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.hemilight_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.shadowmap_fragment,"totalDiffuseLight *= shadowMask;\ntotalSpecularLight *= shadowMask;\n#ifdef METAL\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n#else\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n#endif",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( psColor, opacity );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * shadowMask;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2000},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;\n}"].join("\n"),fragmentShader:["uniform vec3 lightPos;\nvarying vec4 vWorldPosition;",THREE.ShaderChunk.common,"vec4 pack1K ( float depth ) {\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = fract( depth * bitSh );\n\tres -= res.xxyz * bitMsk;\n\treturn res; \n}\nfloat unpack1K ( vec4 color ) {\n\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}"].join("\n")}};THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===O&&(a*=d,b*=d,c*=d);z.clearColor(a,b,c,d)}function c(){T.init();z.viewport(fa,Oa,Ra,ba);b(la.r,la.g,la.b,oa)}function d(){Qa=Db=null;eb="";Ba=-1;cb=!0;T.reset()}function e(a){a.preventDefault();d();c();pa.clear()}function g(a){a=a.target;a.removeEventListener("dispose",g);a:{var b=pa.get(a);if(a.image&&b.__image__webglTextureCube){z.deleteTexture(b.__image__webglTextureCube)}else{if(void 0===b.__webglInit){break a}z.deleteTexture(b.__webglTexture)}pa["delete"](a)}ma.textures--}function h(a){a=a.target;a.removeEventListener("dispose",h);var b=pa.get(a),c=pa.get(a.texture);if(a&&void 0!==c.__webglTexture){if(z.deleteTexture(c.__webglTexture),a instanceof THREE.WebGLRenderTargetCube){for(c=0;6>c;c++){z.deleteFramebuffer(b.__webglFramebuffer[c]),z.deleteRenderbuffer(b.__webglRenderbuffer[c])}}else{z.deleteFramebuffer(b.__webglFramebuffer),z.deleteRenderbuffer(b.__webglRenderbuffer)}pa["delete"](a.texture);pa["delete"](a)}ma.textures--}function k(a){a=a.target;a.removeEventListener("dispose",k);l(a);pa["delete"](a)}function l(a){var b=pa.get(a).program;a.program=void 0;void 0!==b&&ub.releaseProgram(b)}function f(a,b){return b[0]-a[0]}function n(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function r(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function v(a,b,c,d,e){var g;c.transparent?(d=ya,g=++ga):(d=xa,g=++ta);g=d[g];void 0!==g?(g.id=a.id,g.object=a,g.geometry=b,g.material=c,g.z=P.z,g.group=e):(g={id:a.id,object:a,geometry:b,material:c,z:P.z,group:e},d.push(g))}function t(a,b){if(!1!==a.visible){if(0!==(a.channels.mask&b.channels.mask)){if(a instanceof THREE.Light){sa.push(a)}else{if(a instanceof THREE.Sprite){q.push(a)}else{if(a instanceof THREE.LensFlare){Cb.push(a)}else{if(a instanceof THREE.ImmediateRenderObject){!0===Ga.sortObjects&&(P.setFromMatrixPosition(a.matrixWorld),P.applyProjection(za)),v(a,null,a.material,P.z,null)}else{if((a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),!1===a.frustumCulled||!0===Sa.intersectsObject(a))){var c=a.material;if(!0===c.visible){!0===Ga.sortObjects&&(P.setFromMatrixPosition(a.matrixWorld),P.applyProjection(za));var d=mb.update(a);if(c instanceof THREE.MeshFaceMaterial){for(var e=d.groups,g=c.materials,c=0,f=e.length;f>c;c++){var h=e[c],k=g[h.materialIndex];!0===k.visible&&v(a,d,k,P.z,h)}}else{v(a,d,c,P.z,null)}}}}}}}}d=a.children;c=0;for(f=d.length;f>c;c++){t(d[c],b)}}}function m(a,b,c,d,e){for(var g=0,f=a.length;f>g;g++){var h=a[g],k=h.object,m=h.geometry,l=void 0===e?h.material:e,h=h.group;if(k.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),k instanceof THREE.ImmediateRenderObject){u(l);var p=A(b,c,d,l,k);eb="";k.render(function(a){Ga.renderBufferImmediate(a,p,l)})}else{Ga.renderBufferDirect(b,c,d,m,l,k,h)}}}function u(a){a.side!==THREE.DoubleSide?T.enable(z.CULL_FACE):T.disable(z.CULL_FACE);T.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?T.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha):T.setBlending(THREE.NoBlending);T.setDepthFunc(a.depthFunc);T.setDepthTest(a.depthTest);T.setDepthWrite(a.depthWrite);T.setColorWrite(a.colorWrite);T.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function A(a,b,c,d,e){Za=0;var g=pa.get(d);if(d.needsUpdate||!g.program){a:{var f=pa.get(d),h=ub.getParameters(d,b,c,e),m=ub.getProgramCode(d,h),n=f.program,u=!0;if(void 0===n){d.addEventListener("dispose",k)}else{if(n.code!==m){l(d)}else{if(void 0!==h.shaderID){break a}u=!1}}if(u&&(h.shaderID?(n=THREE.ShaderLib[h.shaderID],f.__webglShader={name:d.type,uniforms:THREE.UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):f.__webglShader={name:d.type,uniforms:d.uniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader},d.__webglShader=f.__webglShader,n=ub.acquireProgram(d,h,m),f.program=n,d.program=n),h=n.getAttributes(),d.morphTargets){for(m=d.numSupportedMorphTargets=0;m<Ga.maxMorphTargets;m++){0<=h["morphTarget"+m]&&d.numSupportedMorphTargets++}}if(d.morphNormals){for(m=d.numSupportedMorphNormals=0;m<Ga.maxMorphNormals;m++){0<=h["morphNormal"+m]&&d.numSupportedMorphNormals++}}f.uniformsList=[];var q,h=f.program.getUniforms();for(q in f.__webglShader.uniforms){(m=h[q])&&f.uniformsList.push([f.__webglShader.uniforms[q],m])}}d.needsUpdate=!1}if(m=n=u=!1,f=g.program,q=f.getUniforms(),h=g.__webglShader.uniforms,f.id!==Db&&(z.useProgram(f.program),Db=f.id,m=n=u=!0),d.id!==Ba&&(-1===Ba&&(m=!0),Ba=d.id,n=!0),(u||a!==Qa)&&(z.uniformMatrix4fv(q.projectionMatrix,!1,a.projectionMatrix.elements),Ha.logarithmicDepthBuffer&&z.uniform1f(q.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==Qa&&(Qa=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&void 0!==q.cameraPosition&&(P.setFromMatrixPosition(a.matrixWorld),z.uniform3f(q.cameraPosition,P.x,P.y,P.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshBasicMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&void 0!==q.viewMatrix&&z.uniformMatrix4fv(q.viewMatrix,!1,a.matrixWorldInverse.elements)),d.skinning&&(e.bindMatrix&&void 0!==q.bindMatrix&&z.uniformMatrix4fv(q.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&void 0!==q.bindMatrixInverse&&z.uniformMatrix4fv(q.bindMatrixInverse,!1,e.bindMatrixInverse.elements),Ha.floatVertexTextures&&e.skeleton&&e.skeleton.useVertexTexture?(void 0!==q.boneTexture&&(u=p(),z.uniform1i(q.boneTexture,u),Ga.setTexture(e.skeleton.boneTexture,u)),void 0!==q.boneTextureWidth&&z.uniform1i(q.boneTextureWidth,e.skeleton.boneTextureWidth),void 0!==q.boneTextureHeight&&z.uniform1i(q.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&void 0!==q.boneGlobalMatrices&&z.uniformMatrix4fv(q.boneGlobalMatrices,!1,e.skeleton.boneMatrices)),n){if(c&&d.fog&&(h.fogColor.value=c.color,c instanceof THREE.Fog?(h.fogNear.value=c.near,h.fogFar.value=c.far):c instanceof THREE.FogExp2&&(h.fogDensity.value=c.density)),d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(cb){var x,C,r,A,m=!0,t=u=0,v=0,F=sb,H=a.matrixWorldInverse,I=F.directional.colors,Q=F.directional.positions,K=F.point.colors,U=F.point.positions,X=F.point.distances,J=F.point.decays,M=F.spot.colors,R=F.spot.positions,Y=F.spot.distances,N=F.spot.directions,O=F.spot.anglesCos,S=F.spot.exponents,sa=F.spot.decays,T=F.hemi.skyColors,ra=F.hemi.groundColors,W=F.hemi.positions,oa=0,ga=0,ta=0,ha=0,la=0,ya=0,xa=0,fa=0,ba=0;c=ba=0;for(n=b.length;n>c;c++){x=b[c],C=x.color,r=x.intensity,A=x.distance,x instanceof THREE.AmbientLight?x.visible&&(u+=C.r,t+=C.g,v+=C.b):x instanceof THREE.DirectionalLight?(la+=1,x.visible&&(ia.setFromMatrixPosition(x.matrixWorld),P.setFromMatrixPosition(x.target.matrixWorld),ia.sub(P),ia.transformDirection(H),x=3*oa,Q[x+0]=ia.x,Q[x+1]=ia.y,Q[x+2]=ia.z,B(I,x,C,r),oa+=1)):x instanceof THREE.PointLight?(ya+=1,x.visible&&(ba=3*ga,B(K,ba,C,r),P.setFromMatrixPosition(x.matrixWorld),P.applyMatrix4(H),U[ba+0]=P.x,U[ba+1]=P.y,U[ba+2]=P.z,X[ga]=A,J[ga]=0===x.distance?0:x.decay,ga+=1)):x instanceof THREE.SpotLight?(xa+=1,x.visible&&(ba=3*ta,B(M,ba,C,r),ia.setFromMatrixPosition(x.matrixWorld),P.copy(ia).applyMatrix4(H),R[ba+0]=P.x,R[ba+1]=P.y,R[ba+2]=P.z,Y[ta]=A,P.setFromMatrixPosition(x.target.matrixWorld),ia.sub(P),ia.transformDirection(H),N[ba+0]=ia.x,N[ba+1]=ia.y,N[ba+2]=ia.z,O[ta]=Math.cos(x.angle),S[ta]=x.exponent,sa[ta]=0===x.distance?0:x.decay,ta+=1)):x instanceof THREE.HemisphereLight&&(fa+=1,x.visible&&(ia.setFromMatrixPosition(x.matrixWorld),ia.transformDirection(H),A=3*ha,W[A+0]=ia.x,W[A+1]=ia.y,W[A+2]=ia.z,C=x.color,x=x.groundColor,B(T,A,C,r),B(ra,A,x,r),ha+=1))}c=3*oa;for(n=Math.max(I.length,3*la);n>c;c++){I[c]=0}c=3*ga;for(n=Math.max(K.length,3*ya);n>c;c++){K[c]=0}c=3*ta;for(n=Math.max(M.length,3*xa);n>c;c++){M[c]=0}c=3*ha;for(n=Math.max(T.length,3*fa);n>c;c++){T[c]=0}c=3*ha;for(n=Math.max(ra.length,3*fa);n>c;c++){ra[c]=0}F.directional.length=oa;F.point.length=ga;F.spot.length=ta;F.hemi.length=ha;F.ambient[0]=u;F.ambient[1]=t;F.ambient[2]=v;cb=!1}m?(m=sb,h.ambientLightColor.value=m.ambient,h.directionalLightColor.value=m.directional.colors,h.directionalLightDirection.value=m.directional.positions,h.pointLightColor.value=m.point.colors,h.pointLightPosition.value=m.point.positions,h.pointLightDistance.value=m.point.distances,h.pointLightDecay.value=m.point.decays,h.spotLightColor.value=m.spot.colors,h.spotLightPosition.value=m.spot.positions,h.spotLightDistance.value=m.spot.distances,h.spotLightDirection.value=m.spot.directions,h.spotLightAngleCos.value=m.spot.anglesCos,h.spotLightExponent.value=m.spot.exponents,h.spotLightDecay.value=m.spot.decays,h.hemisphereLightSkyColor.value=m.hemi.skyColors,h.hemisphereLightGroundColor.value=m.hemi.groundColors,h.hemisphereLightDirection.value=m.hemi.positions,w(h,!0)):w(h,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){h.opacity.value=d.opacity;h.diffuse.value=d.color;d.emissive&&(h.emissive.value=d.emissive);h.map.value=d.map;h.specularMap.value=d.specularMap;h.alphaMap.value=d.alphaMap;d.aoMap&&(h.aoMap.value=d.aoMap,h.aoMapIntensity.value=d.aoMapIntensity);var Z;d.map?Z=d.map:d.specularMap?Z=d.specularMap:d.displacementMap?Z=d.displacementMap:d.normalMap?Z=d.normalMap:d.bumpMap?Z=d.bumpMap:d.alphaMap?Z=d.alphaMap:d.emissiveMap&&(Z=d.emissiveMap);void 0!==Z&&(Z instanceof THREE.WebGLRenderTarget&&(Z=Z.texture),m=Z.offset,Z=Z.repeat,h.offsetRepeat.value.set(m.x,m.y,Z.x,Z.y));h.envMap.value=d.envMap;h.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;h.reflectivity.value=d.reflectivity;h.refractionRatio.value=d.refractionRatio}if(d instanceof THREE.LineBasicMaterial?(h.diffuse.value=d.color,h.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(h.diffuse.value=d.color,h.opacity.value=d.opacity,h.dashSize.value=d.dashSize,h.totalSize.value=d.dashSize+d.gapSize,h.scale.value=d.scale):d instanceof THREE.PointsMaterial?(h.psColor.value=d.color,h.opacity.value=d.opacity,h.size.value=d.size,h.scale.value=L.height/2,h.map.value=d.map,null!==d.map&&(a=d.map.offset,Z=d.map.repeat,h.offsetRepeat.value.set(a.x,a.y,Z.x,Z.y))):d instanceof THREE.MeshPhongMaterial?(h.specular.value=d.specular,h.shininess.value=Math.max(d.shininess,0.0001),d.lightMap&&(h.lightMap.value=d.lightMap,h.lightMapIntensity.value=d.lightMapIntensity),d.emissiveMap&&(h.emissiveMap.value=d.emissiveMap),d.bumpMap&&(h.bumpMap.value=d.bumpMap,h.bumpScale.value=d.bumpScale),d.normalMap&&(h.normalMap.value=d.normalMap,h.normalScale.value.copy(d.normalScale)),d.displacementMap&&(h.displacementMap.value=d.displacementMap,h.displacementScale.value=d.displacementScale,h.displacementBias.value=d.displacementBias)):d instanceof THREE.MeshDepthMaterial?(h.mNear.value=a.near,h.mFar.value=a.far,h.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(h.opacity.value=d.opacity),e.receiveShadow&&!d._shadowPass&&h.shadowMatrix){for(a=d=0,Z=b.length;Z>a;a++){m=b[a],!0===m.castShadow&&(m instanceof THREE.PointLight||m instanceof THREE.SpotLight||m instanceof THREE.DirectionalLight)&&(c=m.shadow,m instanceof THREE.PointLight?(P.setFromMatrixPosition(m.matrixWorld).negate(),c.matrix.identity().setPosition(P),h.shadowDarkness.value[d]=-c.darkness):h.shadowDarkness.value[d]=c.darkness,h.shadowMatrix.value[d]=c.matrix,h.shadowMap.value[d]=c.map,h.shadowMapSize.value[d]=c.mapSize,h.shadowBias.value[d]=c.bias,d++)}}b=g.uniformsList;g=0;for(d=b.length;d>g;g++){if(a=b[g][0],!1!==a.needsUpdate){switch(h=a.type,c=a.value,Z=b[g][1],h){case"1i":z.uniform1i(Z,c);break;case"1f":z.uniform1f(Z,c);break;case"2f":z.uniform2f(Z,c[0],c[1]);break;case"3f":z.uniform3f(Z,c[0],c[1],c[2]);break;case"4f":z.uniform4f(Z,c[0],c[1],c[2],c[3]);break;case"1iv":z.uniform1iv(Z,c);break;case"3iv":z.uniform3iv(Z,c);break;case"1fv":z.uniform1fv(Z,c);break;case"2fv":z.uniform2fv(Z,c);break;case"3fv":z.uniform3fv(Z,c);break;case"4fv":z.uniform4fv(Z,c);break;case"Matrix3fv":z.uniformMatrix3fv(Z,!1,c);break;case"Matrix4fv":z.uniformMatrix4fv(Z,!1,c);break;case"i":z.uniform1i(Z,c);break;case"f":z.uniform1f(Z,c);break;case"v2":z.uniform2f(Z,c.x,c.y);break;case"v3":z.uniform3f(Z,c.x,c.y,c.z);break;case"v4":z.uniform4f(Z,c.x,c.y,c.z,c.w);break;case"c":z.uniform3f(Z,c.r,c.g,c.b);break;case"iv1":z.uniform1iv(Z,c);break;case"iv":z.uniform3iv(Z,c);break;case"fv1":z.uniform1fv(Z,c);break;case"fv":z.uniform3fv(Z,c);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*c.length));n=h=0;for(m=c.length;m>h;h++,n+=2){a._array[n+0]=c[h].x,a._array[n+1]=c[h].y}z.uniform2fv(Z,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*c.length));n=h=0;for(m=c.length;m>h;h++,n+=3){a._array[n+0]=c[h].x,a._array[n+1]=c[h].y,a._array[n+2]=c[h].z}z.uniform3fv(Z,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*c.length));n=h=0;for(m=c.length;m>h;h++,n+=4){a._array[n+0]=c[h].x,a._array[n+1]=c[h].y,a._array[n+2]=c[h].z,a._array[n+3]=c[h].w}z.uniform4fv(Z,a._array);break;case"m3":z.uniformMatrix3fv(Z,!1,c.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*c.length));h=0;for(m=c.length;m>h;h++){c[h].flattenToArrayOffset(a._array,9*h)}z.uniformMatrix3fv(Z,!1,a._array);break;case"m4":z.uniformMatrix4fv(Z,!1,c.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*c.length));h=0;for(m=c.length;m>h;h++){c[h].flattenToArrayOffset(a._array,16*h)}z.uniformMatrix4fv(Z,!1,a._array);break;case"t":if(n=p(),z.uniform1i(Z,n),!c){continue}c instanceof THREE.CubeTexture||Array.isArray(c.image)&&6===c.image.length?E(c,n):c instanceof THREE.WebGLRenderTargetCube?D(c.texture,n):c instanceof THREE.WebGLRenderTarget?Ga.setTexture(c.texture,n):Ga.setTexture(c,n);break;case"tv":void 0===a._array&&(a._array=[]);h=0;for(m=a.value.length;m>h;h++){a._array[h]=p()}z.uniform1iv(Z,a._array);h=0;for(m=a.value.length;m>h;h++){c=a.value[h],n=a._array[h],c&&(c instanceof THREE.CubeTexture||c.image instanceof Array&&6===c.image.length?E(c,n):c instanceof THREE.WebGLRenderTarget?Ga.setTexture(c.texture,n):c instanceof THREE.WebGLRenderTargetCube?D(c.texture,n):Ga.setTexture(c,n))}break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+h)}}}}return z.uniformMatrix4fv(q.modelViewMatrix,!1,e.modelViewMatrix.elements),q.normalMatrix&&z.uniformMatrix3fv(q.normalMatrix,!1,e.normalMatrix.elements),void 0!==q.modelMatrix&&z.uniformMatrix4fv(q.modelMatrix,!1,e.matrixWorld.elements),f}function w(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.pointLightDecay.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.spotLightDecay.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function p(){var a=Za;return a>=Ha.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Ha.maxTextures),Za+=1,a}function B(a,b,c,d){a[b+0]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function F(a,b,c){c?(z.texParameteri(a,z.TEXTURE_WRAP_S,M(b.wrapS)),z.texParameteri(a,z.TEXTURE_WRAP_T,M(b.wrapT)),z.texParameteri(a,z.TEXTURE_MAG_FILTER,M(b.magFilter)),z.texParameteri(a,z.TEXTURE_MIN_FILTER,M(b.minFilter))):(z.texParameteri(a,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(a,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),b.wrapS===THREE.ClampToEdgeWrapping&&b.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",b),z.texParameteri(a,z.TEXTURE_MAG_FILTER,K(b.magFilter)),z.texParameteri(a,z.TEXTURE_MIN_FILTER,K(b.minFilter)),b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",b));!(c=ka.get("EXT_texture_filter_anisotropic"))||b.type===THREE.FloatType&&null===ka.get("OES_texture_float_linear")||b.type===THREE.HalfFloatType&&null===ka.get("OES_texture_half_float_linear")||!(1<b.anisotropy||pa.get(b).__currentAnisotropy)||(z.texParameterf(a,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Ga.getMaxAnisotropy())),pa.get(b).__currentAnisotropy=b.anisotropy)}function x(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElement("canvas");return d.width=Math.floor(a.width*c),d.height=Math.floor(a.height*c),d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height),console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a),d}return a}function C(a){return THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height)}function E(a,b){var c=pa.get(a);if(6===a.image.length){if(0<a.version&&c.__version!==a.version){c.__image__webglTextureCube||(a.addEventListener("dispose",g),c.__image__webglTextureCube=z.createTexture(),ma.textures++);T.activeTexture(z.TEXTURE0+b);T.bindTexture(z.TEXTURE_CUBE_MAP,c.__image__webglTextureCube);z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,a.flipY);for(var d=a instanceof THREE.CompressedTexture,e=a.image[0] instanceof THREE.DataTexture,f=[],h=0;6>h;h++){f[h]=!Ga.autoScaleCubemaps||d||e?e?a.image[h].image:a.image[h]:x(a.image[h],Ha.maxCubemapSize)}var k=C(f[0]),m=M(a.format),l=M(a.type);F(z.TEXTURE_CUBE_MAP,a,k);for(h=0;6>h;h++){if(d){for(var p,n=f[h].mipmaps,u=0,B=n.length;B>u;u++){p=n[u],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<T.getCompressedTextureFormats().indexOf(m)?T.compressedTexImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+h,u,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):T.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+h,u,m,p.width,p.height,0,m,l,p.data)}}else{e?T.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,m,f[h].width,f[h].height,0,m,l,f[h].data):T.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,m,m,l,f[h])}}a.generateMipmaps&&k&&z.generateMipmap(z.TEXTURE_CUBE_MAP);c.__version=a.version;a.onUpdate&&a.onUpdate(a)}else{T.activeTexture(z.TEXTURE0+b),T.bindTexture(z.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}}}function D(a,b){T.activeTexture(z.TEXTURE0+b);T.bindTexture(z.TEXTURE_CUBE_MAP,pa.get(a).__webglTexture)}function H(a,b,c){z.bindFramebuffer(z.FRAMEBUFFER,a);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,c,pa.get(b.texture).__webglTexture,0)}function I(a,b){z.bindRenderbuffer(z.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_COMPONENT16,b.width,b.height),z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_ATTACHMENT,z.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_STENCIL,b.width,b.height),z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_STENCIL_ATTACHMENT,z.RENDERBUFFER,a)):z.renderbufferStorage(z.RENDERBUFFER,z.RGBA4,b.width,b.height)}function K(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?z.NEAREST:z.LINEAR}function M(a){var b;if(a===THREE.RepeatWrapping){return z.REPEAT}if(a===THREE.ClampToEdgeWrapping){return z.CLAMP_TO_EDGE}if(a===THREE.MirroredRepeatWrapping){return z.MIRRORED_REPEAT}if(a===THREE.NearestFilter){return z.NEAREST}if(a===THREE.NearestMipMapNearestFilter){return z.NEAREST_MIPMAP_NEAREST}if(a===THREE.NearestMipMapLinearFilter){return z.NEAREST_MIPMAP_LINEAR}if(a===THREE.LinearFilter){return z.LINEAR}if(a===THREE.LinearMipMapNearestFilter){return z.LINEAR_MIPMAP_NEAREST}if(a===THREE.LinearMipMapLinearFilter){return z.LINEAR_MIPMAP_LINEAR}if(a===THREE.UnsignedByteType){return z.UNSIGNED_BYTE}if(a===THREE.UnsignedShort4444Type){return z.UNSIGNED_SHORT_4_4_4_4}if(a===THREE.UnsignedShort5551Type){return z.UNSIGNED_SHORT_5_5_5_1}if(a===THREE.UnsignedShort565Type){return z.UNSIGNED_SHORT_5_6_5}if(a===THREE.ByteType){return z.BYTE}if(a===THREE.ShortType){return z.SHORT}if(a===THREE.UnsignedShortType){return z.UNSIGNED_SHORT}if(a===THREE.IntType){return z.INT}if(a===THREE.UnsignedIntType){return z.UNSIGNED_INT}if(a===THREE.FloatType){return z.FLOAT}if(b=ka.get("OES_texture_half_float"),null!==b&&a===THREE.HalfFloatType){return b.HALF_FLOAT_OES}if(a===THREE.AlphaFormat){return z.ALPHA}if(a===THREE.RGBFormat){return z.RGB}if(a===THREE.RGBAFormat){return z.RGBA}if(a===THREE.LuminanceFormat){return z.LUMINANCE}if(a===THREE.LuminanceAlphaFormat){return z.LUMINANCE_ALPHA}if(a===THREE.AddEquation){return z.FUNC_ADD}if(a===THREE.SubtractEquation){return z.FUNC_SUBTRACT}if(a===THREE.ReverseSubtractEquation){return z.FUNC_REVERSE_SUBTRACT}if(a===THREE.ZeroFactor){return z.ZERO}if(a===THREE.OneFactor){return z.ONE}if(a===THREE.SrcColorFactor){return z.SRC_COLOR}if(a===THREE.OneMinusSrcColorFactor){return z.ONE_MINUS_SRC_COLOR}if(a===THREE.SrcAlphaFactor){return z.SRC_ALPHA}if(a===THREE.OneMinusSrcAlphaFactor){return z.ONE_MINUS_SRC_ALPHA}if(a===THREE.DstAlphaFactor){return z.DST_ALPHA}if(a===THREE.OneMinusDstAlphaFactor){return z.ONE_MINUS_DST_ALPHA}if(a===THREE.DstColorFactor){return z.DST_COLOR}if(a===THREE.OneMinusDstColorFactor){return z.ONE_MINUS_DST_COLOR}if(a===THREE.SrcAlphaSaturateFactor){return z.SRC_ALPHA_SATURATE}if(b=ka.get("WEBGL_compressed_texture_s3tc"),null!==b){if(a===THREE.RGB_S3TC_DXT1_Format){return b.COMPRESSED_RGB_S3TC_DXT1_EXT}if(a===THREE.RGBA_S3TC_DXT1_Format){return b.COMPRESSED_RGBA_S3TC_DXT1_EXT}if(a===THREE.RGBA_S3TC_DXT3_Format){return b.COMPRESSED_RGBA_S3TC_DXT3_EXT}if(a===THREE.RGBA_S3TC_DXT5_Format){return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(b=ka.get("WEBGL_compressed_texture_pvrtc"),null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format){return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG}if(a===THREE.RGB_PVRTC_2BPPV1_Format){return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG}if(a===THREE.RGBA_PVRTC_4BPPV1_Format){return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG}if(a===THREE.RGBA_PVRTC_2BPPV1_Format){return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(b=ka.get("EXT_blend_minmax"),null!==b){if(a===THREE.MinEquation){return b.MIN_EXT}if(a===THREE.MaxEquation){return b.MAX_EXT}}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var L=void 0!==a.canvas?a.canvas:document.createElement("canvas"),R=void 0!==a.context?a.context:null,N=L.width,S=L.height,J=1,Q=void 0!==a.alpha?a.alpha:!1,X=void 0!==a.depth?a.depth:!0,U=void 0!==a.stencil?a.stencil:!0,Y=void 0!==a.antialias?a.antialias:!1,O=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,ra=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,la=new THREE.Color(0),oa=0,sa=[],xa=[],ta=-1,ya=[],ga=-1,ha=new Float32Array(8),q=[],Cb=[];this.domElement=L;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.gammaFactor=2;this.gammaOutput=this.gammaInput=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var Ga=this,Db=null,lb=null,Ba=-1,eb="",Qa=null,Za=0,fa=0,Oa=0,Ra=L.width,ba=L.height,W=0,ua=0,Sa=new THREE.Frustum,za=new THREE.Matrix4,P=new THREE.Vector3,ia=new THREE.Vector3,cb=!0,sb={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},ma={geometries:0,textures:0},Da={calls:0,vertices:0,faces:0,points:0};this.info={render:Da,memory:ma,programs:null};var z;try{if(Q={alpha:Q,depth:X,stencil:U,antialias:Y,premultipliedAlpha:O,preserveDrawingBuffer:ra},z=R||L.getContext("webgl",Q)||L.getContext("experimental-webgl",Q),null===z){if(null!==L.getContext("webgl")){throw"Error creating WebGL context with your selected attributes."}throw"Error creating WebGL context."}L.addEventListener("webglcontextlost",e,!1)}catch(Ea){console.error("THREE.WebGLRenderer: "+Ea)}var ka=new THREE.WebGLExtensions(z);ka.get("OES_texture_float");ka.get("OES_texture_float_linear");ka.get("OES_texture_half_float");ka.get("OES_texture_half_float_linear");ka.get("OES_standard_derivatives");ka.get("ANGLE_instanced_arrays");ka.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var Ha=new THREE.WebGLCapabilities(z,ka,a),T=new THREE.WebGLState(z,ka,M),pa=new THREE.WebGLProperties,mb=new THREE.WebGLObjects(z,pa,this.info),ub=new THREE.WebGLPrograms(this,Ha);this.info.programs=ub.programs;var fb=new THREE.WebGLBufferRenderer(z,ka,Da),Sb=new THREE.WebGLIndexedBufferRenderer(z,ka,Da);c();this.context=z;this.capabilities=Ha;this.extensions=ka;this.state=T;var Ja=new THREE.WebGLShadowMap(this,sa,mb);this.shadowMap=Ja;var ec=new THREE.SpritePlugin(this,q),Gb=new THREE.LensFlarePlugin(this,Cb);this.getContext=function(){return z};this.getContextAttributes=function(){return z.getContextAttributes()};this.forceContextLoss=function(){ka.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var a;return function(){if(void 0!==a){return a}var b=ka.get("EXT_texture_filter_anisotropic");return a=null!==b?z.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=function(){return Ha.precision};this.getPixelRatio=function(){return J};this.setPixelRatio=function(a){void 0!==a&&(J=a)};this.getSize=function(){return{width:N,height:S}};this.setSize=function(a,b,c){N=a;S=b;L.width=a*J;L.height=b*J;!1!==c&&(L.style.width=a+"px",L.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){fa=a*J;Oa=b*J;Ra=c*J;ba=d*J;z.viewport(fa,Oa,Ra,ba)};this.getViewport=function(a){a.x=fa/J;a.y=Oa/J;a.z=Ra/J;a.w=ba/J};this.setScissor=function(a,b,c,d){z.scissor(a*J,b*J,c*J,d*J)};this.enableScissorTest=function(a){T.setScissorTest(a)};this.getClearColor=function(){return la};this.setClearColor=function(a,c){la.set(a);oa=void 0!==c?c:1;b(la.r,la.g,la.b,oa)};this.getClearAlpha=function(){return oa};this.setClearAlpha=function(a){oa=a;b(la.r,la.g,la.b,oa)};this.clear=function(a,b,c){var d=0;(void 0===a||a)&&(d|=z.COLOR_BUFFER_BIT);(void 0===b||b)&&(d|=z.DEPTH_BUFFER_BIT);(void 0===c||c)&&(d|=z.STENCIL_BUFFER_BIT);z.clear(d)};this.clearColor=function(){z.clear(z.COLOR_BUFFER_BIT)};this.clearDepth=function(){z.clear(z.DEPTH_BUFFER_BIT)};this.clearStencil=function(){z.clear(z.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){L.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){T.initAttributes();var d=pa.get(a);if(a.hasPositions&&!d.position&&(d.position=z.createBuffer()),a.hasNormals&&!d.normal&&(d.normal=z.createBuffer()),a.hasUvs&&!d.uv&&(d.uv=z.createBuffer()),a.hasColors&&!d.color&&(d.color=z.createBuffer()),b=b.getAttributes(),a.hasPositions&&(z.bindBuffer(z.ARRAY_BUFFER,d.position),z.bufferData(z.ARRAY_BUFFER,a.positionArray,z.DYNAMIC_DRAW),T.enableAttribute(b.position),z.vertexAttribPointer(b.position,3,z.FLOAT,!1,0,0)),a.hasNormals){if(z.bindBuffer(z.ARRAY_BUFFER,d.normal),"MeshPhongMaterial"!==c.type&&c.shading===THREE.FlatShading){for(var e=0,g=3*a.count;g>e;e+=9){var f=a.normalArray,h=(f[e+0]+f[e+3]+f[e+6])/3,k=(f[e+1]+f[e+4]+f[e+7])/3,m=(f[e+2]+f[e+5]+f[e+8])/3;f[e+0]=h;f[e+1]=k;f[e+2]=m;f[e+3]=h;f[e+4]=k;f[e+5]=m;f[e+6]=h;f[e+7]=k;f[e+8]=m}}z.bufferData(z.ARRAY_BUFFER,a.normalArray,z.DYNAMIC_DRAW);T.enableAttribute(b.normal);z.vertexAttribPointer(b.normal,3,z.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(z.bindBuffer(z.ARRAY_BUFFER,d.uv),z.bufferData(z.ARRAY_BUFFER,a.uvArray,z.DYNAMIC_DRAW),T.enableAttribute(b.uv),z.vertexAttribPointer(b.uv,2,z.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(z.bindBuffer(z.ARRAY_BUFFER,d.color),z.bufferData(z.ARRAY_BUFFER,a.colorArray,z.DYNAMIC_DRAW),T.enableAttribute(b.color),z.vertexAttribPointer(b.color,3,z.FLOAT,!1,0,0));T.disableUnusedAttributes();z.drawArrays(z.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,g,h){u(e);var k=A(a,b,c,e,g),m=!1;if(a=d.id+"_"+k.id+"_"+e.wireframe,a!==eb&&(eb=a,m=!0),b=g.morphTargetInfluences,void 0!==b){a=[];c=0;for(m=b.length;m>c;c++){var l=b[c];a.push([l,c])}a.sort(f);8<a.length&&(a.length=8);var p=d.morphAttributes;c=0;for(m=a.length;m>c;c++){l=a[c],ha[c]=l[0],0!==l[0]?(b=l[1],!0===e.morphTargets&&p.position&&d.addAttribute("morphTarget"+c,p.position[b]),!0===e.morphNormals&&p.normal&&d.addAttribute("morphNormal"+c,p.normal[b])):(!0===e.morphTargets&&d.removeAttribute("morphTarget"+c),!0===e.morphNormals&&d.removeAttribute("morphNormal"+c))}a=k.getUniforms();null!==a.morphTargetInfluences&&z.uniform1fv(a.morphTargetInfluences,ha);m=!0}if(b=d.index,c=d.attributes.position,!0===e.wireframe&&(b=mb.getWireframeAttribute(d)),null!==b?(a=Sb,a.setIndex(b)):a=fb,m){var n,m=void 0;if(d instanceof THREE.InstancedBufferGeometry&&(n=ka.get("ANGLE_instanced_arrays"),null===n)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}else{void 0===m&&(m=0);T.initAttributes();var B,l=d.attributes,k=k.getAttributes(),p=e.defaultAttributeValues;for(B in k){var x=k[B];if(0<=x){var q=l[B];if(void 0!==q){var w=q.itemSize,C=mb.getAttributeBuffer(q);if(q instanceof THREE.InterleavedBufferAttribute){var r=q.data,t=r.stride,q=q.offset;r instanceof THREE.InstancedInterleavedBuffer?(T.enableAttributeAndDivisor(x,r.meshPerAttribute,n),void 0===d.maxInstancedCount&&(d.maxInstancedCount=r.meshPerAttribute*r.count)):T.enableAttribute(x);z.bindBuffer(z.ARRAY_BUFFER,C);z.vertexAttribPointer(x,w,z.FLOAT,!1,t*r.array.BYTES_PER_ELEMENT,(m*t+q)*r.array.BYTES_PER_ELEMENT)}else{q instanceof THREE.InstancedBufferAttribute?(T.enableAttributeAndDivisor(x,q.meshPerAttribute,n),void 0===d.maxInstancedCount&&(d.maxInstancedCount=q.meshPerAttribute*q.count)):T.enableAttribute(x),z.bindBuffer(z.ARRAY_BUFFER,C),z.vertexAttribPointer(x,w,z.FLOAT,!1,0,m*w*4)}}else{if(void 0!==p&&(w=p[B],void 0!==w)){switch(w.length){case 2:z.vertexAttrib2fv(x,w);break;case 3:z.vertexAttrib3fv(x,w);break;case 4:z.vertexAttrib4fv(x,w);break;default:z.vertexAttrib1fv(x,w)}}}}}T.disableUnusedAttributes()}null!==b&&z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,mb.getAttributeBuffer(b))}n=1/0;null!==b?n=b.count:void 0!==c&&(n=c.count);B=d.drawRange.start;b=d.drawRange.count;c=null!==h?h.start:0;m=null!==h?h.count:1/0;h=Math.max(0,B,c);n=Math.min(0+n,B+b,c+m)-1;n=Math.max(0,n-h+1);g instanceof THREE.Mesh?(!0===e.wireframe?(T.setLineWidth(e.wireframeLinewidth*J),a.setMode(z.LINES)):a.setMode(z.TRIANGLES),d instanceof THREE.InstancedBufferGeometry&&0<d.maxInstancedCount?a.renderInstances(d):a.render(h,n)):g instanceof THREE.Line?(d=e.linewidth,void 0===d&&(d=1),T.setLineWidth(d*J),g instanceof THREE.LineSegments?a.setMode(z.LINES):a.setMode(z.LINE_STRIP),a.render(h,n)):g instanceof THREE.Points&&(a.setMode(z.POINTS),a.render(h,n))};this.render=function(a,b,c,d){if(0==b instanceof THREE.Camera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")}else{var e=a.fog;eb="";Ba=-1;Qa=null;cb=!0;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);za.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Sa.setFromMatrix(za);sa.length=0;ga=ta=-1;q.length=0;Cb.length=0;t(a,b);xa.length=ta+1;ya.length=ga+1;!0===Ga.sortObjects&&(xa.sort(n),ya.sort(r));Ja.render(a);Da.calls=0;Da.vertices=0;Da.faces=0;Da.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,m(xa,b,sa,e,d),m(ya,b,sa,e,d)):(T.setBlending(THREE.NoBlending),m(xa,b,sa,e),m(ya,b,sa,e));ec.render(a,b);Gb.render(a,b,W,ua);c&&(a=c.texture,b=C(c),a.generateMipmaps&&b&&a.minFilter!==THREE.NearestFilter&&a.minFilter!==THREE.LinearFilter&&(a=c instanceof THREE.WebGLRenderTargetCube?z.TEXTURE_CUBE_MAP:z.TEXTURE_2D,c=pa.get(c.texture).__webglTexture,T.bindTexture(a,c),z.generateMipmap(a),T.bindTexture(a,null)));T.setDepthTest(!0);T.setDepthWrite(!0);T.setColorWrite(!0)}};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?T.disable(z.CULL_FACE):(b===THREE.FrontFaceDirectionCW?z.frontFace(z.CW):z.frontFace(z.CCW),a===THREE.CullFaceBack?z.cullFace(z.BACK):a===THREE.CullFaceFront?z.cullFace(z.FRONT):z.cullFace(z.FRONT_AND_BACK),T.enable(z.CULL_FACE))};this.setTexture=function(a,b){var c=pa.get(a);if(0<a.version&&c.__version!==a.version){var d=a.image;if(void 0===d){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",a)}else{if(!1===d.complete){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",a)}else{if(void 0===c.__webglInit&&(c.__webglInit=!0,a.addEventListener("dispose",g),c.__webglTexture=z.createTexture(),ma.textures++),T.activeTexture(z.TEXTURE0+b),T.bindTexture(z.TEXTURE_2D,c.__webglTexture),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,a.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,a.unpackAlignment),a.image=x(a.image,Ha.maxTextureSize),(a.wrapS!==THREE.ClampToEdgeWrapping||a.wrapT!==THREE.ClampToEdgeWrapping||a.minFilter!==THREE.NearestFilter&&a.minFilter!==THREE.LinearFilter)&&!1===C(a.image)){if(d=a.image,d instanceof HTMLImageElement||d instanceof HTMLCanvasElement){var e=document.createElement("canvas");e.width=THREE.Math.nearestPowerOfTwo(d.width);e.height=THREE.Math.nearestPowerOfTwo(d.height);e.getContext("2d").drawImage(d,0,0,e.width,e.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+d.width+"x"+d.height+"). Resized to "+e.width+"x"+e.height,d);d=e}a.image=d}var f=a.image,d=C(f),e=M(a.format),h=M(a.type);F(z.TEXTURE_2D,a,d);var k=a.mipmaps;if(a instanceof THREE.DataTexture){if(0<k.length&&d){for(var m=0,l=k.length;l>m;m++){f=k[m],T.texImage2D(z.TEXTURE_2D,m,e,f.width,f.height,0,e,h,f.data)}a.generateMipmaps=!1}else{T.texImage2D(z.TEXTURE_2D,0,e,f.width,f.height,0,e,h,f.data)}}else{if(a instanceof THREE.CompressedTexture){for(m=0,l=k.length;l>m;m++){f=k[m],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<T.getCompressedTextureFormats().indexOf(e)?T.compressedTexImage2D(z.TEXTURE_2D,m,e,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T.texImage2D(z.TEXTURE_2D,m,e,f.width,f.height,0,e,h,f.data)}}else{if(0<k.length&&d){m=0;for(l=k.length;l>m;m++){f=k[m],T.texImage2D(z.TEXTURE_2D,m,e,e,h,f)}a.generateMipmaps=!1}else{T.texImage2D(z.TEXTURE_2D,0,e,e,h,a.image)}}}a.generateMipmaps&&d&&z.generateMipmap(z.TEXTURE_2D);c.__version=a.version;a.onUpdate&&a.onUpdate(a)}}}else{T.activeTexture(z.TEXTURE0+b),T.bindTexture(z.TEXTURE_2D,c.__webglTexture)}};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&void 0===pa.get(a).__webglFramebuffer){var c=pa.get(a),d=pa.get(a.texture);void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",h);d.__webglTexture=z.createTexture();ma.textures++;var e=C(a),f=M(a.texture.format),g=M(a.texture.type);if(b){c.__webglFramebuffer=[];c.__webglRenderbuffer=[];T.bindTexture(z.TEXTURE_CUBE_MAP,d.__webglTexture);F(z.TEXTURE_CUBE_MAP,a.texture,e);for(d=0;6>d;d++){c.__webglFramebuffer[d]=z.createFramebuffer(),c.__webglRenderbuffer[d]=z.createRenderbuffer(),T.texImage2D(z.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,f,a.width,a.height,0,f,g,null),H(c.__webglFramebuffer[d],a,z.TEXTURE_CUBE_MAP_POSITIVE_X+d),I(c.__webglRenderbuffer[d],a)}a.texture.generateMipmaps&&e&&z.generateMipmap(z.TEXTURE_CUBE_MAP)}else{c.__webglFramebuffer=z.createFramebuffer(),c.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:z.createRenderbuffer(),T.bindTexture(z.TEXTURE_2D,d.__webglTexture),F(z.TEXTURE_2D,a.texture,e),T.texImage2D(z.TEXTURE_2D,0,f,a.width,a.height,0,f,g,null),H(c.__webglFramebuffer,a,z.TEXTURE_2D),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_ATTACHMENT,z.RENDERBUFFER,c.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&z.framebufferRenderbuffer(z.FRAMEBUFFER,z.DEPTH_STENCIL_ATTACHMENT,z.RENDERBUFFER,c.__webglRenderbuffer):I(c.__webglRenderbuffer,a),a.texture.generateMipmaps&&e&&z.generateMipmap(z.TEXTURE_2D)}b?T.bindTexture(z.TEXTURE_CUBE_MAP,null):T.bindTexture(z.TEXTURE_2D,null);z.bindRenderbuffer(z.RENDERBUFFER,null);z.bindFramebuffer(z.FRAMEBUFFER,null)}a?(c=pa.get(a),d=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,c=a.width,e=a.height,g=f=0):(d=null,c=Ra,e=ba,f=fa,g=Oa);d!==lb&&(z.bindFramebuffer(z.FRAMEBUFFER,d),z.viewport(f,g,c,e),lb=d);b&&(d=pa.get(a.texture),z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,d.__webglTexture,0));W=c;ua=e};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(0==a instanceof THREE.WebGLRenderTarget){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}else{var g=pa.get(a).__webglFramebuffer;if(g){var h=!1;g!==lb&&(z.bindFramebuffer(z.FRAMEBUFFER,g),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&M(k.format)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):k.type===THREE.UnsignedByteType||M(k.type)===z.getParameter(z.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&ka.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&ka.get("EXT_color_buffer_half_float")?z.checkFramebufferStatus(z.FRAMEBUFFER)===z.FRAMEBUFFER_COMPLETE?z.readPixels(b,c,d,e,M(k.format),M(k.type),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&z.bindFramebuffer(z.FRAMEBUFFER,lb)}}}};this.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),ka.get("OES_texture_float")};this.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),ka.get("OES_texture_half_float")};this.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),ka.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),ka.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),ka.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),ka.get("EXT_blend_minmax")};this.supportsVertexTextures=function(){return Ha.vertexTextures};this.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),ka.get("ANGLE_instanced_arrays")};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Object.defineProperties(this,{shadowMapEnabled:{get:function(){return Ja.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");Ja.enabled=a}},shadowMapType:{get:function(){return Ja.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");Ja.type=a}},shadowMapCullFace:{get:function(){return Ja.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");Ja.cullFace=a}},shadowMapDebug:{get:function(){return Ja.debug},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.");Ja.debug=a}}})};THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.shareDepthFrom=void 0!==c.shareDepthFrom?c.shareDepthFrom:null};THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,get wrapS(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set wrapS(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a},get wrapT(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set wrapT(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a},get magFilter(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set magFilter(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a},get minFilter(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set minFilter(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a},get anisotropy(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set anisotropy(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a},get offset(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set offset(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a},get repeat(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set repeat(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a},get format(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set format(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a},get type(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set type(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a},get generateMipmaps(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set generateMipmaps(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a},setSize:function(a,b){this.width===a&&this.height===b||(this.width=a,this.height=b,this.dispose())},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.shareDepthFrom=a.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,g){a.drawArrays(d,b,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");if(null===c){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}else{var h=a.attributes.position;h instanceof THREE.InterleavedBufferAttribute?c.drawArraysInstancedANGLE(d,0,h.data.count,a.maxInstancedCount):c.drawArraysInstancedANGLE(d,0,h.count,a.maxInstancedCount)}}};THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(b,k){a.drawElements(d,k,e,b*g);c.calls++;c.vertices+=k;d===a.TRIANGLES&&(c.faces+=k/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");null===c?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):c.drawElementsInstancedANGLE(d,a.index.array.length,e,0,a.maxInstancedCount)}};THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c]){return b[c]}var d;switch(c){case"EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}return null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),b[c]=d}};THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision){return"highp"}b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};THREE.WebGLGeometries=function(a,b,c){function d(a){a=a.target;var k,l=g[a.id].attributes;for(k in l){e(l[k])}a.removeEventListener("dispose",d);delete g[a.id];k=b.get(a);k.wireframe&&e(k.wireframe);c.memory.geometries--}function e(c){var d;d=c instanceof THREE.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof THREE.InterleavedBufferAttribute?b["delete"](c.data):b["delete"](c))}var g={};this.get=function(a){var b=a.geometry;if(void 0!==g[b.id]){return g[b.id]}b.addEventListener("dispose",d);var e;return b instanceof THREE.BufferGeometry?e=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e=b._bufferGeometry),g[b.id]=e,c.memory.geometries++,e}};THREE.WebGLObjects=function(a,b,c){function d(c,d){var e=c instanceof THREE.InterleavedBufferAttribute?c.data:c,f=b.get(e);void 0===f.__webglBuffer?(f.__webglBuffer=a.createBuffer(),a.bindBuffer(d,f.__webglBuffer),a.bufferData(d,e.array,e.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),f.version=e.version):f.version!==e.version&&(a.bindBuffer(d,f.__webglBuffer),!1===e.dynamic||-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(d,e.updateRange.offset*e.array.BYTES_PER_ELEMENT,e.array.subarray(e.updateRange.offset,e.updateRange.offset+e.updateRange.count)),e.updateRange.count=0),f.version=e.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}return d=a[b],void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var g=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=function(c){var g=b.get(c);if(void 0!==g.wireframe){return g.wireframe}var l=[],f=c.index,n=c.attributes;if(c=n.position,null!==f){for(var n={},f=f.array,r=0,v=f.length;v>r;r+=3){var t=f[r+0],m=f[r+1],u=f[r+2];e(n,t,m)&&l.push(t,m);e(n,m,u)&&l.push(m,u);e(n,u,t)&&l.push(u,t)}}else{for(f=n.position.array,r=0,v=f.length/3-1;v>r;r+=3){t=r+0,m=r+1,u=r+2,l.push(t,m,m,u,u,t)}}return l=new THREE.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(l),1),d(l,a.ELEMENT_ARRAY_BUFFER),g.wireframe=l};this.update=function(b){var c=g.get(b);b.geometry instanceof THREE.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var f in e){d(e[f],a.ARRAY_BUFFER)}b=c.morphAttributes;for(f in b){for(var e=b[f],n=0,r=e.length;r>n;n++){d(e[n],a.ARRAY_BUFFER)}}return c}};THREE.WebGLProgram=function(){function a(a){var b,c=[];for(b in a){var h=a[b];!1!==h&&c.push("#define "+b+" "+h)}return c.join("\n")}function b(a){return""!==a}var c=0;return function(d,e,g,h){var k=d.context,l=g.defines,f=g.__webglShader.vertexShader,n=g.__webglShader.fragmentShader,r="SHADOWMAP_TYPE_BASIC";h.shadowMapType===THREE.PCFShadowMap?r="SHADOWMAP_TYPE_PCF":h.shadowMapType===THREE.PCFSoftShadowMap&&(r="SHADOWMAP_TYPE_PCF_SOFT");var v="ENVMAP_TYPE_CUBE",t="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(h.envMap){switch(g.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:v="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:v="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:v="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:t="ENVMAP_MODE_REFRACTION"}switch(g.combine){case THREE.MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:m="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:m="ENVMAP_BLENDING_ADD"}}var u=0<d.gammaFactor?d.gammaFactor:1,A=a(l),w=k.createProgram();g instanceof THREE.RawShaderMaterial?d=l="":(l=["precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,A,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+u,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,"#define MAX_BONES "+h.maxBones,h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+t:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&!1===h.flatShading?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+r:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<h.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(b).join("\n"),d=[h.bumpMap||h.normalMap||h.flatShading||g.derivatives?"#extension GL_OES_standard_derivatives : enable":"",h.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,A,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,h.alphaTest?"#define ALPHATEST "+h.alphaTest:"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+u,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+v:"",h.envMap?"#define "+t:"",h.envMap?"#define "+m:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.metal?"#define METAL":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+r:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<h.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(b).join("\n"));n=d+n;f=THREE.WebGLShader(k,k.VERTEX_SHADER,l+f);n=THREE.WebGLShader(k,k.FRAGMENT_SHADER,n);k.attachShader(w,f);k.attachShader(w,n);void 0!==g.index0AttributeName?k.bindAttribLocation(w,0,g.index0AttributeName):!0===h.morphTargets&&k.bindAttribLocation(w,0,"position");k.linkProgram(w);h=k.getProgramInfoLog(w);r=k.getShaderInfoLog(f);v=k.getShaderInfoLog(n);m=t=!0;!1===k.getProgramParameter(w,k.LINK_STATUS)?(t=!1,console.error("THREE.WebGLProgram: shader error: ",k.getError(),"gl.VALIDATE_STATUS",k.getProgramParameter(w,k.VALIDATE_STATUS),"gl.getProgramInfoLog",h,r,v)):""!==h?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",h):(""===r||""===v)&&(m=!1);m&&(this.diagnostics={runnable:t,material:g,programLog:h,vertexShader:{log:r,prefix:l},fragmentShader:{log:v,prefix:d}});k.deleteShader(f);k.deleteShader(n);var p;this.getUniforms=function(){if(void 0===p){for(var a={},b=k.getProgramParameter(w,k.ACTIVE_UNIFORMS),c=0;b>c;c++){var d=k.getActiveUniform(w,c).name,e=k.getUniformLocation(w,d),f=d.lastIndexOf("[0]");-1!==f&&f===d.length-3&&(a[d.substr(0,f)]=e);a[d]=e}p=a}return p};var B;return this.getAttributes=function(){if(void 0===B){for(var a={},b=k.getProgramParameter(w,k.ACTIVE_ATTRIBUTES),c=0;b>c;c++){var d=k.getActiveAttrib(w,c).name;a[d]=k.getAttribLocation(w,d)}B=a}return B},this.destroy=function(){k.deleteProgram(w);this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=c++,this.code=e,this.usedTimes=1,this.program=w,this.vertexShader=f,this.fragmentShader=n,this}}();THREE.WebGLPrograms=function(a,b){var c=[],d={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},e="precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap displacementMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled pointLightShadows shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");this.getParameters=function(c,e,k,l){var f,n,r,v,t,m=d[c.type];f=t=v=r=n=0;for(var u=e.length;u>f;f++){var A=e[f];!1!==A.visible&&(A instanceof THREE.DirectionalLight&&n++,A instanceof THREE.PointLight&&r++,A instanceof THREE.SpotLight&&v++,A instanceof THREE.HemisphereLight&&t++)}for(var A=f=u=0,w=e.length;w>A;A++){var p=e[A];p.castShadow&&((p instanceof THREE.SpotLight||p instanceof THREE.DirectionalLight)&&u++,p instanceof THREE.PointLight&&(u++,f++))}return e=u,b.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture?u=1024:(u=Math.floor((b.maxVertexUniforms-20)/4),void 0!==l&&l instanceof THREE.SkinnedMesh&&(u=Math.min(l.skeleton.bones.length,u),u<l.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+l.skeleton.bones.length+", this GPU supports just "+u+" (try OpenGL instead of ANGLE)"))),A=a.getPrecision(),null!==c.precision&&(A=b.getMaxPrecision(c.precision),A!==c.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",c.precision,"not supported, using",A,"instead.")),{shaderID:m,precision:A,supportsVertexTextures:b.vertexTextures,map:!!c.map,envMap:!!c.envMap,envMapMode:c.envMap&&c.envMap.mapping,lightMap:!!c.lightMap,aoMap:!!c.aoMap,emissiveMap:!!c.emissiveMap,bumpMap:!!c.bumpMap,normalMap:!!c.normalMap,displacementMap:!!c.displacementMap,specularMap:!!c.specularMap,alphaMap:!!c.alphaMap,combine:c.combine,vertexColors:c.vertexColors,fog:k,useFog:c.fog,fogExp:k instanceof THREE.FogExp2,flatShading:c.shading===THREE.FlatShading,sizeAttenuation:c.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:c.skinning,maxBones:u,useVertexTexture:b.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture,morphTargets:c.morphTargets,morphNormals:c.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,maxDirLights:n,maxPointLights:r,maxSpotLights:v,maxHemiLights:t,maxShadows:e,pointLightShadows:f,shadowMapEnabled:a.shadowMap.enabled&&l.receiveShadow&&0<e,shadowMapType:a.shadowMap.type,shadowMapDebug:a.shadowMap.debug,alphaTest:c.alphaTest,metal:c.metal,doubleSided:c.side===THREE.DoubleSide,flipSided:c.side===THREE.BackSide}};this.getProgramCode=function(a,b){var c=[];if(b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader)),void 0!==a.defines){for(var d in a.defines){c.push(d),c.push(a.defines[d])}}for(d=0;d<e.length;d++){var f=e[d];c.push(f);c.push(b[f])}return c.join()};this.acquireProgram=function(b,d,e){for(var l,f=0,n=c.length;n>f;f++){var r=c[f];if(r.code===e){l=r;++l.usedTimes;break}}return void 0===l&&(l=new THREE.WebGLProgram(a,e,b,d),c.push(l)),l};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=c.indexOf(a);c[b]=c[c.length-1];c.pop();a.destroy()}};this.programs=c};THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];return void 0===c&&(c={},a[b]=c),c};this["delete"]=function(b){delete a[b.uuid]};this.clear=function(){a={}}};THREE.WebGLShader=function(){function a(a){a=a.split("\n");for(var c=0;c<a.length;c++){a[c]=c+1+": "+a[c]}return a.join("\n")}return function(b,c,d){var e=b.createShader(c);return b.shaderSource(e,d),b.compileShader(e),!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d)),e}}();THREE.WebGLShadowMap=function(a,b,c){function d(a,b,c,d){var e=a.geometry,f=null,f=v,g=a.customDepthMaterial;return c&&(f=t,g=a.customDistanceMaterial),g?f=g:(a=a instanceof THREE.SkinnedMesh&&b.skinning,g=0,void 0!==e.morphTargets&&0<e.morphTargets.length&&b.morphTargets&&(g|=1),a&&(g|=2),f=f[g]),f.visible=b.visible,f.wireframe=b.wireframe,f.wireframeLinewidth=b.wireframeLinewidth,c&&void 0!==f.uniforms.lightPos&&f.uniforms.lightPos.value.copy(d),f}function e(a,b){if(!1!==a.visible){(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===k.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld),r.push(a));for(var c=a.children,d=0,f=c.length;f>d;d++){e(c[d],b)}}}var g=a.context,h=a.state,k=new THREE.Frustum,l=new THREE.Matrix4;new THREE.Vector3;new THREE.Vector3;for(var f=new THREE.Vector3,n=new THREE.Vector3,r=[],v=Array(4),t=Array(4),m=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],u=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],A=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],w=new THREE.Vector4,p=THREE.ShaderLib.depthRGBA,B=THREE.UniformsUtils.clone(p.uniforms),F=THREE.ShaderLib.distanceRGBA,x=THREE.UniformsUtils.clone(F.uniforms),C=0;4!==C;++C){var E=0!==(1&C),D=0!==(2&C),H=new THREE.ShaderMaterial({uniforms:B,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,morphTargets:E,skinning:D});H._shadowPass=!0;v[C]=H;E=new THREE.ShaderMaterial({uniforms:x,vertexShader:F.vertexShader,fragmentShader:F.fragmentShader,morphTargets:E,skinning:D});E._shadowPass=!0;t[C]=E}var I=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=THREE.PCFShadowMap;this.cullFace=THREE.CullFaceFront;this.render=function(p){var B,x;if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)){g.clearColor(1,1,1,1);h.disable(g.BLEND);h.enable(g.CULL_FACE);g.frontFace(g.CCW);g.cullFace(I.cullFace===THREE.CullFaceFront?g.FRONT:g.BACK);h.setDepthTest(!0);a.getViewport(w);for(var C=0,t=b.length;t>C;C++){var v=b[C];if(!0===v.castShadow){var F=v.shadow,E=F.camera,D=F.mapSize;if(v instanceof THREE.PointLight){B=6;x=!0;var H=D.x/4,Y=D.y/2;A[0].set(2*H,Y,H,Y);A[1].set(0,Y,H,Y);A[2].set(3*H,Y,H,Y);A[3].set(H,Y,H,Y);A[4].set(3*H,0,H,Y);A[5].set(H,0,H,Y)}else{B=1,x=!1}null===F.map&&(H=THREE.LinearFilter,I.type===THREE.PCFSoftShadowMap&&(H=THREE.NearestFilter),F.map=new THREE.WebGLRenderTarget(D.x,D.y,{minFilter:H,magFilter:H,format:THREE.RGBAFormat}),F.matrix=new THREE.Matrix4,v instanceof THREE.SpotLight&&(E.aspect=D.x/D.y),E.updateProjectionMatrix());D=F.map;F=F.matrix;n.setFromMatrixPosition(v.matrixWorld);E.position.copy(n);a.setRenderTarget(D);a.clear();for(D=0;B>D;D++){for(x?(f.copy(E.position),f.add(m[D]),E.up.copy(u[D]),E.lookAt(f),H=A[D],a.setViewport(H.x,H.y,H.z,H.w)):(f.setFromMatrixPosition(v.target.matrixWorld),E.lookAt(f)),E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld),F.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),F.multiply(E.projectionMatrix),F.multiply(E.matrixWorldInverse),l.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),k.setFromMatrix(l),r.length=0,e(p,E),H=0,Y=r.length;Y>H;H++){var O=r[H],ra=c.update(O),la=O.material;if(la instanceof THREE.MeshFaceMaterial){for(var oa=ra.groups,la=la.materials,sa=0,xa=oa.length;xa>sa;sa++){var ta=oa[sa],ya=la[ta.materialIndex];!0===ya.visible&&(ya=d(O,ya,x,n),a.renderBufferDirect(E,b,null,ra,ya,O,ta))}}else{ya=d(O,la,x,n),a.renderBufferDirect(E,b,null,ra,ya,O,null)}}}a.resetGLState()}}a.setViewport(w.x,w.y,w.z,w.w);p=a.getClearColor();B=a.getClearAlpha();a.setClearColor(p,B);h.enable(g.BLEND);I.cullFace===THREE.CullFaceFront&&g.cullFace(g.BACK);a.resetGLState();I.needsUpdate=!1}}};THREE.WebGLState=function(a,b,c){var d=this,e=new Uint8Array(16),g=new Uint8Array(16),h=new Uint8Array(16),k={},l=null,f=null,n=null,r=null,v=null,t=null,m=null,u=null,A=null,w=null,p=null,B=null,F=null,x=null,C=null,E=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),D=void 0,H={};this.init=function(){a.clearColor(0,0,0,1);a.clearDepth(1);a.clearStencil(0);this.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.frontFace(a.CCW);a.cullFace(a.BACK);this.enable(a.CULL_FACE);this.enable(a.BLEND);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)};this.initAttributes=function(){for(var a=0,b=e.length;b>a;a++){e[a]=0}};this.enableAttribute=function(c){e[c]=1;0===g[c]&&(a.enableVertexAttribArray(c),g[c]=1);0!==h[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),h[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){e[b]=1;0===g[b]&&(a.enableVertexAttribArray(b),g[b]=1);h[b]!==c&&(d.vertexAttribDivisorANGLE(b,c),h[b]=c)};this.disableUnusedAttributes=function(){for(var b=0,c=g.length;c>b;b++){g[b]!==e[b]&&(a.disableVertexAttribArray(b),g[b]=0)}};this.enable=function(b){!0!==k[b]&&(a.enable(b),k[b]=!0)};this.disable=function(b){!1!==k[b]&&(a.disable(b),k[b]=!1)};this.getCompressedTextureFormats=function(){if(null===l&&(l=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc"))){for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++){l.push(c[d])}}return l};this.setBlending=function(b,d,e,g,h,k,l){b!==f&&(b===THREE.NoBlending?this.disable(a.BLEND):b===THREE.AdditiveBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===THREE.SubtractiveBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):b===THREE.MultiplyBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):b===THREE.CustomBlending?this.enable(a.BLEND):(this.enable(a.BLEND),a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),f=b);b===THREE.CustomBlending?(h=h||d,k=k||e,l=l||g,(d!==n||h!==t)&&(a.blendEquationSeparate(c(d),c(h)),n=d,t=h),(e!==r||g!==v||k!==m||l!==u)&&(a.blendFuncSeparate(c(e),c(g),c(k),c(l)),r=e,v=g,m=k,u=l)):u=m=t=v=r=n=null};this.setDepthFunc=function(b){if(A!==b){if(b){switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}}else{a.depthFunc(a.LEQUAL)}A=b}};this.setDepthTest=function(b){b?this.enable(a.DEPTH_TEST):this.disable(a.DEPTH_TEST)};this.setDepthWrite=function(b){w!==b&&(a.depthMask(b),w=b)};this.setColorWrite=function(b){p!==b&&(a.colorMask(b,b,b,b),p=b)};this.setFlipSided=function(b){B!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),B=b)};this.setLineWidth=function(b){b!==F&&(a.lineWidth(b),F=b)};this.setPolygonOffset=function(b,c,d){b?this.enable(a.POLYGON_OFFSET_FILL):this.disable(a.POLYGON_OFFSET_FILL);!b||x===c&&C===d||(a.polygonOffset(c,d),x=c,C=d)};this.setScissorTest=function(b){b?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+E-1);D!==b&&(a.activeTexture(b),D=b)};this.bindTexture=function(b,c){void 0===D&&d.activeTexture();var e=H[D];void 0===e&&(e={type:void 0,texture:void 0},H[D]=e);(e.type!==b||e.texture!==c)&&(a.bindTexture(b,c),e.type=b,e.texture=c)};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.reset=function(){for(var b=0;b<g.length;b++){1===g[b]&&(a.disableVertexAttribArray(b),g[b]=0)}k={};B=p=w=f=l=null}};THREE.LensFlarePlugin=function(a,b){var c,d,e,g,h,k,l,f,n,r,v,t,m,u,A,w,p=a.context,B=a.state;this.render=function(F,x,C,E){if(0!==b.length){F=new THREE.Vector3;var D=E/C,H=0.5*C,I=0.5*E,K=16/E,M=new THREE.Vector2(K*D,K),L=new THREE.Vector3(1,1,0),R=new THREE.Vector2(1,1);if(void 0===m){var K=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),N=new Uint16Array([0,1,2,0,2,3]);v=p.createBuffer();t=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,v);p.bufferData(p.ARRAY_BUFFER,K,p.STATIC_DRAW);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,t);p.bufferData(p.ELEMENT_ARRAY_BUFFER,N,p.STATIC_DRAW);A=p.createTexture();w=p.createTexture();B.bindTexture(p.TEXTURE_2D,A);p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);B.bindTexture(p.TEXTURE_2D,w);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);var K=(u=0<p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},N=p.createProgram(),S=p.createShader(p.FRAGMENT_SHADER),J=p.createShader(p.VERTEX_SHADER),Q="precision "+a.getPrecision()+" float;\n";p.shaderSource(S,Q+K.fragmentShader);p.shaderSource(J,Q+K.vertexShader);p.compileShader(S);p.compileShader(J);p.attachShader(N,S);p.attachShader(N,J);p.linkProgram(N);m=N;n=p.getAttribLocation(m,"position");r=p.getAttribLocation(m,"uv");c=p.getUniformLocation(m,"renderType");d=p.getUniformLocation(m,"map");e=p.getUniformLocation(m,"occlusionMap");g=p.getUniformLocation(m,"opacity");h=p.getUniformLocation(m,"color");k=p.getUniformLocation(m,"scale");l=p.getUniformLocation(m,"rotation");f=p.getUniformLocation(m,"screenPosition")}p.useProgram(m);B.initAttributes();B.enableAttribute(n);B.enableAttribute(r);B.disableUnusedAttributes();p.uniform1i(e,0);p.uniform1i(d,1);p.bindBuffer(p.ARRAY_BUFFER,v);p.vertexAttribPointer(n,2,p.FLOAT,!1,16,0);p.vertexAttribPointer(r,2,p.FLOAT,!1,16,8);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,t);B.disable(p.CULL_FACE);p.depthMask(!1);N=0;for(S=b.length;S>N;N++){if(K=16/E,M.set(K*D,K),J=b[N],F.set(J.matrixWorld.elements[12],J.matrixWorld.elements[13],J.matrixWorld.elements[14]),F.applyMatrix4(x.matrixWorldInverse),F.applyProjection(x.projectionMatrix),L.copy(F),R.x=L.x*H+H,R.y=L.y*I+I,u||0<R.x&&R.x<C&&0<R.y&&R.y<E){B.activeTexture(p.TEXTURE0);B.bindTexture(p.TEXTURE_2D,null);B.activeTexture(p.TEXTURE1);B.bindTexture(p.TEXTURE_2D,A);p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,R.x-8,R.y-8,16,16,0);p.uniform1i(c,0);p.uniform2f(k,M.x,M.y);p.uniform3f(f,L.x,L.y,L.z);B.disable(p.BLEND);B.enable(p.DEPTH_TEST);p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0);B.activeTexture(p.TEXTURE0);B.bindTexture(p.TEXTURE_2D,w);p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,R.x-8,R.y-8,16,16,0);p.uniform1i(c,1);B.disable(p.DEPTH_TEST);B.activeTexture(p.TEXTURE1);B.bindTexture(p.TEXTURE_2D,A);p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0);J.positionScreen.copy(L);J.customUpdateCallback?J.customUpdateCallback(J):J.updateLensFlares();p.uniform1i(c,2);B.enable(p.BLEND);for(var Q=0,X=J.lensFlares.length;X>Q;Q++){var U=J.lensFlares[Q];0.001<U.opacity&&0.001<U.scale&&(L.x=U.x,L.y=U.y,L.z=U.z,K=U.size*U.scale/E,M.x=K*D,M.y=K,p.uniform3f(f,L.x,L.y,L.z),p.uniform2f(k,M.x,M.y),p.uniform1f(l,U.rotation),p.uniform1f(g,U.opacity),p.uniform3f(h,U.color.r,U.color.g,U.color.b),B.setBlending(U.blending,U.blendEquation,U.blendSrc,U.blendDst),a.setTexture(U.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}B.enable(p.CULL_FACE);B.enable(p.DEPTH_TEST);p.depthMask(!0);a.resetGLState()}}};THREE.SpritePlugin=function(a,b){function c(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var d,e,g,h,k,l,f,n,r,v,t,m,u,A,w,p,B,F,x,C,E,D=a.context,H=a.state,I=new THREE.Vector3,K=new THREE.Quaternion,M=new THREE.Vector3;this.render=function(L,R){if(0!==b.length){if(void 0===C){var N=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),S=new Uint16Array([0,1,2,0,2,3]);F=D.createBuffer();x=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,F);D.bufferData(D.ARRAY_BUFFER,N,D.STATIC_DRAW);D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,x);D.bufferData(D.ELEMENT_ARRAY_BUFFER,S,D.STATIC_DRAW);var N=D.createProgram(),S=D.createShader(D.VERTEX_SHADER),J=D.createShader(D.FRAGMENT_SHADER);D.shaderSource(S,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));D.shaderSource(J,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));D.compileShader(S);D.compileShader(J);D.attachShader(N,S);D.attachShader(N,J);D.linkProgram(N);C=N;p=D.getAttribLocation(C,"position");B=D.getAttribLocation(C,"uv");d=D.getUniformLocation(C,"uvOffset");e=D.getUniformLocation(C,"uvScale");g=D.getUniformLocation(C,"rotation");h=D.getUniformLocation(C,"scale");k=D.getUniformLocation(C,"color");l=D.getUniformLocation(C,"map");f=D.getUniformLocation(C,"opacity");n=D.getUniformLocation(C,"modelViewMatrix");r=D.getUniformLocation(C,"projectionMatrix");v=D.getUniformLocation(C,"fogType");t=D.getUniformLocation(C,"fogDensity");m=D.getUniformLocation(C,"fogNear");u=D.getUniformLocation(C,"fogFar");A=D.getUniformLocation(C,"fogColor");w=D.getUniformLocation(C,"alphaTest");N=document.createElement("canvas");N.width=8;N.height=8;S=N.getContext("2d");S.fillStyle="white";S.fillRect(0,0,8,8);E=new THREE.Texture(N);E.needsUpdate=!0}D.useProgram(C);H.initAttributes();H.enableAttribute(p);H.enableAttribute(B);H.disableUnusedAttributes();H.disable(D.CULL_FACE);H.enable(D.BLEND);D.bindBuffer(D.ARRAY_BUFFER,F);D.vertexAttribPointer(p,2,D.FLOAT,!1,16,0);D.vertexAttribPointer(B,2,D.FLOAT,!1,16,8);D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,x);D.uniformMatrix4fv(r,!1,R.projectionMatrix.elements);H.activeTexture(D.TEXTURE0);D.uniform1i(l,0);S=N=0;(J=L.fog)?(D.uniform3f(A,J.color.r,J.color.g,J.color.b),J instanceof THREE.Fog?(D.uniform1f(m,J.near),D.uniform1f(u,J.far),D.uniform1i(v,1),S=N=1):J instanceof THREE.FogExp2&&(D.uniform1f(t,J.density),D.uniform1i(v,2),S=N=2)):(D.uniform1i(v,0),S=N=0);for(var J=0,Q=b.length;Q>J;J++){var X=b[J];X.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,X.matrixWorld);X.z=-X.modelViewMatrix.elements[14]}b.sort(c);for(var U=[],J=0,Q=b.length;Q>J;J++){var X=b[J],Y=X.material;D.uniform1f(w,Y.alphaTest);D.uniformMatrix4fv(n,!1,X.modelViewMatrix.elements);X.matrixWorld.decompose(I,K,M);U[0]=M.x;U[1]=M.y;X=0;L.fog&&Y.fog&&(X=S);N!==X&&(D.uniform1i(v,X),N=X);null!==Y.map?(D.uniform2f(d,Y.map.offset.x,Y.map.offset.y),D.uniform2f(e,Y.map.repeat.x,Y.map.repeat.y)):(D.uniform2f(d,0,0),D.uniform2f(e,1,1));D.uniform1f(f,Y.opacity);D.uniform3f(k,Y.color.r,Y.color.g,Y.color.b);D.uniform1f(g,Y.rotation);D.uniform2fv(h,U);H.setBlending(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst);H.setDepthTest(Y.depthTest);H.setDepthWrite(Y.depthWrite);Y.map&&Y.map.image&&Y.map.image.width?a.setTexture(Y.map,0):a.setTexture(E,0);D.drawElements(D.TRIANGLES,6,D.UNSIGNED_SHORT,0)}H.enable(D.CULL_FACE);a.resetGLState()}}};THREE.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return -3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=0.5*(c-a);d=0.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}};THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture is being deprecated. Use THREE.TextureLoader() instead.");var e=new THREE.TextureLoader;return e.setCrossOrigin(this.crossOrigin),a=e.load(a,c,void 0,d),b&&(a.mapping=b),a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");var e=new THREE.CubeTextureLoader;return e.setCrossOrigin(this.crossOrigin),a=e.load(a,c,void 0,d),b&&(a.mapping=b),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Group,d=0,e=b.length;e>d;d++){c.add(new THREE.Mesh(a,b[d]))}return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};THREE.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;b>e;d=e++){c+=a[d].x*a[e].y-a[e].x*a[d].y}return 0.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c){return null}var d,e,g,h=[],k=[],l=[];if(0<THREE.ShapeUtils.area(a)){for(e=0;c>e;e++){k[e]=e}}else{for(e=0;c>e;e++){k[e]=c-1-e}}var f=2*c;for(e=c-1;2<c;){if(0>=f--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}d=e;d>=c&&(d=0);e=d+1;e>=c&&(e=0);g=e+1;g>=c&&(g=0);var n;a:{var r=void 0,v=void 0,t=void 0,m=void 0,u=void 0,A=void 0,w=void 0,p=void 0,r=a[k[d]].x,v=a[k[d]].y,t=a[k[e]].x,m=a[k[e]].y,u=a[k[g]].x,A=a[k[g]].y;if(Number.EPSILON>(t-r)*(A-v)-(m-v)*(u-r)){n=!1}else{var B=void 0,F=void 0,x=void 0,C=void 0,E=void 0,D=void 0,H=void 0,I=void 0,K=void 0,M=void 0,K=I=H=p=w=void 0,B=u-t,F=A-m,x=r-u,C=v-A,E=t-r,D=m-v;for(n=0;c>n;n++){if(w=a[k[n]].x,p=a[k[n]].y,!(w===r&&p===v||w===t&&p===m||w===u&&p===A)&&(H=w-r,I=p-v,K=w-t,M=p-m,w-=u,p-=A,K=B*M-F*K,H=E*I-D*H,I=x*p-C*w,K>=-Number.EPSILON&&I>=-Number.EPSILON&&H>=-Number.EPSILON)){n=!1;break a}}n=!0}}if(n){h.push([a[k[d]],a[k[e]],a[k[g]]]);l.push([k[d],k[e],k[g]]);d=e;for(g=e+1;c>g;d++,g++){k[d]=k[g]}c--;f=2*c}}return b?l:h}}(),triangulateShape:function(a,b){function c(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-d.x,l=e.y-d.y,n=a.x-d.x,C=a.y-d.y,r=h*k-g*l,D=h*n-g*C;if(Math.abs(r)>Number.EPSILON){if(0<r){if(0>D||D>r||(k=l*n-k*C,0>k||k>r)){return[]}}else{if(0<D||r>D||(k=l*n-k*C,0<k||r>k)){return[]}}return 0===k?!f||0!==D&&D!==r?[a]:[]:k===r?!f||0!==D&&D!==r?[b]:[]:0===D?[d]:D===r?[e]:(f=k/r,[{x:a.x+f*g,y:a.y+f*h}])}return 0!==D||l*n!==k*C?[]:(h=0===g&&0===h,k=0===k&&0===l,h&&k?a.x!==d.x||a.y!==d.y?[]:[a]:h?c(d,e,a)?[a]:[]:k?c(a,b,d)?[d]:[]:(0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,r=d.x,l=e,d=e.x):(b=e,r=e.x,l=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,r=d.y,l=e,d=e.y):(b=e,r=e.y,l=d,d=d.y)),r>=k?r>a?[]:a===r?f?[]:[b]:d>=a?[b,h]:[b,l]:k>d?[]:k===d?f?[]:[g]:d>=a?[g,h]:[g,l]))}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;return d=d.y-a.y,a=e*c-f*b,e=e*d-f*g,Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var g,h,k,l,f,n={};k=a.concat();g=0;for(h=b.length;h>g;g++){Array.prototype.push.apply(k,b[g])}g=0;for(h=k.length;h>g;g++){f=k[g].x+":"+k[g].y,void 0!==n[f]&&console.warn("THREE.Shape: Duplicate point",f),n[f]=g}g=function(a,b){function c(a,b){var d=I.length-1,f=a-1;0>f&&(f=d);var g=a+1;return g>d&&(g=0),e(I[a],I[f],I[g],h[b])?(d=h.length-1,f=b-1,0>f&&(f=d),g=b+1,g>d&&(g=0),e(h[b],h[f],h[g],I[a])?!0:!1):!1}function f(a,b){var c,e;for(c=0;c<I.length;c++){if(e=c+1,e%=I.length,e=d(a,b,I[c],I[e],!0),0<e.length){return !0}}return !1}function g(a,c){var e,f,h,k;for(e=0;e<K.length;e++){for(f=b[K[e]],h=0;h<f.length;h++){if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length){return !0}}}return !1}var h,k,l,n,x,r,E,D,H,I=a.concat(),K=[],M=[],L=0;for(k=b.length;k>L;L++){K.push(L)}E=0;for(var R=2*K.length;0<K.length;){if(R--,0>R){console.log("Infinite Loop! Holes left:"+K.length+", Probably Hole outside Shape!");break}for(l=E;l<I.length;l++){n=I[l];k=-1;for(L=0;L<K.length;L++){if(x=K[L],r=n.x+":"+n.y+":"+x,void 0===M[r]){h=b[x];for(D=0;D<h.length;D++){if(x=h[D],c(l,D)&&!f(n,x)&&!g(n,x)){k=D;K.splice(L,1);E=I.slice(0,l+1);x=I.slice(l);D=h.slice(k);H=h.slice(0,k+1);I=E.concat(D).concat(H).concat(x);E=l;break}}if(0<=k){break}M[r]=!0}}if(0<=k){break}}}return I}(a,b);var r=THREE.ShapeUtils.triangulate(g,!1);g=0;for(h=r.length;h>g;g++){for(l=r[g],k=0;3>k;k++){f=l[k].x+":"+l[k].y,f=n[f],void 0!==f&&(l[k]=f)}}return r.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,b,c,d,e){var g=1-a,h=1-a;return g*g*g*b+3*h*h*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain);this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);THREE.Audio.prototype.constructor=THREE.Audio;THREE.Audio.prototype.load=function(a){var b=this,c=new XMLHttpRequest;return c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(a){b.context.decodeAudioData(this.response,function(a){b.source.buffer=a;b.autoplay&&b.play()})},c.send(),this};THREE.Audio.prototype.play=function(){if(!0===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.")}else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;this.connect()}};THREE.Audio.prototype.pause=function(){this.source.stop();this.startTime=this.context.currentTime};THREE.Audio.prototype.stop=function(){this.source.stop();this.startTime=0};THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)};THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)};THREE.Audio.prototype.setFilter=function(a){!0===this.isPlaying?(this.disconnect(),this.filter=a,this.connect()):this.filter=a};THREE.Audio.prototype.getFilter=function(){return this.filter};THREE.Audio.prototype.setPlaybackRate=function(a){this.playbackRate=a;!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)};THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate};THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};THREE.Audio.prototype.setLoop=function(a){this.source.loop=a};THREE.Audio.prototype.getLoop=function(){return this.source.loop};THREE.Audio.prototype.setRefDistance=function(a){this.panner.refDistance=a};THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance};THREE.Audio.prototype.setRolloffFactor=function(a){this.panner.rolloffFactor=a};THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};THREE.Audio.prototype.setVolume=function(a){this.gain.gain.value=a};THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value};THREE.Audio.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new (window.AudioContext||window.webkitAudioContext)};THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.constructor=THREE.AudioListener;THREE.AudioListener.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}();THREE.Curve=function(){};THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){return a=this.getUtoTmapping(a),this.getPoint(a)},getPoints:function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++){c.push(this.getPoint(b/a))}return c},getSpacedPoints:function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++){c.push(this.getPointAt(b/a))}return c},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),g=0;d.push(0);for(c=1;a>=c;c++){b=this.getPoint(c/a),g+=b.distanceTo(e),d.push(g),e=b}return this.cacheArcLengths=d},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c,d=this.getLengths(),e=0,g=d.length;c=b?b:a*d[g-1];for(var h,k=0,l=g-1;l>=k;){if(e=Math.floor(k+(l-k)/2),h=d[e]-c,0>h){k=e+1}else{if(!(0<h)){l=e;break}l=e-1}}return e=l,d[e]===c?e/(g-1):(k=d[e],(e+(c-k)/(d[e+1]-k))/(g-1))},getTangent:function(a){var b=a-0.0001;return a+=0.0001,0>b&&(b=0),1<a&&(a=1),b=this.getPoint(b),this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){return a=this.getUtoTmapping(a),this.getTangent(a)}};THREE.Curve.Utils=THREE.CurveUtils;THREE.Curve.create=function(a,b){return a.prototype=Object.create(THREE.Curve.prototype),a.prototype.constructor=a,a.prototype.getPoint=b,a};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.constructor=THREE.CurvePath;THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=b){return a=this.curves[d],b=1-(c[d]-b)/a.getLength(),a.getPointAt(b)}d++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}for(var a=[],b=0,c=0,d=this.curves.length;d>c;c++){b+=this.curves[c].getLength(),a.push(b)}return this.cacheLengths=a};THREE.CurvePath.prototype.createPointsGeometry=function(a){return a=this.getPoints(a,!0),this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){return a=this.getSpacedPoints(a,!0),this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0,d=a.length;d>c;c++){var e=a[c];b.vertices.push(new THREE.Vector3(e.x,e.y,e.z||0))}return b};THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.Path.prototype.constructor=THREE.Path;THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;c>b;b++){this.lineTo(a[b].x,a[b].y)}};THREE.Path.prototype.moveTo=function(a,b){this.actions.push({action:"moveTo",args:[a,b]})};THREE.Path.prototype.lineTo=function(a,b){var c=this.actions[this.actions.length-1].args,c=new THREE.LineCurve(new THREE.Vector2(c[c.length-2],c[c.length-1]),new THREE.Vector2(a,b));this.curves.push(c);this.actions.push({action:"lineTo",args:[a,b]})};THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=this.actions[this.actions.length-1].args,e=new THREE.QuadraticBezierCurve(new THREE.Vector2(e[e.length-2],e[e.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(e);this.actions.push({action:"quadraticCurveTo",args:[a,b,c,d]})};THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args,h=new THREE.CubicBezierCurve(new THREE.Vector2(h[h.length-2],h[h.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,g));this.curves.push(h);this.actions.push({action:"bezierCurveTo",args:[a,b,c,d,e,g]})};THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:"splineThru",args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,g)};THREE.Path.prototype.absarc=function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,g,h,k){var l=this.actions[this.actions.length-1].args;this.absellipse(a+l[l.length-2],b+l[l.length-1],c,d,e,g,h,k)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,g,h,k){var l=[a,b,c,d,e,g,h,k||0];a=new THREE.EllipseCurve(a,b,c,d,e,g,h,k);this.curves.push(a);a=a.getPoint(1);l.push(a.x);l.push(a.y);this.actions.push({action:"ellipse",args:l})};THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;a>d;d++){c.push(this.getPoint(d/a))}return c};THREE.Path.prototype.getPoints=function(a,b){a=a||12;for(var c,d,e,g,h,k,l,f,n,r,v=THREE.ShapeUtils.b2,t=THREE.ShapeUtils.b3,m=[],u=0,A=this.actions.length;A>u;u++){n=this.actions[u];var w=n.args;switch(n.action){case"moveTo":m.push(new THREE.Vector2(w[0],w[1]));break;case"lineTo":m.push(new THREE.Vector2(w[0],w[1]));break;case"quadraticCurveTo":c=w[2];d=w[3];h=w[0];k=w[1];0<m.length?(n=m[m.length-1],l=n.x,f=n.y):(n=this.actions[u-1].args,l=n[n.length-2],f=n[n.length-1]);for(w=1;a>=w;w++){r=w/a,n=v(r,l,h,c),r=v(r,f,k,d),m.push(new THREE.Vector2(n,r))}break;case"bezierCurveTo":c=w[4];d=w[5];h=w[0];k=w[1];e=w[2];g=w[3];0<m.length?(n=m[m.length-1],l=n.x,f=n.y):(n=this.actions[u-1].args,l=n[n.length-2],f=n[n.length-1]);for(w=1;a>=w;w++){r=w/a,n=t(r,l,h,e,c),r=t(r,f,k,g,d),m.push(new THREE.Vector2(n,r))}break;case"splineThru":n=this.actions[u-1].args;r=[new THREE.Vector2(n[n.length-2],n[n.length-1])];n=a*w[0].length;r=r.concat(w[0]);r=new THREE.SplineCurve(r);for(w=1;n>=w;w++){m.push(r.getPointAt(w/n))}break;case"arc":c=w[0];d=w[1];k=w[2];e=w[3];n=w[4];h=!!w[5];l=n-e;f=2*a;for(w=1;f>=w;w++){r=w/f,h||(r=1-r),r=e+r*l,n=c+k*Math.cos(r),r=d+k*Math.sin(r),m.push(new THREE.Vector2(n,r))}break;case"ellipse":c=w[0];d=w[1];k=w[2];g=w[3];e=w[4];n=w[5];h=!!w[6];var p=w[7];l=n-e;f=2*a;var B,F;0!==p&&(B=Math.cos(p),F=Math.sin(p));for(w=1;f>=w;w++){if(r=w/f,h||(r=1-r),r=e+r*l,n=c+k*Math.cos(r),r=d+g*Math.sin(r),0!==p){var x=n;n=(x-c)*B-(r-d)*F+c;r=(x-c)*F+(r-d)*B+d}m.push(new THREE.Vector2(n,r))}}}return v=m[m.length-1],Math.abs(v.x-m[0].x)<Number.EPSILON&&Math.abs(v.y-m[0].y)<Number.EPSILON&&m.splice(m.length-1,1),b&&m.push(m[0]),m};THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;c>f;e=f++){var g=b[e],h=b[f],k=h.x-g.x,m=h.y-g.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y)){if(a.y===g.y){if(a.x===g.x){return !0}}else{if(e=m*(a.x-g.x)-k*(a.y-g.y),0===e){return !0}0>e||(d=!d)}}}else{if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x)){return !0}}}return d}var e=THREE.ShapeUtils.isClockWise,g=function(a){for(var b=[],c=new THREE.Path,d=0,e=a.length;e>d;d++){var f=a[d],g=f.args,f=f.action;"moveTo"===f&&0!==c.actions.length&&(b.push(c),c=new THREE.Path);c[f].apply(c,g)}return 0!==c.actions.length&&b.push(c),b}(this.actions);if(0===g.length){return[]}if(!0===b){return c(g)}var h,k,l,f=[];if(1===g.length){return k=g[0],l=new THREE.Shape,l.actions=k.actions,l.curves=k.curves,f.push(l),f}var n=!e(g[0].getPoints()),n=a?!n:n;l=[];var r,v=[],t=[],m=0;v[m]=void 0;t[m]=[];for(var u=0,A=g.length;A>u;u++){k=g[u],r=k.getPoints(),h=e(r),(h=a?!h:h)?(!n&&v[m]&&m++,v[m]={s:new THREE.Shape,p:r},v[m].s.actions=k.actions,v[m].s.curves=k.curves,n&&m++,t[m]=[]):t[m].push({h:k,p:r[0]})}if(!v[0]){return c(g)}if(1<v.length){u=!1;k=[];e=0;for(g=v.length;g>e;e++){l[e]=[]}e=0;for(g=v.length;g>e;e++){for(h=t[e],n=0;n<h.length;n++){m=h[n];r=!0;for(A=0;A<v.length;A++){d(m.p,v[A].p)&&(e!==A&&k.push({froms:e,tos:A,hole:n}),r?(r=!1,l[A].push(m)):u=!0)}r&&l[e].push(m)}}0<k.length&&(u||(t=l))}u=0;for(e=v.length;e>u;u++){for(l=v[u].s,f.push(l),k=t[u],g=0,h=k.length;h>g;g++){l.holes.push(k[g].h)}}return f};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.constructor=THREE.Shape;THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};THREE.Shape.prototype.getPointsHoles=function(a){for(var b=[],c=0,d=this.holes.length;d>c;c++){b[c]=this.holes[c].getPoints(a)}return b};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.extractAllPoints(a)};THREE.Shape.Utils=THREE.ShapeUtils;THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);return b.multiplyScalar(a).add(this.v1),b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};THREE.EllipseCurve=function(a,b,c,d,e,g,h,k){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=h;this.aRotation=k||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;THREE.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);var c=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){var b=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a;a=(e-this.aX)*b-(c-this.aY)*d+this.aX;c=(e-this.aX)*d+(c-this.aY)*b+this.aY}return new THREE.Vector2(a,c)};THREE.ArcCurve=function(a,b,c,d,e,g){THREE.EllipseCurve.call(this,a,b,c,c,d,e,g)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;return b.subVectors(this.v2,this.v1),b.multiplyScalar(a),b.add(this.v1),b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;return a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d},a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,n,r){this.init(b,c,((b-a)/e-(c-a)/(e+n)+(c-b)/n)*n,((c-b)/n-(d-b)/(n+r)+(d-c)/r)*n)},a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))},a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*b*a},THREE.Curve.create(function(a){this.points=a||[]},function(a){var h,k,l=this.points;k=l.length;2>k&&console.log("duh, you need at least 2 points");a*=k-1;h=Math.floor(a);a-=h;0===a&&h===k-1&&(h=k-2,a=1);var f,n,r;if(0===h?(b.subVectors(l[0],l[1]).add(l[0]),f=b):f=l[h-1],n=l[h],r=l[h+1],k>h+2?l=l[h+2]:(b.subVectors(l[k-1],l[k-2]).add(l[k-2]),l=b),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var v="chordal"===this.type?0.5:0.25;k=Math.pow(f.distanceToSquared(n),v);h=Math.pow(n.distanceToSquared(r),v);v=Math.pow(r.distanceToSquared(l),v);0.0001>h&&(h=1);0.0001>k&&(k=h);0.0001>v&&(v=h);c.initNonuniformCatmullRom(f.x,n.x,r.x,l.x,k,h,v);d.initNonuniformCatmullRom(f.y,n.y,r.y,l.y,k,h,v);e.initNonuniformCatmullRom(f.z,n.z,r.z,l.z,k,h,v)}else{"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:0.5,c.initCatmullRom(f.x,n.x,r.x,l.x,k),d.initCatmullRom(f.y,n.y,r.y,l.y,k),e.initCatmullRom(f.z,n.z,r.z,l.z,k))}return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-0;var c=Math.floor(a);a-=c;var c=c+(0<c?0:(Math.floor(Math.abs(c)/b.length)+1)*b.length),d=b[(c-1)%b.length],e=b[c%b.length],g=b[(c+1)%b.length],b=b[(c+2)%b.length],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});THREE.BoxGeometry=function(a,b,c,d,e,g){function h(a,b,c,d,e,g,h,u){var A,w=k.widthSegments,p=k.heightSegments,B=e/2,F=g/2,x=k.vertices.length;"x"===a&&"y"===b||"y"===a&&"x"===b?A="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(A="y",p=k.depthSegments):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(A="x",w=k.depthSegments);var C=w+1,E=p+1,D=e/w,H=g/p,I=new THREE.Vector3;I[A]=0<h?1:-1;for(e=0;E>e;e++){for(g=0;C>g;g++){var K=new THREE.Vector3;K[a]=(g*D-B)*c;K[b]=(e*H-F)*d;K[A]=h;k.vertices.push(K)}}for(e=0;p>e;e++){for(g=0;w>g;g++){F=g+C*e,a=g+C*(e+1),b=g+1+C*(e+1),c=g+1+C*e,d=new THREE.Vector2(g/w,1-e/p),h=new THREE.Vector2(g/w,1-(e+1)/p),A=new THREE.Vector2((g+1)/w,1-(e+1)/p),B=new THREE.Vector2((g+1)/w,1-e/p),F=new THREE.Face3(F+x,a+x,c+x),F.normal.copy(I),F.vertexNormals.push(I.clone(),I.clone(),I.clone()),F.materialIndex=u,k.faces.push(F),k.faceVertexUvs[0].push([d,h,B]),F=new THREE.Face3(a+x,b+x,c+x),F.normal.copy(I),F.vertexNormals.push(I.clone(),I.clone(),I.clone()),F.materialIndex=u,k.faces.push(F),k.faceVertexUvs[0].push([h.clone(),A,B.clone()])}}}THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=g||1;var k=this;d=a/2;e=b/2;g=c/2;h("z","y",-1,-1,c,b,d,0);h("z","y",1,-1,c,b,-d,1);h("x","z",1,1,a,c,e,2);h("x","z",1,-1,a,c,-e,3);h("x","y",1,-1,a,b,g,4);h("x","y",-1,-1,a,b,-g,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.BoxGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.BoxGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)};THREE.CubeGeometry=THREE.BoxGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new THREE.CircleBufferGeometry(a,b,c,d))};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;THREE.CircleGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CircleGeometry(a.radius,a.segments,a.thetaStart,a.thetaLength)};THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),h=new Float32Array(3*e),e=new Float32Array(2*e);h[2]=1;e[0]=0.5;e[1]=0.5;for(var k=0,l=3,f=2;b>=k;k++,l+=3,f+=2){var n=c+k/b*d;g[l]=a*Math.cos(n);g[l+1]=a*Math.sin(n);h[l+2]=1;e[f]=(g[l]/a+1)/2;e[f+1]=(g[l+1]/a+1)/2}c=[];for(l=1;b>=l;l++){c.push(l,l+1,0)}this.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(g,3));this.addAttribute("normal",new THREE.BufferAttribute(h,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;THREE.CircleBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CircleBufferGeometry(a.radius,a.segments,a.thetaStart,a.thetaLength)};THREE.CylinderGeometry=function(a,b,c,d,e,g,h,k){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;g=void 0!==g?g:!1;h=void 0!==h?h:0;k=void 0!==k?k:2*Math.PI;var l,f,n=c/2,r=[],v=[];for(f=0;e>=f;f++){var t=[],m=[],u=f/e,A=u*(b-a)+a;for(l=0;d>=l;l++){var w=l/d,p=new THREE.Vector3;p.x=A*Math.sin(w*k+h);p.y=-u*c+n;p.z=A*Math.cos(w*k+h);this.vertices.push(p);t.push(this.vertices.length-1);m.push(new THREE.Vector2(w,1-u))}r.push(t);v.push(m)}c=(b-a)/c;for(l=0;d>l;l++){for(0!==a?(h=this.vertices[r[0][l]].clone(),k=this.vertices[r[0][l+1]].clone()):(h=this.vertices[r[1][l]].clone(),k=this.vertices[r[1][l+1]].clone()),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*c).normalize(),k.setY(Math.sqrt(k.x*k.x+k.z*k.z)*c).normalize(),f=0;e>f;f++){var t=r[f][l],m=r[f+1][l],u=r[f+1][l+1],A=r[f][l+1],w=h.clone(),p=h.clone(),B=k.clone(),F=k.clone(),x=v[f][l].clone(),C=v[f+1][l].clone(),E=v[f+1][l+1].clone(),D=v[f][l+1].clone();this.faces.push(new THREE.Face3(t,m,A,[w,p,F]));this.faceVertexUvs[0].push([x,C,D]);this.faces.push(new THREE.Face3(m,u,A,[p.clone(),B,F.clone()]));this.faceVertexUvs[0].push([C.clone(),E,D.clone()])}}if(!1===g&&0<a){for(this.vertices.push(new THREE.Vector3(0,n,0)),l=0;d>l;l++){t=r[0][l],m=r[0][l+1],u=this.vertices.length-1,w=new THREE.Vector3(0,1,0),p=new THREE.Vector3(0,1,0),B=new THREE.Vector3(0,1,0),x=v[0][l].clone(),C=v[0][l+1].clone(),E=new THREE.Vector2(C.x,0),this.faces.push(new THREE.Face3(t,m,u,[w,p,B],void 0,1)),this.faceVertexUvs[0].push([x,C,E])}}if(!1===g&&0<b){for(this.vertices.push(new THREE.Vector3(0,-n,0)),l=0;d>l;l++){t=r[e][l+1],m=r[e][l],u=this.vertices.length-1,w=new THREE.Vector3(0,-1,0),p=new THREE.Vector3(0,-1,0),B=new THREE.Vector3(0,-1,0),x=v[e][l+1].clone(),C=v[e][l].clone(),E=new THREE.Vector2(C.x,1),this.faces.push(new THREE.Face3(t,m,u,[w,p,B],void 0,2)),this.faceVertexUvs[0].push([x,C,E])}}this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;THREE.CylinderGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)};THREE.EdgesGeometry=function(a,b){function c(a,b){return a-b}THREE.BufferGeometry.call(this);var d,e=Math.cos(THREE.Math.degToRad(void 0!==b?b:1)),g=[0,0],h={},k=["a","b","c"];a instanceof THREE.BufferGeometry?(d=new THREE.Geometry,d.fromBufferGeometry(a)):d=a.clone();d.mergeVertices();d.computeFaceNormals();var l=d.vertices;d=d.faces;for(var f=0,n=d.length;n>f;f++){for(var r=d[f],v=0;3>v;v++){g[0]=r[k[v]];g[1]=r[k[(v+1)%3]];g.sort(c);var t=g.toString();void 0===h[t]?h[t]={vert1:g[0],vert2:g[1],face1:f,face2:void 0}:h[t].face2=f}}g=[];for(t in h){k=h[t],(void 0===k.face2||d[k.face1].normal.dot(d[k.face2].normal)<=e)&&(f=l[k.vert1],g.push(f.x),g.push(f.y),g.push(f.z),f=l[k.vert2],g.push(f.x),g.push(f.y),g.push(f.z))}this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(g),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;THREE.ExtrudeGeometry=function(a,b){"undefined"!=typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;c>d;d++){this.addShape(a[d],b)}};THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){return b||console.error("THREE.ExtrudeGeometry: vec does not exist"),b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g),h=b.x-e/k;if(b=b.y+d/k,f=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f),c=h+d*f-a.x,a=b+e*f-a.y,d=c*c+a*a,2>=d){return new THREE.Vector2(c,a)}d=Math.sqrt(d/2)}else{a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2))}return new THREE.Vector2(c/d,a/d)}function e(a,b){var c,d;for(O=a.length;0<=--O;){c=O;d=O-1;0>d&&(d=a.length-1);for(var e=0,f=p+2*u,e=0;f>e;e++){var g=U*e,h=U*(e+1),k=b+c+g,g=b+d+g,m=b+d+h,h=b+c+h,k=k+I,g=g+I,m=m+I,h=h+I;H.faces.push(new THREE.Face3(k,g,h,null,null,1));H.faces.push(new THREE.Face3(g,m,h,null,null,1));k=x.generateSideWallUV(H,k,g,m,h);H.faceVertexUvs[0].push([k[0],k[1],k[3]]);H.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function g(a,b,c){H.vertices.push(new THREE.Vector3(a,b,c))}function h(a,b,c){a+=I;b+=I;c+=I;H.faces.push(new THREE.Face3(a,b,c,null,null,0));a=x.generateTopUV(H,a,b,c);H.faceVertexUvs[0].push(a)}var k,l,f,n,r,v=void 0!==b.amount?b.amount:100,t=void 0!==b.bevelThickness?b.bevelThickness:6,m=void 0!==b.bevelSize?b.bevelSize:t-2,u=void 0!==b.bevelSegments?b.bevelSegments:3,A=void 0!==b.bevelEnabled?b.bevelEnabled:!0,w=void 0!==b.curveSegments?b.curveSegments:12,p=void 0!==b.steps?b.steps:1,B=b.extrudePath,F=!1,x=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;B&&(k=B.getSpacedPoints(p),F=!0,A=!1,l=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(B,p,!1),f=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3);A||(m=t=u=0);var C,E,D,H=this,I=this.vertices.length,B=a.extractPoints(w),w=B.shape,K=B.holes;if(B=!THREE.ShapeUtils.isClockWise(w)){w=w.reverse();E=0;for(D=K.length;D>E;E++){C=K[E],THREE.ShapeUtils.isClockWise(C)&&(K[E]=C.reverse())}B=!1}var M=THREE.ShapeUtils.triangulateShape(w,K),L=w;E=0;for(D=K.length;D>E;E++){C=K[E],w=w.concat(C)}var R,N,S,J,Q,X,U=w.length,Y=M.length,B=[],O=0;S=L.length;R=S-1;for(N=O+1;S>O;O++,R++,N++){R===S&&(R=0),N===S&&(N=0),B[O]=d(L[O],L[R],L[N])}var ra,la=[],oa=B.concat();E=0;for(D=K.length;D>E;E++){C=K[E];ra=[];O=0;S=C.length;R=S-1;for(N=O+1;S>O;O++,R++,N++){R===S&&(R=0),N===S&&(N=0),ra[O]=d(C[O],C[R],C[N])}la.push(ra);oa=oa.concat(ra)}for(R=0;u>R;R++){S=R/u;J=t*(1-S);N=m*Math.sin(S*Math.PI/2);O=0;for(S=L.length;S>O;O++){Q=c(L[O],B[O],N),g(Q.x,Q.y,-J)}E=0;for(D=K.length;D>E;E++){for(C=K[E],ra=la[E],O=0,S=C.length;S>O;O++){Q=c(C[O],ra[O],N),g(Q.x,Q.y,-J)}}}N=m;for(O=0;U>O;O++){Q=A?c(w[O],oa[O],N):w[O],F?(n.copy(l.normals[0]).multiplyScalar(Q.x),f.copy(l.binormals[0]).multiplyScalar(Q.y),r.copy(k[0]).add(n).add(f),g(r.x,r.y,r.z)):g(Q.x,Q.y,0)}for(S=1;p>=S;S++){for(O=0;U>O;O++){Q=A?c(w[O],oa[O],N):w[O],F?(n.copy(l.normals[S]).multiplyScalar(Q.x),f.copy(l.binormals[S]).multiplyScalar(Q.y),r.copy(k[S]).add(n).add(f),g(r.x,r.y,r.z)):g(Q.x,Q.y,v/p*S)}}for(R=u-1;0<=R;R--){S=R/u;J=t*(1-S);N=m*Math.sin(S*Math.PI/2);O=0;for(S=L.length;S>O;O++){Q=c(L[O],B[O],N),g(Q.x,Q.y,v+J)}E=0;for(D=K.length;D>E;E++){for(C=K[E],ra=la[E],O=0,S=C.length;S>O;O++){Q=c(C[O],ra[O],N),F?g(Q.x,Q.y+k[p-1].y,k[p-1].x+J):g(Q.x,Q.y,v+J)}}}!function(){if(A){var a;a=0*U;for(O=0;Y>O;O++){X=M[O],h(X[2]+a,X[1]+a,X[0]+a)}a=p+2*u;a*=U;for(O=0;Y>O;O++){X=M[O],h(X[0]+a,X[1]+a,X[2]+a)}}else{for(O=0;Y>O;O++){X=M[O],h(X[2],X[1],X[0])}for(O=0;Y>O;O++){X=M[O],h(X[0]+U*p,X[1]+U*p,X[2]+U*p)}}}();(function(){var a=0;e(L,a);a+=L.length;E=0;for(D=K.length;D>E;E++){C=K[E],e(C,a),a+=C.length}})()};THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){return a=a.vertices,b=a[b],c=a[c],d=a[d],[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){return a=a.vertices,b=a[b],c=a[c],d=a[d],e=a[e],0.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;d>c;c++){this.addShape(a[c],b)}return this};THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c,d,e,g=b.material,h=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,k=this.vertices.length;c=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var l=c.shape,f=c.holes;if(!THREE.ShapeUtils.isClockWise(l)){for(l=l.reverse(),c=0,d=f.length;d>c;c++){e=f[c],THREE.ShapeUtils.isClockWise(e)&&(f[c]=e.reverse())}}var n=THREE.ShapeUtils.triangulateShape(l,f);c=0;for(d=f.length;d>c;c++){e=f[c],l=l.concat(e)}f=l.length;d=n.length;for(c=0;f>c;c++){e=l[c],this.vertices.push(new THREE.Vector3(e.x,e.y,0))}for(c=0;d>c;c++){f=n[c],l=f[0]+k,e=f[1]+k,f=f[2]+k,this.faces.push(new THREE.Face3(l,e,f,null,null,g)),this.faceVertexUvs[0].push(h.generateTopUV(this,l,e,f))}};THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),g=1/b,h=0,k=b;k>=h;h++){for(var l=c+h*g*d,f=Math.cos(l),n=Math.sin(l),l=0,r=a.length;r>l;l++){var v=a[l],t=new THREE.Vector3;t.x=f*v.x-n*v.y;t.y=n*v.x+f*v.y;t.z=v.z;this.vertices.push(t)}}c=a.length;h=0;for(k=b;k>h;h++){for(l=0,r=a.length-1;r>l;l++){b=n=l+c*h;d=n+c;var f=n+1+c,n=n+1,v=h*g,t=l*e,m=v+g,u=t+e;this.faces.push(new THREE.Face3(b,d,n));this.faceVertexUvs[0].push([new THREE.Vector2(v,t),new THREE.Vector2(m,t),new THREE.Vector2(v,u)]);this.faces.push(new THREE.Face3(d,f,n));this.faceVertexUvs[0].push([new THREE.Vector2(m,t),new THREE.Vector2(m,u),new THREE.Vector2(v,u)])}}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;THREE.PlaneGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments)};THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var h=c+1,k=d+1,l=a/c,f=b/d;b=new Float32Array(h*k*3);a=new Float32Array(h*k*3);for(var n=new Float32Array(h*k*2),r=0,v=0,t=0;k>t;t++){for(var m=t*f-g,u=0;h>u;u++){b[r]=u*l-e,b[r+1]=-m,a[r+2]=1,n[v]=u/c,n[v+1]=1-t/d,r+=3,v+=2}}r=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*d*6);for(t=0;d>t;t++){for(u=0;c>u;u++){g=u+h*(t+1),k=u+1+h*(t+1),l=u+1+h*t,e[r]=u+h*t,e[r+1]=g,e[r+2]=l,e[r+3]=g,e[r+4]=k,e[r+5]=l,r+=6}}this.setIndex(new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(n,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;THREE.PlaneBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PlaneBufferGeometry(a.width,a.height,a.widthSegments,a.heightSegments)};THREE.RingGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||0;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var h,k=[],l=a,f=(b-a)/d;for(a=0;d+1>a;a++){for(h=0;c+1>h;h++){var n=new THREE.Vector3,r=e+h/c*g;n.x=l*Math.cos(r);n.y=l*Math.sin(r);this.vertices.push(n);k.push(new THREE.Vector2((n.x/b+1)/2,(n.y/b+1)/2))}l+=f}b=new THREE.Vector3(0,0,1);for(a=0;d>a;a++){for(e=a*(c+1),h=0;c>h;h++){g=r=h+e,f=r+c+1,n=r+c+2,this.faces.push(new THREE.Face3(g,f,n,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[g].clone(),k[f].clone(),k[n].clone()]),g=r,f=r+c+2,n=r+1,this.faces.push(new THREE.Face3(g,f,n,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[g].clone(),k[f].clone(),k[n].clone()])}}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.RingGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.RingGeometry(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)};THREE.SphereGeometry=function(a,b,c,d,e,g,h){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new THREE.SphereBufferGeometry(a,b,c,d,e,g,h))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;THREE.SphereGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)};THREE.SphereBufferGeometry=function(a,b,c,d,e,g,h){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;for(var k=g+h,l=(b+1)*(c+1),f=new THREE.BufferAttribute(new Float32Array(3*l),3),n=new THREE.BufferAttribute(new Float32Array(3*l),3),l=new THREE.BufferAttribute(new Float32Array(2*l),2),r=0,v=[],t=new THREE.Vector3,m=0;c>=m;m++){for(var u=[],A=m/c,w=0;b>=w;w++){var p=w/b,B=-a*Math.cos(d+p*e)*Math.sin(g+A*h),F=a*Math.cos(g+A*h),x=a*Math.sin(d+p*e)*Math.sin(g+A*h);t.set(B,F,x).normalize();f.setXYZ(r,B,F,x);n.setXYZ(r,t.x,t.y,t.z);l.setXY(r,p,1-A);u.push(r);r++}v.push(u)}d=[];for(m=0;c>m;m++){for(w=0;b>w;w++){e=v[m][w+1],h=v[m][w],r=v[m+1][w],t=v[m+1][w+1],(0!==m||0<g)&&d.push(e,h,t),(m!==c-1||k<Math.PI)&&d.push(h,r,t)}}this.setIndex(new (65535<f.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(d,1));this.addAttribute("position",f);this.addAttribute("normal",n);this.addAttribute("uv",l);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;THREE.SphereBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.SphereBufferGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)};THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var g=new THREE.Vector3,h=[],k=[],l=0;c>=l;l++){for(var f=0;d>=f;f++){var n=f/d*e,r=l/c*Math.PI*2;g.x=a*Math.cos(n);g.y=a*Math.sin(n);var v=new THREE.Vector3;v.x=(a+b*Math.cos(r))*Math.cos(n);v.y=(a+b*Math.cos(r))*Math.sin(n);v.z=b*Math.sin(r);this.vertices.push(v);h.push(new THREE.Vector2(f/d,l/c));k.push(v.clone().sub(g).normalize())}}for(l=1;c>=l;l++){for(f=1;d>=f;f++){a=(d+1)*l+f-1,b=(d+1)*(l-1)+f-1,e=(d+1)*(l-1)+f,g=(d+1)*l+f,n=new THREE.Face3(a,b,g,[k[a].clone(),k[b].clone(),k[g].clone()]),this.faces.push(n),this.faceVertexUvs[0].push([h[a].clone(),h[b].clone(),h[g].clone()]),n=new THREE.Face3(b,e,g,[k[b].clone(),k[e].clone(),k[g].clone()]),this.faces.push(n),this.faceVertexUvs[0].push([h[b].clone(),h[e].clone(),h[g].clone()])}}this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;THREE.TorusGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)};THREE.TorusKnotGeometry=function(a,b,c,d,e,g,h){function k(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);return a*=b/c,b=Math.cos(a),f=f*d*(2+b)*0.5,g=d*(2+b)*g*0.5,d=e*d*Math.sin(a)*0.5,new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:g,heightScale:h};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;g=g||3;h=h||1;for(var l=Array(c),f=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,v=0;c>v;++v){l[v]=Array(d);var t=v/c*2*e*Math.PI,m=k(t,g,e,a,h),t=k(t+0.01,g,e,a,h);f.subVectors(t,m);n.addVectors(t,m);r.crossVectors(f,n);n.crossVectors(r,f);r.normalize();n.normalize();for(t=0;d>t;++t){var u=t/d*2*Math.PI,A=-b*Math.cos(u),u=b*Math.sin(u),w=new THREE.Vector3;w.x=m.x+A*n.x+u*r.x;w.y=m.y+A*n.y+u*r.y;w.z=m.z+A*n.z+u*r.z;l[v][t]=this.vertices.push(w)-1}}for(v=0;c>v;++v){for(t=0;d>t;++t){e=(v+1)%c,g=(t+1)%d,a=l[v][t],b=l[e][t],e=l[e][g],g=l[v][g],h=new THREE.Vector2(v/c,t/d),f=new THREE.Vector2((v+1)/c,t/d),n=new THREE.Vector2((v+1)/c,(t+1)/d),r=new THREE.Vector2(v/c,(t+1)/d),this.faces.push(new THREE.Face3(a,b,g)),this.faceVertexUvs[0].push([h,f,r]),this.faces.push(new THREE.Face3(b,e,g)),this.faceVertexUvs[0].push([f.clone(),n,r.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;THREE.TorusKnotGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TorusKnotGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.p,a.q,a.heightScale)};THREE.TubeGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||THREE.TubeGeometry.NoTaper;var h,k,l,f,n,r,v,t,m,u,A=[],w=b+1,p=new THREE.Vector3;t=new THREE.TubeGeometry.FrenetFrames(a,b,e);m=t.normals;u=t.binormals;this.tangents=t.tangents;this.normals=m;this.binormals=u;for(t=0;w>t;t++){for(A[t]=[],l=t/(w-1),v=a.getPointAt(l),h=m[t],k=u[t],n=c*g(l),l=0;d>l;l++){f=l/d*2*Math.PI,r=-n*Math.cos(f),f=n*Math.sin(f),p.copy(v),p.x+=r*h.x+f*k.x,p.y+=r*h.y+f*k.y,p.z+=r*h.z+f*k.z,A[t][l]=this.vertices.push(new THREE.Vector3(p.x,p.y,p.z))-1}}for(t=0;b>t;t++){for(l=0;d>l;l++){g=e?(t+1)%b:t+1,w=(l+1)%d,a=A[t][l],c=A[g][l],g=A[g][w],w=A[t][w],p=new THREE.Vector2(t/b,l/d),m=new THREE.Vector2((t+1)/b,l/d),u=new THREE.Vector2((t+1)/b,(l+1)/d),h=new THREE.Vector2(t/b,(l+1)/d),this.faces.push(new THREE.Face3(a,c,w)),this.faceVertexUvs[0].push([p,m,h]),this.faces.push(new THREE.Face3(c,g,w)),this.faceVertexUvs[0].push([m.clone(),u,h.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.prototype.clone=function(){return new this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed,this.parameters.taper)};THREE.TubeGeometry.NoTaper=function(a){return 1};THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],g=[],h=[],k=new THREE.Vector3,l=new THREE.Matrix4;b+=1;var f,n,r;this.tangents=e;this.normals=g;this.binormals=h;for(f=0;b>f;f++){n=f/(b-1),e[f]=a.getTangentAt(n),e[f].normalize()}g[0]=new THREE.Vector3;h[0]=new THREE.Vector3;a=Number.MAX_VALUE;f=Math.abs(e[0].x);n=Math.abs(e[0].y);r=Math.abs(e[0].z);a>=f&&(a=f,d.set(1,0,0));a>=n&&(a=n,d.set(0,1,0));a>=r&&d.set(0,0,1);k.crossVectors(e[0],d).normalize();g[0].crossVectors(e[0],k);h[0].crossVectors(e[0],g[0]);for(f=1;b>f;f++){g[f]=g[f-1].clone(),h[f]=h[f-1].clone(),k.crossVectors(e[f-1],e[f]),k.length()>Number.EPSILON&&(k.normalize(),d=Math.acos(THREE.Math.clamp(e[f-1].dot(e[f]),-1,1)),g[f].applyMatrix4(l.makeRotationAxis(k,d))),h[f].crossVectors(e[f],g[f])}if(c){for(d=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(k.crossVectors(g[0],g[b-1]))&&(d=-d),f=1;b>f;f++){g[f].applyMatrix4(l.makeRotationAxis(e[f],d*f)),h[f].crossVectors(e[f],g[f])}}};THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=l.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+0.5;return a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+0.5,b.uv=new THREE.Vector2(c,1-a),b}function g(a,b,c,d){d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()],void 0,d);l.faces.push(d);A.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(A.z,-A.x);l.faceVertexUvs[0].push([k(a.uv,a,d),k(b.uv,b,d),k(c.uv,c,d)])}function h(a,b){for(var c=Math.pow(2,b),d=e(l.vertices[a.a]),f=e(l.vertices[a.b]),h=e(l.vertices[a.c]),k=[],m=a.materialIndex,n=0;c>=n;n++){k[n]=[];for(var u=e(d.clone().lerp(h,n/c)),r=e(f.clone().lerp(h,n/c)),A=c-n,t=0;A>=t;t++){k[n][t]=0===t&&n===c?u:e(u.clone().lerp(r,t/A))}}for(n=0;c>n;n++){for(t=0;2*(c-n)-1>t;t++){d=Math.floor(t/2),0===t%2?g(k[n][d+1],k[n+1][d],k[n][d],m):g(k[n][d+1],k[n+1][d+1],k[n+1][d],m)}}}function k(a,b,c){return 0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y)),0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+0.5,a.y)),a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var l=this,f=0,n=a.length;n>f;f+=3){e(new THREE.Vector3(a[f],a[f+1],a[f+2]))}a=this.vertices;for(var r=[],v=f=0,n=b.length;n>f;f+=3,v++){var t=a[b[f]],m=a[b[f+1]],u=a[b[f+2]];r[v]=new THREE.Face3(t.index,m.index,u.index,[t.clone(),m.clone(),u.clone()],void 0,v)}for(var A=new THREE.Vector3,f=0,n=r.length;n>f;f++){h(r[f],d)}f=0;for(n=this.faceVertexUvs[0].length;n>f;f++){b=this.faceVertexUvs[0][f],d=b[0].x,a=b[1].x,r=b[2].x,v=Math.max(d,a,r),t=Math.min(d,a,r),0.9<v&&0.1>t&&(0.2>d&&(b[0].x+=1),0.2>a&&(b[1].x+=1),0.2>r&&(b[2].x+=1))}f=0;for(n=this.vertices.length;n>f;f++){this.vertices[f].multiplyScalar(c)}this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;THREE.PolyhedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PolyhedronGeometry(a.vertices,a.indices,a.radius,a.detail)};THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;THREE.DodecahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.DodecahedronGeometry(a.radius,a.detail)};THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.IcosahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.IcosahedronGeometry(a.radius,a.detail)};THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;THREE.OctahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.OctahedronGeometry(a.radius,a.detail)};THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;THREE.TetrahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TetrahedronGeometry(a.radius,a.detail)};THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d,e,g,h,k=this.vertices,l=this.faces,f=this.faceVertexUvs[0],n=b+1;for(d=0;c>=d;d++){for(h=d/c,e=0;b>=e;e++){g=e/b,g=a(g,h),k.push(g)}}var r,v,t,m;for(d=0;c>d;d++){for(e=0;b>e;e++){a=d*n+e,k=d*n+e+1,h=(d+1)*n+e+1,g=(d+1)*n+e,r=new THREE.Vector2(e/b,d/c),v=new THREE.Vector2((e+1)/b,d/c),t=new THREE.Vector2((e+1)/b,(d+1)/c),m=new THREE.Vector2(e/b,(d+1)/c),l.push(new THREE.Face3(a,k,g)),f.push([r,v,m]),l.push(new THREE.Face3(k,h,g)),f.push([v.clone(),t,m.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;THREE.WireframeGeometry=function(a){function b(a,b){return a-b}THREE.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof THREE.Geometry){var g=a.vertices,h=a.faces,k=0,l=new Uint32Array(6*h.length);a=0;for(var f=h.length;f>a;a++){for(var n=h[a],r=0;3>r;r++){c[0]=n[e[r]];c[1]=n[e[(r+1)%3]];c.sort(b);var v=c.toString();void 0===d[v]&&(l[2*k]=c[0],l[2*k+1]=c[1],d[v]=!0,k++)}}c=new Float32Array(6*k);a=0;for(f=k;f>a;a++){for(r=0;2>r;r++){d=g[l[2*a+r]],k=6*a+3*r,c[k+0]=d.x,c[k+1]=d.y,c[k+2]=d.z}}this.addAttribute("position",new THREE.BufferAttribute(c,3))}else{if(a instanceof THREE.BufferGeometry){if(null!==a.index){f=a.index.array;g=a.attributes.position;e=a.drawcalls;k=0;0===e.length&&a.addGroup(0,f.length);l=new Uint32Array(2*f.length);h=0;for(n=e.length;n>h;++h){a=e[h];r=a.start;v=a.count;a=r;for(var t=r+v;t>a;a+=3){for(r=0;3>r;r++){c[0]=f[a+r],c[1]=f[a+(r+1)%3],c.sort(b),v=c.toString(),void 0===d[v]&&(l[2*k]=c[0],l[2*k+1]=c[1],d[v]=!0,k++)}}}c=new Float32Array(6*k);a=0;for(f=k;f>a;a++){for(r=0;2>r;r++){k=6*a+3*r,d=l[2*a+r],c[k+0]=g.getX(d),c[k+1]=g.getY(d),c[k+2]=g.getZ(d)}}}else{for(g=a.attributes.position.array,k=g.length/3,l=k/3,c=new Float32Array(6*k),a=0,f=l;f>a;a++){for(r=0;3>r;r++){k=18*a+6*r,l=9*a+3*r,c[k+0]=g[l],c[k+1]=g[l+1],c[k+2]=g[l+2],d=9*a+(r+1)%3*3,c[k+3]=g[d],c[k+4]=g[d+1],c[k+5]=g[d+2]}}}this.addAttribute("position",new THREE.BufferAttribute(c,3))}}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,0.5,1,5,1);return b.translate(0,-0.5,0),function(c,d,e,g,h,k){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===h&&(h=0.2*e);void 0===k&&(k=0.2*h);this.position.copy(d);e>h&&(this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:g})),this.line.matrixAutoUpdate=!1,this.add(this.line));this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:g}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,h,k)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;THREE.ArrowHelper.prototype.setDirection=function(){var a,b=new THREE.Vector3;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(b.set(c.z,0,-c.x).normalize(),a=Math.acos(c.y),this.quaternion.setFromAxisAngle(b,a))}}();THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);a>b&&(this.line.scale.set(1,a-b,1),this.line.updateMatrix());this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){void 0!==this.line&&this.line.material.color.set(a);this.cone.material.color.set(a)};THREE.BoxHelper=function(a){var b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),d=new THREE.BufferGeometry;d.setIndex(new THREE.BufferAttribute(b,1));d.addAttribute("position",new THREE.BufferAttribute(c,3));THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:16776960}));void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){if(a.setFromObject(b),!a.empty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;THREE.CameraHelper.prototype.update=function(){function a(a,h,k,l){if(d.set(h,k,l).unproject(e),a=c[a],void 0!==a){for(h=0,k=a.length;k>h;h++){b.vertices[a[h]].copy(d)}}}var b,c,d=new THREE.Vector3,e=new THREE.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",0.7,1.1,-1);a("u2",-0.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry,h=g.vertices,g=g.faces,k=0,l=0,f=g.length;f>l;l++){var n=g[l],r=n.normal;a.copy(h[n.a]).add(h[n.b]).add(h[n.c]).divideScalar(3).applyMatrix4(d);b.copy(r).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(k,a.x,a.y,a.z);k+=1;e.setXYZ(k,b.x,b.y,b.z);k+=1}return e.needsUpdate=!0,this}}();THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;a>=e;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var g=0===e?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.LineSegments.call(this,c,d)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.rotateX(-Math.PI/2);for(var d=0;8>d;d++){c.faces[d].color=this.colors[4>d?0:1]}d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++){this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)))}b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++){b.push.apply(b,this.getBoneList(a.children[c]))}return b};THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,g.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,g.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.translate(0,-0.5,0);a.rotateX(-Math.PI/2);var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:10000,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,g=this.geometry.attributes.position,h=this.object.geometry;if(h instanceof THREE.Geometry){for(var k=h.vertices,l=h.faces,f=h=0,n=l.length;n>f;f++){for(var r=l[f],v=0,t=r.vertexNormals.length;t>v;v++){var m=r.vertexNormals[v];a.copy(k[r[d[v]]]).applyMatrix4(e);b.copy(m).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(h,a.x,a.y,a.z);h+=1;g.setXYZ(h,b.x,b.y,b.z);h+=1}}}else{if(h instanceof THREE.BufferGeometry){for(d=h.attributes.position,k=h.attributes.normal,v=h=0,t=d.count;t>v;v++){a.set(d.getX(v),d.getY(v),d.getZ(v)).applyMatrix4(e),b.set(k.getX(v),k.getY(v),k.getZ(v)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(h,a.x,a.y,a.z),h+=1,g.setXYZ(h,b.x,b.y,b.z),h+=1}}}return g.needsUpdate=!0,this}}();THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:c}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b,c=/([a-z]+)_?(\d+)/,d={},e=this.geometry,g=0,h=e.morphTargets.length;h>g;g++){var k=e.morphTargets[g].name.match(c);if(k&&1<k.length){var l=k[1];d[l]||(d[l]={start:1/0,end:-(1/0)});k=d[l];g<k.start&&(k.start=g);g>k.end&&(k.end=g);b||(b=l)}}for(l in d){k=d[l],this.createAnimation(l,k.start,k.end,a)}this.firstAnimation=b};THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){(a=this.animationsMap[a])&&(a.direction=1,a.directionBackwards=!1)};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){(a=this.animationsMap[a])&&(a.direction=-1,a.directionBackwards=!0)};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;return(a=this.animationsMap[a])&&(b=a.time),b};THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;return(a=this.animationsMap[a])&&(b=a.duration),b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){(a=this.animationsMap[a])&&(a.active=!1)};THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;c>b;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;d.mirroredLoop?(d.time>d.duration||0>d.time)&&(d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)):(d.time%=d.duration,0>d.time&&(d.time+=d.duration));var g=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;g!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*h,this.morphTargetInfluences[d.lastFrame]=(1-e)*h):this.morphTargetInfluences[d.currentFrame]=h}}};THREE.TrackballControls=function(a,b){function c(a){!1!==h.enabled&&(window.removeEventListener("keydown",c),n=f,f===k.NONE&&(a.keyCode!==h.keys[k.ROTATE]||h.noRotate?a.keyCode!==h.keys[k.ZOOM]||h.noZoom?a.keyCode!==h.keys[k.PAN]||h.noPan||(f=k.PAN):f=k.ZOOM:f=k.ROTATE))}function d(a){!1!==h.enabled&&(a.preventDefault(),a.stopPropagation(),f!==k.ROTATE||h.noRotate?f!==k.ZOOM||h.noZoom?f!==k.PAN||h.noPan||B.copy(E(a.pageX,a.pageY)):u.copy(E(a.pageX,a.pageY)):t.copy(D(a.pageX,a.pageY)))}function e(a){!1!==h.enabled&&(a.preventDefault(),a.stopPropagation(),f=k.NONE,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),h.dispatchEvent(C))}function g(a){if(!1!==h.enabled){a.preventDefault();a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3);m.y+=0.01*b;h.dispatchEvent(x);h.dispatchEvent(C)}}var h=this,k={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rotateSpeed=1;this.zoomSpeed=1.2;this.panSpeed=0.3;this.staticMoving=this.noRoll=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=0.2;this.minDistance=0;this.maxDistance=1/0;this.keys=[65,83,68];this.target=new THREE.Vector3;var l=new THREE.Vector3,f=k.NONE,n=k.NONE,r=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector3,m=new THREE.Vector2,u=new THREE.Vector2,A=0,w=0,p=new THREE.Vector2,B=new THREE.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();var F={type:"change"},x={type:"start"},C={type:"end"};this.handleResize=function(){if(this.domElement===document){this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight}else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=a.height}};this.handleEvent=function(a){"function"==typeof this[a.type]&&this[a.type](a)};var E=function(){var a=new THREE.Vector2;return function(b,c){return a.set((b-h.screen.left)/h.screen.width,(c-h.screen.top)/h.screen.height),a}}(),D=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e){c.set((d-0.5*h.screen.width-h.screen.left)/(0.5*h.screen.width),(0.5*h.screen.height+h.screen.top-e)/(0.5*h.screen.height),0);var f=c.length();return h.noRoll?f<Math.SQRT1_2?c.z=Math.sqrt(1-f*f):c.z=0.5/f:1<f?c.normalize():c.z=Math.sqrt(1-f*f),r.copy(h.object.position).sub(h.target),a.copy(h.object.up).setLength(c.y),a.add(b.copy(h.object.up).cross(r).setLength(c.x)),a.add(r.setLength(c.z)),a}}();this.rotateCamera=function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(){var c=Math.acos(v.dot(t)/v.length()/t.length());c&&(a.crossVectors(v,t).normalize(),c*=h.rotateSpeed,b.setFromAxisAngle(a,-c),r.applyQuaternion(b),h.object.up.applyQuaternion(b),t.applyQuaternion(b),h.staticMoving?v.copy(t):(b.setFromAxisAngle(a,c*(h.dynamicDampingFactor-1)),v.applyQuaternion(b)))}}();this.zoomCamera=function(){if(f===k.TOUCH_ZOOM_PAN){var a=A/w;A=w;r.multiplyScalar(a)}else{a=1+(u.y-m.y)*h.zoomSpeed,1!==a&&0<a&&(r.multiplyScalar(a),h.staticMoving?m.copy(u):m.y+=(u.y-m.y)*this.dynamicDampingFactor)}};this.panCamera=function(){var a=new THREE.Vector2,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.copy(B).sub(p);a.lengthSq()&&(a.multiplyScalar(r.length()*h.panSpeed),c.copy(r).cross(h.object.up).setLength(a.x),c.add(b.copy(h.object.up).setLength(a.y)),h.object.position.add(c),h.target.add(c),h.staticMoving?p.copy(B):p.add(a.subVectors(B,p).multiplyScalar(h.dynamicDampingFactor)))}}();this.checkDistances=function(){h.noZoom&&h.noPan||(r.lengthSq()>h.maxDistance*h.maxDistance&&h.object.position.addVectors(h.target,r.setLength(h.maxDistance)),r.lengthSq()<h.minDistance*h.minDistance&&h.object.position.addVectors(h.target,r.setLength(h.minDistance)))};this.update=function(){r.subVectors(h.object.position,h.target);h.noRotate||h.rotateCamera();h.noZoom||h.zoomCamera();h.noPan||h.panCamera();h.object.position.addVectors(h.target,r);h.checkDistances();h.object.lookAt(h.target);0.000001<l.distanceToSquared(h.object.position)&&(h.dispatchEvent(F),l.copy(h.object.position))};this.reset=function(){n=f=k.NONE;h.target.copy(h.target0);h.object.position.copy(h.position0);h.object.up.copy(h.up0);r.subVectors(h.object.position,h.target);h.object.lookAt(h.target);h.dispatchEvent(F);l.copy(h.object.position)};this.resetTo=function(a,b,c){n=f=k.NONE;h.target.copy(a);h.object.position.copy(b);h.object.up.copy(c);r.subVectors(h.object.position,h.target);h.object.lookAt(h.target);h.dispatchEvent(F);l.copy(h.object.position)};this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){!1!==h.enabled&&(a.preventDefault(),a.stopPropagation(),f===k.NONE&&(f=a.button),f!==k.ROTATE||h.noRotate?f!==k.ZOOM||h.noZoom?f!==k.PAN||h.noPan||(p.copy(E(a.pageX,a.pageY)),B.copy(p)):(m.copy(E(a.pageX,a.pageY)),u.copy(m)):(v.copy(D(a.pageX,a.pageY)),t.copy(v)),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",e,!1),h.dispatchEvent(x))},!1);this.domElement.addEventListener("mousewheel",g,!1);this.domElement.addEventListener("DOMMouseScroll",g,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==h.enabled){switch(a.touches.length){case 1:f=k.TOUCH_ROTATE;v.copy(D(a.touches[0].pageX,a.touches[0].pageY));t.copy(v);break;case 2:f=k.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;w=A=Math.sqrt(b*b+c*c);p.copy(E((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));B.copy(p);break;default:f=k.NONE}h.dispatchEvent(x)}},!1);this.domElement.addEventListener("touchend",function(a){if(!1!==h.enabled){switch(a.touches.length){case 1:t.copy(D(a.touches[0].pageX,a.touches[0].pageY));v.copy(t);break;case 2:A=w=0,B.copy(E((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),p.copy(B)}f=k.NONE;h.dispatchEvent(C)}},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==h.enabled){switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:t.copy(D(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;w=Math.sqrt(b*b+c*c);B.copy(E((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));break;default:f=k.NONE}}},!1);window.addEventListener("keydown",c,!1);window.addEventListener("keyup",function(a){!1!==h.enabled&&(f=n,window.addEventListener("keydown",c,!1))},!1);this.handleResize();this.update()};THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype);define("libs/three",function(){});var dat=dat||{};dat.gui=dat.gui||{};dat.utils=dat.utils||{};dat.controllers=dat.controllers||{};dat.dom=dat.dom||{};dat.color=dat.color||{};dat.utils.css=function(){return{load:function(a,b){b=b||document;var c=b.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=a;b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){b=b||document;var c=document.createElement("style");c.type="text/css";c.innerHTML=a;b.getElementsByTagName("head")[0].appendChild(c)}}}();dat.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var e in b){this.isUndefined(b[e])||(a[e]=b[e])}},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var e in b){this.isUndefined(a[e])&&(a[e]=b[e])}},this),a},compose:function(){var a=b.call(arguments);return function(){for(var d=b.call(arguments),e=a.length-1;0<=e;e--){d=[a[e].apply(this,d)]}return d[0]}},each:function(b,d,e){if(a&&b.forEach===a){b.forEach(d,e)}else{if(b.length===b.length+0){for(var g=0,h=b.length;h>g&&!(g in b&&d.call(e,b[g],g)===this.BREAK);g++){}}else{for(g in b){if(d.call(e,b[g],g)===this.BREAK){break}}}}},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return !1===a||!0===a},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}();dat.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b];this.domElement=document.createElement("div");this.object=a;this.property=b;this.__onFinishChange=this.__onChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(dat.utils.common);dat.dom.dom=function(a){function b(b){return"0"===b||a.isUndefined(b)?0:(b=b.match(d),a.isNull(b)?0:parseFloat(b[1]))}var c={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return !1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0);a.isUndefined(d)&&(d=!0);b.style.position="absolute";c&&(b.style.left=0,b.style.right=0);d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,l){e=e||{};var f=c[d];if(!f){throw Error("Event type "+d+" not supported.")}var n=document.createEvent(f);switch(f){case"MouseEvents":n.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":f=n.initKeyboardEvent||n.initKeyEvent;a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});f(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:n.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(n,l);b.dispatchEvent(n)},bind:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),e},unbind:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),e},addClass:function(a,b){if(void 0===a.className){a.className=b}else{if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}}return e},removeClass:function(a,b){if(b){if(void 0!==a.className){if(a.className===b){a.removeAttribute("class")}else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!=d&&(c.splice(d,1),a.className=c.join(" "))}}}else{a.className=void 0}return e},hasClass:function(a,b){return RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){return a=getComputedStyle(a),b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){return a=getComputedStyle(a),b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent){do{b.left+=a.offsetLeft,b.top+=a.offsetTop}while(a=a.offsetParent)}return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common);dat.controllers.OptionController=function(a,b,c){var d=function(a,g,h){d.superclass.call(this,a,g);var k=this;if(this.__select=document.createElement("select"),c.isArray(h)){var l={};c.each(h,function(a){l[a]=a});h=l}c.each(h,function(a,b){var c=document.createElement("option");c.innerHTML=b;c.setAttribute("value",a);k.__select.appendChild(c)});this.updateDisplay();b.bind(this.__select,"change",function(){k.setValue(this.options[this.selectedIndex].value)});this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.controllers.NumberController=function(a,b){var c=function(a,e,g){c.superclass.call(this,a,e);g=g||{};this.__min=g.min;this.__max=g.max;this.__step=g.step;b.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step;a=this.__impliedStep;a=a.toString();this.__precision=a=-1<a.indexOf(".")?a.length-a.indexOf(".")-1:0};return c.superclass=a,b.extend(c.prototype,a.prototype,{setValue:function(a){return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&0!=a%this.__step&&(a=Math.round(a/this.__step)*this.__step),c.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),c}(dat.controllers.Controller,dat.utils.common);dat.controllers.NumberControllerBox=function(a,b,c){var d=function(a,g,h){function k(){var a=parseFloat(r.__input.value);c.isNaN(a)||r.setValue(a)}function l(a){var b=n-a.clientY;r.setValue(r.getValue()+b*r.__impliedStep);n=a.clientY}function f(){b.unbind(window,"mousemove",l);b.unbind(window,"mouseup",f)}this.__truncationSuspended=!1;d.superclass.call(this,a,g,h);var n,r=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");b.bind(this.__input,"change",k);b.bind(this.__input,"blur",function(){k();r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())});b.bind(this.__input,"mousedown",function(a){b.bind(window,"mousemove",l);b.bind(window,"mouseup",f);n=a.clientY});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1)});this.updateDisplay();this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){var a,b=this.__input;if(this.__truncationSuspended){a=this.getValue()}else{a=this.getValue();var c=Math.pow(10,this.__precision);a=Math.round(a*c)/c}return b.value=a,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common);dat.controllers.NumberControllerSlider=function(a,b,c,d,e){function g(a,b,c,d,e){return d+(a-b)/(c-b)*(e-d)}var h=function(a,c,d,e,r){function v(a){a.preventDefault();var c=b.getOffset(m.__background),d=b.getWidth(m.__background);return m.setValue(g(a.clientX,c.left,c.left+d,m.__min,m.__max)),!1}function t(){b.unbind(window,"mousemove",v);b.unbind(window,"mouseup",t);m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}h.superclass.call(this,a,c,{min:d,max:e,step:r});var m=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");b.bind(this.__background,"mousedown",function(a){b.bind(window,"mousemove",v);b.bind(window,"mouseup",t);v(a)});b.addClass(this.__background,"slider");b.addClass(this.__foreground,"slider-fg");this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)};return h.superclass=a,h.useDefaultStyles=function(){c.inject(e)},d.extend(h.prototype,a.prototype,{updateDisplay:function(){var a=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*a+"%",h.superclass.prototype.updateDisplay.call(this)}}),h}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}");dat.controllers.FunctionController=function(a,b,c){var d=function(a,c,h){d.superclass.call(this,a,c);var k=this;this.__button=document.createElement("div");this.__button.innerHTML=void 0===h?"Fire":h;b.bind(this.__button,"click",function(a){return a.preventDefault(),k.fire(),!1});b.addClass(this.__button,"button");this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());this.getValue().call(this.object)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.controllers.BooleanController=function(a,b,c){var d=function(a,c){d.superclass.call(this,a,c);var h=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");b.bind(this.__checkbox,"change",function(){h.setValue(!h.__prev)},!1);this.domElement.appendChild(this.__checkbox);this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a},updateDisplay:function(){return !0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(b=b.hex.toString(16);6>b.length;){b="0"+b}return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common);dat.color.interpret=function(a,b){var c,d,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9]{6})$/i),null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:a},CSS_RGB:{read:function(a){return a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a},CSS_RGBA:{read:function(a){return a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){d=!1;var a=1<arguments.length?b.toArray(arguments):arguments[0];return b.each(e,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,h){return c=e.read(a),!1===d&&!1!==c?(d=c,c.conversionName=h,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d}}(dat.color.toString,dat.utils.common);dat.GUI=dat.gui.GUI=function(a,b,c,d,e,g,h,k,l,f,n,r,v,t,m){function u(a,b,c,f){if(void 0===b[c]){throw Error("Object "+b+' has no property "'+c+'"')}f.color?b=new n(b,c):(b=[b,c].concat(f.factoryArgs),b=d.apply(a,b));f.before instanceof e&&(f.before=f.before.__li);p(a,b);t.addClass(b.domElement,"c");c=document.createElement("span");t.addClass(c,"property-name");c.innerHTML=b.property;var g=document.createElement("div");return g.appendChild(c),g.appendChild(b.domElement),f=A(a,g,f.before),t.addClass(f,J.CLASS_CONTROLLER_ROW),t.addClass(f,typeof b.getValue()),w(a,f,b),a.__controllers.push(b),b}function A(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function w(a,b,c){if(c.__li=b,c.__gui=a,m.extend(c,{options:function(b){return 1<arguments.length?(c.remove(),u(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[m.toArray(arguments)]})):m.isArray(b)||m.isObject(b)?(c.remove(),u(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})):void 0},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof l){var d=new k(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});m.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}});t.addClass(b,"has-slider");c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else{if(c instanceof k){var e=function(b){return m.isNumber(c.__min)&&m.isNumber(c.__max)?(c.remove(),u(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=m.compose(e,c.min);c.max=m.compose(e,c.max)}else{c instanceof g?(t.bind(b,"click",function(){t.fakeEvent(c.__checkbox,"click")}),t.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof h?(t.bind(b,"click",function(){t.fakeEvent(c.__button,"click")}),t.bind(b,"mouseover",function(){t.addClass(c.__button,"hover")}),t.bind(b,"mouseout",function(){t.removeClass(c.__button,"hover")})):c instanceof n&&(t.addClass(b,"color"),c.updateDisplay=m.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay())}}c.setValue=m.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&D(a.getRoot(),!0),b},c.setValue)}function p(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];if(void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b,c.load&&c.load.remembered){if(c=c.load.remembered,c[a.preset]){c=c[a.preset]}else{if(!c[K]){return}c=c[K]}c[d]&&void 0!==c[d][b.property]&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function B(a){var b=a.__save_row=document.createElement("li");t.addClass(a.domElement,"has-save");a.__ul.insertBefore(b,a.__ul.firstChild);t.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";t.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";t.addClass(d,"button");t.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";t.addClass(e,"button");t.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert";t.addClass(f,"button");t.addClass(f,"revert");var g=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?m.each(a.load.remembered,function(b,c){E(a,c,c==a.preset)}):E(a,K,!1),t.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++){a.__preset_select[b].innerHTML=a.__preset_select[b].value}a.preset=this.value}),b.appendChild(g),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),I){var b=document.getElementById("dg-save-locally"),h=document.getElementById("dg-local-explain");b.style.display="block";b=document.getElementById("dg-local-storage");"true"===localStorage.getItem(document.location.href+".isLocal")&&b.setAttribute("checked","checked");var k=function(){h.style.display=a.useLocalStorage?"block":"none"};k();t.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage;k()})}var l=document.getElementById("dg-new-constructor");t.bind(l,"keydown",function(a){!a.metaKey||67!==a.which&&67!=a.keyCode||M.hide()});t.bind(c,"click",function(){l.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);M.show();l.focus();l.select()});t.bind(d,"click",function(){a.save()});t.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});t.bind(f,"click",function(){a.revert()})}function F(a){function b(f){return f.preventDefault(),e=f.clientX,t.addClass(a.__closeButton,J.CLASS_DRAG),t.bind(window,"mousemove",c),t.bind(window,"mouseup",d),!1}function c(b){return b.preventDefault(),a.width+=e-b.clientX,a.onResize(),e=b.clientX,!1}function d(){t.removeClass(a.__closeButton,J.CLASS_DRAG);t.unbind(window,"mousemove",c);t.unbind(window,"mouseup",d)}a.__resize_handle=document.createElement("div");m.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;t.bind(a.__resize_handle,"mousedown",b);t.bind(a.__closeButton,"mousedown",b);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function x(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}function C(a,b){var c={};return m.each(a.__rememberedObjects,function(d,e){var f={};m.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f}),c}function E(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function D(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function H(a){0!=a.length&&r(function(){H(a)});m.each(a,function(a){a.updateDisplay()})}a.inject(c);var I,K="Default";try{I="localStorage" in window&&null!==window.localStorage}catch(Q){I=!1}var M,L,R=!0,N=!1,S=[],J=function(a){function b(){localStorage.setItem(document.location.href+".gui",JSON.stringify(d.getSaveObject()))}function c(){var a=d.getRoot();a.width+=1;m.defer(function(){--a.width})}var d=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);t.addClass(this.domElement,"dg");this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];a=a||{};a=m.defaults(a,{autoPlace:!0,width:J.DEFAULT_WIDTH});a=m.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace});m.isUndefined(a.load)?a.load={preset:K}:a.preset&&(a.load.preset=a.preset);m.isUndefined(a.parent)&&a.hideable&&S.push(this);a.resizable=m.isUndefined(a.parent)&&a.resizable;a.autoPlace&&m.isUndefined(a.scrollable)&&(a.scrollable=!0);var e=I&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return d.parent?d.getRoot().preset:a.load.preset},set:function(b){d.parent?d.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++){this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=b)}d.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b;x(d,b)}},name:{get:function(){return a.name},set:function(b){a.name=b;g&&(g.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b;a.closed?t.addClass(d.__ul,J.CLASS_CLOSED):t.removeClass(d.__ul,J.CLASS_CLOSED);this.onResize();d.__closeButton&&(d.__closeButton.innerHTML=b?J.TEXT_OPEN:J.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return e},set:function(a){I&&((e=a)?t.bind(window,"unload",b):t.unbind(window,"unload",b),localStorage.setItem(document.location.href+".isLocal",a))}}}),m.isUndefined(a.parent)){if(a.closed=!1,t.addClass(this.domElement,J.CLASS_MAIN),t.makeSelectable(this.domElement,!1),I&&e){d.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=J.TEXT_CLOSED;t.addClass(this.__closeButton,J.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);t.bind(this.__closeButton,"click",function(){d.closed=!d.closed})}else{void 0===a.closed&&(a.closed=!0);var g=document.createTextNode(a.name);t.addClass(g,"controller-name");f=A(d,g);t.addClass(this.__ul,J.CLASS_CLOSED);t.addClass(f,"title");t.bind(f,"click",function(a){return a.preventDefault(),d.closed=!d.closed,!1});a.closed||(this.closed=!1)}a.autoPlace&&(m.isUndefined(a.parent)&&(R&&(L=document.createElement("div"),t.addClass(L,"dg"),t.addClass(L,J.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(L),R=!1),L.appendChild(this.domElement),t.addClass(this.domElement,J.CLASS_AUTO_PLACE)),this.parent||x(d,a.width));t.bind(window,"resize",function(){d.onResize()});t.bind(this.__ul,"webkitTransitionEnd",function(){d.onResize()});t.bind(this.__ul,"transitionend",function(){d.onResize()});t.bind(this.__ul,"oTransitionEnd",function(){d.onResize()});this.onResize();a.resizable&&F(this);d.getRoot();a.parent||c()};return J.toggleHide=function(){N=!N;m.each(S,function(a){a.domElement.style.zIndex=N?-999:999;a.domElement.style.opacity=N?0:1})},J.CLASS_AUTO_PLACE="a",J.CLASS_AUTO_PLACE_CONTAINER="ac",J.CLASS_MAIN="main",J.CLASS_CONTROLLER_ROW="cr",J.CLASS_TOO_TALL="taller-than-window",J.CLASS_CLOSED="closed",J.CLASS_CLOSE_BUTTON="close-button",J.CLASS_DRAG="drag",J.DEFAULT_WIDTH=245,J.TEXT_CLOSED="Close Controls",J.TEXT_OPEN="Open Controls",t.bind(window,"keydown",function(a){"text"===document.activeElement.type||72!==a.which&&72!=a.keyCode||J.toggleHide()},!1),m.extend(J.prototype,{add:function(a,b){return u(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return u(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;m.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&L.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a]){throw Error('You already have a folder in this GUI by the name "'+a+'"')}var b={name:a,parent:this};return b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]),b=new J(b),this.__folders[a]=b,a=A(this,b.domElement),t.addClass(a,"folder"),b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=t.getOffset(a.__ul).top,c=0;m.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=t.getHeight(b))});window.innerHeight-b-20<c?(t.addClass(a.domElement,J.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(t.removeClass(a.domElement,J.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&m.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){if(m.isUndefined(M)&&(M=new v,M.domElement.innerHTML=b),this.parent){throw Error("You can only call remember on a top level GUI.")}var a=this;m.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&B(a);-1==a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)});this.autoPlace&&x(this,this.width)},getRoot:function(){for(var a=this;a.parent;){a=a.parent}return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,0<this.__rememberedObjects.length&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=C(this)),a.folders={},m.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={});this.load.remembered[this.preset]=C(this);D(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[K]=C(this,!0));this.load.remembered[a]=C(this);this.preset=a;E(this,a,!0)},revert:function(a){m.each(this.__controllers,function(b){this.getRoot().load.remembered?p(a||this.getRoot(),b):b.setValue(b.initialValue)},this);m.each(this.__folders,function(a){a.revert(a)});a||D(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a);b&&H(this.__listening)}}),J}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",dat.controllers.factory=function(a,b,c,d,e,g,h){return function(k,l,f,n){var r=k[l];return h.isArray(f)||h.isObject(f)?new a(k,l,f):h.isNumber(r)?h.isNumber(f)&&h.isNumber(n)?new c(k,l,f,n):new b(k,l,{min:f,max:n}):h.isString(r)?new d(k,l):h.isFunction(r)?new e(k,l,""):h.isBoolean(r)?new g(k,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(a,b,c){var d=function(a,c){function h(){k.setValue(k.__input.value)}d.superclass.call(this,a,c);var k=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");b.bind(this.__input,"keyup",h);b.bind(this.__input,"change",h);b.bind(this.__input,"blur",function(){k.__onFinishChange&&k.__onFinishChange.call(k,k.getValue())});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()});this.updateDisplay();this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(a,b,c,d,e){function g(a,b,c,d){a.style.background="";e.each(l,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function h(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var k=function(a,l){function r(a){u(a);b.bind(window,"mousemove",u);b.bind(window,"mouseup",v)}function v(){b.unbind(window,"mousemove",u);b.unbind(window,"mouseup",v)}function t(){var a=d(this.value);!1!==a?(w.__color.__state=a,w.setValue(w.__color.toOriginal())):this.value=w.__color.toString()}function m(){b.unbind(window,"mousemove",A);b.unbind(window,"mouseup",m)}function u(a){a.preventDefault();var c=b.getWidth(w.__saturation_field),d=b.getOffset(w.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c;return a=1-(a.clientY-d.top+document.body.scrollTop)/c,1<a?a=1:0>a&&(a=0),1<e?e=1:0>e&&(e=0),w.__color.v=a,w.__color.s=e,w.setValue(w.__color.toOriginal()),!1}function A(a){a.preventDefault();var c=b.getHeight(w.__hue_field),d=b.getOffset(w.__hue_field);return a=1-(a.clientY-d.top+document.body.scrollTop)/c,1<a?a=1:0>a&&(a=0),w.__color.h=360*a,w.setValue(w.__color.toOriginal()),!1}k.superclass.call(this,a,l);this.__color=new c(this.getValue());this.__temp=new c(0);var w=this;this.domElement=document.createElement("div");b.makeSelectable(this.domElement,!1);this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");this.__input.type="text";this.__input_textShadow="0 1px 1px ";b.bind(this.__input,"keydown",function(a){13===a.keyCode&&t.call(this)});b.bind(this.__input,"blur",t);b.bind(this.__selector,"mousedown",function(a){b.addClass(this,"drag").bind(window,"mouseup",function(a){b.removeClass(w.__selector,"drag")})});var p=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(0.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});e.extend(p.style,{width:"100%",height:"100%",background:"none"});g(p,"top","rgba(0,0,0,0)","#000");e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});h(this.__hue_field);e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});b.bind(this.__saturation_field,"mousedown",r);b.bind(this.__field_knob,"mousedown",r);b.bind(this.__hue_field,"mousedown",function(a){A(a);b.bind(window,"mousemove",A);b.bind(window,"mouseup",m)});this.__saturation_field.appendChild(p);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay()};k.superclass=a;e.extend(k.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(!1!==a){var b=!1;e.each(c.COMPONENTS,function(c){return e.isUndefined(a[c])||e.isUndefined(this.__color.__state[c])||a[c]===this.__color.__state[c]?void 0:(b=!0,{})},this);b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var h=0.5>this.__color.v||0.5<this.__color.s?255:0,k=255-h;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+h+","+h+","+h+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;g(this.__saturation_field,"left","#fff",this.__temp.toString());e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+h+","+h+","+h+")",textShadow:this.__input_textShadow+"rgba("+k+","+k+","+k+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return k}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(h(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(h(this,b,c),this.__state.space="RGB");this.__state[b]=a}})}function g(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(k(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(k(this),this.__state.space="HSV");this.__state[b]=a}})}function h(a,c,e){if("HEX"===a.__state.space){a.__state[c]=b.component_from_hex(a.__state.hex,e)}else{if("HSV"!==a.__state.space){throw"Corrupted color state"}d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function k(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v});d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var l=function(){if(this.__state=a.apply(this,arguments),!1===this.__state){throw"Failed to interpret color arguments"}this.__state.a=this.__state.a||1};return l.COMPONENTS="r g b h s v hex a".split(" "),d.extend(l.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(l.prototype,"r",2),e(l.prototype,"g",1),e(l.prototype,"b",0),g(l.prototype,"h"),g(l.prototype,"s"),g(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(l.prototype,"hex",{get:function(){return this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b),this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}}),l}(dat.color.interpret,dat.color.math=function(){var a;return{hsv_to_rgb:function(a,c,d){var e=a/60-Math.floor(a/60),g=d*(1-c),h=d*(1-e*c);return c=d*(1-(1-e)*c),a=[[d,c,g],[h,d,g],[g,d,c],[g,h,d],[c,g,d],[d,g,h]][Math.floor(a/60)%6],{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,c,d){var e=Math.min(a,c,d),g=Math.max(a,c,d),e=g-e;return 0==g?{h:NaN,s:0,v:0}:(a=(a==g?(c-d)/e:c==g?2+(d-a)/e:4+(a-c)/e)/6,0>a&&(a+=1),{h:360*a,s:e/g,v:g/255})},rgb_to_hex:function(a,c,d){return a=this.hex_with_component(0,2,a),a=this.hex_with_component(a,1,c),this.hex_with_component(a,0,d)},component_from_hex:function(a,c){return a>>8*c&255},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1000/60)}}(),dat.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div");b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"});a.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=document.createElement("div");b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();b.defer(function(){a.backgroundElement.style.opacity=1;a.domElement.style.opacity=1;a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none";b.backgroundElement.style.display="none";a.unbind(b.domElement,"webkitTransitionEnd",c);a.unbind(b.domElement,"transitionend",c);a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c);a.bind(this.domElement,"transitionend",c);a.bind(this.domElement,"oTransitionEnd",c);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);define("libs/dat.gui",function(){});define("graph/render/g9/lightUp",["libs/three","libs/dat.gui"],function(a){return function(a,c){function d(a){return function(b){"string"==typeof b&&(b=b.replace("#","0x"));a.setHex(b)}}this.addAmbientLight=function(c){c=new THREE.AmbientLight(c);return a.add(c),c};this.addDirectionalLight=function(c,d,e){c=new THREE.DirectionalLight(c,d);c.position.set(e.x,e.y,e.z);a.add(c);new THREE.DirectionalLightHelper(c,3);return c};this.addHemisphereLight=function(c,d,e){c=new THREE.HemisphereLight(c,d,e);return a.add(c),c};this.addPointLight=function(c,d,e,g,h){c=new THREE.PointLight(c,d,e,g);c.position.set(h.x,h.y,h.z);a.add(c);h=new THREE.PointLightHelper(c,1);return a.add(h),c};this.addSpotLight=function(c,d,e){c=new THREE.SpotLight(16777215);c.position.set(d.x,d.y,d.z);c.castShadow=e;c.shadowMapWidth=1024;c.shadowMapHeight=1024;c.shadowCameraNear=500;c.shadowCameraFar=4000;c.shadowCameraFov=30;a.add(c);d=new THREE.SpotLightHelper(c);return a.add(d),c};var e=new dat.GUI({autoPlace:!1});this.lights=[];var g=this.addHemisphereLight(16777215,16777215,1.25);g.color.setHSL(0.6,1,0.75);g.groundColor.setHSL(0.1,0.8,0.7);g.position.y=5100;var h=e.addFolder("HemisphereLight");h.add(g,"visible");this.lights.push(g);g=this.addDirectionalLight("#ffffff",1,{x:0,y:0,z:10});h=e.addFolder("DirectionalLight");h.addColor({color:g.color.getHex()},"color").onChange(d(g.color));h.add(g,"intensity",0,1);h.add(g.position,"x",-2000,2000).step(1);h.add(g.position,"y",-2000,2000).step(1);h.add(g.position,"z",-2000,2000).step(1);h.add(g,"visible");this.lights.push(g);g=this.addDirectionalLight("#ffffff",1,{x:0,y:0,z:-10});h=e.addFolder("DirectionalLight11");h.addColor({color:g.color.getHex()},"color").onChange(d(g.color));h.add(g,"intensity",0,1);h.add(g.position,"x",-2000,2000).step(1);h.add(g.position,"y",-2000,2000).step(1);h.add(g.position,"z",-2000,2000).step(1);h.add(g,"visible");this.lights.push(g);g=this.addDirectionalLight("#ffffff",1,{x:0,y:0,z:1500});h=e.addFolder("DirectionalLight3");h.addColor({color:g.color.getHex()},"color").onChange(d(g.color));h.add(g,"intensity",0,1);h.add(g.position,"x",-2000,2000).step(1);h.add(g.position,"y",-2000,2000).step(1);h.add(g.position,"z",-2000,2000).step(1);h.add(g,"visible");this.lights.push(g);g=this.addDirectionalLight("#ffffff",1,{x:0,y:0,z:-1500});h=e.addFolder("DirectionalLight4");h.addColor({color:g.color.getHex()},"color").onChange(d(g.color));h.add(g,"intensity",0,1);h.add(g.position,"x",-2000,2000).step(1);h.add(g.position,"y",-2000,2000).step(1);h.add(g.position,"z",-2000,2000).step(1);h.add(g,"visible");this.lights.push(g);g=new THREE.AmbientLight(4210752);h=e.addFolder("AmbientLight");h.addColor({color:g.color.getHex()},"color").onChange(d(g.color));h.add(g,"visible");this.lights.push(g);e.close()}});d3=function(){function a(a){return null!=a&&!isNaN(a)}function b(a){return a.length}function c(a,b){try{for(var c in b){Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}}catch(d){a.prototype=b}}function d(){}function e(){}function g(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function h(a,b){if(b in a){return b}b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=Se.length;d>c;++c){var e=Se[c]+b;if(e in a){return e}}}function k(){}function l(){}function f(a){function b(){for(var d,e=c,f=-1,g=e.length;++f<g;){(d=e[f].on)&&d.apply(this,arguments)}return a}var c=[],e=new d;return b.on=function(b,d){var f,g=e.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),e.remove(b)),d&&c.push(e.set(b,{on:d})),a)},b}function n(){y.event.preventDefault()}function r(){for(var a,b=y.event;a=b.sourceEvent;){b=a}return b}function v(a){for(var b=new l,c=0,d=arguments.length;++c<d;){b[arguments[c]]=f(b)}return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=y.event;e.target=a;y.event=e;b[e.type].apply(c,d)}finally{y.event=f}}},b}function t(a){return bd(a,qa),a}function m(a){return"function"==typeof a?a:function(){return Xd(a,this)}}function u(a){return"function"==typeof a?a:function(){return Yd(a,this)}}function A(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=y.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function w(a){return a.trim().replace(/\s+/g," ")}function p(a){return new RegExp("(?:^|\\s+)"+y.requote(a)+"(?:\\s+|$)","g")}function B(a,b){function c(){for(var d=-1;++d<e;){a[d](this,b)}}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;){a[c](this,f)}}a=a.trim().split(/\s+/).map(F);var e=a.length;return"function"==typeof b?d:c}function F(a){var b=p(a);return function(c,d){if(e=c.classList){return d?e.add(a):e.remove(a)}var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",w(e+" "+a))):c.setAttribute("class",w(e.replace(b," ")))}}function x(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function C(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function E(a){return"function"==typeof a?a:(a=y.ns.qualify(a)).local?function(){return gb.createElementNS(a.space,a.local)}:function(){return gb.createElementNS(this.namespaceURI,a)}}function D(a){return function(){return Te(this,a)}}function H(a){return arguments.length||(a=y.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function I(a,b){for(var c=0,d=a.length;d>c;c++){for(var e,f=a[c],g=0,h=f.length;h>g;g++){(e=f[g])&&b(e,g,c)}}return a}function K(a){return bd(a,Jb),a}function M(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<g;){}return e}}function L(){var a=this.__transition__;a&&++a.active}function R(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var f=m(b,Vb(arguments));d.call(this);this.addEventListener(a,this[g]=f,f.$=c);f._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+y.requote(a)+"$"),d;for(d in this){if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$);delete this[d]}}}var g="__on"+a,h=a.indexOf("."),m=N;0<h&&(a=a.substring(0,h));var l=Zd.get(a);return l&&(a=l,m=S),h?b?e:d:b?k:f}function N(a,b){return function(c){var d=y.event;y.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{y.event=d}}}function S(a,b){var c=N(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function J(){var a=".dragsuppress-"+ ++Jg,b="touchmove"+a,c="selectstart"+a,d="dragstart"+a,e="click"+a,f=y.select(Ma).on(b,n).on(c,n).on(d,n),g=Wb.style,h=g[$d];return g[$d]="none",function(b){function c(){f.on(e,null)}f.on(a,null);g[$d]=h;b&&(f.on(e,function(){n();c()},!0),setTimeout(c,0))}}function Q(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>ae&&(Ma.scrollX||Ma.scrollY)){var c=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();ae=!(e.f||e.e);c.remove()}return ae?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function X(a){return 1<a?0:-1>a?ea:Math.acos(a)}function U(a){return 1<a?Wa:-1>a?-Wa:Math.asin(a)}function Y(a){return((a=Math.exp(a))-1/a)/2}function O(a){return((a=Math.exp(a))+1/a)/2}function ra(a){return(a=Math.sin(a/2))*a}function la(){}function oa(a,b,c){return new sa(a,b,c)}function sa(a,b,c){this.h=a;this.s=b;this.l=c}function xa(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=0.5>=c?c*(1+b):c+b-c*b,e=2*c-f,Ba(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function ta(a,b,c){this.h=a;this.c=b;this.l=c}function ya(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);var d=Math.cos(a*=ca)*b;return new ga(c,d,Math.sin(a)*b)}function ga(a,b,c){this.l=a;this.a=b;this.b=c}function ha(a,b,c){a=(a+16)/116;b=a+b/500;c=a-c/200;return b=Cb(b)*Ue,a=Cb(a)*Ve,c=Cb(c)*We,Ba(Db(3.2404542*b-1.5371385*a-0.4985314*c),Db(-0.969266*b+1.8760108*a+0.041556*c),Db(0.0556434*b-0.2040259*a+1.0572252*c))}function q(a,b,c){return 0<a?new ta(Math.atan2(c,b)*va,Math.sqrt(b*b+c*c),a):new ta(NaN,NaN,a)}function Cb(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Ga(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Db(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function lb(a){return Ba(a>>16,255&a>>8,255&a)+""}function Ba(a,b,c){return new eb(a,b,c)}function eb(a,b,c){this.r=a;this.g=b;this.b=c}function Qa(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Za(a,b,c){var d,e,f,g=0,h=0,k=0;if(d=/([a-z]+)\((.*)\)/i.exec(a)){switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(ba(e[0]),ba(e[1]),ba(e[2]))}}return(f=cd.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,k=a.charAt(3),k+=k):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),k=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),k=parseInt(k,16)),b(g,h,k))}function fa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,k=(g+f)/2;return h?(e=0.5>k?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=0<k&&1>k?0:d),oa(d,e,k)}function Oa(a,b,c){a=Ra(a);b=Ra(b);c=Ra(c);var d=Ga((0.4124564*a+0.3575761*b+0.1804375*c)/Ue),e=Ga((0.2126729*a+0.7151522*b+0.072175*c)/Ve);a=Ga((0.0193339*a+0.119192*b+0.9503041*c)/We);return new ga(116*e-16,500*(d-e),200*(e-a))}function Ra(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function ba(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function W(a){return"function"==typeof a?a:function(){return a}}function ua(a){return a}function Sa(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),za(b,c,a,d)}}function za(a,b,c,d){function e(){var a,b=k.status;if(!b&&k.responseText||200<=b&&300>b||304===b){try{a=c.call(f,k)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else{g.error.call(f,k)}}var f={},g=y.dispatch("beforesend","progress","load","error"),h={},k=new XMLHttpRequest,m=null;return !Ma.XDomainRequest||"withCredentials" in k||!/^(http(s)?:)?\/\//.test(a)||(k=new XDomainRequest),"onload" in k?k.onload=k.onerror=e:k.onreadystatechange=function(){3<k.readyState&&e()},k.onprogress=function(a){var b=y.event;y.event=a;try{g.progress.call(f,k)}finally{y.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(m=a,f):m},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Vb(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),k.open(c,a,!0),null==b||"accept" in h||(h.accept=b+",*/*"),k.setRequestHeader){for(var Ca in h){k.setRequestHeader(Ca,h[Ca])}}return null!=b&&k.overrideMimeType&&k.overrideMimeType(b),null!=m&&(k.responseType=m),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,k),k.send(null==d?null:d),f},f.abort=function(){return k.abort(),f},y.rebind(f,g,"on"),null==d?f:f.get(P(d))}function P(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function ia(){var a=sb(),a=ma()-a;24<a?(isFinite(a)&&(clearTimeout(dd),dd=setTimeout(ia,a)),ed=0):(ed=1,Xe(ia))}function cb(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());xb.callback=a;xb.time=c+b}function sb(){var a=Date.now();for(xb=fd;xb;){a>=xb.time&&(xb.flush=xb.callback(a-xb.time)),xb=xb.next}return a}function ma(){for(var a,b=fd,c=1/0;b;){b.flush?b=a?a.next=b.next:fd=b.next:(b.time<c&&(c=b.time),b=(a=b).next)}return gd=a,c}function Da(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function z(a){return a+""}function ka(){}function Ha(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function T(a,b){a&&Ye.hasOwnProperty(a.type)&&Ye[a.type](a,b)}function pa(a,b,c){var d=-1,e=a.length-c;for(b.lineStart();++d<e;){c=a[d],b.point(c[0],c[1],c[2])}b.lineEnd()}function mb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;){pa(a[c],b,1)}b.polygonEnd()}function ub(){function a(b,c){b*=ca;c=c*ca/2+ea/4;var G=b-d,g=Math.cos(c),h=Math.sin(c),na=f*h;jc.add(Math.atan2(na*Math.sin(G),e*g+na*Math.cos(G)));d=b;e=g;f=h}var b,c,d,e,f;bb.point=function(g,h){bb.point=a;d=(b=g)*ca;e=Math.cos(h=(c=h)*ca/2+ea/4);f=Math.sin(h)};bb.lineEnd=function(){a(b,c)}}function fb(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function Sb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ja(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function ec(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Gb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Ea(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Pa(a){return[Math.atan2(a[1],a[0]),U(a[2])]}function ja(a,b){return Math.abs(a[0]-b[0])<aa&&Math.abs(a[1]-b[1])<aa}function wa(a,b){a*=ca;var c=Math.cos(b*=ca);kb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function kb(a,b,c){++Jc;Kb+=(a-Kb)/Jc;Lb+=(b-Lb)/Jc;yb+=(c-yb)/Jc}function tb(){function a(e,f){e*=ca;var G=Math.cos(f*=ca),g=G*Math.cos(e),G=G*Math.sin(e),h=Math.sin(f),k=Math.atan2(Math.sqrt((k=c*h-d*G)*k+(k=d*g-b*h)*k+(k=b*G-c*g)*k),b*g+c*G+d*h);vc+=k;hb+=k*(b+(b=g));ib+=k*(c+(c=G));Xa+=k*(d+(d=h));kb(b,c,d)}var b,c,d;pb.point=function(e,f){e*=ca;var g=Math.cos(f*=ca);b=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);pb.point=a;kb(b,c,d)}}function Ob(){pb.point=wa}function La(){function a(b,c){b*=ca;var G=Math.cos(c*=ca),g=G*Math.cos(b),G=G*Math.sin(b),h=Math.sin(c),na=e*h-f*G,k=f*g-d*h,Ca=d*G-e*g,m=Math.sqrt(na*na+k*k+Ca*Ca),l=d*g+e*G+f*h,p=m&&-X(l)/m,m=Math.atan2(m,l);Xb+=p*na;Yb+=p*k;zb+=p*Ca;vc+=m;hb+=m*(d+(d=g));ib+=m*(e+(e=G));Xa+=m*(f+(f=h));kb(d,e,f)}var b,c,d,e,f;pb.point=function(g,h){b=g;c=h;pb.point=a;g*=ca;var k=Math.cos(h*=ca);d=k*Math.cos(g);e=k*Math.sin(g);f=Math.sin(h);kb(d,e,f)};pb.lineEnd=function(){a(b,c);pb.lineEnd=Ob;pb.point=wa}}function Hb(){return !0}function oc(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(ja(c,d)){e.lineStart();for(d=0;b>d;++d){e.point((c=a[d])[0],c[1])}return void e.lineEnd()}a={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0};c={point:c,points:[c],other:a,visited:!1,entry:!1,subject:!1};a.other=c;f.push(a);g.push(c);a={point:d,points:[d],other:null,visited:!1,entry:!1,subject:!0};c={point:d,points:[d],other:a,visited:!1,entry:!0,subject:!1};a.other=c;f.push(a);g.push(c)}}),g.sort(b),Qc(f),Qc(g),f.length){a=0;for(b=g.length;b>a;++a){g[a].entry=c=!c}for(var h,k=f[0];;){for(c=k;c.visited;){if((c=c.next)===k){return}}b=c.points;e.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject){for(a=0;a<b.length;a++){e.point((h=b[a])[0],h[1])}}else{d(c.point,c.next.point,1,e)}c=c.next}else{if(c.subject){for(b=c.prev.points,a=b.length;0<=--a;){e.point((h=b[a])[0],h[1])}}else{d(c.point,c.prev.point,-1,e)}c=c.prev}c=c.other;b=c.points}while(!c.visited);e.lineEnd()}}}function Qc(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;){e.next=c=a[d],c.prev=e,e=c}e.next=c=a[0];c.prev=e}}function $a(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);r.point(c[0],c[1])}function k(){B.point=h;r.lineStart()}function m(){B.point=g;r.lineEnd()}function l(a,b){x.push([a,b]);var c=e(a,b);A.point(c[0],c[1])}function p(){A.lineStart();x=[]}function n(){l(x[0][0],x[0][1]);A.lineEnd();var a;a=A.clean();var b=C.buffer(),c=b.length;if(x.pop(),q.push(x),x=null,c){if(1&a){a=b[0];var d,c=a.length-1,b=-1;for(f.lineStart();++b<c;){f.point((d=a[b])[0],d[1])}return void f.lineEnd()}1<c&&2&a&&b.push(b.pop().concat(b.shift()));u.push(b.filter(ab))}}var u,q,x,r=b(f),w=e.invert(d[0],d[1]),B={point:g,lineStart:k,lineEnd:m,polygonStart:function(){B.point=l;B.lineStart=p;B.lineEnd=n;u=[];q=[];f.polygonStart()},polygonEnd:function(){B.point=g;B.lineStart=k;B.lineEnd=m;u=y.merge(u);var a,b=w;a=q;var d=b[0],e=b[1],G=[Math.sin(d),-Math.cos(d),0],h=0,na=0;jc.reset();for(var wb=0,l=a.length;l>wb;++wb){var Ka=a[wb],p=Ka.length;if(p){for(var n=Ka[0],Ia=n[0],b=n[1]/2+ea/4,x=Math.sin(b),r=Math.cos(b),C=1;;){C===p&&(C=0);var b=Ka[C],A=b[0],t=b[1]/2+ea/4,E=Math.sin(t),t=Math.cos(t),v=A-Ia,F=Math.abs(v)>ea,x=x*E;if(jc.add(Math.atan2(x*Math.sin(v),r*t+x*Math.cos(v))),h+=F?v+(0<=v?2:-2)*ea:v,F^Ia>=d^A>=d){n=Ja(fb(n),fb(b)),Ea(n),Ia=Ja(G,n),Ea(Ia),Ia=(F^0<=v?-1:1)*U(Ia[2]),(e>Ia||e===Ia&&(n[0]||n[1]))&&(na+=F^0<=v?1:-1)}if(!C++){break}Ia=A;x=E;r=t;n=b}}}a=(-aa>h||aa>h&&0>jc)^1&na;u.length?oc(u,Pb,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();u=q=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},C=yc(),A=b(C);return B}}function ab(a){return 1<a.length}function yc(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:k,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Pb(a,b){return(0>(a=a.point)[0]?a[1]-Wa-aa:Wa-a[1])-(0>(b=b.point)[0]?b[1]-Wa-aa:Wa-b[1])}function qc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=fb(a),G=fb(b),g=[1,0,0],G=Ja(f,G),h=Sb(G,G),f=G[0],k=h-f*f;if(!k){return !d&&a}h=e*h/k;k=-e*f/k;f=Ja(g,G);g=Gb(g,h);G=Gb(G,k);ec(g,G);G=Sb(g,f);h=Sb(f,f);k=G*G-h*(Sb(g,g)-1);if(!(0>k)){var na=Math.sqrt(k),k=Gb(f,(-G-na)/h);if(ec(k,g),k=Pa(k),!d){return k}var Ca;d=a[0];var m=b[0];a=a[1];b=b[1];d>m&&(Ca=d,d=m,m=Ca);var wb=m-d,Ta=Math.abs(wb-ea)<aa,l=Ta||aa>wb;if(!Ta&&a>b&&(Ca=a,a=b,b=Ca),l?Ta?0<a+b^k[1]<(Math.abs(k[0]-d)<aa?a:b):a<=k[1]&&k[1]<=b:wb>ea^(d<=k[0]&&k[0]<=m)){return Ca=Gb(f,(-G+na)/h),ec(Ca,g),[k,Pa(Ca)]}}}function d(b,c){var e=f?a:ea-a,g=0;return -e>b?g|=1:b>e&&(g|=2),-e>c?g|=4:c>e&&(g|=8),g}var e=Math.cos(a),f=0<e,g=Math.abs(e)>aa,h=tc(a,6*ca);return $a(b,function(a){var e,G,h,k,m;return{lineStart:function(){k=h=!1;m=1},point:function(l,Ka){var p,n=[l,Ka],Ia=b(l,Ka),u=f?Ia?0:d(l,Ka):Ia?d(l+(0>l?ea:-ea),Ka):0;if(!e&&(k=h=Ia)&&a.lineStart(),Ia!==h&&(p=c(e,n),(ja(e,p)||ja(n,p))&&(n[0]+=aa,n[1]+=aa,Ia=b(n[0],n[1]))),Ia!==h){m=0,Ia?(a.lineStart(),p=c(n,e),a.point(p[0],p[1])):(p=c(e,n),a.point(p[0],p[1]),a.lineEnd()),e=p}else{if(g&&e&&f^Ia){var x;u&G||!(x=c(n,e,!0))||(m=0,f?(a.lineStart(),a.point(x[0][0],x[0][1]),a.point(x[1][0],x[1][1]),a.lineEnd()):(a.point(x[1][0],x[1][1]),a.lineEnd(),a.lineStart(),a.point(x[0][0],x[0][1])))}}!Ia||e&&ja(e,n)||a.point(n[0],n[1]);e=n;h=Ia;G=u},lineEnd:function(){h&&a.lineEnd();e=null},clean:function(){return m|(k&&h)<<1}}},h,f?[0,-a]:[-ea,a-ea])}function Rc(a,b,c,d){function e(d,f){return Math.abs(d[0]-a)<aa?0<f?0:3:Math.abs(d[0]-c)<aa?0<f?2:1:Math.abs(d[1]-b)<aa?0<f?1:0:0<f?3:2}function f(a,b){return g(a.point,b.point)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function k(f,h,m,Ta){var l=0,p=0;if(null==f||(l=e(f,m))!==(p=e(h,m))||0>g(f,h)^0<m){do{Ta.point(0===l||3===l?a:c,1<l?d:b)}while((l=(l+m+4)%4)!==p)}else{Ta.point(h[0],h[1])}}function m(e,f){e>=a&&c>=e&&f>=b&&d>=f&&h.point(e,f)}function l(e,f){e=Math.max(-hd,Math.min(hd,e));f=Math.max(-hd,Math.min(hd,f));var g=e>=a&&c>=e&&f>=b&&d>=f;if(n&&u.push([e,f]),A){x=e,q=f,r=g,A=!1,g&&(h.lineStart(),h.point(e,f))}else{if(g&&C){h.point(e,f)}else{var k=[w,B],m=[e,f],Ta=m[0]-k[0],Ka=m[1]-k[1],p=[0,1];(Math.abs(Ta)<aa&&Math.abs(Ka)<aa?a<=k[0]&&k[0]<=c&&b<=k[1]&&k[1]<=d:fc(a-k[0],Ta,p)&&fc(k[0]-c,-Ta,p)&&fc(b-k[1],Ka,p)&&fc(k[1]-d,-Ka,p)&&(1>p[1]&&(m[0]=k[0]+p[1]*Ta,m[1]=k[1]+p[1]*Ka),0<p[0]&&(k[0]+=p[0]*Ta,k[1]+=p[0]*Ka),!0))?(C||(h.lineStart(),h.point(k[0],k[1])),h.point(m[0],m[1]),g||h.lineEnd(),t=!1):g&&(h.lineStart(),h.point(e,f),t=!1)}}w=e;B=f;C=g}var p,n,u,x,q,r,w,B,C,A,t,v=h,E=yc(),F={point:m,lineStart:function(){F.point=l;n&&n.push(u=[]);A=!0;C=!1;w=B=NaN},lineEnd:function(){p&&(l(x,q),r&&C&&E.rejoin(),p.push(E.buffer()));F.point=m;C&&h.lineEnd()},polygonStart:function(){h=E;p=[];n=[];t=!0},polygonEnd:function(){h=v;p=y.merge(p);var b;b=[a,d];for(var c=0,e=n.length,g=b[1],na=0;e>na;++na){for(var Ca,m=1,l=n[na],Ka=l.length,x=l[0];Ka>m;++m){Ca=l[m],x[1]<=g?Ca[1]>g&&0<(Ca[0]-x[0])*(b[1]-x[1])-(b[0]-x[0])*(Ca[1]-x[1])&&++c:Ca[1]<=g&&0>(Ca[0]-x[0])*(b[1]-x[1])-(b[0]-x[0])*(Ca[1]-x[1])&&--c,x=Ca}}b=0!==c;c=t&&b;e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),k(null,null,1,h),h.lineEnd()),e&&oc(p,f,b,k,h),h.polygonEnd());p=n=u=null}};return F}}function fc(a,b,c){if(Math.abs(b)<aa){return 0>=a}a/=b;if(0<b){if(a>c[1]){return !1}a>c[0]&&(c[0]=a)}else{if(a<c[0]){return !1}a<c[1]&&(c[1]=a)}return !0}function Sc(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Rb(a){var b=0,c=ea/3,d=Dc(a);a=d(b,c);return a.parallels=function(a){return arguments.length?d(b=a[0]*ea/180,c=a[1]*ea/180):[b/ea*180,c/ea*180]},a}function Qb(a,b){function c(a,b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),g-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,U((f-(a*a+c*c)*e*e)/(2*e))]},c}function Tc(){function a(b,c){id+=e*b-d*c;d=b;e=c}var b,c,d,e;Zb.point=function(f,g){Zb.point=a;b=d=f;c=e=g};Zb.lineEnd=function(){a(b,c)}}function gc(){function a(b,c){g.push("M",b,",",c,f)}function b(a,d){g.push("M",a,",",d);h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Uc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){return f=Uc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Uc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function nb(a,b){Kb+=a;Lb+=b;++yb}function Vc(){function a(d,e){var f=d-b,G=e-c,f=Math.sqrt(f*f+G*G);hb+=f*(b+d)/2;ib+=f*(c+e)/2;Xa+=f;nb(b=d,c=e)}var b,c;qb.point=function(d,e){qb.point=a;nb(b=d,c=e)}}function rc(){qb.point=nb}function Cc(){function a(b,c){var f=b-d,G=c-e,f=Math.sqrt(f*f+G*G);hb+=f*(d+b)/2;ib+=f*(e+c)/2;Xa+=f;f=e*b-d*c;Xb+=f*(d+b);Yb+=f*(e+c);zb+=3*f;nb(d=b,e=c)}var b,c,d,e;qb.point=function(f,g){qb.point=a;nb(b=d=f,c=e=g)};qb.lineEnd=function(){a(b,c)}}function Ib(a){function b(c,d){a.moveTo(c,d);a.arc(c,d,g,0,jb)}function c(b,e){a.moveTo(b,e);h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e;h.point=b},pointRadius:function(a){return g=a,h},result:k};return h}function ob(a){function b(d){function e(b,c){b=a(b,c);d.point(b[0],b[1])}function g(){r=NaN;t.point=h;d.lineStart()}function h(b,e){var g=fb([b,e]),k=a(b,e);c(r,w,q,B,C,A,r=k[0],w=k[1],q=b,B=g[0],C=g[1],A=g[2],f,d);d.point(r,w)}function k(){t.point=e;d.lineEnd()}function na(){g();t.point=m;t.lineEnd=l}function m(a,b){h(wb=a,b);p=r;Ka=w;n=B;u=C;x=A;t.point=h}function l(){c(r,w,q,B,C,A,p,Ka,wb,n,u,x,f,d);t.lineEnd=k;k()}var wb,p,Ka,n,u,x,q,r,w,B,C,A,t={point:e,lineStart:g,lineEnd:k,polygonStart:function(){d.polygonStart();t.lineStart=na},polygonEnd:function(){d.polygonEnd();t.lineStart=g}};return t}function c(b,f,g,h,k,na,m,l,Ta,p,n,u,x,q){var r=m-b,w=l-f,B=r*r+w*w;if(B>4*d&&x--){var C=h+p,A=k+n,t=na+u,E=Math.sqrt(C*C+A*A+t*t),v=Math.asin(t/=E),F=Math.abs(Math.abs(t)-1)<aa?(g+Ta)/2:Math.atan2(A,C),D=a(F,v),v=D[0],D=D[1],y=v-b,z=D-f,H=w*y-r*z;(H*H/B>d||0.3<Math.abs((r*y+w*z)/B-0.5)||e>h*p+k*n+na*u)&&(c(b,f,g,h,k,na,v,D,F,C/=E,A/=E,t,x,q),q.point(v,D),c(v,D,F,C,A,t,m,l,Ta,p,n,u,x,q))}}var d=0.5,e=Math.cos(30*ca),f=16;return b.precision=function(a){return arguments.length?(f=0<(d=a*a)&&16,b):Math.sqrt(d)},b}function sc(a){this.stream=a}function Wc(a){var b=ob(function(b,c){return a([b*va,c*va])});return function(a){var c=new sc(a=b(a));return c.point=function(b,c){a.point(b*ca,c*ca)},c}}function vb(a){return Dc(function(){return a})()}function Dc(a){function b(a){return a=h(a[0]*ca,a[1]*ca),[a[0]*n+k,m-a[1]*n]}function c(a){return a=h.invert((a[0]-k)/n,(m-a[1])/n),a&&[a[0]*va,a[1]*va]}function d(){h=Sc(g=cc(w,B,C),f);var a=f(q,r);return k=u-a[0]*n,m=x+a[1]*n,e()}function e(){return l&&(l.valid=!1,l=null),b}var f,g,h,k,m,l,p=ob(function(a,b){return a=f(a,b),[a[0]*n+k,m-a[1]*n]}),n=150,u=480,x=250,q=0,r=0,w=0,B=0,C=0,A=Ze,t=ua,v=null,E=null;return b.stream=function(a){return l&&(l.valid=!1),l=Wd(A(g,p(t(a)))),l.valid=!0,l},b.clipAngle=function(a){return arguments.length?(A=null==a?(v=a,Ze):qc((v=+a)*ca),e()):v},b.clipExtent=function(a){return arguments.length?(E=a,t=a?Rc(a[0][0],a[0][1],a[1][0],a[1][1]):ua,e()):E},b.scale=function(a){return arguments.length?(n=+a,d()):n},b.translate=function(a){return arguments.length?(u=+a[0],x=+a[1],d()):[u,x]},b.center=function(a){return arguments.length?(q=a[0]%360*ca,r=a[1]%360*ca,d()):[q*va,r*va]},b.rotate=function(a){return arguments.length?(w=a[0]%360*ca,B=a[1]%360*ca,C=2<a.length?a[2]%360*ca:0,d()):[w*va,B*va,C*va]},y.rebind(b,p,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function Wd(a){var b=new sc(a);return b.point=function(b,c){a.point(b*ca,c*ca)},b}function Tb(a,b){return[a,b]}function Ec(a,b){return[a>ea?a-jb:-ea>a?a+jb:a,b]}function cc(a,b,c){return a?b||c?Sc(Xc(a),Mc(b,c)):Xc(a):b||c?Mc(b,c):Ec}function Fc(a){return function(b,c){return b+=a,[b>ea?b-jb:-ea>b?b+jb:b,c]}}function Xc(a){var b=Fc(a);return b.invert=Fc(-a),b}function Mc(a,b){function c(a,b){var G=Math.cos(b),h=Math.cos(a)*G,G=Math.sin(a)*G,k=Math.sin(b),na=k*d+h*e;return[Math.atan2(G*f-na*g,h*d-k*e),U(na*f+G*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),G=Math.cos(a)*c,c=Math.sin(a)*c,h=Math.sin(b),k=h*f-c*g;return[Math.atan2(c*f+h*g,G*d+k*e),U(k*d-G*e)]},c}function tc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var k=g*b;null!=e?(e=Yc(c,e),f=Yc(c,f),(0<g?f>e:e>f)&&(e+=g*jb)):(e=a+g*jb,f=a-0.5*k);for(var m;0<g?e>f:f>e;e-=k){h.point((m=Pa([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],m[1])}}}function Yc(a,b){var c=fb(b);c[0]-=a;Ea(c);var d=X(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-aa)%(2*Math.PI)}function Zc(a,b,c){var d=y.range(a,b-aa,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function $c(a,b,c){var d=y.range(a,b-aa,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Z(a){return a.source}function Gc(a){return a.target}function hc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),k=e*Math.cos(a),m=e*Math.sin(a),l=g*Math.cos(c),p=g*Math.sin(c),n=2*Math.asin(Math.sqrt(ra(d-b)+e*g*ra(c-a))),u=1/Math.sin(n);c=n?function(a){var b=Math.sin(a*=n)*u;a=Math.sin(n-a)*u;var c=a*k+b*l,d=a*m+b*p;return[Math.atan2(d,c)*va,Math.atan2(a*f+b*h,Math.sqrt(c*c+d*d))*va]}:function(){return[a*va,b*va]};return c.distance=n,c}function Ub(a,b){function c(b,d){var e=Math.cos(d),f=a(Math.cos(b)*e);return[f*e*Math.sin(b),f*Math.sin(d)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e);return[Math.atan2(a*f,d*Math.cos(e)),Math.asin(d&&c*f/d)]},c}function uc(a,b){function c(a,b){var d=Math.abs(Math.abs(b)-Wa)<aa?0:f/Math.pow(Math.tan(ea/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ea/4+b/2)/Math.tan(ea/4+a/2)),f=d*Math.pow(Math.tan(ea/4+a/2),e)/e;return e?(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/((0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)),1/e))-Wa]},c):ic}function Hc(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return Math.abs(e)<aa?Tb:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]},c)}function ic(a,b){return[a,Math.log(Math.tan(ea/4+b/2))]}function ad(a){var b,c=vb(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var G=ea*d(),h=e();f([[h[0]-G,h[1]-G],[h[0]+G,h[1]+G]])}}else{b&&(g=null)}return g},c.clipExtent(null)}function Ic(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function da(a){function b(g){function k(){m.push("M",f(a(l),h))}for(var na,m=[],l=[],p=-1,n=g.length,u=W(c),x=W(d);++p<n;){e.call(this,na=g[p],p)?l.push([+u.call(this,na,p),+x.call(this,na,p)]):l.length&&(k(),l=[])}return l.length&&k(),m.length?m.join(""):null}var c=rb,d=Bb,e=Hb,f=Ya,g=f.key,h=0.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=be.get(a)||Ya).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function rb(a){return a[0]}function Bb(a){return a[1]}function Ya(a){return a.join("L")}function Jd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;){e.push("V",(d=a[b])[1],"H",d[0])}return e.join("")}function Kd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;){e.push("H",(d=a[b])[0],"V",d[1])}return e.join("")}function Lc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2){return Ya(a)}var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,k=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],k=2),1<b.length){for(h=b[1],f=a[k],k++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,k++){f=a[k],h=b[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}}c&&(c=a[k],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function Ld(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,k=a.length;++h<k;){c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])])}return d}function te(a){if(3>a.length){return Ya(a)}var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],e=[e,",",f,"L",db($b,g),",",db($b,h)];for(a.push(a[c-1]);++b<=c;){d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Md(e,g,h)}return a.pop(),e.push("L",d),e.join("")}function db(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Md(a,b,c){a.push("C",db($e,b),",",db($e,c),",",db(af,b),",",db(af,c),",",db($b,b),",",db($b,c))}function Nd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Yf(a,b,c,d){var e,f,g,h,k,m,l;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],k=e[1],e=d[c],m=e[0],l=e[1],0<(l-g)*(h-f)-(k-g)*(m-f)}function Bc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ge(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(h*(a-c)-d*(e-f))/(d*g-h*b);return[e+f*g,a+f*b]}function He(a){var b=a[0];a=a[a.length-1];return !(b[0]-a[0]||b[1]-a[1])}function Sd(a,b){var c=a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,e={list:[],leftEnd:null,rightEnd:null,init:function(){e.leftEnd=e.createHalfEdge(null,"l");e.rightEnd=e.createHalfEdge(null,"l");e.leftEnd.r=e.rightEnd;e.rightEnd.l=e.leftEnd;e.list.unshift(e.leftEnd,e.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=e.leftEnd;do{b=b.r}while(b!=e.rightEnd&&f.rightOf(b,a));return b.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[ce[a.side]]}},f={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y;return c.c=a.x*d+a.y*e+0.5*(d*d+e*e),(0<d?d:-d)>(0<e?e:-e)?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r){return null}var e=c.a*d.b-c.b*d.a;if(1e-10>Math.abs(e)){return null}var f,g,h=(c.c*d.b-d.c*c.b)/e,e=(d.c*c.a-c.c*d.a)/e,G=c.region.r,k=d.region.r;G.y<k.y||G.y==k.y&&G.x<k.x?(f=a,g=c):(f=b,g=d);return(c=h>=g.region.r.x)&&"l"===f.side||!c&&"r"===f.side?null:{x:h,y:e}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side){return 1}if(!e&&"r"===a.side){return 0}if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,G=0;(!e&&0>c.b||e&&0<=c.b?G=h=f>=c.b*g:(G=b.x+b.y*c.b>c.c,0>c.b&&(G=!G),G||(h=1)),h)||(d=d.x-c.region.l.x,G=c.b*(g*g-f*f)<d*f*(1+2*g/d+c.b*c.b),0>c.b&&(G=!G))}else{g=c.c-c.a*b.x,c=b.y-g,f=b.x-d.x,d=g-d.y,G=c*c>f*f+d*d}return"l"===a.side?G:!G},endPoint:function(a,c,d){a.ep[c]=d;a.ep[ce[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},g={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;c=0;for(var d=g.list,e=d.length;e>c;c++){var f=d[c];if(!(a.ystar>f.ystar||a.ystar==f.ystar&&b.x>f.vertex.x)){break}}d.splice(c,0,a)},del:function(a){for(var b=0,c=g.list,d=c.length;d>b&&c[b]!=a;++b){}c.splice(b,1)},empty:function(){return 0===g.list.length},nextEvent:function(a){for(var b=0,c=g.list,d=c.length;d>b;++b){if(c[b]==a){return c[b+1]}}return null},min:function(){var a=g.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return g.list.shift()}};e.init();for(var d=c.shift(),h,k,m,l,p,n,u,x,q,r,w=c.shift();;){if(g.empty()||(h=g.min()),w&&(g.empty()||w.y<h.y||w.y==h.y&&w.x<h.x)){k=e.leftBound(w),m=e.right(k),u=e.rightRegion(k),r=f.bisect(u,w),n=e.createHalfEdge(r,"l"),e.insert(k,n),(q=f.intersect(k,n))&&(g.del(k),g.insert(k,q,f.distance(q,w))),k=n,n=e.createHalfEdge(r,"r"),e.insert(k,n),(q=f.intersect(n,m))&&g.insert(n,q,f.distance(q,w)),w=c.shift()}else{if(g.empty()){break}k=g.extractMin();l=e.left(k);m=e.right(k);p=e.right(m);u=e.leftRegion(k);n=e.rightRegion(m);q=k.vertex;f.endPoint(k.edge,k.side,q);f.endPoint(m.edge,m.side,q);e.del(k);g.del(m);e.del(m);k="l";u.y>n.y&&(x=u,u=n,n=x,k="r");r=f.bisect(u,n);n=e.createHalfEdge(r,k);e.insert(l,n);f.endPoint(r,ce[k],q);(q=f.intersect(l,n))&&(g.del(l),g.insert(l,q,f.distance(q,u)));(q=f.intersect(n,p))&&g.insert(n,q,f.distance(q,u))}}for(k=e.right(e.leftEnd);k!=e.rightEnd;k=e.right(k)){b(k.edge)}}function lg(a){return a.x}function ng(a){return a.y}function Le(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ac(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=0.5*(c+e),h=0.5*(d+f);b=b.nodes;b[0]&&Ac(a,b[0],c,d,g,h);b[1]&&Ac(a,b[1],g,d,e,h);b[2]&&Ac(a,b[2],c,h,g,f);b[3]&&Ac(a,b[3],g,h,e,f)}}function Rd(a,b){a=y.rgb(a);b=y.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+Qa(Math.round(c+f*a))+Qa(Math.round(d+g*a))+Qa(Math.round(e+h*a))}}function Me(a,b){var c,d={},e={};for(c in a){c in b?d[c]=dc(a[c],b[c]):e[c]=a[c]}for(c in b){c in a||(e[c]=b[c])}return function(a){for(c in d){e[c]=d[c](a)}return e}}function Fb(a,b){return b-=a=+a,function(c){return a+b*c}}function Ce(a,b){var c,d,e,f,g=0,h=[],k=[];a+="";b+="";for(d=jd.lastIndex=0;c=jd.exec(b);++d){c.index&&h.push(b.substring(g,c.index)),k.push({i:h.length,x:c[0]}),h.push(null),g=jd.lastIndex}g<b.length&&h.push(b.substring(g));d=0;for(e=k.length;(c=jd.exec(a))&&e>d;++d){if(f=k[d],f.x==c[0]){if(f.i){if(null==h[f.i+1]){for(h[f.i-1]+=f.x,h.splice(f.i,1),c=d+1;e>c;++c){k[c].i--}}else{for(h[f.i-1]+=f.x+h[f.i+1],h.splice(f.i,2),c=d+1;e>c;++c){k[c].i-=2}}}else{if(null==h[f.i+1]){h[f.i]=f.x}else{for(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1),c=d+1;e>c;++c){k[c].i--}}}k.splice(d,1);e--;d--}else{f.x=Fb(parseFloat(c[0]),parseFloat(f.x))}}for(;e>d;){f=k.pop(),null==h[f.i+1]?h[f.i]=f.x:(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1)),e--}return 1===h.length?null==h[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d){h[(f=k[d]).i]=f.x(a)}return h.join("")}}function dc(a,b){for(var c,d=y.interpolators.length;0<=--d&&!(c=y.interpolators[d](a,b));){}return c}function Nc(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c){d.push(dc(a[c],b[c]))}for(;f>c;++c){e[c]=a[c]}for(;g>c;++c){e[c]=b[c]}return function(a){for(c=0;h>c;++c){e[c]=d[c](a)}return e}}function mg(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Ne(a){return function(b){return 1-a(1-b)}}function Oe(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function cg(a){return a*a}function bg(a){return a*a*a}function qg(a){if(0>=a){return 0}if(1<=a){return 1}var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function dg(a){return 1-Math.cos(a*Wa)}function eg(a){return Math.pow(2,10*(a-1))}function rg(a){return 1-Math.sqrt(1-a*a)}function sg(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Ae(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Be(a){var b=[a.a,a.b],c=[a.c,a.d],d=ye(b),e=b[0]*c[0]+b[1]*c[1],f;f=-e;f=(c[0]+=f*b[0],c[1]+=f*b[1],c);f=ye(f)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*va;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*va:0}function ye(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&(a[0]/=b,a[1]/=b),b}function Ee(a,b){var c,d=[],e=[],f=y.transform(a),g=y.transform(b),h=f.translate,k=g.translate,m=f.rotate,l=g.rotate,p=f.skew,n=g.skew,f=f.scale,g=g.scale;return h[0]!=k[0]||h[1]!=k[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:Fb(h[0],k[0])},{i:3,x:Fb(h[1],k[1])})):k[0]||k[1]?d.push("translate("+k+")"):d.push(""),m!=l?(180<m-l?l+=360:180<l-m&&(m+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:Fb(m,l)})):l&&d.push(d.pop()+"rotate("+l+")"),p!=n?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:Fb(p,n)}):n&&d.push(d.pop()+"skewX("+n+")"),f[0]!=g[0]||f[1]!=g[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:Fb(f[0],g[0])},{i:c-2,x:Fb(f[1],g[1])})):(1!=g[0]||1!=g[1])&&d.push(d.pop()+"scale("+g+")"),c=e.length,function(a){for(var b,f=-1;++f<c;){d[(b=e[f]).i]=b.x(a)}return d.join("")}}function hg(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function tg(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function ug(a){var b=a.source;a=a.target;var c;var d=a;if(b===d){c=b}else{c=Pe(b);for(var d=Pe(d),e=c.pop(),f=d.pop(),g=null;e===f;){g=e,e=c.pop(),f=d.pop()}c=g}for(d=[b];b!==c;){b=b.parent,d.push(b)}for(b=d.length;a!==c;){d.splice(b,0,a),a=a.parent}return d}function Pe(a){for(var b=[],c=a.parent;null!=c;){b.push(a),a=c,c=c.parent}return b.push(a),b}function vg(a){a.fixed|=2}function wg(a){a.fixed&=-7}function xg(a){a.fixed|=4;a.px=a.x;a.py=a.y}function pg(a){a.fixed&=-5}function Qe(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf){for(var f,g=a.nodes,h=g.length,k=-1;++k<h;){f=g[k],null!=f&&(Qe(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy)}}a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function zc(a,b){return y.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=Ag,a}function yg(a){return a.children}function kg(a){return a.value}function zg(a,b){return b.value-a.value}function Ag(a){return y.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Bg(a){return a.x}function gg(a){return a.y}function Cg(a,b,c){a.y0=b;a.y=c}function Ud(a){return y.range(a.length)}function Vd(a){var b=-1;a=a[0].length;for(var c=[];++b<a;){c[b]=0}return c}function Dg(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c){(b=a[c][1])>e&&(d=c,e=b)}return d}function Eg(a){return a.reduce(Fg,0)}function Fg(a,b){return a+b[1]}function Gg(a,b){return Re(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Re(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;){f[c]=e*c+d}return f}function Hg(a){return[y.min(a),y.max(a)]}function ze(a,b){return a.parent==b.parent?1:2}function Qd(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Pd(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Pc(a,b){var c=a.children;if(c&&(e=c.length)){for(var d,e,f=-1;++f<e;){0<b(d=Pc(c[f],b),a)&&(a=d)}}return a}function Ig(a,b){return a.x-b.x}function ue(a,b){return b.x-a.x}function Zf(a,b){return a.depth-b.depth}function Eb(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length)){for(var f,g,h=null,G=-1;++G<g;){f=e[G],c(f,h),h=f}}b(a,d)}c(a,null)}function $f(a,b){return a.value-b.value}function Od(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function ve(a,b){a._pack_next=b;b._pack_prev=a}function we(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return 0.999*e*e>c*c+d*d}function xe(a){function b(a){l=Math.min(a.x-a.r,l);p=Math.max(a.x+a.r,p);n=Math.min(a.y-a.r,n);u=Math.max(a.y+a.r,u)}if((c=a.children)&&(m=c.length)){var c,d,e,f,g,h,k,m,l=1/0,p=-1/0,n=1/0,u=-1/0;if(c.forEach(ag),d=c[0],d.x=-d.r,d.y=0,b(d),1<m&&(e=c[1],e.x=e.r,e.y=0,b(e),2<m)){for(f=c[2],Fe(d,e,f),b(f),Od(d,f),d._pack_prev=f,Od(f,e),e=d._pack_next,g=3;m>g;g++){Fe(d,e,f=c[g]);var x=0,q=1,r=1;for(h=e._pack_next;h!==e;h=h._pack_next,q++){if(we(h,f)){x=1;break}}if(1==x){for(k=d._pack_prev;k!==h._pack_prev&&!we(k,f);k=k._pack_prev,r++){}}x?(r>q||q==r&&e.r<d.r?ve(d,e=h):ve(d=k,e),g--):(Od(d,f),e=f,b(f))}}d=(l+p)/2;e=(n+u)/2;for(g=h=0;m>g;g++){f=c[g],f.x-=d,f.y-=e,h=Math.max(h,f.r+Math.sqrt(f.x*f.x+f.y*f.y))}a.r=h;c.forEach(fg)}}function ag(a){a._pack_next=a._pack_prev=a}function fg(a){delete a._pack_next;delete a._pack_prev}function De(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<f;){De(e[a],b,c,d)}}}function Fe(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f,g=g*g,d=d*d;b=0.5+(d-g)/(2*h);g=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else{c.x=a.x+d,c.y=a.y}}function ig(a){return 1+y.max(a,function(a){return a.y})}function jg(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ie(a){var b=a.children;return b&&b.length?Ie(b[0]):a}function Je(a){var b,c=a.children;return c&&(b=c.length)?Je(c[b-1]):a}function Td(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ke(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function pc(a){var b=a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function Oc(a){return a.rangeExtent?a.rangeExtent():pc(a.range())}function og(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function kd(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function bf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Kg}function Lg(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;){e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]))}return function(b){var c=y.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function cf(a,b,c,d){function e(){var k=2<Math.min(a.length,b.length)?Lg:og,m=d?tg:hg;return g=k(a,b,m,c),h=k(b,a,m,dc),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ae)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return y.range.apply(y,ac(a,b))},f.tickFormat=function(b,c){return de(a,b,c)},f.nice=function(b){return kd(a,bf(ac(a,b)[2])),e()},f.copy=function(){return cf(a,b,c,d)},e()}function ee(a,b){return y.rebind(a,b,"range","rangeRound","interpolate","clamp")}function ac(a,b){null==b&&(b=10);var c=pc(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return 0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+0.5*e,c[2]=e,c}function de(a,b,c){var d=-Math.floor(Math.log(ac(a,b)[2])/Math.LN10+0.01);return y.format(c?c.replace(df,function(a,b,c,e,f,g,h,G,k,m){return[b,c,e,f,g,h,G,k||"."+(d-2*("%"===m)),m].join("")}):",."+d+"f")}function ef(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=0<=b[0],a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=kd(d.map(e),c?Math:Mg);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=pc(d),g=[],h=a[0],a=a[1],G=Math.floor(e(h)),k=Math.ceil(e(a)),m=b%1?2:b;if(isFinite(k-G)){if(c){for(;k>G;G++){for(var l=1;m>l;l++){g.push(f(G)*l)}}g.push(f(G))}else{for(g.push(f(G));G++<k;){for(l=m-1;0<l;l--){g.push(f(G)*l)}}}for(G=0;g[G]<h;G++){}for(k=g.length;g[k-1]>a;k--){}g=g.slice(G,k)}return g},g.tickFormat=function(a,b){if(!arguments.length){return ff}2>arguments.length?b=ff:"function"!=typeof b&&(b=y.format(b));var d,h=Math.max(0.1,a/g.ticks().length),G=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(G(e(a)+d))<=h?b(a):""}},g.copy=function(){return ef(a.copy(),b,c,d)},ee(g,a)}function gf(a,b,c){function d(b){return a(e(b))}var e=ld(b),f=ld(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return y.range.apply(y,ac(c,a))},d.tickFormat=function(a,b){return de(c,a,b)},d.nice=function(a){return d.domain(kd(c,bf(ac(c,a)[2])))},d.exponent=function(g){return arguments.length?(e=ld(b=g),f=ld(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return gf(a.copy(),b,c)},ee(d,a)}function ld(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function hf(a,b){function c(d){return g[((f.get(d)||"range"===b.t&&f.set(d,a.push(d)))-1)%g.length]}function e(b,c){return y.range(a.length).map(function(a){return b+c*a})}var f,g,h;return c.domain=function(e){if(!arguments.length){return a}a=[];f=new d;for(var g,h=-1,k=e.length;++h<k;){f.has(g=e[h])||f.set(g,a.push(g))}return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(d,f){2>arguments.length&&(f=0);var k=d[0],m=d[1],l=(m-k)/(Math.max(1,a.length-1)+f);return g=e(2>a.length?(k+m)/2:k+l*f/2,l),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(d,f,k){2>arguments.length&&(f=0);3>arguments.length&&(k=f);var m=d[1]<d[0],l=d[m-0],p=(d[1-m]-l)/(a.length-f+2*k);return g=e(l+p*k,p),m&&g.reverse(),h=p*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(d,f,k){2>arguments.length&&(f=0);3>arguments.length&&(k=f);var m=d[1]<d[0],l=d[m-0],p=d[1-m],n=Math.floor((p-l)/(a.length-f+2*k));return g=e(l+Math.round((p-l-(a.length-f)*n)/2),n),m&&g.reverse(),h=Math.round(n*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return pc(b.a[0])},c.copy=function(){return hf(a,b)},c.domain(a)}function jf(a,b){function c(){var f=0,g=b.length;for(e=[];++f<g;){e[f-1]=y.quantile(a,f/g)}return d}function d(a){return isNaN(a=+a)?void 0:b[y.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return !isNaN(a)}).sort(y.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]},d.copy=function(){return jf(a,b)},c()}function kf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return kf(a,b,c)},e()}function lf(a,b){function c(d){return d>=d?b[y.bisect(a,d)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return lf(a,b)},c}function mf(a){function b(a){return +a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return y.range.apply(y,ac(a,b))},b.tickFormat=function(b,c){return de(a,b,c)},b.copy=function(){return mf(a)},b}function Ng(a){return a.innerRadius}function Og(a){return a.outerRadius}function nf(a){return a.startAngle}function of(a){return a.endAngle}function pf(a){for(var b,c,d,e=-1,f=a.length;++e<f;){b=a[e],c=b[0],d=b[1]+kc,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d)}return a}function qf(a){function b(k){function na(){q.push("M",h(a(w),p),l,m(a(r.reverse()),p),"Z")}for(var n,u,x,q=[],r=[],w=[],B=-1,C=k.length,A=W(c),t=W(e),v=c===d?function(){return u}:W(d),E=e===f?function(){return x}:W(f);++B<C;){g.call(this,n=k[B],B)?(r.push([u=+A.call(this,n,B),x=+t.call(this,n,B)]),w.push([+v.call(this,n,B),+E.call(this,n,B)])):r.length&&(na(),r=[],w=[])}return r.length&&na(),q.length?q.join(""):null}var c=rb,d=rb,e=0,f=Bb,g=Hb,h=Ya,k=h.key,m=h,l="L",p=0.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(k="function"==typeof a?h=a:(h=be.get(a)||Ya).key,m=h.reverse||h,l=h.closed?"M":"L",b):k},b.tension=function(a){return arguments.length?(p=a,b):p},b}function Pg(a){return a.radius}function rf(a){return[a.x,a.y]}function Qg(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+kc;return[c*Math.cos(b),c*Math.sin(b)]}}function Rg(){return 64}function Sg(){return"circle"}function sf(a){a=Math.sqrt(a/ea);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Kc(a,b){return bd(a,Fa),a.id=b,a}function fe(a,b,c,d){var e=a.id;return I(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Tg(a){return null==a&&(a=""),function(){this.textContent=a}}function md(a,b,c,e){var f=a.__transition__||(a.__transition__={active:0,count:0}),g=f[c];if(!g){var h=e.time,g=f[c]={tween:new d,time:h,ease:e.ease,delay:e.delay,duration:e.duration};++f.count;y.timer(function(d){function e(d){return f.active>c?m():(f.active=c,g.event&&g.event.start.call(a,l,b),g.tween.forEach(function(c,d){(d=d.call(a,l,b))&&x.push(d)}),k(d||1)?1:void cb(k,n,h))}function k(d){if(f.active!==c){return m()}d/=u;for(var e=p(d),h=x.length;0<h;){x[--h].call(a,e)}return 1<=d?(g.event&&g.event.end.call(a,l,b),m()):void 0}function m(){return --f.count?delete f[c]:delete a.__transition__,1}var l=a.__data__,p=g.ease,n=g.delay,u=g.duration,x=[];return d>=n?e(d-n):void cb(e,n,h)},0,h)}}function tf(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function uf(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Mb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function lc(a,b,c){function d(b){var c=a(b),e=f(c,1);return e-b>b-c?c:e}function e(c){return b(c=a(new Na(c-1)),1),c}function f(a,c){return b(a=new Na(+a),c),a}function g(a,d,f){a=e(a);var h=[];if(1<f){for(;d>a;){c(a)%f||h.push(new Date(+a)),b(a,1)}}else{for(;d>a;){h.push(new Date(+a)),b(a,1)}}return h}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var h=a.utc=nd(a);return h.floor=h,h.round=nd(d),h.ceil=nd(e),h.offset=nd(f),h.range=function(a,b,c){try{Na=Mb;var d=new Mb;return d._=a,g(d,b,c)}finally{Na=Date}},a}function nd(a){return function(b,c){try{Na=Mb;var d=new Mb;return d._=b,a(d,c)._}finally{Na=Date}}}function Ua(a){function b(d){for(var e,f,g,h=[],k=-1,m=0;++k<c;){37===a.charCodeAt(k)&&(h.push(a.substring(m,k)),null!=(f=vf[e=a.charAt(++k)])&&(e=a.charAt(++k)),(g=od[e])&&(e=g(d,null==f?"e"===e?" ":"0":f)),h.push(e),m=k+1)}return h.push(a.substring(m,k)),h.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(pd(c,a,b,0)!=b.length){return null}"p" in c&&(c.H=c.H%12+12*c.p);b=null!=c.Z&&Na!==Mb;var d=new (b?Mb:Na);return"j" in c?d.setFullYear(c.y,0,c.j):"w" in c&&("W" in c||"U" in c)?(d.setFullYear(c.y,0,1),d.setFullYear(c.y,0,"W" in c?(c.w+6)%7+7*c.W-(d.getDay()+5)%7:c.w+7*c.U-(d.getDay()+6)%7)):d.setFullYear(c.y,c.m,c.d),d.setHours(c.H+Math.floor(c.Z/100),c.M+c.Z%100,c.S,c.L),b?d._:d},b.toString=function(){return a},b}function pd(a,b,c,d){for(var e,f,g,h=0,k=b.length,m=c.length;k>h;){if(d>=m){return -1}if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=Ug[g in vf?b.charAt(h++):g],!f||0>(d=f(a,c,d))){return -1}}else{if(e!=c.charCodeAt(d++)){return -1}}}return d}function qd(a){return new RegExp("^(?:"+a.map(y.requote).join("|")+")","i")}function rd(a){for(var b=new d,c=-1,e=a.length;++c<e;){b.set(a[c].toLowerCase(),c)}return b}function Va(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function wf(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function xf(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Ab(a){function b(a){try{Na=Mb;var d=new Na;return d._=a,c(d)}finally{Na=Date}}var c=Ua(a);return b.parse=function(a){try{Na=Mb;var b=c.parse(a);return b&&b._}finally{Na=Date}},b.toString=c.toString,b}function ge(a){return a.toISOString()}function he(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,f=y.bisect(sd,d);return f==sd.length?[b.year,ac(a.map(function(a){return a/31536000000}),c)[2]]:f?b[d/sd[f-1]<sd[f]/d?f-1:f]:[Vg,ac(a,c)[2]]}return d.invert=function(b){return mc(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(mc)},d.nice=function(a,b){function c(d){return !isNaN(d)&&!a.range(d,mc(+d+1),b).length}var f=d.domain(),g=pc(f),g=null==a?e(g,10):"number"==typeof a&&e(g,a);return g&&(a=g[0],b=g[1]),d.domain(kd(f,1<b?{floor:function(b){for(;c(b=a.floor(b));){b=mc(b-1)}return b},ceil:function(b){for(;c(b=a.ceil(b));){b=mc(+b+1)}return b}}:a))},d.ticks=function(a,b){var c=pc(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],mc(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return he(a.copy(),b,c)},ee(d,a)}function mc(a){return new Date(a)}function yf(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);){d=a[--c]}return d[0](b)}}function Wg(a){return JSON.parse(a.responseText)}function Xg(a){var b=gb.createRange();return b.selectNode(gb.body),b.createContextualFragment(a.responseText)}var y={version:"3.3.6"};Date.now||(Date.now=function(){return +new Date});var Yg=[].slice,Vb=function(a){return Yg.call(a)},gb=document,Wb=gb.documentElement,Ma=window;try{Vb(Wb.childNodes)[0].nodeType}catch(G){Vb=function(a){for(var b=a.length,c=Array(b);b--;){c[b]=a[b]}return c}}try{gb.createElement("div").style.setProperty("opacity",0,"")}catch(G){var td=Ma.Element.prototype,Zg=td.setAttribute,$g=td.setAttributeNS,zf=Ma.CSSStyleDeclaration.prototype,ah=zf.setProperty;td.setAttribute=function(a,b){Zg.call(this,a,b+"")};td.setAttributeNS=function(a,b,c){$g.call(this,a,b,c+"")};zf.setProperty=function(a,b,c){ah.call(this,a,b+"",c)}}y.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN};y.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN};y.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);){c=void 0}for(;++e<f;){null!=(d=a[e])&&c>d&&(c=d)}}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);){c=void 0}for(;++e<f;){null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}}return c};y.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);){c=void 0}for(;++e<f;){null!=(d=a[e])&&d>c&&(c=d)}}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);){c=void 0}for(;++e<f;){null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}}return c};y.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);){c=e=void 0}for(;++f<g;){null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);){c=void 0}for(;++f<g;){null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}}return[c,e]};y.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length){for(;++f<e;){isNaN(c=+a[f])||(d+=c)}}else{for(;++f<e;){isNaN(c=+b.call(a,a[f],f))||(d+=c)}}return d};y.mean=function(b,c){var d,e=b.length,f=0,g=-1,h=0;if(1===arguments.length){for(;++g<e;){a(d=b[g])&&(f+=(d-f)/++h)}}else{for(;++g<e;){a(d=c.call(b,b[g],g))&&(f+=(d-f)/++h)}}return h?f:void 0};y.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};y.median=function(b,c){return 1<arguments.length&&(b=b.map(c)),b=b.filter(a),b.length?y.quantile(b.sort(y.ascending),0.5):void 0};y.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var Af=y.bisector(function(a){return a});y.bisectLeft=Af.left;y.bisect=y.bisectRight=Af.right;y.shuffle=function(a){for(var b,c,d=a.length;d;){c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b}return a};y.permute=function(a,b){for(var c=b.length,d=Array(c);c--;){d[c]=a[b[c]]}return d};y.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);c>b;){e[b]=[d,d=a[++b]]}return e};y.zip=function(){if(!(e=arguments.length)){return[]}for(var a=-1,c=y.min(arguments,b),d=Array(c);++a<c;){for(var e,f=-1,g=d[a]=Array(e);++f<e;){g[f]=arguments[f][a]}}return d};y.transpose=function(a){return y.zip.apply(y,a)};y.keys=function(a){var b=[],c;for(c in a){b.push(c)}return b};y.values=function(a){var b=[],c;for(c in a){b.push(a[c])}return b};y.entries=function(a){var b=[],c;for(c in a){b.push({key:c,value:a[c]})}return b};y.merge=function(a){return Array.prototype.concat.apply([],a)};y.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0===(b-a)/c){throw Error("infinite range")}var d,e=[],f;for(d=1;Math.abs(c)*d%1;){d*=10}f=d;var g=-1;if(a*=f,b*=f,c*=f,0>c){for(;(d=a+c*++g)>b;){e.push(d/f)}}else{for(;(d=a+c*++g)<b;){e.push(d/f)}}return e};y.map=function(a){var b=new d;if(a instanceof d){a.forEach(function(a,c){b.set(a,c)})}else{for(var c in a){b.set(c,a[c])}}return b};c(d,{has:function(a){return bc+a in this},get:function(a){return this[bc+a]},set:function(a,b){return this[bc+a]=b},remove:function(a){return a=bc+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this){b.charCodeAt(0)===Bf&&a.call(this,b.substring(1),this[b])}}});var bc="\x00",Bf=bc.charCodeAt(0);y.nest=function(){function a(b,h,k){if(k>=g.length){return e?e.call(f,h):c?h.sort(c):h}for(var m,l,p,n,na=-1,u=h.length,x=g[k++],q=new d;++na<u;){(n=q.get(m=x(l=h[na])))?n.push(l):q.set(m,[l])}return b?(l=b(),p=function(c,d){l.set(c,a(b,d,k))}):(l={},p=function(c,d){l[c]=a(b,d,k)}),q.forEach(p),l}function b(a,c){if(c>=g.length){return a}var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,e,f={},g=[],h=[];return f.map=function(b,c){return a(c,b,0)},f.entries=function(c){return b(a(y.map,c,0),0)},f.key=function(a){return g.push(a),f},f.sortKeys=function(a){return h[g.length-1]=a,f},f.sortValues=function(a){return c=a,f},f.rollup=function(a){return e=a,f},f};y.set=function(a){var b=new e;if(a){for(var c=0,d=a.length;d>c;++c){b.add(a[c])}}return b};c(e,{has:function(a){return bc+a in this},add:function(a){return this[bc+a]=!0,a},remove:function(a){return a=bc+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this){b.charCodeAt(0)===Bf&&a.call(this,b.substring(1))}}});y.behavior={};y.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;){a[c=arguments[d]]=g(a,b,b[c])}return a};var Se="webkit ms moz Moz o O".split(" ");y.dispatch=function(){for(var a=new l,b=-1,c=arguments.length;++b<c;){a[arguments[b]]=f(a)}return a};l.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a){return 2>arguments.length?this[a].on(d):this[a].on(d,b)}if(2===arguments.length){if(null==b){for(a in this){this.hasOwnProperty(a)&&this[a].on(d,null)}}return this}};y.event=null;y.requote=function(a){return a.replace(bh,"\\$&")};var bh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,bd={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b){a[c]=b[c]}},Xd=function(a,b){return b.querySelector(a)},Yd=function(a,b){return b.querySelectorAll(a)},ch=Wb[h(Wb,"matchesSelector")],Te=function(a,b){return ch.call(a,b)};"function"==typeof Sizzle&&(Xd=function(a,b){return Sizzle(a,b)[0]||null},Yd=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Te=Sizzle.matchesSelector);y.selection=function(){return Cf};var qa=y.selection.prototype=[];qa.select=function(a){var b,c,d,e,f=[];a=m(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);b.parentNode=(d=this[g]).parentNode;for(var k=-1,l=d.length;++k<l;){(e=d[k])?(b.push(c=a.call(e,e.__data__,k,g)),c&&"__data__" in e&&(c.__data__=e.__data__)):b.push(null)}}return t(f)};qa.selectAll=function(a){var b,c,d=[];a=u(a);for(var e=-1,f=this.length;++e<f;){for(var g=this[e],h=-1,k=g.length;++h<k;){(c=g[h])&&(d.push(b=Vb(a.call(c,c.__data__,h,e))),b.parentNode=c)}}return t(d)};var ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:ie,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),ie.hasOwnProperty(c)?{space:ie[c],local:a}:a}};qa.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=y.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a){this.each(A(b,a[b]))}return this}return this.each(A(a,b))};qa.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList){for(;++e<d;){if(!b.contains(a[e])){return !1}}}else{for(b=c.getAttribute("class");++e<d;){if(!p(a[e]).test(b)){return !1}}}return !0}for(b in a){this.each(B(b,a[b]))}return this}return this.each(B(a,b))};qa.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a){this.each(x(c,a[c],b))}return this}if(2>d){return Ma.getComputedStyle(this.node(),null).getPropertyValue(a)}c=""}return this.each(x(a,b,c))};qa.property=function(a,b){if(2>arguments.length){if("string"==typeof a){return this.node()[a]}for(b in a){this.each(C(b,a[b]))}return this}return this.each(C(a,b))};qa.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};qa.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};qa.append=function(a){return a=E(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};qa.insert=function(a,b){return a=E(a),b=m(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments))})};qa.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};qa.data=function(a,b){function c(a,e){var f,g,h,G=a.length,p=e.length,n=Math.min(G,p),u=Array(p),x=Array(p),q=Array(G);if(b){var r=new d,w=new d,B=[];for(f=-1;++f<G;){n=b.call(g=a[f],g.__data__,f),r.has(n)?q[f]=g:r.set(n,g),B.push(n)}for(f=-1;++f<p;){n=b.call(e,h=e[f],f),(g=r.get(n))?(u[f]=g,g.__data__=h):w.has(n)||(x[f]={__data__:h}),w.set(n,h),r.remove(n)}for(f=-1;++f<G;){r.has(B[f])&&(q[f]=a[f])}}else{for(f=-1;++f<n;){g=a[f],h=e[f],g?(g.__data__=h,u[f]=g):x[f]={__data__:h}}for(;p>f;++f){x[f]={__data__:e[f]}}for(;G>f;++f){q[f]=a[f]}}x.update=u;x.parentNode=u.parentNode=q.parentNode=a.parentNode;k.push(x);m.push(u);l.push(q)}var e,f,g=-1,h=this.length;if(!arguments.length){for(a=Array(h=(e=this[0]).length);++g<h;){(f=e[g])&&(a[g]=f.__data__)}return a}var k=K([]),m=t([]),l=t([]);if("function"==typeof a){for(;++g<h;){c(e=this[g],a.call(e,e.parentNode.__data__,g))}}else{for(;++g<h;){c(e=this[g],a)}}return m.enter=function(){return k},m.exit=function(){return l},m};qa.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};qa.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=D(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);b.parentNode=(c=this[f]).parentNode;for(var h=0,k=c.length;k>h;h++){(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}}return t(e)};qa.order=function(){for(var a=-1,b=this.length;++a<b;){for(var c,d=this[a],e=d.length-1,f=d[e];0<=--e;){(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c)}}return this};qa.sort=function(a){a=H.apply(this,arguments);for(var b=-1,c=this.length;++b<c;){this[b].sort(a)}return this.order()};qa.each=function(a){return I(this,function(b,c,d){a.call(b,b.__data__,c,d)})};qa.call=function(a){var b=Vb(arguments);return a.apply(b[0]=this,b),this};qa.empty=function(){return !this.node()};qa.node=function(){for(var a=0,b=this.length;b>a;a++){for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f){return f}}}return null};qa.size=function(){var a=0;return this.each(function(){++a}),a};var Jb=[];y.selection.enter=K;y.selection.enter.prototype=Jb;Jb.append=qa.append;Jb.empty=qa.empty;Jb.node=qa.node;Jb.call=qa.call;Jb.size=qa.size;Jb.select=function(a){for(var b,c,d,e,f,g=[],h=-1,k=this.length;++h<k;){d=(e=this[h]).update;g.push(b=[]);b.parentNode=e.parentNode;for(var m=-1,l=e.length;++m<l;){(f=e[m])?(b.push(d[m]=c=a.call(e.parentNode,f.__data__,m,h)),c.__data__=f.__data__):b.push(null)}}return t(g)};Jb.insert=function(a,b){return 2>arguments.length&&(b=M(this)),qa.insert.call(this,a,b)};qa.transition=function(){for(var a,b,c=nc||++Df,d=[],e=ud||{time:Date.now(),ease:qg,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],k=-1,m=h.length;++k<m;){(b=h[k])&&md(b,k,c,e),a.push(b)}}return Kc(d,c)};qa.interrupt=function(){return this.each(L)};y.select=function(a){a=["string"==typeof a?Xd(a,gb):a];return a.parentNode=Wb,t([a])};y.selectAll=function(a){a=Vb("string"==typeof a?Yd(a,gb):a);return a.parentNode=Wb,t([a])};var Cf=y.select(Wb);qa.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a){this.each(R(c,a[c],b))}return this}if(2>d){return(d=this.node()["__on"+a])&&d._}c=!1}return this.each(R(a,b,c))};var Zd=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});Zd.forEach(function(a){"on"+a in gb&&Zd.remove(a)});var $d=h(Wb.style,"userSelect"),Jg=0;y.mouse=function(a){return Q(a,r())};var ae=/WebKit/.test(Ma.navigator.userAgent)?-1:0;y.touches=function(a,b){return 2>arguments.length&&(b=r().touches),b?Vb(b).map(function(b){var c=Q(a,b);return c.identifier=b.identifier,c}):[]};y.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,e,f,g){return function(){var b,h=this.parentNode,k=c.of(this,arguments),m=y.event.target,G=a(),l=null==G?"drag":"drag-"+G,p=e(h,G),n=0,u=y.select(Ma).on(f+"."+l,function(){var a=e(h,G),c=a[0]-p[0],d=a[1]-p[1];n=n|c|d;p=a;k({type:"drag",x:a[0]+b[0],y:a[1]+b[1],dx:c,dy:d})}).on(g+"."+l,function(){u.on(f+"."+l,null).on(g+"."+l,null);x(n&&y.event.target===m);k({type:"dragend"})}),x=J();d?(b=d.apply(this,arguments),b=[b.x-p[0],b.y-p[1]]):b=[0,0];k({type:"dragstart"})}}var c=v(a,"drag","dragstart","dragend"),d=null,e=b(k,y.mouse,"mousemove","mouseup"),f=b(function(){return y.event.changedTouches[0].identifier},function(a,b){return y.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},y.rebind(a,c,"on")};var ea=Math.PI,jb=2*ea,Wa=ea/2,aa=0.000001,Ef=aa*aa,ca=ea/180,va=180/ea,vd=Math.SQRT2;y.interpolateZoom=function(a,b){function c(a){var b=a*x;if(u){a=O(n);var g=f/(2*l),m,G=vd*b+n;m=((G=Math.exp(2*G))-1)/(G+1);g*=a*m-Y(n);return[d+g*h,e+g*k,f*a/O(vd*b+n)]}return[d+a*h,e+a*k,f*Math.exp(vd*b)]}var d=a[0],e=a[1],f=a[2],g=b[2],h=b[0]-d,k=b[1]-e,m=h*h+k*k,l=Math.sqrt(m),p=(g*g-f*f+4*m)/(4*f*l),m=(g*g-f*f-4*m)/(4*g*l),n=Math.log(Math.sqrt(p*p+1)-p),u=Math.log(Math.sqrt(m*m+1)-m)-n,x=(u||Math.log(g/f))/vd;return c.duration=1000*x,c};y.behavior.zoom=function(){function a(b){b.on(z,k).on(dh+".zoom",l).on(H,p).on("dblclick.zoom",u).on(I,m)}function b(a){return[(a[0]-E.x)/E.k,(a[1]-E.y)/E.k]}function c(a){E.k=Math.max(D[0],Math.min(D[1],a))}function d(a,b){b=[b[0]*E.k+E.x,b[1]*E.k+E.y];E.x+=a[0]-b[0];E.y+=a[1]-b[1]}function e(){C&&C.domain(B.range().map(function(a){return(a-E.x)/E.k}).map(B.invert));t&&t.domain(A.range().map(function(a){return(a-E.y)/E.k}).map(A.invert))}function f(a){a({type:"zoomstart"})}function g(a){e();a({type:"zoom",scale:E.k,translate:[E.x,E.y]})}function h(a){a({type:"zoomend"})}function k(){var a=this,c=M.of(a,arguments),e=y.event.target,m=0,G=y.select(Ma).on(H,function(){m=1;d(y.mouse(a),l);g(c)}).on(K,function(){G.on(H,Ma===a?p:null).on(K,null);n(m&&y.event.target===e);h(c)}),l=b(y.mouse(a)),n=J();L.call(a);f(c)}function m(){function a(){var c=y.touches(l);return G=E.k,c.forEach(function(a){a.identifier in u&&(u[a.identifier]=b(a))}),c}function e(){for(var b=y.event.changedTouches,f=0,h=b.length;h>f;++f){u[b[f].identifier]=null}h=a();f=Date.now();1===h.length?(500>f-w&&(b=h[0],h=u[b.identifier],c(2*E.k),d(b,h),n(),g(p)),w=f):1<h.length&&(b=h[0],h=h[1],f=b[0]-h[0],b=b[1]-h[1],x=f*f+b*b)}var G,l=this,p=M.of(l,arguments),u={},x=0,q=y.event.changedTouches[0].identifier,r="touchmove.zoom-"+q,B="touchend.zoom-"+q,C=y.select(Ma).on(r,function(){for(var a,b,e,f,h=y.touches(l),k=0,m=h.length;m>k;++k,f=null){if(e=h[k],f=u[e.identifier]){if(b){break}a=e;b=f}}if(f){var n=(n=e[0]-a[0])*n+(n=e[1]-a[1])*n,h=x&&Math.sqrt(n/x);a=[(a[0]+e[0])/2,(a[1]+e[1])/2];b=[(b[0]+f[0])/2,(b[1]+f[1])/2];c(h*G)}w=null;d(a,b);g(p)}).on(B,function(){if(y.event.touches.length){for(var b=y.event.changedTouches,c=0,d=b.length;d>c;++c){delete u[b[c].identifier]}for(var e in u){return void a()}}C.on(r,null).on(B,null);A.on(z,k).on(I,m);t();h(p)}),A=y.select(l).on(z,null).on(I,e),t=J();L.call(l);e();f(p)}function l(){var a=M.of(this,arguments);r?clearTimeout(r):(L.call(this),f(a));r=setTimeout(function(){r=null;h(a)},50);n();var e=q||y.mouse(this);x||(x=b(e));c(Math.pow(2,0.002*wd())*E.k);d(e,x);g(a)}function p(){x=null}function u(){var a=M.of(this,arguments),e=y.mouse(this),k=b(e),m=Math.log(E.k)/Math.LN2;f(a);c(Math.pow(2,y.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(e,k);g(a);h(a)}var x,q,r,w,B,C,A,t,E={x:0,y:0,k:1},F=[960,500],D=Ff,z="mousedown.zoom",H="mousemove.zoom",K="mouseup.zoom",I="touchstart.zoom",M=v(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=M.of(this,arguments),b=E;nc?y.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=F[0],d=c/2,e=F[1]/2,f=y.interpolateZoom([(d-E.x)/E.k,(e-E.y)/E.k,c/E.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=f(b);var h=c/b[2];this.__chart__=E={x:d-b[0]*h,y:e-b[1]*h,k:h};g(a)}}).each("end.zoom",function(){h(a)}):(this.__chart__=E,f(a),g(a),h(a))})},a.translate=function(b){return arguments.length?(E={x:+b[0],y:+b[1],k:E.k},e(),a):[E.x,E.y]},a.scale=function(b){return arguments.length?(E={x:E.x,y:E.y,k:+b},e(),a):E.k},a.scaleExtent=function(b){return arguments.length?(D=null==b?Ff:[+b[0],+b[1]],a):D},a.center=function(b){return arguments.length?(q=b&&[+b[0],+b[1]],a):q},a.size=function(b){return arguments.length?(F=b&&[+b[0],+b[1]],a):F},a.x=function(b){return arguments.length?(C=b,B=b.copy(),E={x:0,y:0,k:1},a):C},a.y=function(b){return arguments.length?(t=b,A=b.copy(),E={x:0,y:0,k:1},a):t},y.rebind(a,M,"on")};var wd,Ff=[0,1/0],dh="onwheel" in gb?(wd=function(){return -y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel" in gb?(wd=function(){return y.event.wheelDelta},"mousewheel"):(wd=function(){return -y.event.detail},"MozMousePixelScroll");la.prototype.toString=function(){return this.rgb()+""};y.hsl=function(a,b,c){return 1===arguments.length?a instanceof sa?oa(a.h,a.s,a.l):Za(""+a,fa,oa):oa(+a,+b,+c)};var je=sa.prototype=new la;je.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),oa(this.h,this.s,this.l/a)};je.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),oa(this.h,this.s,a*this.l)};je.rgb=function(){return xa(this.h,this.s,this.l)};y.hcl=function(a,b,c){return 1===arguments.length?a instanceof ta?new ta(a.h,a.c,a.l):a instanceof ga?q(a.l,a.a,a.b):q((a=Oa((a=y.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ta(+a,+b,+c)};var ke=ta.prototype=new la;ke.brighter=function(a){return new ta(this.h,this.c,Math.min(100,this.l+xd*(arguments.length?a:1)))};ke.darker=function(a){return new ta(this.h,this.c,Math.max(0,this.l-xd*(arguments.length?a:1)))};ke.rgb=function(){return ya(this.h,this.c,this.l).rgb()};y.lab=function(a,b,c){return 1===arguments.length?a instanceof ga?new ga(a.l,a.a,a.b):a instanceof ta?ya(a.l,a.c,a.h):Oa((a=y.rgb(a)).r,a.g,a.b):new ga(+a,+b,+c)};var xd=18,Ue=0.95047,Ve=1,We=1.08883,le=ga.prototype=new la;le.brighter=function(a){return new ga(Math.min(100,this.l+xd*(arguments.length?a:1)),this.a,this.b)};le.darker=function(a){return new ga(Math.max(0,this.l-xd*(arguments.length?a:1)),this.a,this.b)};le.rgb=function(){return ha(this.l,this.a,this.b)};y.rgb=function(a,b,c){return 1===arguments.length?a instanceof eb?Ba(a.r,a.g,a.b):Za(""+a,Ba,xa):Ba(~~a,~~b,~~c)};var yd=eb.prototype=new la;yd.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),Ba(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):Ba(30,30,30)};yd.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Ba(~~(a*this.r),~~(a*this.g),~~(a*this.b))};yd.hsl=function(){return fa(this.r,this.g,this.b)};yd.toString=function(){return"#"+Qa(this.r)+Qa(this.g)+Qa(this.b)};var cd=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cd.forEach(function(a,b){cd.set(a,Ba(b>>16,255&b>>8,255&b))});y.functor=W;y.xhr=Sa(ua);y.dsv=function(a,b){function c(a,e,g){3>arguments.length&&(g=e,e=null);var h=y.xhr(a,b,g);return h.row=function(a){return arguments.length?h.response(null==(e=a)?d:f(a)):e},h.row(e)}function d(a){return c.parse(a.responseText)}function f(a){return function(b){return c.parse(b.responseText,a)}}function g(b){return b.map(h).join(a)}function h(a){return k.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var k=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d){return d(a,c-1)}var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(l>=k){return g}if(e){return e=!1,f}var b=l;if(34===a.charCodeAt(b)){for(var d=b;d++<k;){if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1)){break}++d}}l=d+2;var h=a.charCodeAt(d+1);return 13===h?(e=!0,10===a.charCodeAt(d+2)&&++l):10===h&&(e=!0),a.substring(b+1,d).replace(/""/g,'"')}for(;k>l;){h=a.charCodeAt(l++);d=1;if(10===h){e=!0}else{if(13===h){e=!0,10===a.charCodeAt(l)&&(++l,++d)}else{if(h!==m){continue}}}return a.substring(b,l-d)}return a.substring(b)}for(var d,e,f={},g={},h=[],k=a.length,l=0,G=0;(d=c())!==g;){for(var p=[];d!==f&&d!==g;){p.push(d),d=c()}b&&!(p=b(p,G++))||h.push(p)}return h},c.format=function(b){if(Array.isArray(b[0])){return c.formatRows(b)}var d=new e,f=[];return b.forEach(function(a){for(var b in a){d.has(b)||f.push(d.add(b))}}),[f.map(h).join(a)].concat(b.map(function(b){return f.map(function(a){return h(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(g).join("\n")},c};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var fd,gd,ed,dd,xb,Xe=Ma[h(Ma,"requestAnimationFrame")]||function(a){setTimeout(a,17)};y.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={callback:a,time:c+b,next:null};gd?gd.next=d:fd=d;gd=d;ed||(dd=clearTimeout(dd),ed=1,Xe(ia))};y.timer.flush=function(){sb();ma()};var zd=[3,3],eh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});y.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=y.round(a,Da(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),eh[8+c/3]};y.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};y.format=function(a){a=df.exec(a);var b=a[1]||" ",c=a[2]||">",d=a[3]||"",e=a[4]||"",f=a[5],g=+a[6],h=a[7],k=a[8],m=a[9],l=1,p="",n=!1;switch(k&&(k=+k.substring(1)),(f||"0"===b&&"="===c)&&(f=b="0",c="=",h&&(g-=Math.floor((g-1)/4))),m){case"n":h=!0;m="g";break;case"%":l=100;p="%";m="f";break;case"p":l=100;p="%";m="r";break;case"b":case"o":case"x":case"X":"#"===e&&(e="0"+m.toLowerCase());case"c":case"d":n=!0;k=0;break;case"s":l=-1,m="r"}"#"===e?e="":"$"===e&&(e="$");"r"!=m||k||(m="g");null!=k&&("g"==m?k=Math.max(1,Math.min(21,k)):("e"==m||"f"==m)&&(k=Math.max(0,Math.min(20,k))));var m=fh.get(m)||z,u=f&&h;return function(a){if(n&&a%1){return""}var G=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>l){var x=y.formatPrefix(a,k);a=x.scale(a);p=x.symbol}else{a*=l}a=m(a,k);var q=a.lastIndexOf("."),x=0>q?a:a.substring(0,q),q=0>q?"":"."+a.substring(q+1);!f&&h&&(x=me(x));var r=e.length+x.length+q.length+(u?0:G.length),w=g>r?Array(r=g-r+1).join(b):"";return u&&(x=me(w+x)),G+=e,a=x+q,("<"===c?G+a+w:">"===c?w+G+a:"^"===c?w.substring(0,r>>=1)+G+a+w.substring(r):G+(u?a:w+a))+p}};var df=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,fh=y.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=y.round(a,Da(a,b))).toFixed(Math.max(0,Math.min(20,Da(a*(1+1e-15),b))))}}),me=ua;if(zd){var gh=zd.length,me=function(a){for(var b=a.length,c=[],d=0,e=zd[0];0<b&&0<e;){c.push(a.substring(b-=e,b+e)),e=zd[d=(d+1)%gh]}return c.reverse().join(",")}}y.geo={};ka.prototype={s:0,t:0,add:function(a){Ha(a,this.t,Ad);Ha(Ad.s,this.s,this);this.s?this.t+=Ad.t:this.s=Ad.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ad=new ka;y.geo.stream=function(a,b){a&&Gf.hasOwnProperty(a.type)?Gf[a.type](a,b):T(a,b)};var Gf={Feature:function(a,b){T(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;){T(c[d].geometry,b)}}},Ye={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;){a=c[d],b.point(a[0],a[1],a[2])}},LineString:function(a,b){pa(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;){pa(c[d],b,0)}},Polygon:function(a,b){mb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;){mb(c[d],b)}},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;){T(c[d],b)}}};y.geo.area=function(a){return wc=0,y.geo.stream(a,bb),wc};var wc,jc=new ka,bb={sphere:function(){wc+=4*ea},point:k,lineStart:k,lineEnd:k,polygonStart:function(){jc.reset();bb.lineStart=ub},polygonEnd:function(){var a=2*jc;wc+=0>a?4*ea+a:a;bb.lineStart=bb.lineEnd=bb.point=k}};y.geo.bounds=function(){function a(b,c){C.push(A=[l=b,n=b]);p>c&&(p=c);c>u&&(u=c)}function b(c,d){var e=fb([c*ca,d*ca]);if(w){var f=Ja(w,e),f=Ja([f[1],-f[0],0],f);Ea(f);var f=Pa(f),g=c-x,k=0<g?1:-1,m=f[0]*va*k,g=180<Math.abs(g);g^(m>k*x&&k*c>m)?(f=f[1]*va,f>u&&(u=f)):(m=(m+360)%360-180,g^(m>k*x&&k*c>m))?(f=-f[1]*va,p>f&&(p=f)):(p>d&&(p=d),d>u&&(u=d));g?x>c?h(l,c)>h(l,n)&&(n=c):h(c,n)>h(l,n)&&(l=c):n>=l?(l>c&&(l=c),c>n&&(n=c)):c>x?h(l,c)>h(l,n)&&(n=c):h(c,n)>h(l,n)&&(l=c)}else{a(c,d)}w=e;x=c}function c(){t.point=b}function d(){A[0]=l;A[1]=n;t.point=a;w=null}function e(a,c){if(w){var d=a-x;B+=180<Math.abs(d)?d+(0<d?360:-360):d}else{q=a,r=c}bb.point(a,c);b(a,c)}function f(){bb.lineStart()}function g(){e(q,r);bb.lineEnd();Math.abs(B)>aa&&(l=-(n=180));A[0]=l;A[1]=n;w=null}function h(a,b){return 0>(b-=a)?b+360:b}function k(a,b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var l,p,n,u,x,q,r,w,B,C,A,t={point:a,lineStart:c,lineEnd:d,polygonStart:function(){t.point=e;t.lineStart=f;t.lineEnd=g;B=0;bb.polygonStart()},polygonEnd:function(){bb.polygonEnd();t.point=a;t.lineStart=c;t.lineEnd=d;0>jc?(l=-(n=180),p=-(u=90)):B>aa?u=90:-aa>B&&(p=-90);A[0]=l;A[1]=n}};return function(a){u=n=-(l=p=1/0);C=[];y.geo.stream(a,t);if(a=C.length){C.sort(k);for(var b,c=1,d=C[0],e=[d];a>c;++c){b=C[c],m(b[0],d)||m(b[1],d)?(h(d[0],b[1])>h(d[0],d[1])&&(d[1]=b[1]),h(b[0],d[1])>h(d[0],d[1])&&(d[0]=b[0])):e.push(d=b)}var f,g=-1/0;a=e.length-1;c=0;for(d=e[a];a>=c;d=b,++c){b=e[c],(f=h(d[1],b[0]))>g&&(g=f,l=b[0],n=d[1])}}return C=A=null,1/0===l||1/0===p?[[NaN,NaN],[NaN,NaN]]:[[l,p],[n,u]]}}();y.geo.centroid=function(a){Jc=vc=Kb=Lb=yb=hb=ib=Xa=Xb=Yb=zb=0;y.geo.stream(a,pb);a=Xb;var b=Yb,c=zb,d=a*a+b*b+c*c;return Ef>d&&(a=hb,b=ib,c=Xa,aa>vc&&(a=Kb,b=Lb,c=yb),d=a*a+b*b+c*c,Ef>d)?[NaN,NaN]:[Math.atan2(b,a)*va,U(c/Math.sqrt(d))*va]};var Jc,vc,Kb,Lb,yb,hb,ib,Xa,Xb,Yb,zb,pb={sphere:k,point:wa,lineStart:tb,lineEnd:Ob,polygonStart:function(){pb.lineStart=La},polygonEnd:function(){pb.lineStart=tb}},Ze=$a(Hb,function(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart();b=1},point:function(f,g){var h=0<f?ea:-ea,k=Math.abs(f-c);if(Math.abs(k-ea)<aa){a.point(c,d=0<(d+g)/2?Wa:-Wa),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0}else{if(e!==h&&k>=ea){Math.abs(c-e)<aa&&(c-=e*aa);Math.abs(f-h)<aa&&(f-=h*aa);var m,l,k=Math.sin(c-f);d=Math.abs(k)>aa?Math.atan((Math.sin(d)*(l=Math.cos(g))*Math.sin(f)-Math.sin(g)*(m=Math.cos(d))*Math.sin(c))/(m*l*k)):(d+g)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(h,d);b=0}}a.point(c=f,d=g);e=h},lineEnd:function(){a.lineEnd();c=d=NaN},clean:function(){return 2-b}}},function(a,b,c,d){null==a?(c*=Wa,d.point(-ea,c),d.point(0,c),d.point(ea,c),d.point(ea,0),d.point(ea,-c),d.point(0,-c),d.point(-ea,-c),d.point(-ea,0),d.point(-ea,c)):Math.abs(a[0]-b[0])>aa?(a=(a[0]<b[0]?1:-1)*ea,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-ea,-ea/2]),hd=1000000000;y.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Rc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return Rb(Qb)}).raw=Qb;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function a(f){var g=f[0];f=f[1];return b=null,c(g,f),b||(d(g,f),b)||e(g,f),b}var b,c,d,e,f=y.geo.albers(),g=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,b=(a[1]-c[1])/b;return(0.12<=b&&0.234>b&&-0.425<=d&&-0.214>d?g:0.166<=b&&0.234>b&&-0.214<=d&&-0.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e);c.point(a,e);d.point(a,e)},sphere:function(){b.sphere();c.sphere();d.sphere()},lineStart:function(){b.lineStart();c.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();c.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();c.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();c.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(0.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length){return f.translate()}var m=f.scale(),l=+b[0],p=+b[1];return c=f.translate(b).clipExtent([[l-0.455*m,p-0.238*m],[l+0.455*m,p+0.238*m]]).stream(k).point,d=g.translate([l-0.307*m,p+0.201*m]).clipExtent([[l-0.425*m+aa,p+0.12*m+aa],[l-0.214*m-aa,p+0.234*m-aa]]).stream(k).point,e=h.translate([l-0.205*m,p+0.212*m]).clipExtent([[l-0.214*m+aa,p+0.166*m+aa],[l-0.115*m-aa,p+0.234*m-aa]]).stream(k).point,a},a.scale(1070)};var Bd,id,Cd,Dd,Ed,Fd,Zb={point:k,lineStart:k,lineEnd:k,polygonStart:function(){id=0;Zb.lineStart=Tc},polygonEnd:function(){Zb.lineStart=Zb.lineEnd=Zb.point=k;Bd+=Math.abs(id/2)}},hh={point:function(a,b){Cd>a&&(Cd=a);a>Ed&&(Ed=a);Dd>b&&(Dd=b);b>Fd&&(Fd=b)},lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k},qb={point:nb,lineStart:Vc,lineEnd:rc,polygonStart:function(){qb.lineStart=Cc},polygonEnd:function(){qb.point=nb;qb.lineStart=Vc;qb.lineEnd=rc}};y.geo.transform=function(a){return{stream:function(b){b=new sc(b);for(var c in a){b[c]=a[c]}return b}}};sc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};y.geo.path=function(){function a(b){return b&&("function"==typeof g&&e.pointRadius(+g.apply(this,arguments)),f&&f.valid||(f=d(e)),y.geo.stream(b,f)),e.result()}var b,c,d,e,f,g=4.5;return a.area=function(a){return Bd=0,y.geo.stream(a,d(Zb)),Bd},a.centroid=function(a){return Kb=Lb=yb=hb=ib=Xa=Xb=Yb=zb=0,y.geo.stream(a,d(qb)),zb?[Xb/zb,Yb/zb]:Xa?[hb/Xa,ib/Xa]:yb?[Kb/yb,Lb/yb]:[NaN,NaN]},a.bounds=function(a){return Ed=Fd=-(Cd=Dd=1/0),y.geo.stream(a,d(hh)),[[Cd,Dd],[Ed,Fd]]},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||Wc(c):ua,f=null,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new gc:new Ib(b),"function"!=typeof g&&e.pointRadius(g),f=null,a):c},a.pointRadius=function(b){return arguments.length?(g="function"==typeof b?b:(e.pointRadius(+b),+b),a):g},a.projection(y.geo.albersUsa()).context(null)};y.geo.projection=vb;y.geo.projectionMutator=Dc;(y.geo.equirectangular=function(){return vb(Tb)}).raw=Tb.invert=Tb;y.geo.rotation=function(a){function b(c){return c=a(c[0]*ca,c[1]*ca),c[0]*=va,c[1]*=va,c}return a=cc(a[0]%360*ca,a[1]*ca,2<a.length?a[2]*ca:0),b.invert=function(b){return b=a.invert(b[0]*ca,b[1]*ca),b[0]*=va,b[1]*=va,b},b};Ec.invert=Tb;y.geo.circle=function(){function a(){var b="function"==typeof d?d.apply(this,arguments):d,e=cc(-b[0]*ca,-b[1]*ca,0).invert,f=[];return c(null,null,1,{point:function(a,b){f.push(a=e(a,b));a[0]*=va;a[1]*=va}}),{type:"Polygon",coordinates:[f]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=tc((b=+d)*ca,e*ca),a):b},a.precision=function(d){return arguments.length?(c=tc(b*ca,(e=+d)*ca),a):e},a.angle(90)};y.geo.distance=function(a,b){var c,d=(b[0]-a[0])*ca,e=a[1]*ca,f=b[1]*ca,g=Math.cos(d),h=Math.sin(e),e=Math.cos(e),k=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((c=f*Math.sin(d))*c+(c=e*k-h*f*g)*c),h*k+e*f*g)};y.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return y.range(Math.ceil(f/r)*r,e,r).map(n).concat(y.range(Math.ceil(m/w)*w,k,w).map(u)).concat(y.range(Math.ceil(d/x)*x,c,x).filter(function(a){return Math.abs(a%r)>aa}).map(l)).concat(y.range(Math.ceil(h/q)*q,g,q).filter(function(a){return Math.abs(a%w)>aa}).map(p))}var c,d,e,f,g,h,k,m,l,p,n,u,x=10,q=x,r=90,w=360,B=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[n(f).concat(u(k).slice(1),n(e).reverse().slice(1),u(m).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],m=+b[0][1],k=+b[1][1],f>e&&(b=f,f=e,e=b),m>k&&(b=m,m=k,k=b),a.precision(B)):[[f,m],[e,k]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(B)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(r=+b[0],w=+b[1],a):[r,w]},a.minorStep=function(b){return arguments.length?(x=+b[0],q=+b[1],a):[x,q]},a.precision=function(b){return arguments.length?(B=+b,l=Zc(h,g,90),p=$c(d,c,B),n=Zc(m,k,90),u=$c(f,e,B),a):B},a.majorExtent([[-180,-90+aa],[180,90-aa]]).minorExtent([[-180,-80-aa],[180,80+aa]])};y.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=Z,e=Gc;return a.distance=function(){return y.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a};y.geo.interpolate=function(a,b){return hc(a[0]*ca,a[1]*ca,b[0]*ca,b[1]*ca)};y.geo.length=function(a){return Gd=0,y.geo.stream(a,xc),Gd};var Gd,xc={sphere:k,point:k,lineStart:function(){function a(e,f){var g=Math.sin(f*=ca),h=Math.cos(f),k=Math.abs((e*=ca)-b),m=Math.cos(k);Gd+=Math.atan2(Math.sqrt((k=h*Math.sin(k))*k+(k=d*g-c*h*m)*k),c*g+d*h*m);b=e;c=g;d=h}var b,c,d;xc.point=function(e,f){b=e*ca;c=Math.sin(f*=ca);d=Math.cos(f);xc.point=a};xc.lineEnd=function(){xc.point=xc.lineEnd=k}},lineEnd:k,polygonStart:k,polygonEnd:k},Hf=Ub(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(y.geo.azimuthalEqualArea=function(){return vb(Hf)}).raw=Hf;var If=Ub(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ua);(y.geo.azimuthalEquidistant=function(){return vb(If)}).raw=If;(y.geo.conicConformal=function(){return Rb(uc)}).raw=uc;(y.geo.conicEquidistant=function(){return Rb(Hc)}).raw=Hc;var Jf=Ub(function(a){return 1/a},Math.atan);(y.geo.gnomonic=function(){return vb(Jf)}).raw=Jf;ic.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Wa]};(y.geo.mercator=function(){return ad(ic)}).raw=ic;var Kf=Ub(function(){return 1},Math.asin);(y.geo.orthographic=function(){return vb(Kf)}).raw=Kf;var Lf=Ub(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(y.geo.stereographic=function(){return vb(Lf)}).raw=Lf;Ic.invert=function(a,b){return[Math.atan2(Y(a),Math.cos(b)),U(Math.sin(b)/O(a))]};(y.geo.transverseMercator=function(){return ad(Ic)}).raw=Ic;y.geom={};y.svg={};y.svg.line=function(){return da(ua)};var be=y.map({linear:Ya,"linear-closed":function(a){return Ya(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;){e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1])}return 1<c&&e.push("H",d[0]),e.join("")},"step-before":Jd,"step-after":Kd,basis:te,"basis-open":function(a){if(4>a.length){return Ya(a)}for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;){b=a[d],f.push(b[0]),g.push(b[1])}c.push(db($b,f)+","+db($b,g));for(--d;++d<e;){b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Md(c,f,g)}return c.join("")},"basis-closed":function(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];4>++d;){c=a[d%e],g.push(c[0]),h.push(c[1])}b=[db($b,g),",",db($b,h)];for(--d;++d<f;){c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Md(b,g,h)}return b.join("")},bundle:function(a,b){var c=a.length-1;if(c){for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,k=a[c][1]-g,m=-1;++m<=c;){d=a[m],e=m/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*k)}}return te(a)},cardinal:function(a,b){return 3>a.length?Ya(a):a[0]+Lc(a,Ld(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ya(a):a[1]+Lc(a.slice(1,a.length-1),Ld(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ya(a):a[0]+Lc((a.push(a[0]),a),Ld([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length){a=Ya(a)}else{var b=a[0],c,d,e,f,g=[],h;c=0;h=a.length-1;for(var k=[],m=a[1],l=k[0]=Nd(a[0],m);++c<h;){k[c]=(l+(l=Nd(m,m=a[c+1])))/2}h=(k[c]=l,k);k=-1;for(m=a.length-1;++k<m;){c=Nd(a[k],a[k+1]),Math.abs(c)<aa?h[k]=h[k+1]=0:(d=h[k]/c,e=h[k+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),h[k]=f*d,h[k+1]=f*e))}for(k=-1;++k<=m;){f=(a[Math.min(m,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+h[k]*h[k])),g.push([f||0,h[k]*f||0])}a=b+Lc(a,g)}return a}});be.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var $e=[0,2/3,1/3,0],af=[0,1/3,2/3,0],$b=[0,1/6,2/3,1/6];y.geom.hull=function(a){function b(a){if(3>a.length){return[]}var e,f,g,h,k,m,l,p,n,u;p=W(c);n=W(d);u=a.length;var x=u-1,G=[],q=[],r=0;if(p===rb&&d===Bb){e=a}else{for(g=0,e=[];u>g;++g){e.push([+p.call(this,f=a[g],g),+n.call(this,f,g)])}}for(g=1;u>g;++g){(e[g][1]<e[r][1]||e[g][1]==e[r][1]&&e[g][0]<e[r][0])&&(r=g)}for(g=0;u>g;++g){g!==r&&(k=e[g][1]-e[r][1],h=e[g][0]-e[r][0],G.push({angle:Math.atan2(k,h),index:g}))}G.sort(function(a,b){return a.angle-b.angle});u=G[0].angle;n=G[0].index;p=0;for(g=1;x>g;++g){if(f=G[g].index,u==G[g].angle){if(h=e[n][0]-e[r][0],k=e[n][1]-e[r][1],m=e[f][0]-e[r][0],l=e[f][1]-e[r][1],h*h+k*k>=m*m+l*l){G[g].index=-1;continue}G[p].index=-1}u=G[g].angle;p=g;n=f}q.push(r);for(f=g=0;2>g;++f){-1<G[f].index&&(q.push(G[f].index),g++)}for(g=q.length;x>f;++f){if(!(0>G[f].index)){for(;!Yf(q[g-2],q[g-1],G[f].index,e);){--g}q[g++]=G[f].index}}e=[];for(--g;0<=g;--g){e.push(a[q[g]])}return e}var c=rb,d=Bb;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)};y.geom.polygon=function(a){return bd(a,Hd),a};var Hd=y.geom.polygon.prototype=[];Hd.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;){a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1]}return 0.5*e};Hd.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;){b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c}return[f*a,g*a]};Hd.clip=function(a){for(var b,c,d,e,f,g,h=He(a),k=-1,m=this.length-He(this),l=this[m-1];++k<m;){b=a.slice();a.length=0;e=this[k];f=b[(d=b.length-h)-1];for(c=-1;++c<d;){g=b[c],Bc(g,l,e)?(Bc(f,l,e)||a.push(Ge(f,g,l,e)),a.push(g)):Bc(f,l,e)&&a.push(Ge(f,g,l,e)),f=g}h&&a.push(a[0]);l=e}return a};y.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return Sd(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)});b.sort(function(a,b){return a.angle-b.angle});for(var h=0,k=b.length-1;k>h;h++){c.push([e,b[h],b[h+1]])}}),c};y.geom.voronoi=function(a){function b(a){var f,g,h,k=a.map(function(){return[]}),m=W(c),l=W(d),p=a.length;if(m===rb&&l===Bb){f=a}else{for(f=Array(p),h=0;p>h;++h){f[h]=[+m.call(this,g=a[h],h),+l.call(this,g,h)]}}if(Sd(f,function(a){var b,c,d,e,f,g;1===a.a&&0<=a.b?(b=a.ep.r,c=a.ep.l):(b=a.ep.l,c=a.ep.r);1===a.a?(f=b?b.y:-1000000,d=a.c-a.b*f,g=c?c.y:1000000,e=a.c-a.b*g):(d=b?b.x:-1000000,f=a.c-a.a*d,e=c?c.x:1000000,g=a.c-a.a*e);b=[d,f];e=[e,g];k[a.region.l.index].push(b,e);k[a.region.r.index].push(b,e)}),k=k.map(function(a,b){var c=f[b][0],d=f[b][1],e=a.map(function(a){return Math.atan2(a[0]-c,a[1]-d)}),g=y.range(a.length).sort(function(a,b){return e[a]-e[b]});return g.filter(function(a,b){return !b||e[a]-e[g[b-1]]>aa}).map(function(b){return a[b]})}),k.forEach(function(a,b){var c=a.length;if(!c){return a.push([-1000000,-1000000],[-1000000,1000000],[1000000,1000000],[1000000,-1000000])}if(!(2<c)){var d=f[b],e=a[0],g=a[1],c=d[0],d=d[1],h=e[0],e=e[1],k=g[0],m=g[1],l=Math.abs(k-h),g=m-e;Math.abs(g)<aa?(c=e>d?-1000000:1000000,a.push([-1000000,c],[1000000,c])):aa>l?(c=h>c?-1000000:1000000,a.push([c,-1000000],[c,1000000])):(c=(h-c)*(m-e)>(k-h)*(e-d)?1000000:-1000000,d=Math.abs(g)-l,Math.abs(d)<aa?a.push([0>g?c:-c,c]):(0<d&&(c*=-1),a.push([-1000000,c],[1000000,c])))}}),e){for(h=0;p>h;++h){e.clip(k[h])}}for(h=0;p>h;++h){k[h].point=a[h]}return k}var c=rb,d=Bb,e=null;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.clipExtent=function(a){if(!arguments.length){return e&&[e[0],e[2]]}if(null==a){e=null}else{var c=+a[0][0],d=+a[0][1],f=+a[1][0],g=+a[1][1];e=y.geom.polygon([[c,d],[c,g],[f,g],[f,d]])}return b},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):e&&e[2]},b.links=function(a){var b,e,f,g=a.map(function(){return[]}),h=[],k=W(c),m=W(d),l=a.length;if(k===rb&&m===Bb){b=a}else{for(b=Array(l),f=0;l>f;++f){b[f]=[+k.call(this,e=a[f],f),+m.call(this,e,f)]}}return Sd(b,function(b){var c=b.region.l.index;b=b.region.r.index;g[c][b]||(g[c][b]=g[b][c]=!0,h.push({source:a[c],target:a[b]}))}),h},b.triangles=function(a){if(c===rb&&d===Bb){return y.geom.delaunay(a)}for(var b,e=Array(k),f=W(c),g=W(d),h=-1,k=a.length;++h<k;){(e[h]=[+f.call(this,b=a[h],h),+g.call(this,b,h)]).data=b}return y.geom.delaunay(e).map(function(a){return a.map(function(a){return a.data})})},b)};var ce={l:"r",r:"l"};y.geom.quadtree=function(a,b,c,d,e){function f(a){function m(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d)){if(a.leaf){var k=a.x,p=a.y;if(null!=k){if(!(0.01>Math.abs(k-c)+Math.abs(p-d))){var n=a.point;a.x=a.y=a.point=null;l(a,n,k,p,e,f,g,h)}l(a,b,c,d,e,f,g,h)}else{a.x=c,a.y=d,a.point=b}}else{l(a,b,c,d,e,f,g,h)}}}function l(a,b,c,d,e,f,g,h){var k=0.5*(e+g),p=0.5*(f+h),n=c>=k,u=d>=p,x=(u<<1)+n;a.leaf=!1;a=a.nodes[x]||(a.nodes[x]=Le());n?e=k:g=k;u?f=p:h=p;m(a,b,c,d,e,f,g,h)}var p,n,u,x,q,G,r,w,B,C=W(h),A=W(k);if(null!=b){G=b,r=c,w=d,B=e}else{if(w=B=-(G=r=1/0),n=[],u=[],q=a.length,g){for(x=0;q>x;++x){p=a[x],p.x<G&&(G=p.x),p.y<r&&(r=p.y),p.x>w&&(w=p.x),p.y>B&&(B=p.y),n.push(p.x),u.push(p.y)}}else{for(x=0;q>x;++x){var t=+C(p=a[x],x);p=+A(p,x);G>t&&(G=t);r>p&&(r=p);t>w&&(w=t);p>B&&(B=p);n.push(t);u.push(p)}}}t=w-G;p=B-r;t>p?B=r+t:w=G+p;var E=Le();if(E.add=function(a){m(E,a,+C(a,++x),+A(a,x),G,r,w,B)},E.visit=function(a){Ac(a,E,G,r,w,B)},x=-1,null==b){for(;++x<q;){m(E,a[x],n[x],u[x],G,r,w,B)}--x}else{a.forEach(E.add)}return n=u=a=p=null,E}var g,h=rb,k=Bb;return(g=arguments.length)?(h=lg,k=ng,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(k=a,f):k},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)};y.interpolateRgb=Rd;y.interpolateObject=Me;y.interpolateNumber=Fb;y.interpolateString=Ce;var jd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;y.interpolate=dc;y.interpolators=[function(a,b){var c=typeof b;return("string"===c?cd.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Rd:Ce:b instanceof la?Rd:"object"===c?Array.isArray(b)?Nc:Me:Fb)(a,b)}];y.interpolateArray=Nc;var Mf=function(){return ua},ih=y.map({linear:Mf,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return cg},cubic:function(){return bg},sin:function(){return dg},exp:function(){return eg},circle:function(){return rg},elastic:function(a,b){var c;return 2>arguments.length&&(b=0.45),arguments.length?c=b/jb*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*jb/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return sg}}),jh=y.map({"in":ua,out:Ne,"in-out":Oe,"out-in":function(a){return Oe(Ne(a))}});y.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=ih.get(c)||Mf,b=jh.get(b)||ua,mg(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};y.interpolateHcl=function(a,b){a=y.hcl(a);b=y.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return ya(c+f*a,d+g*a,e+h*a)+""}};y.interpolateHsl=function(a,b){a=y.hsl(a);b=y.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return xa(c+f*a,d+g*a,e+h*a)+""}};y.interpolateLab=function(a,b){a=y.lab(a);b=y.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ha(c+f*a,d+g*a,e+h*a)+""}};y.interpolateRound=Ae;y.transform=function(a){var b=gb.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Be(c?c.matrix:kh)})(a)};Be.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var kh={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=Ee;y.layout={};y.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;){b.push(ug(a[c]))}return b}};y.layout.chord=function(){function a(){var m,p,n,u,x,q={},G=[],r=y.range(f),w=[];c=[];d=[];m=0;for(u=-1;++u<f;){p=0;for(x=-1;++x<f;){p+=e[u][x]}G.push(p);w.push(y.range(f));m+=p}g&&r.sort(function(a,b){return g(G[a],G[b])});h&&w.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})});m=(jb-l*f)/m;p=0;for(u=-1;++u<f;){n=p;for(x=-1;++x<f;){var B=r[u],C=w[B][x],A=e[B][C],t=p,E=p+=A*m;q[B+"-"+C]={index:B,subindex:C,startAngle:t,endAngle:E,value:A}}d[B]={index:B,startAngle:n,endAngle:p,value:(p-n)/m};p+=l}for(u=-1;++u<f;){for(x=u-1;++x<f;){m=q[u+"-"+x],p=q[x+"-"+u],(m.value||p.value)&&c.push(m.value<p.value?{source:p,target:m}:{source:m,target:p})}}k&&b()}function b(){c.sort(function(a,b){return k((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,k,m={},l=0;return m.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,m):e},m.padding=function(a){return arguments.length?(l=a,c=d=null,m):l},m.sortGroups=function(a){return arguments.length?(g=a,c=d=null,m):g},m.sortSubgroups=function(a){return arguments.length?(h=a,c=null,m):h},m.sortChords=function(a){return arguments.length?(k=a,c&&b(),m):k},m.chords=function(){return c||a(),c},m.groups=function(){return d||a(),d},m};y.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y,g=1/Math.sqrt(d*d+f*f);if(q>(e-c)*g){return c=a.charge*g*g,b.px-=d*c,b.py-=f*c,!0}a.point&&isFinite(g)&&(c=a.pointCharge*g*g,b.px-=d*c,b.py-=f*c)}return !a.charge}}function b(a){a.px=y.event.x;a.py=y.event.y;h.resume()}var c,d,e,f,g,h={},k=y.dispatch("start","tick","end"),m=[1,1],l=0.9,p=lh,n=mh,u=-30,x=0.1,q=0.8,r=[],w=[];return h.tick=function(){if(0.005>(d*=0.99)){return k.end({type:"end",alpha:d=0}),!0}var b,c,h,p,n,q,B,C,A=r.length,t=w.length;for(c=0;t>c;++c){h=w[c],b=h.source,p=h.target,B=p.x-b.x,C=p.y-b.y,(n=B*B+C*C)&&(n=d*f[c]*((n=Math.sqrt(n))-e[c])/n,B*=n,C*=n,p.x-=B*(q=b.weight/(p.weight+b.weight)),p.y-=C*q,b.x+=B*(q=1-q),b.y+=C*q)}if((q=d*x)&&(B=m[0]/2,C=m[1]/2,c=-1,q)){for(;++c<A;){h=r[c],h.x+=(B-h.x)*q,h.y+=(C-h.y)*q}}if(u){for(Qe(b=y.geom.quadtree(r),d,g),c=-1;++c<A;){(h=r[c]).fixed||b.visit(a(h))}}for(c=-1;++c<A;){h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*l,h.y-=(h.py-(h.py=h.y))*l)}k.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(w=a,h):w},h.size=function(a){return arguments.length?(m=a,h):m},h.linkDistance=function(a){return arguments.length?(p="function"==typeof a?a:+a,h):p},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.friction=function(a){return arguments.length?(l=+a,h):l},h.charge=function(a){return arguments.length?(u="function"==typeof a?a:+a,h):u},h.gravity=function(a){return arguments.length?(x=+a,h):x},h.theta=function(a){return arguments.length?(q=+a,h):q},h.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(k.start({type:"start",alpha:d=a}),y.timer(h.tick)),h):d},h.start=function(){function a(e,f){var g,h;if(!d){d=[];for(c=0;l>c;++c){d[c]=[]}for(c=0;x>c;++c){g=w[c],d[g.source.index].push(g.target),d[g.target.index].push(g.source)}}h=d[b];for(var k=-1,m=h.length;++k<m;){if(!isNaN(g=h[k][e])){return g}}return Math.random()*f}var b,c,d,k,l=r.length,x=w.length,q=m[0],G=m[1];for(b=0;l>b;++b){(k=r[b]).index=b,k.weight=0}for(b=0;x>b;++b){k=w[b],"number"==typeof k.source&&(k.source=r[k.source]),"number"==typeof k.target&&(k.target=r[k.target]),++k.source.weight,++k.target.weight}for(b=0;l>b;++b){k=r[b],isNaN(k.x)&&(k.x=a("x",q)),isNaN(k.y)&&(k.y=a("y",G)),isNaN(k.px)&&(k.px=k.x),isNaN(k.py)&&(k.py=k.y)}if(e=[],"function"==typeof p){for(b=0;x>b;++b){e[b]=+p.call(this,w[b],b)}}else{for(b=0;x>b;++b){e[b]=p}}if(f=[],"function"==typeof n){for(b=0;x>b;++b){f[b]=+n.call(this,w[b],b)}}else{for(b=0;x>b;++b){f[b]=n}}if(g=[],"function"==typeof u){for(b=0;l>b;++b){g[b]=+u.call(this,r[b],b)}}else{for(b=0;l>b;++b){g[b]=u}}return h.resume()},h.resume=function(){return h.alpha(0.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=y.behavior.drag().origin(ua).on("dragstart.force",vg).on("drag.force",b).on("dragend.force",wg)),arguments.length?void this.on("mouseover.force",xg).on("mouseout.force",pg).call(c):c},y.rebind(h,k,"on")};var lh=20,mh=1;y.layout.hierarchy=function(){function a(b,g,h){var k=e.call(c,b,g);if(b.depth=g,h.push(b),k&&(m=k.length)){for(var m,l=-1,p=b.children=[],n=0,u=g+1;++l<m;){g=a(k[l],u,h),g.parent=b,p.push(g),n+=g.value}d&&p.sort(d);f&&(b.value=n)}else{f&&(b.value=+f.call(c,b,g)||0)}return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length)){for(var h,k=-1,m=d+1;++k<h;){g+=b(e[k],m)}}else{f&&(g=+f.call(c,a,d)||0)}return f&&(a.value=g),g}function c(b){var d=[];return a(b,0,d),d}var d=zg,e=yg,f=kg;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};y.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,k=-1;for(d=b.value?d/b.value:0;++k<g;){a(h=f[k],c,b=h.value*d,e),c+=b}}}function b(a){a=a.children;var c=0;if(a&&(d=a.length)){for(var d,e=-1;++e<d;){c=Math.max(c,b(a[e]))}}return 1+c}function c(f,g){var h=d.call(this,f,g);return a(h[0],0,e[0],e[1]/b(h[0])),h}var d=y.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},zc(c,d)};y.layout.pie=function(){function a(f){var g=f.map(function(c,d){return +b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),k=(("function"==typeof e?e.apply(this,arguments):e)-h)/y.sum(g),m=y.range(f.length);null!=c&&m.sort(c===Nf?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var l=[];return m.forEach(function(a){var b;l[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*k}}),l}var b=Number,c=Nf,d=0,e=jb;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Nf={};y.layout.stack=function(){function a(h,k){var m=h.map(function(c,d){return b.call(a,c,d)}),l=m.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),p=c.call(a,l,k),m=y.permute(m,p),l=y.permute(l,p),n,u,x=d.call(a,l,k),q=m.length,r=m[0].length;for(n=0;r>n;++n){for(e.call(a,m[0][n],u=x[n],l[0][n][1]),p=1;q>p;++p){e.call(a,m[p][n],u+=l[p-1][n][1],l[p][n][1])}}return h}var b=ua,c=Ud,d=Vd,e=Cg,f=Bg,g=gg;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:nh.get(b)||Ud,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:oh.get(b)||Vd,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var nh=y.map({"inside-out":function(a){var b,c=a.length,d=a.map(Dg),e=a.map(Eg),f=y.range(c).sort(function(a,b){return d[a]-d[b]}),g=0,h=0,k=[],m=[];for(a=0;c>a;++a){b=f[a],h>g?(g+=e[b],k.push(b)):(h+=e[b],m.push(b))}return m.reverse().concat(k)},reverse:function(a){return y.range(a.length).reverse()},"default":Ud}),oh=y.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,k=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++){d+=a[b][c][1]}d>h&&(h=d);g.push(d)}for(c=0;f>c;++c){k[c]=(h-g[c])/2}return k},wiggle:function(a){var b,c,d,e,f,g,h,k,m,l=a.length,p=a[0],n=p.length,u=[];u[0]=k=m=0;for(c=1;n>c;++c){for(e=b=0;l>b;++b){e+=a[b][c][1]}f=b=0;for(h=p[c][0]-p[c-1][0];l>b;++b){d=0;for(g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d){g+=(a[d][c][1]-a[d][c-1][1])/h}f+=g*a[b][c][1]}u[c]=k-=e?f/e*h:0;m>k&&(m=k)}for(c=0;n>c;++c){u[c]-=m}return u},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++){d+=a[b][c][1]}if(d){for(b=0;e>b;b++){a[b][c][1]/=d}}else{for(b=0;e>b;b++){a[b][c][1]=g}}}for(c=0;f>c;++c){h[c]=0}return h},zero:Vd});y.layout.histogram=function(){function a(f,g){var h,k,m=[],l=f.map(c,this),p=d.call(this,l,g),n=e.call(this,p,l,g);g=-1;for(var u=l.length,x=n.length-1,q=b?1:1/u;++g<x;){h=m[g]=[],h.dx=n[g+1]-(h.x=n[g]),h.y=0}if(0<x){for(g=-1;++g<u;){k=l[g],k>=p[0]&&k<=p[1]&&(h=m[y.bisect(n,k,1,x)-1],h.y+=q,h.push(f[g]))}}return m}var b=!0,c=Number,d=Hg,e=Gg;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=W(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return Re(a,b)}:W(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};y.layout.tree=function(){function a(f,g){function h(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,g,k,m=d[0],l=m,p=-1;++p<f;){k=d[p];h(k,g);var n=k;if(g){for(var u=void 0,x=n,q=n,r=n.parent.children[0],w=x._tree.mod,B=q._tree.mod,C=g._tree.mod,A=r._tree.mod;g=Pd(g),x=Qd(x),g&&x;){r=Qd(r);q=Pd(q);q._tree.ancestor=n;u=g._tree.prelim+C-x._tree.prelim-w+c(g,x);if(0<u){var G=g._tree.ancestor.parent==n.parent?g._tree.ancestor:l,t=n,E=u,G=G._tree,t=t._tree,v=E/(t.number-G.number);G.change+=v;t.change-=v;t.shift+=E;t.prelim+=E;t.mod+=E;w+=u;B+=u}C+=g._tree.mod;w+=x._tree.mod;A+=r._tree.mod;B+=q._tree.mod}g&&!Pd(q)&&(q._tree.thread=g,q._tree.mod+=C-B);x&&!Qd(r)&&(r._tree.thread=x,r._tree.mod+=w-A,l=n)}g=k}p=f=0;n=a.children;for(l=n.length;0<=--l;){d=n[l]._tree,d.prelim+=f,d.mod+=f,f+=d.shift+(p+=d.change)}k=0.5*(m._tree.prelim+k._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-k):e.prelim=k}else{b&&(e.prelim=b._tree.prelim+c(a,b))}}function k(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;){k(c[e],b)}}}var m=b.call(this,f,g),l=m[0];Eb(l,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});h(l);k(l,-l._tree.prelim);var p=Pc(l,ue),n=Pc(l,Ig),u=Pc(l,Zf),x=p.x-c(p,n)/2,q=n.x+c(n,p)/2,r=u.depth||1;return Eb(l,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-x)/(q-x)*d[0];a.y=a.depth/r*d[1];delete a._tree}),m}var b=y.layout.hierarchy().sort(null).value(null),c=ze,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},zc(a,b)};y.layout.pack=function(){function a(f,g){var h=c.call(this,f,g),k=h[0],m=e[0],l=e[1],p=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(k.x=k.y=0,Eb(k,function(a){a.r=+p(a.value)}),Eb(k,xe),d){var n=d*(b?1:Math.max(2*k.r/m,2*k.r/l))/2;Eb(k,function(a){a.r+=n});Eb(k,xe);Eb(k,function(a){a.r-=n})}return De(k,m/2,l/2,b?1:1/Math.max(2*k.r/m,2*k.r/l)),h}var b,c=y.layout.hierarchy().sort($f),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},zc(a,c)};y.layout.cluster=function(){function a(f,g){var h,k=b.call(this,f,g),m=k[0],l=0;Eb(m,function(a){var b=a.children;b&&b.length?(a.x=jg(b),a.y=ig(b)):(a.x=h?l+=c(a,h):0,a.y=0,h=a)});var p=Ie(m),n=Je(m),u=p.x-c(p,n)/2,x=n.x+c(n,p)/2;return Eb(m,e?function(a){a.x=(a.x-m.x)*d[0];a.y=(m.y-a.y)*d[1]}:function(a){a.x=(a.x-u)/(x-u)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]}),k}var b=y.layout.hierarchy().sort(null).value(null),c=ze,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},zc(a,b)};y.layout.treemap=function(){function a(b,c){for(var d,e,f=-1,g=b.length;++f<g;){e=(d=b[f]).value*(0>c?0:c),d.area=isNaN(e)||0>=e?0:e}}function b(c){var e=c.children;if(e&&e.length){var f,g=l(c),h=[],k=e.slice(),m=1/0,p="slice"===n?g.dx:"dice"===n?g.dy:"slice-dice"===n?1&c.depth?g.dy:g.dx:Math.min(g.dx,g.dy);a(k,g.dx*g.dy/c.value);for(h.area=0;0<(c=k.length);){h.push(c=k[c-1]);h.area+=c.area;var x;if(!(x="squarify"!==n)){c=p;f=void 0;var q=h.area;x=0;for(var r=1/0,w=-1,B=h.length;++w<B;){(f=h[w].area)&&(r>f&&(r=f),f>x&&(x=f))}x=(f=(q*=q,c*=c,q?Math.max(c*x*u/q,q/(c*r*u)):1/0))<=m}x?(k.pop(),m=f):(h.area-=h.pop().area,d(h,p,g,!1),p=Math.min(g.dx,g.dy),h.length=h.area=0,m=1/0)}h.length&&(d(h,p,g,!0),h.length=h.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=l(b),g=e.slice(),h=[];a(g,f.dx*f.dy/b.value);for(h.area=0;b=g.pop();){h.push(b),h.area+=b.area,null!=b.z&&(d(h,b.z?f.dx:f.dy,f,!g.length),h.length=h.area=0)}e.forEach(c)}}function d(a,b,c,e){var f,g=-1,k=a.length,m=c.x,l=c.y,p=b?h(a.area/b):0;if(b==c.dx){for((e||p>c.dy)&&(p=c.dy);++g<k;){f=a[g],f.x=m,f.y=l,f.dy=p,m+=f.dx=Math.min(c.x+c.dx-m,p?h(f.area/p):0)}f.z=!0;f.dx+=c.x+c.dx-m;c.y+=p;c.dy-=p}else{for((e||p>c.dx)&&(p=c.dx);++g<k;){f=a[g],f.x=m,f.y=l,f.dx=p,l+=f.dy=Math.min(c.y+c.dy-l,p?h(f.area/p):0)}f.z=!1;f.dy+=c.y+c.dy-l;c.x+=p;c.dx-=p}}function e(d){d=f||g(d);var h=d[0];return h.x=0,h.y=0,h.dx=k[0],h.dy=k[1],f&&g.revalue(h),a([h],h.dx*h.dy/h.value),(f?c:b)(h),p&&(f=d),d}var f,g=y.layout.hierarchy(),h=Math.round,k=[1,1],m=null,l=Td,p=!1,n="squarify",u=0.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(k=a,e):k},e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?Td(c):Ke(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return Ke(b,a)}if(!arguments.length){return m}var d;return l=null==(m=a)?Td:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(h=a?Math.round:Number,e):h!=Number},e.sticky=function(a){return arguments.length?(p=a,f=null,e):p},e.ratio=function(a){return arguments.length?(u=a,e):u},e.mode=function(a){return arguments.length?(n=a+"",e):n},zc(e,g)};y.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d;do{c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d}while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=y.random.normal.apply(y,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++){b+=Math.random()}return b/a}}};y.scale={};var Kg={floor:ua,ceil:ua};y.scale.linear=function(){return cf([0,1],[0,1],dc,!1)};y.scale.log=function(){return ef(y.scale.linear().domain([0,1]),10,!0,[1,10])};var ff=y.format(".0e"),Mg={floor:function(a){return -Math.ceil(-a)},ceil:function(a){return -Math.floor(-a)}};y.scale.pow=function(){return gf(y.scale.linear(),1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(0.5)};y.scale.ordinal=function(){return hf([],{t:"range",a:[[]]})};y.scale.category10=function(){return y.scale.ordinal().range(ph)};y.scale.category20=function(){return y.scale.ordinal().range(qh)};y.scale.category20b=function(){return y.scale.ordinal().range(rh)};y.scale.category20c=function(){return y.scale.ordinal().range(sh)};var ph=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(lb),qh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(lb),rh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(lb),sh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(lb);y.scale.quantile=function(){return jf([],[])};y.scale.quantize=function(){return kf(0,1,[0,1])};y.scale.threshold=function(){return lf([0.5],[0,1])};y.scale.identity=function(){return mf([0,1])};y.svg.arc=function(){function a(){var f=b.apply(this,arguments),g=c.apply(this,arguments),h=d.apply(this,arguments)+kc,k=e.apply(this,arguments)+kc,m=(h>k&&(m=h,h=k,k=m),k-h),l=ea>m?"0":"1",p=Math.cos(h),h=Math.sin(h),n=Math.cos(k),k=Math.sin(k);return m>=th?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*p+","+g*h+"A"+g+","+g+" 0 "+l+",1 "+g*n+","+g*k+"L"+f*n+","+f*k+"A"+f+","+f+" 0 "+l+",0 "+f*p+","+f*h+"Z":"M"+g*p+","+g*h+"A"+g+","+g+" 0 "+l+",1 "+g*n+","+g*k+"L0,0Z"}var b=Ng,c=Og,d=nf,e=of;return a.innerRadius=function(c){return arguments.length?(b=W(c),a):b},a.outerRadius=function(b){return arguments.length?(c=W(b),a):c},a.startAngle=function(b){return arguments.length?(d=W(b),a):d},a.endAngle=function(b){return arguments.length?(e=W(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+kc;return[Math.cos(f)*a,Math.sin(f)*a]},a};var kc=-Wa,th=jb-aa;y.svg.line.radial=function(){var a=da(pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};Jd.reverse=Kd;Kd.reverse=Jd;y.svg.area=function(){return qf(ua)};y.svg.area.radial=function(){var a=qf(pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};y.svg.chord=function(){function a(f,g){var h=b(this,d,f,g),k=b(this,e,f,g);return"M"+h.p0+c(h.r,h.p1,h.a1-h.a0)+(h.a0==k.a0&&h.a1==k.a1?"Q 0,0 "+h.p0:"Q 0,0 "+k.p0+c(k.r,k.p1,k.a1-k.a0)+("Q 0,0 "+h.p0))+"Z"}function b(a,c,d,e){var k=c.call(a,d,e);c=f.call(a,k,e);d=g.call(a,k,e)+kc;a=h.call(a,k,e)+kc;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>ea)+",1 "+b}var d=Z,e=Gc,f=Pg,g=nf,h=of;return a.radius=function(b){return arguments.length?(f=W(b),a):f},a.source=function(b){return arguments.length?(d=W(b),a):d},a.target=function(b){return arguments.length?(e=W(b),a):e},a.startAngle=function(b){return arguments.length?(g=W(b),a):g},a.endAngle=function(b){return arguments.length?(h=W(b),a):h},a};y.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),h=c.call(this,e,f),k=(g.y+h.y)/2,g=[g,{x:g.x,y:k},{x:h.x,y:k},h];return g=g.map(d),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=Z,c=Gc,d=rf;return a.source=function(c){return arguments.length?(b=W(c),a):b},a.target=function(b){return arguments.length?(c=W(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};y.svg.diagonal.radial=function(){var a=y.svg.diagonal(),b=rf,c=a.projection;return a.projection=function(a){return arguments.length?c(Qg(b=a)):b},a};y.svg.symbol=function(){function a(d,e){return(Of.get(b.call(this,d,e))||sf)(c.call(this,d,e))}var b=Sg,c=Rg;return a.type=function(c){return arguments.length?(b=W(c),a):b},a.size=function(b){return arguments.length?(c=W(b),a):c},a};var Of=y.map({circle:sf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Pf));var b=a*Pf;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Id);var b=a*Id/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Id);var b=a*Id/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});y.svg.symbolTypes=Of.keys();var nc,ud,Id=Math.sqrt(3),Pf=Math.tan(30*ca),Fa=[],Df=0;Fa.call=qa.call;Fa.empty=qa.empty;Fa.node=qa.node;Fa.size=qa.size;y.transition=function(a){return arguments.length?nc?a.transition():a:Cf.transition()};y.transition.prototype=Fa;Fa.select=function(a){var b,c,d,e=this.id,f=[];a=m(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var k=this[g],l=-1,p=k.length;++l<p;){(d=k[l])&&(c=a.call(d,d.__data__,l,g))?("__data__" in d&&(c.__data__=d.__data__),md(c,l,e,d.__transition__[e]),b.push(c)):b.push(null)}}return Kc(f,e)};Fa.selectAll=function(a){var b,c,d,e,f=this.id,g=[];a=u(a);for(var h=-1,k=this.length;++h<k;){for(var m=this[h],l=-1,p=m.length;++l<p;){if(b=m[l]){e=b.__transition__[f];c=a.call(b,b.__data__,l,h);g.push(b=[]);for(var n=-1,x=c.length;++n<x;){(d=c[n])&&md(d,n,f,e),b.push(d)}}}}return Kc(g,f)};Fa.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=D(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);c=this[f];for(var h=0,k=c.length;k>h;h++){(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}}return Kc(e,this.id)};Fa.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):I(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};Fa.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(2>arguments.length){for(b in a){this.attr(b,a[b])}return this}var g="transform"==a?Ee:dc,h=y.ns.qualify(a);return fe(this,"attr."+a,b,h.local?f:e)};Fa.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=y.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Fa.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a){this.style(c,a[c],b)}return this}c=""}return fe(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=Ma.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=dc(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};Fa.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ma.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};Fa.text=function(a){return fe(this,"text",a,Tg)};Fa.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};Fa.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=y.ease.apply(y,arguments)),I(this,function(c){c.__transition__[b].ease=a}))};Fa.delay=function(a){var b=this.id;return I(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};Fa.duration=function(a){var b=this.id;return I(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};Fa.each=function(a,b){var c=this.id;if(2>arguments.length){var d=ud,e=nc;nc=c;I(this,function(b,d,e){ud=b.__transition__[c];a.call(b,b.__data__,d,e)});ud=d;nc=e}else{I(this,function(d){d=d.__transition__[c];(d.event||(d.event=y.dispatch("start","end"))).on(a,b)})}return this};Fa.transition=function(){for(var a,b,c,d,e=this.id,f=++Df,g=[],h=0,k=this.length;k>h;h++){g.push(a=[]);b=this[h];for(var m=0,l=b.length;l>m;m++){(c=b[m])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,md(c,m,f,d)),a.push(c)}}return Kc(g,f)};y.svg.axis=function(){function a(m){m.each(function(){var a,m=y.select(this),l=this.__chart__||c,p=this.__chart__=c.copy(),n=null==k?p.ticks?p.ticks.apply(p,h):p.domain():k,u=null==b?p.tickFormat?p.tickFormat.apply(p,h):ua:b,x=m.selectAll(".tick").data(n,p),n=x.enter().insert("g",".domain").attr("class","tick").style("opacity",aa),q=y.transition(x.exit()).style("opacity",aa).remove(),r=y.transition(x).style("opacity",1),w=Oc(p),m=m.selectAll(".domain").data([0]),m=(m.enter().append("path").attr("class","domain"),y.transition(m));n.append("line");n.append("text");var B=n.select("line"),C=r.select("line"),u=x.select("text").text(u),x=n.select("text"),A=r.select("text");switch(d){case"bottom":a=tf;B.attr("y2",e);x.attr("y",Math.max(e,0)+g);C.attr("x2",0).attr("y2",e);A.attr("x",0).attr("y",Math.max(e,0)+g);u.attr("dy",".71em").style("text-anchor","middle");m.attr("d","M"+w[0]+","+f+"V0H"+w[1]+"V"+f);break;case"top":a=tf;B.attr("y2",-e);x.attr("y",-(Math.max(e,0)+g));C.attr("x2",0).attr("y2",-e);A.attr("x",0).attr("y",-(Math.max(e,0)+g));u.attr("dy","0em").style("text-anchor","middle");m.attr("d","M"+w[0]+","+-f+"V0H"+w[1]+"V"+-f);break;case"left":a=uf;B.attr("x2",-e);x.attr("x",-(Math.max(e,0)+g));C.attr("x2",-e).attr("y2",0);A.attr("x",-(Math.max(e,0)+g)).attr("y",0);u.attr("dy",".32em").style("text-anchor","end");m.attr("d","M"+-f+","+w[0]+"H0V"+w[1]+"H"+-f);break;case"right":a=uf,B.attr("x2",e),x.attr("x",Math.max(e,0)+g),C.attr("x2",e).attr("y2",0),A.attr("x",Math.max(e,0)+g).attr("y",0),u.attr("dy",".32em").style("text-anchor","start"),m.attr("d","M"+f+","+w[0]+"H0V"+w[1]+"H"+f)}if(p.rangeBand){var t=p.rangeBand()/2,l=function(a){return p(a)+t};n.call(a,l);r.call(a,l)}else{n.call(a,l),r.call(a,p),q.call(a,p)}})}var b,c=y.scale.linear(),d=Qf,e=6,f=6,g=3,h=[10],k=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in uh?b+"":Qf,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(k=b,a):k},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Qf="bottom",uh={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function a(f){f.each(function(){var f=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(q,ua);h.exit().remove();h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return vh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",a.empty()?"none":null);var l,f=y.transition(f),g=y.transition(g);k&&(l=Oc(k),g.attr("x",l[0]).attr("width",l[1]-l[0]),c(f));m&&(l=Oc(m),g.attr("y",l[0]).attr("height",l[1]-l[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+p[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function d(a){a.select(".extent").attr("y",p[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function e(){function q(){var a=y.mouse(A),e=!1;C&&(a[0]+=C[0],a[1]+=C[1]);H||(y.event.altKey?(B||(B=[(l[0]+l[1])/2,(p[0]+p[1])/2]),I[0]=l[+(a[0]<B[0])],I[1]=p[+(a[1]<B[1])]):B=null);D&&r(a,k,0)&&(c(v),e=!0);z&&r(a,m,1)&&(d(v),e=!0);e&&(b(v),E({type:"brush",mode:H?"move":"resize"}))}function r(a,b,c){var d,e,h=Oc(b);b=h[0];var h=h[1],k=I[c],m=c?p:l,n=m[1]-m[0];return H&&(b-=k,h-=n+k),d=(c?x:u)?Math.max(b,Math.min(h,a[c])):a[c],H?e=(d+=k)+n:(B&&(k=Math.max(b,Math.min(h,2*B[c]-d))),d>k?(e=d,d=k):e=k),m[0]!=d||m[1]!=e?(c?g=null:f=null,m[0]=d,m[1]=e,!0):void 0}function w(){q();v.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);y.select("body").style("cursor",null);M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);K();E({type:"brushend"})}var B,C,A=this,t=y.select(y.event.target),E=h.of(A,arguments),v=y.select(A),F=t.datum(),D=!/^(n|s)$/.test(F)&&k,z=!/^(e|w)$/.test(F)&&m,H=t.classed("extent"),K=J(),I=y.mouse(A),M=y.select(Ma).on("keydown.brush",function(){32==y.event.keyCode&&(H||(B=null,I[0]-=l[1],I[1]-=p[1],H=2),n())}).on("keyup.brush",function(){32==y.event.keyCode&&2==H&&(I[0]+=l[1],I[1]+=p[1],H=0,n())});if(y.event.changedTouches?M.on("touchmove.brush",q).on("touchend.brush",w):M.on("mousemove.brush",q).on("mouseup.brush",w),v.interrupt().selectAll("*").interrupt(),H){I[0]=l[0]-I[0],I[1]=p[0]-I[1]}else{if(F){var L=+/w$/.test(F),F=+/^n/.test(F);C=[l[1-L]-I[0],p[1-F]-I[1]];I[0]=l[L];I[1]=p[F]}else{y.event.altKey&&(B=I.slice())}}v.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",t.style("cursor"));E({type:"brushstart"});q()}var f,g,h=v(a,"brushstart","brush","brushend"),k=null,m=null,l=[0,0],p=[0,0],u=!0,x=!0,q=ne[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:l,y:p,i:f,j:g},c=this.__chart__||b;this.__chart__=b;nc?y.select(this).transition().each("start.brush",function(){f=c.i;g=c.j;l=c.x;p=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=Nc(l,b.x),d=Nc(p,b.y);return f=g=null,function(e){l=b.x=c(e);p=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i;g=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(k=b,q=ne[!k<<1|!m],a):k},a.y=function(b){return arguments.length?(m=b,q=ne[!k<<1|!m],a):m},a.clamp=function(b){return arguments.length?(k&&m?(u=!!b[0],x=!!b[1]):k?u=!!b:m&&(x=!!b),a):k&&m?[u,x]:k?u:m?x:null},a.extent=function(b){var c,d,e,h,n;return arguments.length?(k&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),f=[c,d],k.invert&&(c=k(c),d=k(d)),c>d&&(n=c,c=d,d=n),(c!=l[0]||d!=l[1])&&(l=[c,d])),m&&(e=b[0],h=b[1],k&&(e=e[1],h=h[1]),g=[e,h],m.invert&&(e=m(e),h=m(h)),e>h&&(n=e,e=h,h=n),(e!=p[0]||h!=p[1])&&(p=[e,h])),a):(k&&(f?(c=f[0],d=f[1]):(c=l[0],d=l[1],k.invert&&(c=k.invert(c),d=k.invert(d)),c>d&&(n=c,c=d,d=n))),m&&(g?(e=g[0],h=g[1]):(e=p[0],h=p[1],m.invert&&(e=m.invert(e),h=m.invert(h)),e>h&&(n=e,e=h,h=n))),k&&m?[[c,e],[d,h]]:k?[c,d]:m&&[e,h])},a.clear=function(){return a.empty()||(l=[0,0],p=[0,0],f=g=null),a},a.empty=function(){return !!k&&l[0]==l[1]||!!m&&p[0]==p[1]},y.rebind(a,h,"on")};var vh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ne=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],V=y.time={},Na=Date;Mb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Nb.setUTCDate.apply(this._,arguments)},setDay:function(){Nb.setUTCDay.apply(this._,arguments)},setFullYear:function(){Nb.setUTCFullYear.apply(this._,arguments)},setHours:function(){Nb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Nb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Nb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Nb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Nb.setUTCSeconds.apply(this._,arguments)},setTime:function(){Nb.setTime.apply(this._,arguments)}};var Nb=Date.prototype,oe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),pe="Sun Mon Tue Wed Thu Fri Sat".split(" "),qe="January February March April May June July August September October November December".split(" "),re="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");V.year=lc(function(a){return a=V.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});V.years=V.year.range;V.years.utc=V.year.utc.range;V.day=lc(function(a){var b=new Na(2000,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});V.days=V.day.range;V.days.utc=V.day.utc.range;V.dayOfYear=function(a){var b=V.year(a);return Math.floor((a-b-60000*(a.getTimezoneOffset()-b.getTimezoneOffset()))/86400000)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,b){a=a.toLowerCase();b=7-b;var c=V[a]=lc(function(a){return(a=V.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=V.year(a).getDay();return Math.floor((V.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});V[a+"s"]=c.range;V[a+"s"].utc=c.utc.range;V[a+"OfYear"]=function(a){var c=V.year(a).getDay();return Math.floor((V.dayOfYear(a)+(c+b)%7)/7)}});V.week=V.sunday;V.weeks=V.sunday.range;V.weeks.utc=V.sunday.utc.range;V.weekOfYear=V.sundayOfYear;V.format=Ua;var Rf=qd(oe),wh=rd(oe),Sf=qd(pe),xh=rd(pe),Tf=qd(qe),yh=rd(qe),Uf=qd(re),zh=rd(re),Vf=/^%/,vf={"-":"",_:" ",0:"0"},od={a:function(a){return pe[a.getDay()]},A:function(a){return oe[a.getDay()]},b:function(a){return re[a.getMonth()]},B:function(a){return qe[a.getMonth()]},c:Ua("%a %b %e %X %Y"),d:function(a,b){return Va(a.getDate(),b,2)},e:function(a,b){return Va(a.getDate(),b,2)},H:function(a,b){return Va(a.getHours(),b,2)},I:function(a,b){return Va(a.getHours()%12||12,b,2)},j:function(a,b){return Va(1+V.dayOfYear(a),b,3)},L:function(a,b){return Va(a.getMilliseconds(),b,3)},m:function(a,b){return Va(a.getMonth()+1,b,2)},M:function(a,b){return Va(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return Va(a.getSeconds(),b,2)},U:function(a,b){return Va(V.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Va(V.mondayOfYear(a),b,2)},x:Ua("%m/%d/%Y"),X:Ua("%H:%M:%S"),y:function(a,b){return Va(a.getFullYear()%100,b,2)},Y:function(a,b){return Va(a.getFullYear()%10000,b,4)},Z:function(a){a=a.getTimezoneOffset();var b=Math.abs(a)%60;return(0<a?"-":"+")+Va(~~(Math.abs(a)/60),"0",2)+Va(b,"0",2)},"%":function(){return"%"}},Ug={a:function(a,b,c){Sf.lastIndex=0;return(b=Sf.exec(b.substring(c)))?(a.w=xh.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){Rf.lastIndex=0;return(b=Rf.exec(b.substring(c)))?(a.w=wh.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){Uf.lastIndex=0;return(b=Uf.exec(b.substring(c)))?(a.m=zh.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){Tf.lastIndex=0;return(b=Tf.exec(b.substring(c)))?(a.m=yh.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return pd(a,od.c.toString(),b,c)},d:wf,e:wf,H:xf,I:xf,j:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1},L:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=Ah.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},U:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1},w:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1},W:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1},x:function(a,b,c){return pd(a,od.x.toString(),b,c)},X:function(a,b,c){return pd(a,od.X.toString(),b,c)},y:function(a,b,c){Aa.lastIndex=0;if(b=Aa.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2000),c+b[0].length)}else{a=-1}return a},Y:function(a,b,c){Aa.lastIndex=0;return(b=Aa.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1},Z:function(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1},"%":function(a,b,c){Vf.lastIndex=0;return(a=Vf.exec(b.substring(c,c+1)))?c+a[0].length:-1}},Aa=/^\s*\d+/,Ah=y.map({am:0,pm:1});Ua.utc=Ab;var Wf=Ab("%Y-%m-%dT%H:%M:%S.%LZ");Ua.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ge:Wf;ge.parse=function(a){a=new Date(a);return isNaN(a)?null:a};ge.toString=Wf.toString;V.second=lc(function(a){return new Na(1000*Math.floor(a/1000))},function(a,b){a.setTime(a.getTime()+1000*Math.floor(b))},function(a){return a.getSeconds()});V.seconds=V.second.range;V.seconds.utc=V.second.utc.range;V.minute=lc(function(a){return new Na(60000*Math.floor(a/60000))},function(a,b){a.setTime(a.getTime()+60000*Math.floor(b))},function(a){return a.getMinutes()});V.minutes=V.minute.range;V.minutes.utc=V.minute.utc.range;V.hour=lc(function(a){var b=a.getTimezoneOffset()/60;return new Na(3600000*(Math.floor(a/3600000-b)+b))},function(a,b){a.setTime(a.getTime()+3600000*Math.floor(b))},function(a){return a.getHours()});V.hours=V.hour.range;V.hours.utc=V.hour.utc.range;V.month=lc(function(a){return a=V.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});V.months=V.month.range;V.months.utc=V.month.utc.range;var sd=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],se=[[V.second,1],[V.second,5],[V.second,15],[V.second,30],[V.minute,1],[V.minute,5],[V.minute,15],[V.minute,30],[V.hour,1],[V.hour,3],[V.hour,6],[V.hour,12],[V.day,1],[V.day,2],[V.week,1],[V.month,1],[V.month,3],[V.year,1]],Bh=[[Ua("%Y"),Hb],[Ua("%B"),function(a){return a.getMonth()}],[Ua("%b %d"),function(a){return 1!=a.getDate()}],[Ua("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[Ua("%I %p"),function(a){return a.getHours()}],[Ua("%I:%M"),function(a){return a.getMinutes()}],[Ua(":%S"),function(a){return a.getSeconds()}],[Ua(".%L"),function(a){return a.getMilliseconds()}]],Ch=yf(Bh);se.year=V.year;V.scale=function(){return he(y.scale.linear(),se,Ch)};var Vg={range:function(a,b,c){return y.range(+a,+b,c).map(mc)}},Xf=se.map(function(a){return[a[0].utc,a[1]]}),Dh=[[Ab("%Y"),Hb],[Ab("%B"),function(a){return a.getUTCMonth()}],[Ab("%b %d"),function(a){return 1!=a.getUTCDate()}],[Ab("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[Ab("%I %p"),function(a){return a.getUTCHours()}],[Ab("%I:%M"),function(a){return a.getUTCMinutes()}],[Ab(":%S"),function(a){return a.getUTCSeconds()}],[Ab(".%L"),function(a){return a.getUTCMilliseconds()}]],Eh=yf(Dh);return Xf.year=V.year.utc,V.scale.utc=function(){return he(y.scale.linear(),Xf,Eh)},y.text=Sa(function(a){return a.responseText}),y.json=function(a,b){return za(a,"application/json",Wg,b)},y.html=function(a,b){return za(a,"text/html",Xg,b)},y.xml=Sa(function(a){return a.responseXML}),y}();define("d3",function(){});var Stats=function(){function a(a){return d.appendChild(a.dom),a}function b(a){for(var b=0;b<d.children.length;b++){d.children[b].style.display=b===a?"block":"none"}c=a}var c=0,d=document.createElement("div");d.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";d.addEventListener("click",function(a){a.preventDefault();b(++c%d.children.length)},!1);var e=(performance||Date).now(),g=e,h=0,k=a(new Stats.Panel("FPS","#0ff","#002")),l=a(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory){var f=a(new Stats.Panel("MB","#f08","#201"))}return b(0),{REVISION:16,dom:d,addPanel:a,showPanel:b,begin:function(){e=(performance||Date).now()},end:function(){h++;var a=(performance||Date).now();if(l.update(a-e,200),a>g+1000&&(k.update(1000*h/(a-g),100),g=a,h=0,f)){var b=performance.memory;f.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return a},update:function(){e=this.end()},domElement:d,setMode:b}};Stats.Panel=function(a,b,c){var d=1/0,e=0,g=Math.round,h=g(window.devicePixelRatio||1),k=80*h,l=48*h,f=3*h,n=2*h,r=3*h,v=15*h,t=74*h,m=30*h,u=document.createElement("canvas");u.width=k;u.height=l;u.style.cssText="width:80px;height:48px";var A=u.getContext("2d");return A.font="bold "+9*h+"px Helvetica,Arial,sans-serif",A.textBaseline="top",A.fillStyle=c,A.fillRect(0,0,k,l),A.fillStyle=b,A.fillText(a,f,n),A.fillRect(r,v,t,m),A.fillStyle=c,A.globalAlpha=0.9,A.fillRect(r,v,t,m),{dom:u,update:function(l,p){d=Math.min(d,l);e=Math.max(e,l);A.fillStyle=c;A.globalAlpha=1;A.fillRect(0,0,k,v);A.fillStyle=b;A.fillText(g(l)+" "+a+" ("+g(d)+"-"+g(e)+")",f,n);A.drawImage(u,r+h,v,t-h,m,r,v,t-h,m);A.fillRect(r+t-h,v,h,m);A.fillStyle=c;A.globalAlpha=0.9;A.fillRect(r+t-h,v,h,g((1-l/p)*m))}}};"object"==typeof module&&(module.exports=Stats);define("libs/stats",function(){});define("graph/render/g9/animate",["utils/utils","../g9/lightUp","d3","libs/three","libs/stats"],function(a,b,c){function d(a){function c(){h.aspect=f.innerWidth()/f.innerHeight();h.updateProjectionMatrix();l.setSize(f.innerWidth(),f.innerHeight())}f=$(a);h=new THREE.PerspectiveCamera(40,f.innerWidth()/f.innerHeight(),1,100000);h.position.z=3000;l=new THREE.WebGLRenderer({antialias:!0,alpha:!0});l.setClearColor(0,0);l.setSize(f.innerWidth(),f.innerHeight());l.domElement.style.position="absolute";f.append(l.domElement);n=new THREE.TrackballControls(h,l.domElement);n.noPan=!0;n.rotateSpeed=0.8;n.minDistance=100;n.maxDistance=15000;k=new THREE.Scene;r=new b(k,f);g=new Stats;g.domElement.style.position="absolute";g.domElement.style.top="0px";g.domElement.id="stats";new THREE.AxisHelper(1000);window.addEventListener("resize",c,!1);$(f).on("click",".fullscreenControl",function(){setTimeout(c,1000)})}function e(a){"object"==typeof a&&(t=a);requestAnimationFrame(e);l.render(k,h);n.update();TWEEN.update();t&&t.renderUpdates&&t.renderUpdates.length&&t.renderUpdates.forEach(function(a){a()})}var g,h,k,l,f,n,r,v=(new THREE.Vector2,new THREE.Clock,function(a){r.lights.forEach(function(a){a.visible=!1});1===a?(r.lights[0].visible=!0,r.lights[1].visible=!0,r.lights[2].visible=!0):(r.lights[3].visible=!0,r.lights[4].visible=!0)}),t=null;return function(a){d(a);this.scene=k;this.camera=h;this.renderer=l;this.renderUpdates=[];this.containerEle=f;this.controls=n;this.setScreenLighting=v;e(this)}});define("graph/render/g9/screen",[],function(){return function(a){var b=a.animate,c=this;b.controls.enabled=!1;var d=Date.now();this.isTableLoaded=!1;this.changeScreen=function(a){this.OnScreenChange&&"function"==typeof this.OnScreenChange&&this.OnScreenChange(a)};this.initScreen=function(){this.changeScreen(1)};this.logTime=function(a,b){var c=b||d;console.log(a+" : ",Date.now()-c)};this.setCamera=function(a){if(b.controls.reset(),2===a){a=new THREE.Vector3;var c=new THREE.Vector3(-2196.9444248900513,-5783.6378311519475,4047.1373557078664),d=new THREE.Vector3(0.20125934594291095,0.5091274844898959,0.8368296602102624);b.controls.resetTo(a,c,d)}};this.setZoom=function(){};this.onFinshTableAnimation=function(){c.isTableLoaded=!0;b.controls.enabled=!0;a.info.switchScreen(1)}}});define("graph/render/g9/dal",["utils/utils"],function(a){return function(){}});define("graph/render/g9/table",["libs/three"],function(){var a=function(a){var c=this;this.app=a;this.elements=a.data.elements;this.screen=null;this.stage=new THREE.Group;var d,e=[],g=[],h=[],k=[],l=new THREE.Raycaster,f=new THREE.Vector2(-5000,-5000),n=null;this.activeElement=null;this.activeNumber=0;var r=[],v=[];this.subscribe=function(a){r.push(a)};this.subscribeClick=function(a){v.push(a)};this.addAtomCenterAnimation=function(){};this.addElements=function(a,b){this.screen=b;var c=b.scene,d=this,l=function(){var b=new THREE.SphereGeometry(65,20,20);return function(c,d){var f=new THREE.Mesh(b,new THREE.MeshBasicMaterial);f.position.x=140*a[c][3]-1330;f.position.y=-(180*a[c][4])+900;f.position.z=0;f.aNumber=d+1;var k=new THREE.BoxHelper(f);return k.name="boxHelper",k.material=new THREE.LineBasicMaterial({color:16777215,opacity:0.25,transparent:!0}),k.aNumber=d+1,e.push(k),g.push(f),h.push(f.position),k}}(),r=function(){var b=new THREE.PlaneGeometry(100,100,1,1);return function(c,d){var e=a[c],f=d+1,g=document.createElement("canvas"),k=g.getContext("2d");g.width=128;g.height=128;k.beginPath();k.font="Bold 64px Arial";k.fillStyle="#fdfdfd";k.textAlign="center";k.fillText(e[0],64,70);k.font="Bold 20px Arial";k.fillText(e[1],64,110);k.font="Bold 15px Arial";k.fillStyle="#ffffff";k.fillText(e[2],64,125);k.font="Bold 25px Arial";k.fillStyle="#ffffff";k.fillText(f,105,20);e=new THREE.Texture(g);e.needsUpdate=!0;e=new THREE.MeshLambertMaterial({map:e,side:THREE.DoubleSide,depthTest:!0,transparent:!0});e=new THREE.Mesh(b,e);return e.position.x=h[d].x,e.position.y=h[d].y,e.position.z=0,e}}();Object.keys(a).forEach(function(a,b){var c=new THREE.Group;c.aNumber=a;var e=l(a,b),f=r(a,b);c.add(e);c.add(f);k.push(c);c.position.setZ(20001*Math.random()+-10000);d.stage.add(c)});c.add(this.stage);var t=b.renderer.domElement;$(t).on("mousemove",function(a){a.preventDefault();var b=t.getBoundingClientRect(),c=a.clientX-b.left;a=a.clientY-b.top;f.x=c/b.width*2-1;f.y=2*-(a/b.height)+1;f.cx=c;f.cy=a});$(t).on("click",function(){n&&d.clickElement(n)});$(t).on("touchend",function(a){a.preventDefault();var b=t.getBoundingClientRect(),c=a.originalEvent.changedTouches[0].clientX-b.left;a=a.originalEvent.changedTouches[0].clientY-b.top;f.x=c/b.width*2-1;f.y=2*-(a/b.height)+1;f.cx=c;f.cy=a;setTimeout(function(){n&&d.clickElement(n)},10)})};this.hoverElement=function(a,b){var c=this;a?(this.activeElement=a,this.activeNumber=a.aNumber,document.body.style.cursor="pointer"):(this.activeElement=null,this.activeNumber=0,document.body.style.cursor="default");this.activeNumber!==n&&(this.addHoverEffect(this.activeNumber),r.forEach(function(a){a(c.activeNumber,b)}),n=this.activeNumber)};this.addHoverEffect=function(a){a=Number(a);if(e.forEach(function(a){a.material.opacity=0.25}),0!==a){e[a-1].material.opacity=1}};this.higlightElemnts=function(a){TWEEN.removeAll();a?(k.forEach(function(a){a.traverse(function(a){a.material&&"boxHelper"!==a.name&&(a.material.opacity=0.25)})}),a.forEach(function(a){a=k[a-1];var b=a.position.z;(new TWEEN.Tween(a.position)).to({z:b+100},1500).easing(TWEEN.Easing.Exponential.Out).start();a.traverse(function(a){a.material&&"boxHelper"!==a.name&&(new TWEEN.Tween({opacity:a.material.opacity})).to({opacity:1},1500).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){a.material.opacity=this.opacity}).start()})})):k.forEach(function(a){(new TWEEN.Tween(k[a.aNumber-1].position)).to({z:0},1500).easing(TWEEN.Easing.Exponential.Out).start();a.traverse(function(a){a.material&&"boxHelper"!==a.name&&(new TWEEN.Tween({opacity:a.material.opacity})).to({opacity:1},1000).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){a.material.opacity=this.opacity}).start()})})};var t=!1;this.clickElement=function(a){t||(t=!0,c.hoverElement(!1),v.forEach(function(b){b(a,f)}),t=!1)};this.show=function(){this.stage.visible=!0;(new TWEEN.Tween(this.stage.position)).to({z:0},2000).easing(TWEEN.Easing.Exponential.Out).start()};this.hide=function(){c.stage.visible=!1;c.stage.position.z=-5000};this.startTableAniamtion=function(a){function b(){c++;c==k.length&&a()}var c=0;k.forEach(function(a){(new TWEEN.Tween(a.position)).to({z:0},3500).easing(TWEEN.Easing.Exponential.InOut).onComplete(b).start()})};this.render=function(){l.setFromCamera(f,c.screen.camera);var a=l.intersectObjects(g);0<a.length&&c.app.screen.isTableLoaded?d!=a[0].object&&(d=a[0].object,c.hoverElement(d,f)):(c.hoverElement(!1,f),d=null)};this.renderUpdates=[this.render]};return a.prototype.addTable=function(a,c){this.addElements(this.elements,a,c)},a});define("graph/render/g9/electrons",["libs/three","d3"],function(a){a=function(a,c){this.stage=c;var d=this,e=a.electronstring,g=a.electronstringNotations,h={},k=null,l=[null,"K","L","M","N","O","P","Q"];this.electronsUi={};this.electronsPos={};this.spin=!0;this.showShellsLabel=!1;this.shellsLabel=function(a){a?($(".shellInfo").fadeIn(400),d.showShellsLabel=!0):($(".shellInfo").hide(),d.showShellsLabel=!1)};var f,n=new THREE.SphereGeometry(10,100,100),r=(new THREE.MeshLambertMaterial({color:"#2c9037"}),{K:500,L:900,M:1400,N:2000,O:2700,P:3400,Q:4200}),v={K:0.02,L:0.022,M:0.028,N:0.03,O:0.035,P:0.04,Q:0.045},t=(new THREE.TextureLoader).load("/chemistry/electron.png"),m=new THREE.BufferGeometry,u=0,A=[],w=new THREE.MeshBasicMaterial({color:"#005f0b"});this.resetVars=function(){h={};k=null;this.electronsUi={};this.electronsPos={};this.spin=!0;m=new THREE.BufferGeometry;u=0;A=[];f=[]};this.getConfiguration=function(){if(k){return k}k={};return Object.keys(e).forEach(function(a){var b=e[a],c=b.split(" ").shift(),d=b;c&&-1<c.indexOf("[")&&(d=b.replace(c,g[c]));k[a]=d}),k};this.getLevelSplitConfiguration=function(a){var b={};return a.split(" ").forEach(function(a){var c=l[a[0]];b[c]?b[c].push(a):b[c]=[a]}),b};this.getLevelConfiguration=function(a){var b={};return a.split(" ").forEach(function(a){a=a.split(/[a-z]/);var c=l[a[0]];b[c]?b[c]+=Number(a[1]):b[c]=Number(a[1])}),b};this.getSpherePositions=function(a,b){for(var c=[],d=2*Math.PI/a,e=0,f=0;a>f;f++){c.push({x:b*Math.cos(e),y:b*Math.sin(e),z:0}),e+=d}return c};this.getCurrentAngle=function(a,b){return Math.atan2(b,a)};this.addUi_electrons=function(a,b){this.electronsUi[a]=[];var c=b.length;u+=c;A=A.concat(b);for(var d=0;c>d;d++){var e=new THREE.Mesh(n,w),f=new THREE.Vector3(b[d].x,b[d].y,b[d].z);e.position.add(f);e.initAngle=this.getCurrentAngle(b[d].x,b[d].y);e.currentAngle=e.initAngle;this.electronsUi[a].push(e);this.stage.add(e)}this.addElectronsLevelPath(a)};this.addElectronsToScreen=function(){var a={amplitude:{type:"f",value:1},color:{type:"c",value:new THREE.Color("#fff")},texture:{type:"t",value:t}},b=new THREE.ShaderMaterial({uniforms:a,vertexShader:"uniform float amplitude;\nattribute float size;\nattribute vec3 customColor;\nvarying vec3 vColor;\nvoid main() {\nvColor = customColor;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_PointSize = size * ( 300.0 / length( mvPosition.xyz ) );\n gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"uniform vec3 color;\nuniform sampler2D texture;\nvarying vec3 vColor;\nvoid main() {\ngl_FragColor = vec4( color * vColor, 1.0 );\ngl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n}",blending:THREE.AdditiveBlending,transparent:!0});f=new Float32Array(3*u);for(var a=new Float32Array(3*u),c=new Float32Array(u),d=new THREE.Color,e=0,g=0;u>e;e++,g+=3){f[g+0]=A[e].x,f[g+1]=A[e].y,f[g+2]=0,d.setStyle("#3498DB"),a[g+0]=d.r,a[g+1]=d.g,a[g+2]=d.b,c[e]=500}b=new THREE.Points(m,b);b.sortParticles=!0;m.addAttribute("position",new THREE.BufferAttribute(f,3));m.addAttribute("customColor",new THREE.BufferAttribute(a,3));m.addAttribute("size",new THREE.BufferAttribute(c,1));this.stage.add(b)};this.addElectronsLevelPath=function(a){var b=this.getOribitalRadius(a),c=this.electronsUi[a].length,b=new THREE.CircleGeometry(b,b*(10<c?8:2.5));b.vertices.shift();for(var d=new THREE.LineBasicMaterial({opacity:1,transparent:!0,vertexColors:THREE.VertexColors}),e=b.vertices,f=[],c=e.length/c,g=d3.scale.linear().domain([0,c]).range(["#04f5ff","#3498DB"]),k=0,m=0;k<e.length;k++,m++){m>=c&&(m=0);var l=new THREE.Color(g(m));f.push(l)}b.colors=f;b.verticesNeedUpdate=!0;b=new THREE.Line(b,d);h[a]=b;this.stage.add(b)};this.addElectronGuidLine=function(a,b){var c=b.camera,d=b.renderer.domElement,e=new THREE.Vector3(0,0,0),f=[],g=[];return a.forEach(function(a){var c=$('<div class="marker shellInfo">'+a+"</div>");b.containerEle.append(c);f.push({level:a,element:c});a=$('<div class="line shellInfo" />');b.containerEle.append(a);g.push(a)}),this.update=function(){this.showShellsLabel&&f.forEach(function(a,b){e=new THREE.Vector3(r[a.level],0,0);e.project(c);e.x=Math.round((e.x+1)*d.width/2);e.y=Math.round((-e.y+1)*d.height/2);e.z=0;var f=e.x+50,h=e.y-150;a.element.css({transform:"translate3d("+f+"px, "+h+"px, 0px)"});var h=h+42,k=e.x,m=e.y,l=Math.sqrt((k-f)*(k-f)+(m-h)*(m-h));g[b].css({transform:"rotate("+180/Math.PI*Math.atan2(h-m,f-k)+"deg)",left:(f+k)/2-l/2+"px",top:(h+m)/2-0.5+"px",width:l+"px"})})},this};this.spinElectrons=function(){for(var a=Object.keys(d.electronsPos),b=0,c=0;c<a.length;c++){for(var e=a[c],g=d.electronsUi[e],h=d.getOribitalRadius(e),e=v[e],k=0;k<g.length;k++,b+=3){g[k].currentAngle-=e,g[k].position.x=Math.cos(g[k].currentAngle)*h,g[k].position.y=Math.sin(g[k].currentAngle)*h,g[k].position.z=0,f[b+0]=Math.cos(g[k].currentAngle)*h,f[b+1]=Math.sin(g[k].currentAngle)*h,f[b+2]=0}}};this.spinColors=function(a,b){h[a].rotation.z-=b};this.getOribitalRadius=function(a){return r[a]};this.render=function(){if(d.guidlines.update(),d.spin){for(var a=Object.keys(d.electronsPos),b=0;b<a.length;b++){var c=a[b];d.spinColors(c,v[c])}d.spinElectrons();m.attributes.position.needsUpdate=!0;m.attributes.customColor.needsUpdate=!0}};this.renderUpdates=[this.render]};return a.prototype.bhorModel=function(a,c){if(!a){return void console.log("Error loading atomic data",a)}this.resetVars();var d=this.getConfiguration(),d=this.getLevelConfiguration(d[a]);c.atomicConfig=d;for(var e=Object.keys(d),g=0;g<e.length;g++){var h=e[g],k=this.getOribitalRadius(h);this.electronsPos[h]=this.getSpherePositions(d[h],k);this.addUi_electrons(h,this.electronsPos[h])}this.addElectronsToScreen();this.guidlines=this.addElectronGuidLine(e,c.animate);window.addEventListener("resize",this.guidlines.onResize,!1)},a});define("graph/render/g9/atom",["../g9/electrons","libs/three","d3"],function(a,b){return function(b){this.app=b;this.stage=new THREE.Group;var d=[],e=1,g=0,h=0,k=0;b=b.data;var l=[],f=this;this.protonRadius=50;this.resetVars=function(){d=[];e=1;k=h=g=0;l=[]};this.normalizeNucleus=function(a){if(0!==e){for(var b=0;b<a.length;b++){a[b].x+=0.1*(g-a[b].x)*e;a[b].y+=0.1*(h-a[b].y)*e;a[b].z+=0.1*(k-a[b].z)*e;for(var c=0;c<a.length;c++){if(b!==c){var d=a[b].radius+a[c].radius,f=a[b].x-a[c].x,u=a[b].y-a[c].y,A=a[b].z-a[c].z,w=Math.sqrt(f*f+u*u+A*A);d>w&&(w=(w-d)/w*0.5,a[b].x-=f*=w,a[b].y-=u*=w,a[b].z-=A*=w,a[c].x+=f,a[c].y+=u,a[c].z+=A)}}l[b].position.x=a[b].x;l[b].position.y=a[b].y;l[b].position.z=a[b].z}0<e?e-=0.001:e=0}};this.createNucleus=function(a){a=1==a?a:2*a;for(var b=this.protonRadius,c=[],e=Math.PI/180,f=360/Math.sqrt(a),g=1;360>g;g+=f){for(var h=1;360>h;h+=f){var k={},l=10*Math.sin(e*g);k.x=Math.cos(h*e)*l;k.y=10*Math.cos(e*g);k.z=Math.sin(h*e)*l;k.radius=b;c.push(k)}}d=c.length>a?c.slice(c.length-a):c};this.ui_addNucleus=function(a){a=new THREE.SphereGeometry(this.protonRadius,20,20);for(var b=["#ff6060","#5c81d6"],c=0;c<d.length;c++){var e=new THREE.Mesh(a,new THREE.MeshLambertMaterial({color:b[c%b.length]})),f=new THREE.Vector3(d[c].x,d[c].y,d[c].z);e.position.add(f);l.push(e);this.stage.add(e)}this.stage.position.x=5000;this.stage.position.y=10000;this.stage.visible=!1};this.show=function(){this.stage.visible=!0;(new TWEEN.Tween(this.stage.position)).to({x:0,y:0},2000).easing(TWEEN.Easing.Exponential.Out).start()};this.hide=function(){f.stage.visible=!1;f.stage.position.z=0;f.stage.position.x=5000;f.stage.position.y=10000};this.moveTo=function(a){e=1;g=a.x;h=a.y;k=a.z};f=this;this.render=function(){f.normalizeNucleus(d)};this.electrons=new a(b,this.stage);this.renderUpdates=[this.render].concat(this.electrons.renderUpdates);this.reset=function(a){a.remove(this.stage);this.stage=new THREE.Group;this.electrons.stage=this.stage;this.resetVars()};this.showNext=function(){return f.app.atomicNumber+=1,118<f.app.atomicNumber?void (f.app.atomicNumber=118):void f.app.setAtomScreen()};this.showPrevious=function(){return --f.app.atomicNumber,1>f.app.atomicNumber?void (f.app.atomicNumber=1):void f.app.setAtomScreen()};this.create=function(a,b){return a?(this.reset(b),this.createNucleus(a),void this.ui_addNucleus(b)):void console.log("Error loading atomic data",a)}}});define("graph/render/g9/info",["utils/utils"],function(a){return function(a){this.app=a;this.data=a.data;var c,d,e,g=this.ele=a.animate.containerEle,h=!1;this.addUi=function(k){c=$('                      <div class="elementInfo">                         <p class="aNumber-w">                             <span class="label">Atomic number :</span>                             <span class="prop num"></span>                         </p>                         <p class="aName-w">                             <span class="label">Name :</span>                             <span class="prop n"></span>                         </p>                         <p class="aSymbol-w">                             <span class="label">Symbol :</span>                             <span class="prop s"></span>                          </p>                         <p class="aWeight-w">                             <span class="label">Atomic weight :</span>                             <span class="prop w"></span>                         </p>                         <p class="eConfig">                             <span class="label">Electronic configuration</span>                              <span class="prop lc"></span>                         </p>                         <div class="close-icon"></div>                         <div class="goDetail-icon"><span class="explodeEff">Explore atom</span></div>                     </div>');g.append(c);var l=$('<div class="levelsPath">                             <div class="levels K"></div>                             <div class="levels L"></div>                             <div class="levels M"></div>                             <div class="levels N"></div>                             <div class="levels O"></div>                             <div class="levels P"></div>                             <div class="levels Q"></div>                         </div>');c.find(".eConfig").append(l);d=$('<div class="infoPlanel"></div>');e=$('<div class="elementInfoWrapper"></div>');g.append(e);g.append(d);var f=k.data.tree,n={};Object.keys(f).forEach(function(a){var b=$("<div />").addClass("parent"),c=$('<div class="parentName" />').text(a);b.append(c);Object.keys(f[a]).forEach(function(c){var d=$("<div />").addClass("childs").attr("group-name",c.replace(/ /g,"-").toLowerCase()).text(c);b.append(d);n[c.replace(/ /g,"-").toLowerCase()]=f[a][c]});d.append(b)});$(".parent .childs").on("mouseover",function(){k.highlghtGroup(n[$(this).attr("group-name")])});$(".parent .childs").on("mouseout",function(){k.highlghtGroup(0)});$(c).find(".close-icon").on("click",function(){$(c).removeClass("active");h=!1;k.addElemntInfo(0);e.hide()});$(c).find(".goDetail-icon").on("click",function(){h=!1;k.addElemntInfo(0);e.hide();a.screen.changeScreen(2);$(c).addClass("inScreen").css({zIndex:0,opacity:1,transform:"translate3d(0,0,0)"})});var l=$('<div class="eleInfo leftArr"></div><div class="eleInfo rightArr"></div>'),r;r=$('                         <div class="controls eleInfo">                             <div class="cntlrRow"><div class="onoffswitch"><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="showShellsLabel"><label class="onoffswitch-label" for="showShellsLabel"></label></div><span>Show electrons shell info</span></div>                             <div class="cntlrRow"><div class="onoffswitch"><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="spinElectrons" checked><label class="onoffswitch-label" for="spinElectrons"></label></div><span>Spin electrons</span></div>                         </div>');g.append(r);g.append(l);l=$('<div class="eleInfo close-icon closeAtomScreen"></div>');g.append(l);$(l).on("click",function(){h=!1;k.addElemntInfo(0);e.hide();a.screen.changeScreen(1);$(c).removeClass("active").removeClass("inScreen")});$("#spinElectrons").on("change",function(){$(this).is(":checked")?k.app.atom.electrons.spin=!0:k.app.atom.electrons.spin=!1});$("#showShellsLabel").on("change",function(){$(this).is(":checked")?k.app.atom.electrons.shellsLabel(!0):k.app.atom.electrons.shellsLabel(!1);$(g).find(".levels").removeClass("active")});$(g).find(".leftArr").on("click",function(){k.app.atom.showPrevious();k.setAtomicData(k.app.atomicNumber);k.addShellInfo(k.app.atomicNumber)});$(g).find(".rightArr").on("click",function(){k.app.atom.showNext();k.setAtomicData(k.app.atomicNumber);k.addShellInfo(k.app.atomicNumber)});$(".g9-footer .devInfo").on("click",function(){$(this).toggleClass("active")});$(g).on("mouseover",".marker",function(){var a=$(this).text();$(g).find("."+a).addClass("active")});$(g).on("mouseout",".marker",function(){$(g).find(".levels").removeClass("active")});navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&$(g).addClass("iphoneDevice")}(this);this.highlghtGroup=function(a){if(!a){return void this.app.table.higlightElemnts(0)}var b=[];if("G"===a[0]){var c=this.data.elements;Object.keys(c).forEach(function(d){a[1]===c[d][4]&&b.push(Number(d))})}else{b=a}this.app.table.higlightElemnts(b)};this.setAtomicData=function(d){var e=a.atom.electrons.getConfiguration(),f=a.atom.electrons.getLevelConfiguration(e[d]),f=Object.keys(f).map(function(a){return f[a]}),e=this.data.elements[d];c.find(".n").text(e[1]);c.find(".s").text(e[0]);c.find(".w").text(e[2]);c.find(".num").text(d);c.find(".lc").html(f.join("</br>"))};this.addShellInfo=function(d){var e=a.atom.electrons.getConfiguration(),f=a.atom.electrons.getLevelSplitConfiguration(e[d]);c.find(".levels").hide();Object.keys(f).forEach(function(a){c.find("."+a).text(f[a].join().split(",").join(", ")).show()})};this.addElemntInfo=function(a,b){if(!h){if(a){this.setAtomicData(a);var d=b.cx,e=b.cy,r=g[0].offsetHeight,d=d+250>g[0].offsetWidth?d-250:d+50;c.css({zIndex:30,opacity:1,transform:"translate3d("+d+"px, "+(e+250>r?e-250:e+50)+"px, 0px)"})}else{c.css({opacity:0,zIndex:0})}}};this.showElementInfo=function(a){this.addShellInfo(a);c.addClass("active").css({zIndex:30,opacity:1,transform:"translate3d(-50%, 90%, 0)"});h=!0;e.show()};this.showInfoPanel=function(){this.app.screen.isTableLoaded&&($(".infoPlanel").fadeIn(1000),$(".g9-footer").addClass("show"))};this.hideInfoPanel=function(){$(".infoPlanel").fadeOut()};this.switchScreen=function(a){$(".line").remove();$(".marker").remove();1===a?(this.showInfoPanel(),$(".eleInfo").hide(),g.addClass("tableScreen").removeClass("atomScreen")):(this.hideInfoPanel(),this.addElemntInfo(0),$(".eleInfo").show(),g.removeClass("tableScreen").addClass("atomScreen"),$(c).addClass("active").addClass("inScreen").css({zIndex:0,opacity:1,transform:"translate3d(0,0,0)"}),$("#spinElectrons").prop("checked",!0),$("#showShellsLabel").prop("checked",!1))};this.loadingScreen=function(){return{remove:function(){$(".loader").remove()}}}();this.hideAll=function(){this.hideInfoPanel();this.addElemntInfo(0);$(".eleInfo").hide()}}});void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var a=[];return{REVISION:"14",getAll:function(){return a},removeAll:function(){a=[]},add:function(b){a.push(b)},remove:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},update:function(b){if(0===a.length){return !1}var c=0;for(b=void 0!==b?b:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();c<a.length;){a[c].update(b)?c++:a.splice(c,1)}return !0}}}();TWEEN.Tween=function(a){var b={},c={},d={},e=1000,g=0,h=!1,k=!1,l=0,f=null,n=TWEEN.Easing.Linear.None,r=TWEEN.Interpolation.Linear,v=[],t=null,m=!1,u=null,A=null,w=null,p;for(p in a){b[p]=parseFloat(a[p],10)}this.to=function(a,b){return void 0!==b&&(e=b),c=a,this};this.start=function(e){TWEEN.add(this);k=!0;m=!1;f=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();f+=l;for(var g in c){if(c[g] instanceof Array){if(0===c[g].length){continue}c[g]=[a[g]].concat(c[g])}b[g]=a[g];0==b[g] instanceof Array&&(b[g]*=1);d[g]=b[g]||0}return this};this.stop=function(){return k?(TWEEN.remove(this),k=!1,null!==w&&w.call(a),this.stopChainedTweens(),this):this};this.stopChainedTweens=function(){for(var a=0,b=v.length;b>a;a++){v[a].stop()}};this.delay=function(a){return l=a,this};this.repeat=function(a){return g=a,this};this.yoyo=function(a){return h=a,this};this.easing=function(a){return n=a,this};this.interpolation=function(a){return r=a,this};this.chain=function(){return v=arguments,this};this.onStart=function(a){return t=a,this};this.onUpdate=function(a){return u=a,this};this.onComplete=function(a){return A=a,this};this.onStop=function(a){return w=a,this};this.update=function(k){var p;if(f>k){return !0}!1===m&&(null!==t&&t.call(a),m=!0);var x=(k-f)/e,x=1<x?1:x,w=n(x);for(p in c){var E=b[p]||0,D=c[p];D instanceof Array?a[p]=r(D,w):("string"==typeof D&&(D=E+parseFloat(D,10)),"number"==typeof D&&(a[p]=E+(D-E)*w))}if(null!==u&&u.call(a,w),1==x){if(0<g){isFinite(g)&&g--;for(p in d){if("string"==typeof c[p]&&(d[p]+=parseFloat(c[p],10)),h){x=d[p],d[p]=c[p],c[p]=x}b[p]=d[p]}return f=k+l,!0}null!==A&&A.call(a);p=0;for(x=v.length;x>p;p++){v[p].start(k)}return !1}return !0}};TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return --a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a:0.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return --a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return 0.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?0.5*Math.pow(1024,a-1):0.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=0.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=0.1):b=0.4*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/0.4)))},Out:function(a){var b,c=0.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=0.1):b=0.4*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/0.4)+1)},InOut:function(a){var b,c=0.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=0.1):b=0.4*Math.asin(1/c)/(2*Math.PI),1>(a*=2)?-0.5*c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/0.4):c*Math.pow(2,-10*--a)*Math.sin(2*(a-b)*Math.PI/0.4)*0.5+1)}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return --a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},InOut:function(a){return 0.5>a?0.5*TWEEN.Easing.Bounce.In(2*a):0.5*TWEEN.Easing.Bounce.Out(2*a-1)+0.5}}};TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.Linear;return 0>b?g(a[0],a[1],d):1<b?g(a[c],a[c-1],c-d):g(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){var c,d=0,e=a.length-1,g=Math.pow,h=TWEEN.Interpolation.Utils.Bernstein;for(c=0;e>=c;c++){d+=g(1-b,e-c)*g(b,c)*a[c]*h(e,c)}return d},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),g(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(g(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(g(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):g(a[e?e-1:0],a[e],a[e+1>c?c:e+1],a[e+2>c?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b]){return a[b]}for(c=b;1<c;c--){d*=c}return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){a=0.5*(c-a);d=0.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}}};"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN);define("libs/tween",function(){});var App={};define("graph/render/g9/app","utils/utils ../g9/animate ../g9/screen ../g9/dal ../g9/table ../g9/atom ../g9/info d3 libs/three libs/stats libs/tween".split(" "),function(a,b,c,d,e,g,h,k){return function(a,f){App.animate=new b(f);App.screen=new c(App);App.data=a;App.dal=new d;App.table=new e(App);App.atom=new g(App);App.info=new h(App);App.animate.renderUpdates=[];App.atomicNumber=38;App.atomicConfig=null;App.table.subscribe(function(a,b){App.screen.isTableLoaded&&App.info.addElemntInfo(a,b)});App.table.subscribeClick(function(a){App.screen.isTableLoaded&&(App.atomicNumber=a,App.info.showElementInfo(App.atomicNumber))});App.table.addTable(App.animate);App.table.hide();App.atom.hide();App.info.hideAll();App.setTableScreen=function(){App.info.switchScreen(1);App.screen.setCamera(1);App.screen.isTableLoaded?App.table.show():(App.table.stage.visible=!0,App.table.stage.position.z=0);App.atom.hide();App.animate.renderUpdates=App.table.renderUpdates};App.setAtomScreen=function(){App.table.hide();App.info.switchScreen(2);App.atom.create(App.atomicNumber,App.animate.scene);App.atom.electrons.bhorModel(App.atomicNumber,App);App.atom.show();App.screen.setCamera(2);App.screen.setZoom(App.atomicNumber);App.animate.renderUpdates=App.atom.renderUpdates;App.animate.scene.add(App.atom.stage)};App.screen.OnScreenChange=function(a){1===a?App.setTableScreen():App.setAtomScreen();App.animate.setScreenLighting(a)};window.App=App;setTimeout(function(){App.info.loadingScreen.remove();App.screen.initScreen();App.table.startTableAniamtion(App.screen.onFinshTableAnimation)},10)}});define("graph/render/g9",["graph/render/g9/app"],function(a){return a});!function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,g=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define("knockout",["exports"],a):a(b.ko={})}(function(h){function k(a,b,c,d){f.bindingHandlers[a]={init:function(a,b,c,d,e){return f.utils.domData.set(a,t,{}),{controlsDescendantBindings:!0}},update:function(a,e,g,h,k){g=f.utils.domData.get(a,t);e=f.utils.unwrapObservable(e());h=!c!=!e;var m=!g.savedNodes;(m||b||h!==g.didDisplayOnLastUpdate)&&(m&&(g.savedNodes=f.utils.cloneNodes(f.virtualElements.childNodes(a),!0)),h?(m||f.virtualElements.setDomNodeChildren(a,f.utils.cloneNodes(g.savedNodes)),f.applyBindingsToDescendants(d?d(k,e):k,a)):f.virtualElements.emptyNode(a),g.didDisplayOnLastUpdate=h)}};f.expressionRewriting.bindingRewriteValidators[a]=!1;f.virtualElements.allowedBindings[a]=!0}function l(a,b,c){c&&b!==f.selectExtensions.readValue(a)&&f.selectExtensions.writeValue(a,b);b!==f.selectExtensions.readValue(a)&&f.dependencyDetection.ignore(f.utils.triggerEvent,null,[a,"change"])}var f="undefined"!=typeof h?h:{};f.exportSymbol=function(a,b){for(var c=a.split("."),d=f,e=0;e<c.length-1;e++){d=d[c[e]]}d[c[c.length-1]]=b};f.exportProperty=function(a,b,c){a[b]=c};f.version="2.3.0";f.exportSymbol("version",f.version);f.utils=function(){function h(a,b){if("input"!==f.utils.tagNameLower(a)||!a.type||"click"!=b.toLowerCase()){return !1}var c=a.type;return"checkbox"==c||"radio"==c}var k=function(a,b){for(var c in a){a.hasOwnProperty(c)&&b(c,a[c])}},l={},n={},p=d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents";l[p]=["keyup","keydown","keypress"];l.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");k(l,function(a,b){if(b.length){for(var c=0,d=b.length;d>c;c++){n[b[c]]=a}}});var r={propertychange:!0},t=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e",e[0];){}return 4<b?b:a}();return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;d>c;c++){b(a[c])}},arrayIndexOf:function(a,b){if("function"==typeof Array.prototype.indexOf){return Array.prototype.indexOf.call(a,b)}for(var c=0,d=a.length;d>c;c++){if(a[c]===b){return c}}return -1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;e>d;d++){if(b.call(c,a[d])){return a[d]}}return null},arrayRemoveItem:function(a,b){var c=f.utils.arrayIndexOf(a,b);0<=c&&a.splice(c,1)},arrayGetDistinctValues:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++){0>f.utils.arrayIndexOf(b,a[c])&&b.push(a[c])}return b},arrayMap:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++){c.push(b(a[d]))}return c},arrayFilter:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++){b(a[d])&&c.push(a[d])}return c},arrayPushAll:function(a,b){if(b instanceof Array){a.push.apply(a,b)}else{for(var c=0,d=b.length;d>c;c++){a.push(b[c])}}return a},addOrRemoveItem:function(a,b,c){var d=a.indexOf?a.indexOf(b):f.utils.arrayIndexOf(a,b);0>d?c&&a.push(b):c||a.splice(d,1)},extend:function(a,b){if(b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c])}}return a},objectForEach:k,emptyDomNode:function(a){for(;a.firstChild;){f.removeNode(a.firstChild)}},moveCleanedNodesToContainerElement:function(a){a=f.utils.makeArray(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++){b.appendChild(f.cleanNode(a[d]))}return b},cloneNodes:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var g=a[c].cloneNode(!0);e.push(b?f.cleanNode(g):g)}return e},setDomNodeChildren:function(a,b){if(f.utils.emptyDomNode(a),b){for(var c=0,d=b.length;d>c;c++){a.appendChild(b[c])}}},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,g=0,h=b.length;h>g;g++){e.insertBefore(b[g],d)}g=0;for(h=c.length;h>g;g++){f.removeNode(c[g])}}},setOptionNodeSelectionState:function(a,b){7>t?a.setAttribute("selected",b):a.selected=b},stringTrim:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(a,b){for(var c=[],d=(a||"").split(b),e=0,g=d.length;g>e;e++){var h=f.utils.stringTrim(d[e]);""!==h&&c.push(h)}return c},stringStartsWith:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition){return 16==(16&b.compareDocumentPosition(a))}for(;null!=a;){if(a==b){return !0}a=a.parentNode}return !1},domNodeIsAttachedToDocument:function(a){return f.utils.domNodeIsContainedBy(a,a.ownerDocument)},anyDomNodeIsAttachedToDocument:function(a){return !!f.utils.arrayFirst(a,f.utils.domNodeIsAttachedToDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,c){var d=t&&r[b];if(d||"undefined"==typeof e){if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent){throw Error("Browser doesn't support addEventListener or attachEvent")}var g=function(b){c.call(a,b)},k="on"+b;a.attachEvent(k,g);f.utils.domNodeDisposal.addDisposeCallback(a,function(){a.detachEvent(k,g)})}else{a.addEventListener(b,c,!1)}}else{if(h(a,b)){var l=c;c=function(a,b){var c=this.checked;b&&(this.checked=!0!==b.checkedStateBeforeEvent);l.call(this,a);this.checked=c}}e(a).bind(b,c)}},triggerEvent:function(a,d){if(!a||!a.nodeType){throw Error("element must be a DOM node when calling triggerEvent")}if("undefined"!=typeof e){var f=[];h(a,d)&&f.push({checkedStateBeforeEvent:a.checked});e(a).trigger(d,f)}else{if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent){throw Error("The supplied element doesn't support dispatchEvent")}f=c.createEvent(n[d]||"HTMLEvents");f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a);a.dispatchEvent(f)}else{if("undefined"==typeof a.fireEvent){throw Error("Browser doesn't support triggering events")}h(a,d)&&(a.checked=!0!==a.checked);a.fireEvent("on"+d)}}},unwrapObservable:function(a){return f.isObservable(a)?a():a},peekObservable:function(a){return f.isObservable(a)?a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];f.utils.arrayForEach(b.match(d),function(a){f.utils.addOrRemoveItem(e,a,c)});a.className=e.join(" ")}},setTextContent:function(b,d){var e=f.utils.unwrapObservable(d);null!==e&&e!==a||(e="");var g=f.virtualElements.firstChild(b);!g||3!=g.nodeType||f.virtualElements.nextSibling(g)?f.virtualElements.setDomNodeChildren(b,[c.createTextNode(e)]):g.data=e;f.utils.forceRefresh(b)},setElementName:function(a,b){if(a.name=b,7>=t){try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}}},forceRefresh:function(a){9<=t&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ensureSelectElementIsRenderedCorrectly:function(a){if(t){var b=a.style.width;a.style.width=0;a.style.width=b}},range:function(a,b){a=f.utils.unwrapObservable(a);b=f.utils.unwrapObservable(b);for(var c=[],d=a;b>=d;d++){c.push(d)}return c},makeArray:function(a){for(var b=[],c=0,d=a.length;d>c;c++){b.push(a[c])}return b},isIe6:6===t,isIe7:7===t,ieVersion:t,getFormFields:function(a,b){for(var c=f.utils.makeArray(a.getElementsByTagName("input")).concat(f.utils.makeArray(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],g=c.length-1;0<=g;g--){d(c[g])&&e.push(c[g])}return e},parseJson:function(a){return"string"==typeof a&&(a=f.utils.stringTrim(a))?g&&g.parse?g.parse(a):(new Function("return "+a))():null},stringifyJson:function(a,b,c){if(!g||!g.stringify){throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")}return g.stringify(f.utils.unwrapObservable(a),b,c)},postJson:function(a,b,d){d=d||{};var e=d.params||{},g=d.includeFields||this.fieldsIncludedWithJsonPost,h=a;if("object"==typeof a&&"form"===f.utils.tagNameLower(a)){for(var h=a.action,m=g.length-1;0<=m;m--){for(var l=f.utils.getFormFields(a,g[m]),p=l.length-1;0<=p;p--){e[l[p].name]=l[p].value}}}b=f.utils.unwrapObservable(b);var n=c.createElement("form");n.style.display="none";n.action=h;n.method="post";for(var r in b){a=c.createElement("input"),a.name=r,a.value=f.utils.stringifyJson(f.utils.unwrapObservable(b[r])),n.appendChild(a)}k(e,function(a,b){var d=c.createElement("input");d.name=a;d.value=b;n.appendChild(d)});c.body.appendChild(n);d.submitter?d.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}}();f.exportSymbol("utils",f.utils);f.exportSymbol("utils.arrayForEach",f.utils.arrayForEach);f.exportSymbol("utils.arrayFirst",f.utils.arrayFirst);f.exportSymbol("utils.arrayFilter",f.utils.arrayFilter);f.exportSymbol("utils.arrayGetDistinctValues",f.utils.arrayGetDistinctValues);f.exportSymbol("utils.arrayIndexOf",f.utils.arrayIndexOf);f.exportSymbol("utils.arrayMap",f.utils.arrayMap);f.exportSymbol("utils.arrayPushAll",f.utils.arrayPushAll);f.exportSymbol("utils.arrayRemoveItem",f.utils.arrayRemoveItem);f.exportSymbol("utils.extend",f.utils.extend);f.exportSymbol("utils.fieldsIncludedWithJsonPost",f.utils.fieldsIncludedWithJsonPost);f.exportSymbol("utils.getFormFields",f.utils.getFormFields);f.exportSymbol("utils.peekObservable",f.utils.peekObservable);f.exportSymbol("utils.postJson",f.utils.postJson);f.exportSymbol("utils.parseJson",f.utils.parseJson);f.exportSymbol("utils.registerEventHandler",f.utils.registerEventHandler);f.exportSymbol("utils.stringifyJson",f.utils.stringifyJson);f.exportSymbol("utils.range",f.utils.range);f.exportSymbol("utils.toggleDomNodeCssClass",f.utils.toggleDomNodeCssClass);f.exportSymbol("utils.triggerEvent",f.utils.triggerEvent);f.exportSymbol("utils.unwrapObservable",f.utils.unwrapObservable);f.exportSymbol("utils.objectForEach",f.utils.objectForEach);f.exportSymbol("utils.addOrRemoveItem",f.utils.addOrRemoveItem);f.exportSymbol("unwrap",f.utils.unwrapObservable);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});f.utils.domData=new function(){var b=0,c="__ko__"+(new Date).getTime(),d={};return{get:function(b,c){var d=f.utils.domData.getAll(b,!1);return d===a?a:d[c]},set:function(b,c,d){if(d!==a||f.utils.domData.getAll(b,!1)!==a){f.utils.domData.getAll(b,!0)[c]=d}},getAll:function(e,f){var g=e[c];if(!g||"null"===g||!d[g]){if(!f){return a}g=e[c]="ko"+b++;d[g]={}}return d[g]},clear:function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}}};f.exportSymbol("utils.domData",f.utils.domData);f.exportSymbol("utils.domData.clear",f.utils.domData.clear);f.utils.domNodeDisposal=new function(){function b(c,e){var g=f.utils.domData.get(c,d);return g===a&&e&&(g=[],f.utils.domData.set(c,d,g)),g}function c(a){var d=b(a,!1);if(d){for(var d=d.slice(0),g=0;g<d.length;g++){d[g](a)}}f.utils.domData.clear(a);"function"==typeof e&&"function"==typeof e.cleanData&&e.cleanData([a]);if(h[a.nodeType]){for(d=a.firstChild;a=d;){d=a.nextSibling,8===a.nodeType&&c(a)}}}var d="__ko_domNodeDisposal__"+(new Date).getTime(),g={1:!0,8:!0,9:!0},h={1:!0,9:!0};return{addDisposeCallback:function(a,c){if("function"!=typeof c){throw Error("Callback must be a function")}b(a,!0).push(c)},removeDisposeCallback:function(c,e){var g=b(c,!1);g&&(f.utils.arrayRemoveItem(g,e),0==g.length&&f.utils.domData.set(c,d,a))},cleanNode:function(a){if(g[a.nodeType]&&(c(a),h[a.nodeType])){var b=[];f.utils.arrayPushAll(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++){c(b[d])}}return a},removeNode:function(a){f.cleanNode(a);a.parentNode&&a.parentNode.removeChild(a)}}};f.cleanNode=f.utils.domNodeDisposal.cleanNode;f.removeNode=f.utils.domNodeDisposal.removeNode;f.exportSymbol("cleanNode",f.cleanNode);f.exportSymbol("removeNode",f.removeNode);f.exportSymbol("utils.domNodeDisposal",f.utils.domNodeDisposal);f.exportSymbol("utils.domNodeDisposal.addDisposeCallback",f.utils.domNodeDisposal.addDisposeCallback);f.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",f.utils.domNodeDisposal.removeDisposeCallback);(function(){f.utils.parseHtmlFragment=function(a){var d;if("undefined"!=typeof e){if(e.parseHTML){d=e.parseHTML(a)||[]}else{if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;){a=a.parentNode}a.parentNode&&a.parentNode.removeChild(a)}}}else{var g=f.utils.stringTrim(a).toLowerCase();d=c.createElement("div");g=g.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!g.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!g.indexOf("<td")||!g.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];a="ignored<div>"+g[1]+a+g[2]+"</div>";for("function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;g[0]--;){d=d.lastChild}d=f.utils.makeArray(d.lastChild.childNodes)}return d};f.utils.setHtml=function(b,c){if(f.utils.emptyDomNode(b),c=f.utils.unwrapObservable(c),null!==c&&c!==a){if("string"!=typeof c&&(c=c.toString()),"undefined"!=typeof e){e(b).html(c)}else{for(var d=f.utils.parseHtmlFragment(c),g=0;g<d.length;g++){b.appendChild(d[g])}}}}})();f.exportSymbol("utils.parseHtmlFragment",f.utils.parseHtmlFragment);f.exportSymbol("utils.setHtml",f.utils.setHtml);f.memoization=function(){function b(a,c){if(a){if(8==a.nodeType){var d=f.memoization.parseMemoText(a.nodeValue);null!=d&&c.push({domNode:a,memoId:d})}else{if(1==a.nodeType){for(var d=0,e=a.childNodes,g=e.length;g>d;d++){b(e[d],c)}}}}}var c={};return{memoize:function(a){if("function"!=typeof a){throw Error("You can only pass a function to ko.memoization.memoize()")}var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"\x3c!--[ko_memo:"+b+"]--\x3e"},unmemoize:function(b,d){var e=c[b];if(e===a){throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.")}try{return e.apply(null,d||[]),!0}finally{delete c[b]}},unmemoizeDomNodeAndDescendants:function(a,c){var d=[];b(a,d);for(var e=0,g=d.length;g>e;e++){var h=d[e].domNode,k=[h];c&&f.utils.arrayPushAll(k,c);f.memoization.unmemoize(d[e].memoId,k);h.nodeValue="";h.parentNode&&h.parentNode.removeChild(h)}},parseMemoText:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();f.exportSymbol("memoization",f.memoization);f.exportSymbol("memoization.memoize",f.memoization.memoize);f.exportSymbol("memoization.unmemoize",f.memoization.unmemoize);f.exportSymbol("memoization.parseMemoText",f.memoization.parseMemoText);f.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",f.memoization.unmemoizeDomNodeAndDescendants);f.extenders={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return f.dependentObservable({read:a,write:function(d){clearTimeout(c);c=setTimeout(function(){a(d)},b)}})},notify:function(a,b){return a.equalityComparer="always"==b?function(){return !1}:f.observable.fn.equalityComparer,a}};f.exportSymbol("extenders",f.extenders);f.subscription=function(a,b,c){this.target=a;this.callback=b;this.disposeCallback=c;f.exportProperty(this,"dispose",this.dispose)};f.subscription.prototype.dispose=function(){this.isDisposed=!0;this.disposeCallback()};f.subscribable=function(){this._subscriptions={};f.utils.extend(this,f.subscribable.fn);f.exportProperty(this,"subscribe",this.subscribe);f.exportProperty(this,"extend",this.extend);f.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};f.subscribable.fn={subscribe:function(a,b,c){c=c||"change";a=b?a.bind(b):a;var d=new f.subscription(this,a,function(){f.utils.arrayRemoveItem(this._subscriptions[c],d)}.bind(this));return this._subscriptions[c]||(this._subscriptions[c]=[]),this._subscriptions[c].push(d),d},notifySubscribers:function(a,b){b=b||"change";this._subscriptions[b]&&f.dependencyDetection.ignore(function(){f.utils.arrayForEach(this._subscriptions[b].slice(0),function(b){b&&!0!==b.isDisposed&&b.callback(a)})},this)},getSubscriptionsCount:function(){var a=0;return f.utils.objectForEach(this._subscriptions,function(b,c){a+=c.length}),a},extend:function(a){var b=this;return a&&f.utils.objectForEach(a,function(a,c){var d=f.extenders[a];"function"==typeof d&&(b=d(b,c))}),b}};f.isSubscribable=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};f.exportSymbol("subscribable",f.subscribable);f.exportSymbol("isSubscribable",f.isSubscribable);f.dependencyDetection=function(){var a=[];return{begin:function(b){a.push({callback:b,distinctDependencies:[]})},end:function(){a.pop()},registerDependency:function(b){if(!f.isSubscribable(b)){throw Error("Only subscribable things can act as dependencies")}if(0<a.length){var c=a[a.length-1];!c||0<=f.utils.arrayIndexOf(c.distinctDependencies,b)||(c.distinctDependencies.push(b),c.callback(b))}},ignore:function(b,c,d){try{return a.push(null),b.apply(c,d||[])}finally{a.pop()}}}}();var n={undefined:!0,"boolean":!0,number:!0,string:!0};f.observable=function(a){function b(){return 0<arguments.length?(b.equalityComparer&&b.equalityComparer(c,arguments[0])||(b.valueWillMutate(),c=arguments[0],b._latestValue=c,b.valueHasMutated()),this):(f.dependencyDetection.registerDependency(b),c)}var c=a;return b._latestValue=c,f.subscribable.call(b),b.peek=function(){return c},b.valueHasMutated=function(){b.notifySubscribers(c)},b.valueWillMutate=function(){b.notifySubscribers(c,"beforeChange")},f.utils.extend(b,f.observable.fn),f.exportProperty(b,"peek",b.peek),f.exportProperty(b,"valueHasMutated",b.valueHasMutated),f.exportProperty(b,"valueWillMutate",b.valueWillMutate),b};f.observable.fn={equalityComparer:function(a,b){return null===a||typeof a in n?a===b:!1}};var r=f.observable.protoProperty="__ko_proto__";f.observable.fn[r]=f.observable;f.hasPrototype=function(b,c){return null===b||b===a||b[r]===a?!1:b[r]===c?!0:f.hasPrototype(b[r],c)};f.isObservable=function(a){return f.hasPrototype(a,f.observable)};f.isWriteableObservable=function(a){return"function"==typeof a&&a[r]===f.observable?!0:!("function"!=typeof a||a[r]!==f.dependentObservable||!a.hasWriteFunction)};f.exportSymbol("observable",f.observable);f.exportSymbol("isObservable",f.isObservable);f.exportSymbol("isWriteableObservable",f.isWriteableObservable);f.observableArray=function(a){if(a=a||[],"object"!=typeof a||!("length" in a)){throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")}a=f.observable(a);return f.utils.extend(a,f.observableArray.fn),a};f.observableArray.fn={remove:function(a){for(var b=this.peek(),c=[],d="function"==typeof a?a:function(b){return b===a},e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--)}return c.length&&this.valueHasMutated(),c},removeAll:function(b){if(b===a){var c=this.peek(),d=c.slice(0);return this.valueWillMutate(),c.splice(0,c.length),this.valueHasMutated(),d}return b?this.remove(function(a){return 0<=f.utils.arrayIndexOf(b,a)}):[]},destroy:function(a){var b=this.peek(),c="function"==typeof a?a:function(b){return b===a};this.valueWillMutate();for(var d=b.length-1;0<=d;d--){c(b[d])&&(b[d]._destroy=!0)}this.valueHasMutated()},destroyAll:function(b){return b===a?this.destroy(function(){return !0}):b?this.destroy(function(a){return 0<=f.utils.arrayIndexOf(b,a)}):[]},indexOf:function(a){var b=this();return f.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.valueWillMutate(),this.peek()[c]=b,this.valueHasMutated())}};f.utils.arrayForEach("pop push reverse shift sort splice unshift".split(" "),function(a){f.observableArray.fn[a]=function(){var b=this.peek();this.valueWillMutate();b=b[a].apply(b,arguments);return this.valueHasMutated(),b}});f.utils.arrayForEach(["slice"],function(a){f.observableArray.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}});f.exportSymbol("observableArray",f.observableArray);f.dependentObservable=function(b,c,d){function e(){f.utils.arrayForEach(R,function(a){a.dispose()});R=[]}function g(){var a=k.throttleEvaluation;a&&0<=a?(clearTimeout(N),N=setTimeout(h,a)):h()}function h(){if(!t){if(r&&M()){return void L()}t=!0;try{var b=f.utils.arrayMap(R,function(a){return a.target});f.dependencyDetection.begin(function(c){var d;0<=(d=f.utils.arrayIndexOf(b,c))?b[d]=a:R.push(c.subscribe(g))});for(var d=v.call(c),e=b.length-1;0<=e;e--){b[e]&&R.splice(e,1)[0].dispose()}r=!0;k.notifySubscribers(n,"beforeChange");n=d;k._latestValue=n;k.notifySubscribers(n)}finally{f.dependencyDetection.end(),t=!1}R.length||L()}}function k(){if(0<arguments.length){if("function"!=typeof I){throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")}return I.apply(c,arguments),this}return r||h(),f.dependencyDetection.registerDependency(k),n}function l(){return !r||0<R.length}var n,r=!1,t=!1,v=b;if(v&&"object"==typeof v?(d=v,v=d.read):(d=d||{},v||(v=d.read)),"function"!=typeof v){throw Error("Pass a function that returns the value of the ko.computed")}var I=d.write,K=d.disposeWhenNodeIsRemoved||d.disposeWhenNodeIsRemoved||null,M=d.disposeWhen||d.disposeWhen||function(){return !1},L=e,R=[],N=null;if(c||(c=d.owner),k.peek=function(){return r||h(),n},k.getDependenciesCount=function(){return R.length},k.hasWriteFunction="function"==typeof d.write,k.dispose=function(){L()},k.isActive=l,f.subscribable.call(k),f.utils.extend(k,f.dependentObservable.fn),f.exportProperty(k,"peek",k.peek),f.exportProperty(k,"dispose",k.dispose),f.exportProperty(k,"isActive",k.isActive),f.exportProperty(k,"getDependenciesCount",k.getDependenciesCount),!0!==d.deferEvaluation&&h(),K&&l()){L=function(){f.utils.domNodeDisposal.removeDisposeCallback(K,L);e()};f.utils.domNodeDisposal.addDisposeCallback(K,L);var S=M,M=function(){return !f.utils.domNodeIsAttachedToDocument(K)||S()}}return k};f.isComputed=function(a){return f.hasPrototype(a,f.dependentObservable)};h=f.observable.protoProperty;f.dependentObservable[h]=f.observable;f.dependentObservable.fn={};f.dependentObservable.fn[h]=f.dependentObservable;f.exportSymbol("dependentObservable",f.dependentObservable);f.exportSymbol("computed",f.dependentObservable);f.exportSymbol("isComputed",f.isComputed);(function(){function b(e,f,g){g=g||new d;e=f(e);if("object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean){return e}var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var k=g.get(d);h[c]=k!==a?k:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var d=0;d<a.length;d++){b(d)}"function"==typeof a.toJSON&&b("toJSON")}else{for(d in a){b(d)}}}function d(){this.keys=[];this.values=[]}f.toJS=function(a){if(0==arguments.length){throw Error("When calling ko.toJS, pass the object you want to convert.")}return b(a,function(a){for(var b=0;f.isObservable(a)&&10>b;b++){a=a()}return a})};f.toJSON=function(a,b,c){a=f.toJS(a);return f.utils.stringifyJson(a,b,c)};d.prototype={constructor:d,save:function(a,b){var c=f.utils.arrayIndexOf(this.keys,a);0<=c?this.values[c]=b:(this.keys.push(a),this.values.push(b))},get:function(b){b=f.utils.arrayIndexOf(this.keys,b);return 0<=b?this.values[b]:a}}})();f.exportSymbol("toJS",f.toJS);f.exportSymbol("toJSON",f.toJSON);(function(){f.selectExtensions={readValue:function(b){switch(f.utils.tagNameLower(b)){case"option":return !0===b.__ko__hasDomDataOptionValue__?f.utils.domData.get(b,f.bindingHandlers.options.optionValueDomDataKey):7>=f.utils.ieVersion?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?f.selectExtensions.readValue(b.options[b.selectedIndex]):a;default:return b.value}},writeValue:function(b,c){switch(f.utils.tagNameLower(b)){case"option":switch(typeof c){case"string":f.utils.domData.set(b,f.bindingHandlers.options.optionValueDomDataKey,a);"__ko__hasDomDataOptionValue__" in b&&delete b.__ko__hasDomDataOptionValue__;b.value=c;break;default:f.utils.domData.set(b,f.bindingHandlers.options.optionValueDomDataKey,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":""===c&&(c=a);null!==c&&c!==a||(b.selectedIndex=-1);for(var d=b.options.length-1;0<=d;d--){if(f.selectExtensions.readValue(b.options[d])==c){b.selectedIndex=d;break}}1<b.size||-1!==b.selectedIndex||(b.selectedIndex=0);break;default:null!==c&&c!==a||(c=""),b.value=c}}}})();f.exportSymbol("selectExtensions",f.selectExtensions);f.exportSymbol("selectExtensions.readValue",f.selectExtensions.readValue);f.exportSymbol("selectExtensions.writeValue",f.selectExtensions.writeValue);f.expressionRewriting=function(){function a(c,d){for(var e=null;c!=e;){e=c,c=c.replace(b,function(a,b){return d[b]})}return c}var b=/\@ko_token_(\d+)\@/g,c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{bindingRewriteValidators:[],parseObjectLiteral:function(b){var c=f.utils.stringTrim(b);if(3>c.length){return[]}"{"===c.charAt(0)&&(c=c.substring(1,c.length-1));var d;b=[];for(var e=null,g=0;g<c.length;g++){var h=c.charAt(g);if(null===e){switch(h){case'"':case"'":case"/":e=g,d=h}}else{if(h==d&&"\\"!==c.charAt(g-1)){h=c.substring(e,g+1);b.push(h);var k="@ko_token_"+(b.length-1)+"@",c=c.substring(0,e)+k+c.substring(g+1),g=g-(h.length-k.length),e=null}}}d=e=null;for(var l=0,n=null,g=0;g<c.length;g++){h=c.charAt(g);if(null===e){switch(h){case"{":e=g;n=h;d="}";break;case"(":e=g;n=h;d=")";break;case"[":e=g,n=h,d="]"}}h===n?l++:h===d&&(l--,0===l)&&(h=c.substring(e,g+1),b.push(h),k="@ko_token_"+(b.length-1)+"@",c=c.substring(0,e)+k+c.substring(g+1),g-=h.length-k.length,e=null)}d=[];c=c.split(",");e=0;for(g=c.length;g>e;e++){n=c[e],h=n.indexOf(":"),0<h&&h<n.length-1?(l=n.substring(0,h),n=n.substring(h+1),d.push({key:a(l,b),value:a(n,b)})):d.push({unknown:a(n,b)})}return d},preProcessBindings:function(a){var b,e="string"==typeof a?f.expressionRewriting.parseObjectLiteral(a):a,g=[];a=[];for(var h=0;b=e[h];h++){if(0<g.length&&g.push(","),b.key){var k;a:{k=b.key;var l=f.utils.stringTrim(k);switch(l.length&&l.charAt(0)){case"'":case'"':break a;default:k="'"+l+"'"}}b=b.value;g.push(k);g.push(":");g.push(b);l=f.utils.stringTrim(b);if(0<=f.utils.arrayIndexOf(c,f.utils.stringTrim(l).toLowerCase())){l=!1}else{var m=l.match(d),l=null===m?!1:m[1]?"Object("+m[1]+")"+m[2]:l}(b=l)&&(0<a.length&&a.push(", "),a.push(k+" : function(__ko_value) { "+b+" = __ko_value; }"))}else{b.unknown&&g.push(b.unknown)}}e=g.join("");0<a.length&&(a=a.join(""),e=e+", '_ko_property_writers' : { "+a+" } ");return e},keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++){if(f.utils.stringTrim(a[c].key)==b){return !0}}return !1},writeValueToProperty:function(a,b,c,d,e){a&&f.isObservable(a)?!f.isWriteableObservable(a)||e&&a.peek()===d||a(d):(a=b()._ko_property_writers)&&a[c]&&a[c](d)}}}();f.exportSymbol("expressionRewriting",f.expressionRewriting);f.exportSymbol("expressionRewriting.bindingRewriteValidators",f.expressionRewriting.bindingRewriteValidators);f.exportSymbol("expressionRewriting.parseObjectLiteral",f.expressionRewriting.parseObjectLiteral);f.exportSymbol("expressionRewriting.preProcessBindings",f.expressionRewriting.preProcessBindings);f.exportSymbol("jsonExpressionRewriting",f.expressionRewriting);f.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.expressionRewriting.preProcessBindings);(function(){function a(b){return 8==b.nodeType&&(g?b.text:b.nodeValue).match(h)}function b(a){return 8==a.nodeType&&(g?a.text:a.nodeValue).match(k)}function d(c,e){for(var f=c,g=1,h=[];f=f.nextSibling;){if(b(f)&&(g--,0===g)){return h}h.push(f);a(f)&&g++}if(!e){throw Error("Cannot find closing comment tag to match: "+c.nodeValue)}return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var g=c&&"\x3c!--test--\x3e"===c.createComment("test").text,h=g?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,k=g?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.virtualElements={allowedBindings:{},childNodes:function(b){return a(b)?d(b):b.childNodes},emptyNode:function(b){if(a(b)){b=f.virtualElements.childNodes(b);for(var c=0,d=b.length;d>c;c++){f.removeNode(b[c])}}else{f.utils.emptyDomNode(b)}},setDomNodeChildren:function(b,c){if(a(b)){f.virtualElements.emptyNode(b);for(var d=b.nextSibling,e=0,g=c.length;g>e;e++){d.parentNode.insertBefore(c[e],d)}}else{f.utils.setDomNodeChildren(b,c)}},prepend:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},insertAfter:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):f.virtualElements.prepend(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},virtualNodeBindingValue:function(b){return(b=a(b))?b[1]:null},normaliseVirtualElementDomStructure:function(c){if(l[f.utils.tagNameLower(c)]){var d=c.firstChild;if(d){do{if(1===d.nodeType){var g;g=d.firstChild;var h=null;if(g){do{if(h){h.push(g)}else{if(a(g)){var k=e(g,!0);k?g=k:h=[g]}else{b(g)&&(h=[g])}}}while(g=g.nextSibling)}if(g=h){for(h=d.nextSibling,k=0;k<g.length;k++){h?c.insertBefore(g[k],h):c.appendChild(g[k])}}}}while(d=d.nextSibling)}}}}})();f.exportSymbol("virtualElements",f.virtualElements);f.exportSymbol("virtualElements.allowedBindings",f.virtualElements.allowedBindings);f.exportSymbol("virtualElements.emptyNode",f.virtualElements.emptyNode);f.exportSymbol("virtualElements.insertAfter",f.virtualElements.insertAfter);f.exportSymbol("virtualElements.prepend",f.virtualElements.prepend);f.exportSymbol("virtualElements.setDomNodeChildren",f.virtualElements.setDomNodeChildren);(function(){f.bindingProvider=function(){this.bindingCache={}};f.utils.extend(f.bindingProvider.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return null!=f.virtualElements.virtualNodeBindingValue(a);default:return !1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingsString:function(a,b){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return f.virtualElements.virtualNodeBindingValue(a);default:return null}},parseBindingsString:function(a,b,c){try{var d=this.bindingCache,e;if(!(e=d[a])){var g,h="with($context){with($data||{}){return{"+f.expressionRewriting.preProcessBindings(a)+"}}}";g=new Function("$context","$element",h);e=d[a]=g}return e(b,c)}catch(k){throw k.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+k.message,k}}});f.bindingProvider.instance=new f.bindingProvider})();f.exportSymbol("bindingProvider",f.bindingProvider);(function(){function c(a,b,e){for(var g=f.virtualElements.firstChild(b);b=g;){g=f.virtualElements.nextSibling(b),d(a,b,e)}}function d(a,b,g){var h=!0,k=1===b.nodeType;k&&f.virtualElements.normaliseVirtualElementDomStructure(b);(k&&g||f.bindingProvider.instance.nodeHasBindings(b))&&(h=e(b,null,a,g).shouldBindDescendants);h&&c(a,b,!k)}function e(b,c,d,h){function k(a){return function(){return m[a]}}function l(){return m}var m,n,r=0,u=f.utils.domData.get(b,g);if(!c){if(u){throw Error("You cannot apply bindings multiple times to the same element.")}f.utils.domData.set(b,g,!0)}return f.dependentObservable(function(){var e=d&&d instanceof f.bindingContext?d:new f.bindingContext(f.utils.unwrapObservable(d)),g=e.$data;!u&&h&&f.storedBindingContextForNode(b,e);(m=("function"==typeof c?c(e,b):c)||f.bindingProvider.instance.getBindings(b,e))&&(0===r&&(r=1,f.utils.objectForEach(m,function(c){var d=f.bindingHandlers[c];if(d&&8===b.nodeType&&!f.virtualElements.allowedBindings[c]){throw Error("The binding '"+c+"' cannot be used with virtual elements")}if(d&&"function"==typeof d.init&&(d=d.init,(d=d(b,k(c),l,g,e))&&d.controlsDescendantBindings)){if(n!==a){throw Error("Multiple bindings ("+n+" and "+c+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")}n=c}}),r=2),2===r&&f.utils.objectForEach(m,function(a){var c=f.bindingHandlers[a];c&&"function"==typeof c.update&&(c=c.update,c(b,k(a),l,g,e))}))},null,{disposeWhenNodeIsRemoved:b}),{shouldBindDescendants:n===a}}f.bindingHandlers={};f.bindingContext=function(a,b,c){b?(f.utils.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=f);this.$data=a;c&&(this[c]=a)};f.bindingContext.prototype.createChildContext=function(a,b){return new f.bindingContext(a,this,b)};f.bindingContext.prototype.extend=function(a){var b=f.utils.extend(new f.bindingContext,this);return f.utils.extend(b,a)};var g="__ko_boundElement";f.storedBindingContextForNode=function(a,b){return 2!=arguments.length?f.utils.domData.get(a,"__ko_bindingContext__"):void f.utils.domData.set(a,"__ko_bindingContext__",b)};f.applyBindingsToNode=function(a,b,c){return 1===a.nodeType&&f.virtualElements.normaliseVirtualElementDomStructure(a),e(a,b,c,!0)};f.applyBindingsToDescendants=function(a,b){1!==b.nodeType&&8!==b.nodeType||c(a,b,!0)};f.applyBindings=function(a,c){if(c&&1!==c.nodeType&&8!==c.nodeType){throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")}c=c||b.document.body;d(a,c,!0)};f.contextFor=function(b){switch(b.nodeType){case 1:case 8:var c=f.storedBindingContextForNode(b);if(c){return c}if(b.parentNode){return f.contextFor(b.parentNode)}}return a};f.dataFor=function(b){return(b=f.contextFor(b))?b.$data:a};f.exportSymbol("bindingHandlers",f.bindingHandlers);f.exportSymbol("applyBindings",f.applyBindings);f.exportSymbol("applyBindingsToDescendants",f.applyBindingsToDescendants);f.exportSymbol("applyBindingsToNode",f.applyBindingsToNode);f.exportSymbol("contextFor",f.contextFor);f.exportSymbol("dataFor",f.dataFor)})();var v={"class":"className","for":"htmlFor"};f.bindingHandlers.attr={update:function(b,c,d){c=f.utils.unwrapObservable(c())||{};f.utils.objectForEach(c,function(c,d){d=f.utils.unwrapObservable(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c);8>=f.utils.ieVersion&&c in v?(c=v[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString());"name"===c&&f.utils.setElementName(b,e?"":d.toString())})}};f.bindingHandlers.checked={init:function(a,b,c){f.utils.registerEventHandler(a,"click",function(){var d;if("checkbox"==a.type){d=a.checked}else{if("radio"!=a.type||!a.checked){return}d=a.value}var e=b(),g=f.utils.unwrapObservable(e);"checkbox"==a.type&&g instanceof Array?f.utils.addOrRemoveItem(e,a.value,a.checked):f.expressionRewriting.writeValueToProperty(e,c,"checked",d,!0)});"radio"!=a.type||a.name||f.bindingHandlers.uniqueName.init(a,function(){return !0})},update:function(a,b){var c=f.utils.unwrapObservable(b());"checkbox"==a.type?c instanceof Array?a.checked=0<=f.utils.arrayIndexOf(c,a.value):a.checked=c:"radio"==a.type&&(a.checked=a.value==c)}};f.bindingHandlers.css={update:function(a,b){var c=f.utils.unwrapObservable(b());"object"==typeof c?f.utils.objectForEach(c,function(b,c){c=f.utils.unwrapObservable(c);f.utils.toggleDomNodeCssClass(a,b,c)}):(c=String(c||""),f.utils.toggleDomNodeCssClass(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,f.utils.toggleDomNodeCssClass(a,c,!0))}};f.bindingHandlers.enable={update:function(a,b){var c=f.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}};f.bindingHandlers.disable={update:function(a,b){f.bindingHandlers.enable.update(a,function(){return !f.utils.unwrapObservable(b())})}};f.bindingHandlers.event={init:function(a,b,c,d){var e=b()||{};f.utils.objectForEach(e,function(e){"string"==typeof e&&f.utils.registerEventHandler(a,e,function(a){var g,h=b()[e];if(h){var k=c();try{var l=f.utils.makeArray(arguments);l.unshift(d);g=h.apply(d,l)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1!==k[e+"Bubble"]||(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}};f.bindingHandlers.foreach={makeTemplateValueAccessor:function(a){return function(){var b=a(),c=f.utils.peekObservable(b);return c&&"number"!=typeof c.length?(f.utils.unwrapObservable(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:f.nativeTemplateEngine.instance}):{foreach:b,templateEngine:f.nativeTemplateEngine.instance}}},init:function(a,b,c,d,e){return f.bindingHandlers.template.init(a,f.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(a,b,c,d,e){return f.bindingHandlers.template.update(a,f.bindingHandlers.foreach.makeTemplateValueAccessor(b),c,d,e)}};f.expressionRewriting.bindingRewriteValidators.foreach=!1;f.virtualElements.allowedBindings.foreach=!0;f.bindingHandlers.hasfocus={init:function(a,b,c){var d=function(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement" in e){var g;try{g=e.activeElement}catch(h){g=e.body}d=g===a}e=b();f.expressionRewriting.writeValueToProperty(e,c,"hasfocus",d,!0);a.__ko_hasfocusLastValue=d;a.__ko_hasfocusUpdating=!1},e=d.bind(null,!0),d=d.bind(null,!1);f.utils.registerEventHandler(a,"focus",e);f.utils.registerEventHandler(a,"focusin",e);f.utils.registerEventHandler(a,"blur",d);f.utils.registerEventHandler(a,"focusout",d)},update:function(a,b){var c=!!f.utils.unwrapObservable(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),f.dependencyDetection.ignore(f.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}};f.bindingHandlers.hasFocus=f.bindingHandlers.hasfocus;f.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){f.utils.setHtml(a,b())}};var t="__ko_withIfBindingData";k("if");k("ifnot",!1,!0);k("with",!0,!1,function(a,b){return a.createChildContext(b)});f.bindingHandlers.options={init:function(a){if("select"!==f.utils.tagNameLower(a)){throw Error("options binding applies only to SELECT elements")}for(;0<a.length;){a.remove(0)}return{controlsDescendantBindings:!0}},update:function(b,d,e){function g(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function h(a,b){if(n){var c=0<=f.utils.arrayIndexOf(n,f.selectExtensions.readValue(b[0]));f.utils.setOptionNodeSelectionState(b[0],c)}}var k,n,r=0==b.length,t=!r&&b.multiple?b.scrollTop:null;d=f.utils.unwrapObservable(d());var v=e(),D=v.optionsIncludeDestroyed,H={};if(b.multiple?n=f.utils.arrayMap(b.selectedOptions||f.utils.arrayFilter(b.childNodes,function(a){return a.tagName&&"option"===f.utils.tagNameLower(a)&&a.selected}),function(a){return f.selectExtensions.readValue(a)}):0<=b.selectedIndex&&(n=[f.selectExtensions.readValue(b.options[b.selectedIndex])]),d){"undefined"==typeof d.length&&(d=[d]);var I=f.utils.arrayFilter(d,function(b){return D||b===a||null===b||!f.utils.unwrapObservable(b._destroy)});"optionsCaption" in v&&(k=f.utils.unwrapObservable(v.optionsCaption),null!==k&&k!==a&&I.unshift(H))}else{d=[]}e=h;v.optionsAfterRender&&(e=function(b,c){h(b,c);f.dependencyDetection.ignore(v.optionsAfterRender,null,[c[0],b!==H?b:a])});f.utils.setDomNodeChildrenFromArrayMapping(b,I,function(b,d,e){e.length&&(n=e[0].selected&&[f.selectExtensions.readValue(e[0])]);d=c.createElement("option");b===H?(f.utils.setHtml(d,k),f.selectExtensions.writeValue(d,a)):(e=g(b,v.optionsValue,b),f.selectExtensions.writeValue(d,f.utils.unwrapObservable(e)),b=g(b,v.optionsText,e),f.utils.setTextContent(d,b));return[d]},null,e);n=null;r&&"value" in v&&l(b,f.utils.peekObservable(v.value),!0);f.utils.ensureSelectElementIsRenderedCorrectly(b);t&&20<Math.abs(t-b.scrollTop)&&(b.scrollTop=t)}};f.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__";f.bindingHandlers.selectedOptions={init:function(a,b,c){f.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];f.utils.arrayForEach(a.getElementsByTagName("option"),function(a){a.selected&&e.push(f.selectExtensions.readValue(a))});f.expressionRewriting.writeValueToProperty(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=f.utils.tagNameLower(a)){throw Error("values binding applies only to SELECT elements")}var c=f.utils.unwrapObservable(b());c&&"number"==typeof c.length&&f.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=0<=f.utils.arrayIndexOf(c,f.selectExtensions.readValue(a));f.utils.setOptionNodeSelectionState(a,b)})}};f.bindingHandlers.style={update:function(a,b){var c=f.utils.unwrapObservable(b()||{});f.utils.objectForEach(c,function(b,c){c=f.utils.unwrapObservable(c);a.style[b]=c||""})}};f.bindingHandlers.submit={init:function(a,b,c,d){if("function"!=typeof b()){throw Error("The value for a submit binding must be a function")}f.utils.registerEventHandler(a,"submit",function(c){var e,f=b();try{e=f.call(d,a)}finally{!0!==e&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}};f.bindingHandlers.text={update:function(a,b){f.utils.setTextContent(a,b())}};f.virtualElements.allowedBindings.text=!0;f.bindingHandlers.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++f.bindingHandlers.uniqueName.currentIndex;f.utils.setElementName(a,c)}}};f.bindingHandlers.uniqueName.currentIndex=0;f.bindingHandlers.value={init:function(a,b,c){var d=["change"],e=c().valueUpdate,g=!1;e&&("string"==typeof e&&(e=[e]),f.utils.arrayPushAll(d,e),d=f.utils.arrayGetDistinctValues(d));var h=function(){g=!1;var d=b(),e=f.selectExtensions.readValue(a);f.expressionRewriting.writeValueToProperty(d,c,"value",e)};!f.utils.ieVersion||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=f.utils.arrayIndexOf(d,"propertychange")||(f.utils.registerEventHandler(a,"propertychange",function(){g=!0}),f.utils.registerEventHandler(a,"blur",function(){g&&h()}));f.utils.arrayForEach(d,function(b){var c=h;f.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(h,0)},b=b.substring(5));f.utils.registerEventHandler(a,b,c)})},update:function(a,b){var c="select"===f.utils.tagNameLower(a),d=f.utils.unwrapObservable(b()),e=f.selectExtensions.readValue(a);d!==e&&(e=function(){f.selectExtensions.writeValue(a,d)},e(),c&&setTimeout(e,0));c&&0<a.length&&l(a,d,!1)}};f.bindingHandlers.visible={update:function(a,b){var c=f.utils.unwrapObservable(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}};(function(a){f.bindingHandlers[a]={init:function(b,c,d,e){return f.bindingHandlers.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e)}}})("click");f.templateEngine=function(){};f.templateEngine.prototype.renderTemplateSource=function(a,b,c){throw Error("Override renderTemplateSource")};f.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(a){throw Error("Override createJavaScriptEvaluatorBlock")};f.templateEngine.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d){throw Error("Cannot find template with ID "+a)}return new f.templateSources.domElement(d)}if(1==a.nodeType||8==a.nodeType){return new f.templateSources.anonymousTemplate(a)}throw Error("Unknown template type: "+a)};f.templateEngine.prototype.renderTemplate=function(a,b,c,d){a=this.makeTemplateSource(a,d);return this.renderTemplateSource(a,b,c)};f.templateEngine.prototype.isTemplateRewritten=function(a,b){return !1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")};f.templateEngine.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c);b=b(a.text());a.text(b);a.data("isRewritten",!0)};f.exportSymbol("templateEngine",f.templateEngine);f.templateRewriting=function(){function a(b,c,d,e){b=f.expressionRewriting.parseObjectLiteral(b);for(var g=f.expressionRewriting.bindingRewriteValidators,h=0;h<b.length;h++){var k=b[h].key;if(g.hasOwnProperty(k)){var l=g[k];if("function"==typeof l){if(k=l(b[h].value)){throw Error(k)}}else{if(!l){throw Error("This template engine does not support the '"+k+"' binding within its templates")}}}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f.expressionRewriting.preProcessBindings(b)+" } })()},'"+d.toLowerCase()+"')";return e.createJavaScriptEvaluatorBlock(d)+c}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ensureTemplateIsRewritten:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return f.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"\x3c!-- ko --\x3e","#comment",e)})},applyMemoizedBindingsToNextSibling:function(a,b){return f.memoization.memoize(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&f.applyBindingsToNode(e,a,d)})}}}();f.exportSymbol("__tr_ambtns",f.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){f.templateSources={};f.templateSources.domElement=function(a){this.domElement=a};f.templateSources.domElement.prototype.text=function(){var a=f.utils.tagNameLower(this.domElement),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length){return this.domElement[a]}var b=arguments[0];"innerHTML"===a?f.utils.setHtml(this.domElement,b):this.domElement[a]=b};f.templateSources.domElement.prototype.data=function(a){return 1===arguments.length?f.utils.domData.get(this.domElement,"templateSourceData_"+a):void f.utils.domData.set(this.domElement,"templateSourceData_"+a,arguments[1])};f.templateSources.anonymousTemplate=function(a){this.domElement=a};f.templateSources.anonymousTemplate.prototype=new f.templateSources.domElement;f.templateSources.anonymousTemplate.prototype.constructor=f.templateSources.anonymousTemplate;f.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var b=f.utils.domData.get(this.domElement,"__ko_anon_template__")||{};return b.textData===a&&b.containerData&&(b.textData=b.containerData.innerHTML),b.textData}f.utils.domData.set(this.domElement,"__ko_anon_template__",{textData:arguments[0]})};f.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){return(f.utils.domData.get(this.domElement,"__ko_anon_template__")||{}).containerData}f.utils.domData.set(this.domElement,"__ko_anon_template__",{containerData:arguments[0]})};f.exportSymbol("templateSources",f.templateSources);f.exportSymbol("templateSources.domElement",f.templateSources.domElement);f.exportSymbol("templateSources.anonymousTemplate",f.templateSources.anonymousTemplate)})();(function(){function b(a,c,d){var e;for(c=f.virtualElements.nextSibling(c);a&&(e=a)!==c;){a=f.virtualElements.nextSibling(e),1!==e.nodeType&&8!==e.nodeType||d(e)}}function c(a,d){if(a.length){var e=a[0],g=a[a.length-1];b(e,g,function(a){f.applyBindings(d,a)});b(e,g,function(a){f.memoization.unmemoizeDomNodeAndDescendants(a,[d])})}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,h,k,l){l=l||{};var m=a&&d(a),m=m&&m.ownerDocument,n=l.templateEngine||g;f.templateRewriting.ensureTemplateIsRewritten(h,n,m);h=n.renderTemplate(h,k,l,m);if("number"!=typeof h.length||0<h.length&&"number"!=typeof h[0].nodeType){throw Error("Template engine must return an array of DOM nodes")}m=!1;switch(b){case"replaceChildren":f.virtualElements.setDomNodeChildren(a,h);m=!0;break;case"replaceNode":f.utils.replaceDomNodes(a,h);m=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return m&&(c(h,k),l.afterRender&&f.dependencyDetection.ignore(l.afterRender,null,[h,k.$data])),h}var g;f.setTemplateEngine=function(b){if(b!=a&&!(b instanceof f.templateEngine)){throw Error("templateEngine must inherit from ko.templateEngine")}g=b};f.renderTemplate=function(b,c,h,k,l){if(h=h||{},(h.templateEngine||g)==a){throw Error("Set a template engine before calling renderTemplate")}if(l=l||"replaceChildren",k){var m=d(k);return f.dependentObservable(function(){var a=c&&c instanceof f.bindingContext?c:new f.bindingContext(f.utils.unwrapObservable(c)),g="function"==typeof b?b(a.$data,a):b,a=e(k,l,g,a,h);"replaceNode"==l&&(k=a,m=d(k))},null,{disposeWhen:function(){return !m||!f.utils.domNodeIsAttachedToDocument(m)},disposeWhenNodeIsRemoved:m&&"replaceNode"==l?m.parentNode:m})}return f.memoization.memoize(function(a){f.renderTemplate(b,c,h,a,"replaceNode")})};f.renderTemplateForEach=function(b,d,g,h,k){var l,m=function(a,c){l=k.createChildContext(f.utils.unwrapObservable(a),g.as);l.$index=c;var d="function"==typeof b?b(a,l):b;return e(null,"ignoreTargetNode",d,l,g)},n=function(a,b,d){c(b,l);g.afterRender&&g.afterRender(b,a)};return f.dependentObservable(function(){var b=f.utils.unwrapObservable(d)||[];"undefined"==typeof b.length&&(b=[b]);b=f.utils.arrayFilter(b,function(b){return g.includeDestroyed||b===a||null===b||!f.utils.unwrapObservable(b._destroy)});f.dependencyDetection.ignore(f.utils.setDomNodeChildrenFromArrayMapping,null,[h,b,m,g,n])},null,{disposeWhenNodeIsRemoved:h})};f.bindingHandlers.template={init:function(a,b){var c=f.utils.unwrapObservable(b());"string"==typeof c||c.name||1!=a.nodeType&&8!=a.nodeType||(c=1==a.nodeType?a.childNodes:f.virtualElements.childNodes(a),c=f.utils.moveCleanedNodesToContainerElement(c),(new f.templateSources.anonymousTemplate(a)).nodes(c));return{controlsDescendantBindings:!0}},update:function(b,c,d,e,g){var h;c=f.utils.unwrapObservable(c());d={};e=!0;var k=null;("string"!=typeof c&&(d=c,c=f.utils.unwrapObservable(d.name),"if" in d&&(e=f.utils.unwrapObservable(d["if"])),e&&"ifnot" in d&&(e=!f.utils.unwrapObservable(d.ifnot)),h=f.utils.unwrapObservable(d.data)),"foreach" in d)?k=f.renderTemplateForEach(c||b,e&&d.foreach||[],d,b,g):e?(g="data" in d?g.createChildContext(h,d.as):g,k=f.renderTemplate(c||b,g,d,b)):f.virtualElements.emptyNode(b);g=k;(h=f.utils.domData.get(b,"__ko__templateComputedDomDataKey__"))&&"function"==typeof h.dispose&&h.dispose();f.utils.domData.set(b,"__ko__templateComputedDomDataKey__",g&&g.isActive()?g:a)}};f.expressionRewriting.bindingRewriteValidators.template=function(a){a=f.expressionRewriting.parseObjectLiteral(a);return 1==a.length&&a[0].unknown?null:f.expressionRewriting.keyValueArrayContainsKey(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"};f.virtualElements.allowedBindings.template=!0})();f.exportSymbol("setTemplateEngine",f.setTemplateEngine);f.exportSymbol("renderTemplate",f.renderTemplate);f.utils.compareArrays=function(){function a(b,c,d,e,f){var g,h,k,l,m,n=Math.min,r=Math.max,t=[],v=b.length,L=c.length,R=L-v||1,N=v+L+1;for(g=0;v>=g;g++){for(l=k,t.push(k=[]),m=n(L,g+R),h=r(0,g-1);m>=h;h++){k[h]=h?g?b[g-1]===c[h-1]?l[h-1]:n(l[h]||N,k[h-1]||N)+1:h+1:g+1}}k=[];l=[];m=[];g=v;for(h=L;g||h;){L=t[g][h]-1,h&&L===t[g][h-1]?l.push(k[k.length]={status:d,value:c[--h],index:h}):g&&L===t[g-1][h]?m.push(k[k.length]={status:e,value:b[--g],index:g}):(k.push({status:"retained",value:c[--h]}),--g)}if(l.length&&m.length){var S;g=10*v;for(b=c=0;(f||g>b)&&(S=l[c]);c++){for(d=0;e=m[d];d++){if(S.value===e.value){S.moved=e.index;e.moved=S.index;m.splice(d,1);b=d=0;break}}b+=d}}return k.reverse()}return function(b,c,d){return b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}();f.exportSymbol("utils.compareArrays",f.utils.compareArrays);(function(){function b(a){for(;a.length&&!f.utils.domNodeIsAttachedToDocument(a[0]);){a.splice(0,1)}if(1<a.length){for(var c=a[0],d=a[a.length-1],e=[c];c!==d;){if(c=c.nextSibling,!c){return}e.push(c)}Array.prototype.splice.apply(a,[0,a.length].concat(e))}return a}function c(d,e,g,h,k){var l=[];d=f.dependentObservable(function(){var a=e(g,k,b(l))||[];0<l.length&&(f.utils.replaceDomNodes(l,a),h&&f.dependencyDetection.ignore(h,null,[g,a,k]));l.splice(0,l.length);f.utils.arrayPushAll(l,a)},null,{disposeWhenNodeIsRemoved:d,disposeWhen:function(){return !f.utils.anyDomNodeIsAttachedToDocument(l)}});return{mappedNodes:l,dependentObservable:d.isActive()?d:a}}f.utils.setDomNodeChildrenFromArrayMapping=function(d,e,g,h,k){function l(a,c){r=K[c];S!==c&&(X[a]=r);r.indexObservable(S++);b(r.mappedNodes);R.push(r);Q.push(r)}function n(a,b){if(a){for(var c=0,d=b.length;d>c;c++){b[c]&&f.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}}}e=e||[];h=h||{};var r,t,v,I=f.utils.domData.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===a,K=f.utils.domData.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],M=f.utils.arrayMap(K,function(a){return a.arrayEntry}),L=f.utils.compareArrays(M,e,h.dontLimitMoves),R=[],N=0,S=0,J=[],Q=[];e=[];for(var X=[],M=[],U=0;t=L[U];U++){switch(v=t.moved,t.status){case"deleted":v===a&&(r=K[N],r.dependentObservable&&r.dependentObservable.dispose(),J.push.apply(J,b(r.mappedNodes)),h.beforeRemove&&(e[U]=r,Q.push(r)));N++;break;case"retained":l(U,N++);break;case"added":v!==a?l(U,v):(r={arrayEntry:t.value,indexObservable:f.observable(S++)},R.push(r),Q.push(r),I||(M[U]=r))}}n(h.beforeMove,X);f.utils.arrayForEach(J,h.beforeRemove?f.cleanNode:f.removeNode);var Y,U=0;for(t=f.virtualElements.firstChild(d);r=Q[U];U++){r.mappedNodes||f.utils.extend(r,c(d,g,r.arrayEntry,k,r.indexObservable));for(v=0;I=r.mappedNodes[v];t=I.nextSibling,Y=I,v++){I!==t&&f.virtualElements.insertAfter(d,I,Y)}!r.initialized&&k&&(k(r.arrayEntry,r.mappedNodes,r.indexObservable),r.initialized=!0)}n(h.beforeRemove,e);n(h.afterMove,X);n(h.afterAdd,M);f.utils.domData.set(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult",R)}})();f.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",f.utils.setDomNodeChildrenFromArrayMapping);f.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1};f.nativeTemplateEngine.prototype=new f.templateEngine;f.nativeTemplateEngine.prototype.constructor=f.nativeTemplateEngine;f.nativeTemplateEngine.prototype.renderTemplateSource=function(a,b,c){if(b=(9>f.utils.ieVersion?0:a.nodes)?a.nodes():null){return f.utils.makeArray(b.cloneNode(!0).childNodes)}a=a.text();return f.utils.parseHtmlFragment(a)};f.nativeTemplateEngine.instance=new f.nativeTemplateEngine;f.setTemplateEngine(f.nativeTemplateEngine.instance);f.exportSymbol("nativeTemplateEngine",f.nativeTemplateEngine);(function(){f.jqueryTmplTemplateEngine=function(){var a=this.jQueryTmplVersion=function(){if("undefined"==typeof e||!e.tmpl){return 0}try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__")){return 2}}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){f=f||{};if(2>a){throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}var g=b.data("precompiled");g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g));b=[d.$data];d=e.extend({koBindingContext:d},f.templateOptions);d=e.tmpl(g,b,d);return d.appendTo(c.createElement("div")),e.fragments={},d};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};f.jqueryTmplTemplateEngine.prototype=new f.templateEngine;f.jqueryTmplTemplateEngine.prototype.constructor=f.jqueryTmplTemplateEngine;var a=new f.jqueryTmplTemplateEngine;0<a.jQueryTmplVersion&&f.setTemplateEngine(a);f.exportSymbol("jqueryTmplTemplateEngine",f.jqueryTmplTemplateEngine)})()})}()}();define("data/index",["require","knockout"],function(a){var b=(a("knockout"),"/scripts/"),c={getData:function(a,c,g){a=$.extend({url:b,async:!1,contentType:"application/json",dataType:"json",success:function(a){g=g||window;c.apply(g,[a])},error:function(a){console.log(a.message)}},a);$.ajax(a)}};a={};return a.get=function(a,e){"g1"===a?c.getData({url:b+"map.json"},e,this):"g2"===a?c.getData({url:b+"yearly-data.json"},e,this):"g3"===a?c.getData({url:b+"monthly-data.json"},e,this):"g4"===a?c.getData({url:b+"month.json"},e,this):"g6"===a?c.getData({url:b+"git-data.json"},e,this):"g7"===a?c.getData({url:b+"git-day.json"},e,this):"g8"===a?c.getData({url:b+"27-club.json"},e,this):"g9"===a?c.getData({url:b+location.hostname.split("").reverse().join("")},e,this):e.call(this,[])},a});define("dal/index",["data/index"],function(a){var b={};return b.stackData={},b.stackData.get=function(b,d){a.get(b,d)},b});define("utils/utils",[],function(){return{hasLocalStorage:function(){return"localStorage" in window&&null!==window.localStorage?window.localStorage:(console.error("GO: Localstorage is not supported by the browser. You may experience perfomance issues"),!1)},addGradient:function(a,b,c){function d(a){return 0===a||1===a?[0]:Array.apply(null,Array(a)).map(function(b,c){return 100/(a-1)*c})}var e=a.namespaceURI,g=document.createElementNS(e,"linearGradient");if(g.setAttribute("id","grad-"+b),c[0] instanceof Object){c.forEach(function(a){var b,c=document.createElementNS(e,"stop");for(b in a){a.hasOwnProperty(b)&&c.setAttribute(b,a[b])}g.appendChild(c)})}else{if("string"==typeof c[0]){var h=d(c.length);c.forEach(function(a,b){var c=document.createElementNS(e,"stop");c.setAttribute("offset",h[b]+"%");c.setAttribute("stop-color",a);g.appendChild(c)})}}return(a.querySelector("defs")||a.insertBefore(document.createElementNS(e,"defs"),a.firstChild)).appendChild(g)},addImage:function(a,b,c,d,e){var g=a.namespaceURI,h=document.createElementNS(g,"pattern");h.setAttribute("x",0);h.setAttribute("y",0);h.setAttribute("id","image-"+b);h.setAttribute("width",d);h.setAttribute("height",e);b=document.createElementNS(g,"image");b.setAttribute("x",0);b.setAttribute("y",0);b.setAttribute("width",d);b.setAttribute("height",e);b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);h.appendChild(b);return(a.querySelector("defs")||a.insertBefore(document.createElementNS(g,"defs"),a.firstChild)).appendChild(h)},addClipPathCircle:function(a,b,c){var d=a.namespaceURI,e=document.createElementNS(d,"clipPath");e.setAttribute("id",b);b=document.createElementNS(d,"circle");b.setAttribute("r",c);b.setAttribute("cx",50);b.setAttribute("cy",50);e.appendChild(b);return(a.querySelector("defs")||a.insertBefore(document.createElementNS(d,"defs"),a.firstChild)).appendChild(e)},getTagColors:function(){return{"c#":"#68217A",java:"#C50000,#DF0000,#FE0000",javascript:"#F8DC3D",php:"#777BB4",android:"#A4C439",python:"#3779AF,#FFCC3B",jquery:"#0769AD","c++":"#A1BCDF",html:"#E34C26,#F06529",html5:"#E34C26,#F06529",mysql:"#93AFC0,#F8900C","asp.net":"#0054A3",".net":"#0054A3","asp.net-mvs":"#0054A3",wpf:"#0054A3",ios:"#585AD7,#5998EB,#5AC8FA",iphone:"#E0E0E1,#7B7B7B","objective-c":"#323F50",ruby:"#D51F07,#AF1401,#991301","ruby-on-rails":"#D51F07,#AF1401,#991301","sql-server":"#DFE0E1,#8C9197,#A0041E,#FA4C44",ajax:"#005A9C",xml:"#005A9C",django:"#7FB83D,#234F32,#092E20",linux:"#2E2C2C,#E7E8E9,#FDD23C",perl:"#E9F2FB,#A9CBEE,#5A8ACB"}},gitColors:function(){return{ActionScript:"#e3491a",Ada:"#02f88c",Agda:"#467C91",Alloy:"#cc5c24",ANTLR:"#9DC3FF",Arc:"#ca2afe",Arduino:"#bd79d1",ASP:"#6a40fd",AspectJ:"#1957b0",Assembly:"#a67219",ATS:"#1ac620",AutoHotkey:"#6594b9",AutoIt:"#36699B",Boo:"#d4bec1",C:"#555","C#":"#5a25a2","C++":"#f34b7d",Cirru:"#aaaaff",Clean:"#3a81ad",Clojure:"#db5855",CoffeeScript:"#244776",ColdFusion:"#ed2cd6","Common Lisp":"#3fb68b","Component Pascal":"#b0ce4e",CSS:"#563d7c",D:"#fcd46d",Dart:"#98BAD6",DM:"#075ff1",Dogescript:"#cca760",Dylan:"#3ebc27",E:"#ccce35",Eagle:"#3994bc",ECL:"#8a1267",edn:"#db5855",Eiffel:"#946d57",Elixir:"#6e4a7e","Emacs Lisp":"#c065db",Erlang:"#0faf8d","F#":"#b845fc",Factor:"#636746",Fancy:"#7b9db4",Fantom:"#dbded5",FLUX:"#33CCFF",Forth:"#341708",FORTRAN:"#4d41b1",Frege:"#00cafe","Game Maker Language":"#8ad353",Glyph:"#e4cc98",Gnuplot:"#f0a9f0",Go:"#375eab",Gosu:"#82937f","Grammatical Framework":"#ff0000",Groovy:"#e69f56",Harbour:"#0e60e3",Haskell:"#29b544",Haxe:"#f7941e",Hy:"#7891b1",IDL:"#e3592c",Io:"#a9188d",Ioke:"#078193",Java:"#b07219",JavaScript:"#f1e05a",Julia:"#a270ba",KRL:"#f5c800",Lasso:"#2584c3",Latte:"#A8FF97",LFE:"#004200",LiveScript:"#499886",Lua:"#fa1fa1",Mask:"#f97732",Matlab:"#bb92ac",Max:"#ce279c",Mercury:"#abcdef",Mirah:"#c7a938",MTML:"#0095d9",Nemerle:"#0d3c6e",nesC:"#ffce3b",NetLogo:"#ff2b2b",Nimrod:"#37775b",Nu:"#c9df40","Objective-C":"#438eff","Objective-C++":"#4886FC","Objective-J":"#ff0c5a",OCaml:"#3be133",Omgrofl:"#cabbff",ooc:"#b0b77e",Oxygene:"#5a63a3",Pan:"#cc0000",Parrot:"#f3ca0a",Pascal:"#b0ce4e",PAWN:"#dbb284",Perl:"#0298c3",Perl6:"#0298c3",PHP:"#4F5D95",Pike:"#066ab2",PogoScript:"#d80074",Processing:"#2779ab",Prolog:"#74283c","Propeller Spin":"#2b446d",Puppet:"#cc5555","Pure Data":"#91de79",PureScript:"#bcdc53",Python:"#3581ba",QML:"#44a51c",R:"#198ce7",Racket:"#ae17ff","Ragel in Ruby Host":"#ff9c2e",Rebol:"#358a5b",Red:"#ee0000",Rouge:"#cc0088",Ruby:"#701516",Rust:"#dea584",SAS:"#1E90FF",Scala:"#7dd3b0",Scheme:"#1e4aec",Self:"#0579aa",Shell:"#5861ce",Shen:"#120F14",Slash:"#007eff",Smalltalk:"#596706",SourcePawn:"#f69e1d","Standard ML":"#dc566d",SuperCollider:"#46390b",Swift:"#ffac45",SystemVerilog:"#343761",Tcl:"#e4cc98",TeX:"#3D6117",Turing:"#45f715",TypeScript:"#31859c","Unified Parallel C":"#755223",UnrealScript:"#a54c4d",Vala:"#ee7d06",VCL:"#0298c3",Verilog:"#848bf3",VHDL:"#543978",VimL:"#199c4b","Visual Basic":"#945db7",Volt:"#0098db",wisp:"#7582D1",xBase:"#3a4040",XQuery:"#2700e2",Zephir:"#118f9e"}},convertHex:function(a,b){a=a.replace("#","");var c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16);return"rgba("+c+","+d+","+e+","+b/100+")"}}});define("graph/model/graph",["dal/index","utils/utils"],function(a,b){b.hasLocalStorage();return function(b,d){var e=this;this.app=d;this.title=this.id="";this.isTemplateReady=!1;this.thumbnail="images"+this.id;this.description="";this.tags=[];this.date="01/01/2016";this.graphCanvas=".graphCanvas";this.infullScreen=!1;this.grapSpec=b;this.getJsonData=function(b){a.stackData.get(this.id,b)};this.renderGraph=function(a){a||console.warn("GO: Cannot load '"+e.id+"' data from data folder");require(["graph/render/"+e.id],function(b){b(a,$(e.graphCanvas)[0]);$(e.graphCanvas).addClass(e.grapSpec.id);"fullscreen"!==e.grapSpec.tmpl&&e.addFullscreenControls()})};this.addFullscreenControls=function(){var a=$('<div class="fullscreenControl"></div>');$(e.graphCanvas).append(a);a.click(function(){e.goFullScreen(e.graphCanvas)});$(document).keyup(function(b){27==b.keyCode&&(e.infullscreen=!0,a.click())})};this.goFullScreen=function(a){function b(){e.infullscreen&&(f.width($(window).width()),f.height($(window).height()),c=1333.33<$(window).width()?1333.33:$(window).width(),d=1000<$(window).height()?1000:$(window).height(),c/1.3333>=d&&(c=1.3333*d),d=c/1.33333,n.height(d),n.width(c),n.css({"margin-top":-(d/2)+"px","margin-left":-(c/2)+"px"}))}var c,d,f=$(".container .canvas"),n=$(a);e.infullscreen?($("body").removeClass("inFullScreen"),n.removeAttr("id"),n.removeAttr("style"),f.removeAttr("style"),$(window).off("resize",b),e.infullscreen=!1):(e.infullscreen=!0,$("body").addClass("inFullScreen"),n.prop("id","fullscreenElement"),f.width($(window).width()),f.height($(window).height()),$(window).resize(b).resize())};this.init=function(a){this.getJsonData(this.renderGraph)};$.extend(this,b)}});define("graph/views/dashboard",["knockout"],function(a){return function(b){this.app=b;var c=this;this.layouts=a.observableArray();this.graphs=a.observableArray().extend({notify:"always"});this.tags=a.observableArray().extend({notify:"always"});this.page=a.observable("home");this.templatePath=(this.insideGraphs=-1<window.location.pathname.indexOf("/graphs/"))?"../js/graph/views/templ/":"./js/graph/views/templ/";this.templates=["sidebar"];this.currentGraph=a.observable();this.addGraph=function(a){this.graphs.push({id:a.id,title:a.title,description:a.description,thumbnail:a.thumbnail,link:a.htmlTitle,tags:a.tags.join(" "),show:function(){c.currentGraph(this);c.page("graph");a.init(arguments)}})};this.showGraph=function(a){var b;this.graphs().some(function(c){return c.id===a?(b=c,!0):void 0});b?b.show.call(b):this.goHome()};this.goHome=function(){c.page("home")};this.loadTemplates=function(a){var b=this;this.templates.forEach(function(c,h){var k=$('<script id="'+c+'" type="text/html">\x3c/script>');k.load(b.templatePath+c+".html",function(){h===b.templates.length-1&&a()});$("body").append(k)})};this.initGridView=function(){window.Isotope&&($.bridget("isotope",Isotope),$("#grapsList").isotope({filter:"*",itemSelector:".graplist-item",animationOptions:{duration:5000,easing:"easeInOutQuad",queue:!1}}),$("#tagList a:first").addClass("selected"),$("#tagList a").on("click",function(){$("#tagList a").removeClass("selected");$(this).addClass("selected");var a=$(this).attr("filter"),a="all"===a?"*":"."+a;$("#grapsList").isotope({filter:a})}))};this.init=function(a){this.loadTemplates(a)}}});define("graph/model/graph-list",[],function(){return{graphList:[{id:"g1",title:"Relation between tags in stackoverflow",description:"This graph shows the relation between first 60 tags and each tags first 60 related tags.",thumbnail:"images/*.png",htmlTitle:"stackoverflow-tag-relations",tags:["stackoverflow","programming"]},{id:"g2",title:"Which is the trending tag last year?",description:"You can sort the data in yearly wise by clicking on the bottom year tab. The tags will be rearranged in descending order",thumbnail:"images/*.png",htmlTitle:"stackoverflow-tag-trending-yearly",tags:["stackoverflow","programming"]},{id:"g3",title:"How tags are growing ?",description:"This graph shows the growth of tags in each month.The vertical position of circle represent the count of questions in a month.",thumbnail:"images/*.png",htmlTitle:"stackoverflow-tag-growth-rate-monthly",tags:["stackoverflow","programming"]},{id:"g4",title:"Did you code on last Christmas day ?",description:"It\u2019s the punch-card visualization of question asked in each day of November-December in 2013",thumbnail:"images/*.png",htmlTitle:"stackoverflow-questions-punchcard",tags:["stackoverflow","programming"]},{id:"g5",title:"255 f**k in Pulp Fiction",description:"The word 'fuck' is used 255 times in the filim Pulp Fiction , checkout the visualization to see when they are",thumbnail:"images/*.png",htmlTitle:"pulp-fiction",tags:["filims"]},{id:"g6",title:"An hour on GitHub",description:"An hour on github, visualization of events logged in one hour on 12 August 2014 on github.",thumbnail:"images/*.png",htmlTitle:"an-hour-on-github",tags:["github"]},{id:"g7",title:"A Day on GitHub",description:"A day on github, visualization of events logged in a day on github.",thumbnail:"images/*.png",htmlTitle:"a-day-on-github",tags:["github"]},{id:"g8",title:"27 Club Visualization",description:"Visualization of 27 Club members, artists name mapped on timeline and cause of death",thumbnail:"images/*.png",htmlTitle:"27-club-visualization",twitter:"<span class=\"twitter-btn\"> <a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-via=\"sarathsaleem\" data-hashtags=\"dataviz,infographics,27club\">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');\x3c/script></span>",tags:["music"]},{id:"g9",title:"3D Periodic table of elements",description:"A 3d visualization of periodic table. This 3d representation has a table view which shows initially and an atomic view. Click on each element to explore atomic view.",thumbnail:"images/*.png",htmlTitle:"3d-periodic-table",twitter:"",tags:["science"],tmpl:"fullscreen"}],tags:"all stackoverflow filims github music science".split(" ")}});require.config({paths:{knockout:"libs/knockout",d3:"libs/d3",gui:"libs/dat.gui"},shim:{d3:{exports:"d3"},"libs/optimer_bold.typeface":{deps:["libs/three"]},"libs/optimer_regular.typeface":{deps:["libs/three"]},"libs/FontUtils":{deps:["libs/three"]},"libs/TextGeometry":{deps:["libs/three","libs/FontUtils"]}}});define("app","require exports module knockout graph/model/graph graph/views/dashboard graph/model/graph-list".split(" "),function(a,b,c){var d=a("knockout"),e=a("graph/model/graph"),g=a("graph/views/dashboard");a=a("graph/model/graph-list");var h=a.graphList,k=a.tags,l=new function(){var a=this;this.dashboard=new g(a);this.modelPath="graph/model/graph-list";this.getGraphList=function(a){var b=[];return a?(h.forEach(function(c){c.id==a&&b.push(c)}),b.length?b:void console.error("cannot find graph with id "+a+" in graphlist")):h};this.loadGraph=function(b){b=this.getGraphList(b);0===b.length;b.forEach(function(b){b=new e(b,a);a.dashboard.addGraph(b)},function(a){console.error("GO: Cannot load a graph with name "+(a.requireModules&&a.requireModules[0]))});a.dashboard.tags(k)};this.init=function(){this.loadGraph();a.dashboard.initGridView()}};l.dashboard.init(function(){$(function(){d.applyBindings(l.dashboard,$("html ")[0]);l.init()});$(".info-me").on("click",function(){$("body").toggleClass("inInfo")})});b.App=l});require(["app"],function(a,b){var c=a.App;c.loadGraph("g9");c.dashboard.showGraph("g9")});</script></body></html>